webpackJsonp([1],{"++uD":function(e,t){},"+Zdd":function(e,t){},"0J5D":function(e,t){},"0xJ2":function(e,t){},"16b9":function(e,t){},"1mV4":function(e,t){},"2JVw":function(e,t){},"2RYx":function(e,t){},"2dwJ":function(e,t){},"2lsq":function(e,t){},"2sPn":function(e,t){},"3+GO":function(e,t){},"3mwL":function(e,t){},"3pxz":function(e,t){},"3xCl":function(e,t){},"56mE":function(e,t){},"5DUe":function(e,t){},"5pkX":function(e,t){},"5zkL":function(e,t){},"6+1S":function(e,t){},"63wl":function(e,t){},"6NPK":function(e,t){},"6r3r":function(e,t){},"6uRV":function(e,t){},"6vVf":function(e,t){},"6w6P":function(e,t){},"7IGW":function(e,t){},"7Otq":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMQAAAAmCAYAAACbKjTiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjE4QkVDOERGRkFFMTFFODk3NDdCRUVFNEFCMjY4RDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjE4QkVDOEVGRkFFMTFFODk3NDdCRUVFNEFCMjY4RDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGMThCRUM4QkZGQUUxMUU4OTc0N0JFRUU0QUIyNjhEOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGMThCRUM4Q0ZGQUUxMUU4OTc0N0JFRUU0QUIyNjhEOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PssYC+sAAAhESURBVHja7F3Nb1tFEB+nSamaopgPtYIL5goXV3BBQrJzAsTB6Q1xIA43OBD7hFohbB/gAlJS9YBACJtCD6BKdSTghOTnf4C4JyQ4YEDlG+KW0pa2iZmtZ+XR6u3He3527bIjjfL8PN7dNzu/+dhdOyk4078AAHeDnkrIXyB/o5X4F+DwEmRPPwGPLc7DqX9uwjbebSKfQb7MRZ96ADx5mlqaR37QIiPAss8CGiCZ/chHkJ8mriG/gvypV7WnWaA55L8tMteQ9xzaEjI3lHsCHJ8gH/eq9jQrgJgEvYm84tXtyQNiSCJtOuhV7skDYkALyC95lXvygBjSc17lnqaZxCqTbfXoXpKz0f59KViaTwHgXx097lXuadoB8SryXQaZz2CwElXXSvQx1KTgz3v2Q3BoAV5f0MedG17lnqaZUnCmv3jrr5kuG9/dw/CA0Hp0CQ4hMGCvrxf96hlLW57ueOr1evl0Oh04ykZtPgODFc1N8QL7iRwhLllqiXeQXza2sg/g+i7A9gU4gdHiuAFeewPpSMqblXkWms/KYSN37gTjjWpQlrkUjbWE0eL1UWy7S/c3SGeuBr8Fg5MQYXOwTX9Few0JQNchzoF9061vbaZPMeYgXi3CYHE1nPeieBHkPrWu8g4ptkIKso1OsE0pOyR3LuI8F2kS5Jha7HVdM74i9fWdpV059qJBrk4yMqXNa3Sm44pGXxsu80Nz5AouYaQBGSxvXziSEo1dcinkXpFYBx5xv0zXG0z3FTY3Ji4IQFy1PMf1CMZhqxGuJuW4SEFVMqrKiO2tUJvyOuM4hm0yRBkZAuIuvV+k8akGHTBvp+srx64LhnFIoLcTDg4lBycSh2pSzwimLLvfQcAsS6YIK3iZccOh/YaiX9nnsoHLPGWajVonHBAFMrYq3SvHbH+VKbNIr2sWMLQICNIrNUJC+wYBrM7aBwJMhz6f10z0CvOEeUP6ICe96aC3qFSn1CaxvFW0hSTmq43XSaaVaaavMum4R30Grmn5HMwm9cgA1ohH8WhpMr4uA1TJ8pkKA4POc4n2jrH3NpRoEIREAp5CpOkZm8wB6KJDJ0IOHkXHYrzrY6hLamFGKmoM5JZg0kGWpTO2uT1HqV52FH3MKiDUECmNLs7kFZmH7TEDLBoAVGKeyObl1lgKxcfXNnh/nga1DWlTTgFXklQmfVSV1Cb2ypLKmhqjQ8/TIw7YaxcaKerMOYAiSthN3SYAbrE0IypJI/1Q+btqqDeAr2I40MmQ8TUNdUSBGXrT8Gx55fmTpC5LG+sJtKcWtgVN9CiLCEL9yzHUYhi60E1LRpwQLukMdNHS8OEIg7jf8v7imAARKOmGK2XJGLtM4U16ndcUvHG8sq6IDjRRIs8MQnpN9bP8dWAwChubaJPazqIBVRKYoypzIpNYT8+zxRL1/lLYB+Zpgk17Az9GGMDbyGcN7++OsabgKU3U6KAWpE1Ki9ZDCvVMjNDcUT7fZZ49T3PQUCJBoIwnC2zDiRlz09BvK4GovkYrZSJ12opbCJPXl3sCRV1aFTJmuaxbjZv6qfWKaalYAOI3SyoTZWdZyP5qeH8PpotWlDSJpzglmrjaGL1ZWITIKTUGv84xQITJJU5i84xWhaqUOh0dY3dymVWXwq2O2yAEIL62yHyE/IJje6/B4CujSdUkUVaK4hTTaSVd4srvMK/cGLHPtMEAeiz96Wo8vywqV0Lqh2DcuhbeHUGxQqlTCV9vjgl8PfV5Jn1SQUSGKxaZnQjtXbS8f2VMz5HV1BMmKrAUJmwHN6tZuQoMq0OmXFY3viaTyYB+2TBgUS0TUvuMm+TydgWNNDOuTkStInfAlZMKE6F5h7w+Sppjkx1XDVGImNdnmLc15aYlGK6Hd1jeX1UKctfxheX7bYpWOQuot2jMORZxgkkZiqgdlNSploDxp0G/MihTp1UwH12x0Sr2k4sCiFkneQ4mrBbQKokZqG1HWhbXawx0AXl0sdl2zGF8RWbULnVE2yDHj5m0J6loljrlE6qrKiwyBkpfAYEmN2IfkcA0yxtzaRiubcu8vxFRSbb1+5MhRggMRPxYhg4MLWbQDU2x2FGiVuAo17wNei8rCxKjLGiUyIml1ejONu/ipmeivRQCS8e1WY4QrRAw8LqhR57axWtJJbtsrPHiushWeAKKGHW6n6e22iwlyzHgdSyRJIDhcY3A8BxczuV4QstRv8sRokSAhroJ9uMtLpG9wVLO72OOXZuRxa0hFiwyUb6/YIs4CzEfLm946CYMjxlETZdc6CQZ/joDBLDJlEe8dbVIw2F8bWZgQQJyNr2NSjVwPxWs0jpzEkIv5/jzkOeuTXiVKc0BccAifChCwzbZAxHa6hqM7CLL5W1UZe0JOk/3XI87COA8xBTXUzz2w6zY5V8QasNw19ulj6pDHeQi14X4m1hh+gqLEuLE6jEwH0s3ee4eRVgZXZvyy0KGxY0lSPC3veh81rZ6X3yF9IjFs4vvOPzh2M99MPg5Sx31+8/DL+Dpf0tsZalJ0VVcL+uOaFOEqDCgihtHQwC7Qw4rpYDXNJY6S2tvpcECEC9aUpkvkX8H+zLbGxQBnjXI7CIg3vdm4YkZZcYUHQgQ8qTwecoMuq7tWwAhUr4MB6MAhG3T4wTyx8g/WOQeQX4S+T2TEAIi5c3A07SSy48d/4V806Gt62Dfqe54lXuadkBMks56lXvygBjSKa9yTx4QAxLr/5e8yj15QAC8hXzaq9vTtJPLjx0fcASOkFH3IMTvMIndyHe9qj3NCiB+soBCrELtgn01SsiIf78lNvG+Rf4c+QPkn72aPc0K/SfAAAQw2tkwmpGbAAAAAElFTkSuQmCC"},"7PL2":function(e,t){},"7cuw":function(e,t){},"7enl":function(e,t){},"7vXl":function(e,t){},"8Z74":function(e,t){},"8vOm":function(e,t){},ACNE:function(e,t){},B5FP:function(e,t){},BCXD:function(e,t){},BVzi:function(e,t){},CUPB:function(e,t){},CVIr:function(e,t){},CkuZ:function(e,t){},DOvI:function(e,t){},Dr96:function(e,t){},EIEt:function(e,t){},F9qX:function(e,t){},FGNV:function(e,t){},Fa0r:function(e,t){},GsAZ:function(e,t){},GswC:function(e,t){},Gxvo:function(e,t){},H1cr:function(e,t){},HLG5:function(e,t){},HT56:function(e,t){},IRKp:function(e,t){},Ideb:function(e,t){},IhqA:function(e,t){},"Io/8":function(e,t){},JOAr:function(e,t){},JQHi:function(e,t){},JyEw:function(e,t){},LpzW:function(e,t){},M3T1:function(e,t){},MLud:function(e,t){},MOAI:function(e,t){},MTpB:function(e,t){},MZCF:function(e,t){},MhZF:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("7+uW"),i={name:"DwNavMenu",data:function(){return{defActive:"/dw/survey"}},watch:{$route:function(e,t){this.setDefActive()}},mounted:function(){this.setDefActive()},methods:{handleSelect:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},setDefActive:function(){var e=this.$route.fullPath;e.indexOf("/dw/survey")>=0?this.defActive="/v6/dw/survey":e.indexOf("/dw/admin/user")>=0?this.defActive="/v6/dw/admin/user":e.indexOf("/dw/user")>=0&&(this.defActive="/v6/dw/user")}}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-menu",{staticClass:"dw-menu dw-menu-height",attrs:{"default-active":this.defActive,mode:"horizontal","text-color":"#fff",router:""},on:{select:this.handleSelect}},[t("el-menu-item",{attrs:{index:"/v6/dw/survey"}},[this._v("我的问卷")]),this._v(" "),t("el-menu-item",{attrs:{index:"/v6/dw/user"}},[this._v("个人中心")]),this._v(" "),t("el-menu-item",{directives:[{name:"has-dw-role",rawName:"v-has-dw-role",value:"DWSURVEY_SUPER_ADMIN",expression:"'DWSURVEY_SUPER_ADMIN'"}],attrs:{index:"/v6/dw/admin/user"}},[this._v("用户管理")])],1)},staticRenderFns:[]};var o=n("VU/8")(i,r,!1,function(e){n("wAQK")},"data-v-570284ae",null).exports,a=n("mvHQ"),l=n.n(a),u={setUserName:function(e){localStorage.setItem("dw_oss_user_name",e)},getUserName:function(){return localStorage.hasOwnProperty("dw_oss_user_name")?localStorage.getItem("dw_oss_user_name"):"none"},setAuthority:function(e){var t="string"==typeof e?[e]:e;localStorage.setItem("dw_oss_authority",l()(t))},getAuthority:function(){var e=[];if(localStorage.hasOwnProperty("dw_oss_authority")){var t=localStorage.getItem("dw_oss_authority");try{t&&(e=JSON.parse(t))}catch(n){e=t}if("string"==typeof e)return[e]}return e}},d=n("//Fk"),c=n.n(d),v=n("mtWM"),p=n.n(v),m=n("zL8q"),y=n.n(m);function h(e){Object(m.Message)({message:e,type:"error",duration:5e3})}function f(){window.location.href="/#/login",m.MessageBox.confirm("未登录状态，是否重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){window.location.href="/#/login"}).catch(function(){})}function w(){m.MessageBox.confirm("账号没有相关操作权限","系统提示",{confirmButtonText:"确认",showCancelButton:!1,showClose:!1,type:"warning"}).then(function(){window.location.href="/#/"}).catch(function(){})}p.a.defaults.baseURL="https://pro.surveyform.cn",p.a.defaults.timeout=1e4,p.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8";var g=p.a.create({baseURL:"https://pro.surveyform.cn",timeout:1e4});g.interceptors.request.use(function(e){return e},function(e){return console.log("request-error:"+e),c.a.error(e)}),g.interceptors.response.use(function(e){if(console.debug("response"),console.debug(e),200===e.status){var t=e.data;if(t.hasOwnProperty("resultCode"))if(401===t.resultCode)f();else if(403===t.resultCode)w();else if(400===t.resultCode){var n="执行失败";t.hasOwnProperty("resultMsg")&&(n=""+t.resultMsg),function(e){Object(m.Message)({message:e,type:"warning",duration:5e3})}(n)}else if(200!==t.resultCode){var s="状态码："+t.resultCode;t.hasOwnProperty("resultMsg")&&(s=t.resultMsg+"，状态码："+t.resultCode),h(s)}return c.a.resolve(e)}return c.a.reject(e)},function(e){console.log("err"+e);var t=e.message;if(t.includes("Network Error"))t="后端接口连接异常";else if(t.includes("timeout"))t="系统接口请求超时";else if(t.includes("Request failed with status code")){var n=t.substr(t.length-3);"401"===n||"403"===n?(t=null,"401"===n?f():"403"===n&&w()):t="系统接口"+t.substr(t.length-3)+"异常"}return null!=t&&h(t),c.a.reject(e)});var x=g,b={loginIn:"/api/dwsurvey/anon/security/login-pwd.do",logOut:"/api/dwsurvey/anon/security/logout.do",surveyList:"/api/dwsurvey/app/survey/list.do",surveyInfo:"/api/dwsurvey/app/survey/info.do",surveyUpdate:"/api/dwsurvey/app/survey/survey-base-attr.do",surveyCreate:"/api/dwsurvey/app/survey/add.do",surveyUpState:"/api/dwsurvey/app/survey/up-survey-status.do",surveyCopy:"/api/dwsurvey/app/survey/copy.do",surveyDelete:"/api/dwsurvey/app/survey/delete.do",surveyReport:"/api/dwsurvey/app/stats/report.do",surveyAnswerList:"/api/dwsurvey/app/answer/list.do",surveyAnswerInfo:"/api/dwsurvey/app/answer/info.do",surveyAnswerExport:"/api/dwsurvey/app/answer/export-xls.do",surveyAnswerDelete:"/api/dwsurvey/app/answer/delete.do",surveyFooterInfo:"/api/dwsurvey/anon/web/footer-info.do",adminUserList:"/api/dwsurvey/admin/user/list.do",adminUserCreate:"/api/dwsurvey/admin/user/add.do",adminUserUpdate:"/api/dwsurvey/admin/user/edit.do",adminUserDelete:"/api/dwsurvey/admin/user/delete.do",curUserInfo:"/api/dwsurvey/app/user/currentUser.do",curUserPwdUpdate:"/api/dwsurvey/app/user/up-pwd.do"};function C(){return x({url:b.logOut,method:"post"})}var _={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo"},[t("router-link",{attrs:{to:this.prevPath+"/dw/survey"}},[t("el-image",{attrs:{src:n("7Otq")}}),this._v(" "),t("span",{staticStyle:{color:"#ffa71d","font-size":"14px",position:"absolute","margin-left":"10px"}},[this._v("Pro")])],1)],1)},staticRenderFns:[]};var A=n("VU/8")({name:"DwHeaderLogo",data:function(){return{userName:"dwsurvey",prevPath:"/v6"}},mounted:function(){this.$route.path.indexOf("/v6/lr")>=0&&(this.prevPath="/v6/lr")}},_,!1,function(e){n("MOAI")},"data-v-cff4dfb2",null).exports,S={name:"DwHeaderLogin",components:{DwHeaderLogo:A,"dw-nav-menu":o}},q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this._m(0),this._v(" "),t("div",[t("el-row",{staticClass:"dw-header-row"},[t("el-col",{attrs:{span:20,offset:2}},[t("div",{staticClass:"dw-header-main"},[t("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("el-col",{attrs:{span:4}},[t("dw-header-logo")],1),this._v(" "),t("el-col",{attrs:{span:16}},[t("div",{staticStyle:{"padding-left":"60px",color:"white"}},[this._v("DWSurvey Pro - 纯VUE实现，体验更佳")])]),this._v(" "),t("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t("div",[t("div",{staticStyle:{height:"80px","line-height":"80px"}})])])],1)],1)])],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"m-logbg"})])}]};var k=n("VU/8")(S,q,!1,function(e){n("5DUe")},"data-v-c821df54",null).exports,I={setDwFooterInfo:function(e){var t="string"==typeof e?[e]:e;localStorage.setItem("dw_footer_info",l()(t))},getDwFooterInfo:function(){if(localStorage.hasOwnProperty("dw_footer_info")){var e=localStorage.getItem("dw_footer_info");try{if(e)return JSON.parse(e)}catch(e){console.debug(e)}}return{}},getNewDwFooterInfoApi:function(e){return x({url:b.surveyFooterInfo,method:"get",params:e})},getNewDwFooterInfo:function(e){var t=this;this.getNewDwFooterInfoApi().then(function(n){var s=n.data.data;s.layoutType="lr",t.setDwFooterInfo(s),null!==e&&e(s)})},getDwFooterInfoAuto:function(e){var t=this.getDwFooterInfo();t.hasOwnProperty("siteStatus")?null!==e&&e(t):this.getNewDwFooterInfo(function(t){null!==e&&e(t)})},isDemo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.getDwFooterInfoAuto(function(n){null!==n&&n.hasOwnProperty("siteStatus")&&"demo"===n.siteStatus?null!==e&&e():null!==t&&t()})},isLayoutLr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.getDwFooterInfoAuto(function(n){null!==n&&n.hasOwnProperty("layoutType")&&"lr"===n.layoutType?null!==e&&e():null!==t&&t()})},setLayout:function(e){var t=this;this.getDwFooterInfoAuto(function(n){null!==n&&(n.layoutType=e,t.setDwFooterInfo(n))})}},T={name:"SwitchLayoutDialog",data:function(){return{userName:"dwsurvey",layout:"tb",dialogVisible:!1}},mounted:function(){var e=this;I.isLayoutLr(function(t){e.layout="lr"})},methods:{openDialog:function(){this.dialogVisible=!0},layoutConfirm:function(){I.setLayout(this.layout);var e=this.$route.path;if("tb"===this.layout){var t=e.replace("/v6/lr/","/v6/");this.$router.push(t)}else if("lr"===this.layout){var n=e.replace("/v6/","/v6/lr/");this.$router.push(n)}this.dialogVisible=!1}}},O={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{visible:e.dialogVisible,title:"切换布局",width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("div",{staticStyle:{"font-size":"14px","padding-bottom":"20px","line-height":"20px"}},[e._v("\n      系统默认提供两套布局方案，切换可以查看，更多可自定义。\n    ")]),e._v(" "),n("div",[n("el-radio",{attrs:{label:"tb",border:""},model:{value:e.layout,callback:function(t){e.layout=t},expression:"layout"}},[n("i",{staticClass:"fa-solid fa-laptop"}),e._v(" 上下布局")]),e._v(" "),n("el-radio",{attrs:{label:"lr",border:""},model:{value:e.layout,callback:function(t){e.layout=t},expression:"layout"}},[n("i",{staticClass:"fa-solid fa-border-top-left"}),e._v(" 左右布局")])],1)]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.layoutConfirm}},[e._v("确 定")])],1)])},staticRenderFns:[]};var D=n("VU/8")(T,O,!1,function(e){n("tcTq")},"data-v-9533aac6",null).exports,E={name:"DwHeader",components:{SwitchLayoutDialog:D,DwHeaderLogo:A,DwHeaderLogin:k,"dw-nav-menu":o},data:function(){return{userName:"dwsurvey",prevPath:"/v6"}},mounted:function(){this.userName=u.getUserName(),this.$route.path.indexOf("/v6/lr")>=0&&(this.prevPath="/v6/lr")},methods:{handleCommand:function(e){var t=this;"logout"===e?C().then(function(){t.$router.push("/login")}):"myAccount"===e?this.$router.push(this.prevPath+"/dw/user"):"updatePwd"===e&&this.$router.push(this.prevPath+"/dw/user/pwd")},openSwitchLayoutDialog:function(){this.$refs.switchLayoutDialog.openDialog()}}},P={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-row",{staticClass:"dw-header-row"},[n("el-col",{attrs:{span:20,offset:2}},[n("div",{staticClass:"dw-header-main"},[n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:4}},[n("dw-header-logo")],1),e._v(" "),n("el-col",{attrs:{span:14}},[n("div",{staticStyle:{"padding-left":"60px"}},[n("dw-nav-menu")],1)]),e._v(" "),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[n("div",{staticClass:"dw-display-flex-right"},[n("div",{staticStyle:{color:"#c2a20c","padding-right":"20px","font-size":"14px",cursor:"pointer"},on:{click:e.openSwitchLayoutDialog}},[n("i",{staticClass:"fa-solid fa-toggle-on"}),e._v(" 切换布局\n                ")]),e._v(" "),n("el-dropdown",{on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[e._v("\n                    "+e._s(e.userName)+" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"myAccount"}},[e._v("我的账号")]),e._v(" "),n("el-dropdown-item",{attrs:{command:"updatePwd"}},[e._v("修改密码")]),e._v(" "),n("el-dropdown-item",{attrs:{command:"logout"}},[e._v("退出登录")])],1)],1)],1)])],1)],1)])],1),e._v(" "),n("switch-layout-dialog",{ref:"switchLayoutDialog"})],1)])},staticRenderFns:[]};var N=n("VU/8")(E,P,!1,function(e){n("levg")},"data-v-7e969623",null).exports,R={name:"DwFooter",data:function(){return{footerInfo:{siteName:"调问网",siteUrl:"http://www.diaowen.net",siteIcp:"京ICP备13050030号-3",siteMail:"service@diaowen.net",sitePhone:"18888888888",versionInfo:"DWSurvey OSS V5.0 Vue",versionNumber:"OSS V5.0",versionBuilt:"20211128",years:"2012-2021",layoutType:"tb"}}},mounted:function(){this.queryDWSurveyFooter()},methods:{queryDWSurveyFooter:function(){var e=this;I.getDwFooterInfoAuto(function(t){e.footerInfo=t})}}},L={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dw-footer-main"},[n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:""!==e.footerInfo.siteUrl||""!==e.footerInfo.siteName||""!==e.footerInfo.siteIcp,expression:"footerInfo.siteUrl !=='' || footerInfo.siteName !=='' || footerInfo.siteIcp !==''"}]},[n("span",[n("a",{staticStyle:{color:"#333"},attrs:{href:e.footerInfo.siteUrl}},[n("strong",[e._v(e._s(e.footerInfo.siteName))])]),e._v(" ")]),e._v(" "),n("span",[n("a",{staticStyle:{"text-decoration":"none",color:"#333"},attrs:{href:"/"}},[e._v(e._s(e.footerInfo.siteIcp))])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:""!==e.footerInfo.siteMail||""!==e.footerInfo.sitePhone,expression:"footerInfo.siteMail !=='' || footerInfo.sitePhone !==''"}]},[n("span",[e._v(" "+e._s(e.footerInfo.siteMail)+" "+e._s(e.footerInfo.sitePhone))])])]),e._v(" "),n("div",[n("span",[e._v("Powered by "),e._m(0),e._v(" "+e._s(e.footerInfo.versionNumber)+" Vue ")]),e._v(" "),n("span",[e._v(" © "+e._s(e.footerInfo.years)+" "),e._m(1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"www.diaowen.net"}},[t("strong",[this._v("DWSurvey")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"www.diaowen.net"}},[t("strong",[this._v("调问网")])])}]};var F=n("VU/8")(R,L,!1,function(e){n("GsAZ")},"data-v-31172264",null).exports,Q={name:"App",components:{"dw-nav-menu":o,"dw-header":N,"dw-header-login":k,"dw-footer":F},data:function(){return{currentHeader:"dw-header"}},mounted:function(){this.loginStatus()},methods:{loginStatus:function(){this.$route.fullPath.indexOf("login")>=0?this.currentHeader="dw-header-login":this.currentHeader="dw-header"}}},U={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var B=n("VU/8")(Q,U,!1,function(e){n("Yvp6")},null,null).exports,M=n("/ocq"),$={name:"Layout",components:{"dw-nav-menu":o,"dw-header":N,"dw-header-login":k,"dw-footer":F},data:function(){return{currentHeader:"dw-header"}},mounted:function(){this.loginStatus()},methods:{loginStatus:function(){this.$route.fullPath.indexOf("login")>=0?this.currentHeader="dw-header-login":this.currentHeader="dw-header"}}},H={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"dw-layout"}},[t("el-container",{staticStyle:{padding:"0px"}},[t("el-header",{staticStyle:{padding:"0px"},attrs:{height:"80"}},[t("dw-header")],1),this._v(" "),t("el-container",{staticStyle:{"z-index":"1"}},[t("el-container",[t("el-main",{staticStyle:{padding:"20px 0"}},[t("el-row",[t("el-col",{attrs:{span:20,offset:2}},[t("router-view")],1)],1)],1),this._v(" "),t("el-footer",[t("dw-footer")],1)],1)],1)],1)],1)},staticRenderFns:[]},j=n("VU/8")($,H,!1,null,null,null).exports,V={name:"LoginLayout",components:{"dw-nav-menu":o,"dw-header":N,"dw-header-login":k,"dw-footer":F},data:function(){return{currentHeader:"dw-header",pageH:"600px"}},mounted:function(){this.loginStatus(),this.pageH=window.innerHeight+"px"},methods:{loginStatus:function(){this.$route.fullPath.indexOf("login")>=0?this.currentHeader="dw-header-login":this.currentHeader="dw-header"}}},z={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-layout-body",staticStyle:{height:"100vh"},attrs:{id:"dw-layout"}},[t("el-container",[t("el-container",{staticStyle:{padding:"0px",height:"calc(100vh - 80px)"}},[t("el-header",{staticStyle:{padding:"0px"},attrs:{height:"80"}},[t("dw-header-login")],1),this._v(" "),t("el-container",{staticStyle:{"z-index":"1"}},[t("el-container",[t("el-main",{staticStyle:{padding:"20px 0px"}},[t("router-view")],1)],1)],1)],1),this._v(" "),t("el-footer",{staticClass:"dw-footer-container",attrs:{height:"80"}},[t("dw-footer")],1)],1)],1)},staticRenderFns:[]};var G=n("VU/8")(V,z,!1,function(e){n("eZVF")},"data-v-402e05d6",null).exports,Y={name:"NoTopLayout",components:{"dw-nav-menu":o,"dw-header":N,"dw-header-login":k,"dw-footer":F},data:function(){return{currentHeader:"dw-header"}},mounted:function(){},methods:{}},W={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"dw-no-top-layout"}},[t("el-container",{staticStyle:{padding:"0px"}},[t("el-container",{staticStyle:{"z-index":"1"}},[t("el-container",[t("el-main",{staticStyle:{padding:"0px"}},[t("router-view")],1)],1)],1)],1)],1)},staticRenderFns:[]},J=n("VU/8")(Y,W,!1,null,null,null).exports,Z={name:"DwAnswer",mounted:function(){this.loadAnswer()},methods:{loadAnswer:function(){var e=this.$route.params.sid;window.location.href="/static/diaowen/answer-p.html?sid="+e}}},K={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("问卷加载中")])},staticRenderFns:[]};var X=n("VU/8")(Z,K,!1,function(e){n("UTC3")},"data-v-56813a4f",null).exports;function ee(e,t,n,s){var i={pageSize:e,current:t,surveyName:n,surveyState:s};return x({url:b.surveyList,method:"get",params:i})}function te(e){return x({url:b.surveyCreate,method:"post",data:e})}function ne(e,t){var n={surveyId:e,surveyState:t};return x({url:b.surveyUpState,method:"post",params:n})}function se(e,t){var n={fromSurveyId:e,surveyName:t,tag:"2"};return x({url:b.surveyCopy,method:"post",params:n})}function ie(e){var t={id:e};return x({url:b.surveyInfo,method:"get",params:t})}function re(e){return x({url:b.surveyDelete,method:"delete",data:e})}var oe={name:"SurveyList",data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,dialogTitle:"创建问卷",formInline:{surveyName:null,surveyState:null},dialogFormVisible:!1,form:{name:"",id:null},formLabelWidth:"120px"}},mounted:function(){this.queryList(1)},methods:{buttonClickA:function(e){window.location.href=e},handlePush:function(e){this.$router.push(e)},handleCopy:function(e,t){console.log(e,t),this.form.id=t.id,void 0!==t.surveyNameText&&null!==t.surveyNameText?this.form.name=""+t.surveyNameText:this.form.name="复制问卷标题",this.dialogFormVisible=!0,this.dialogTitle="复制问卷"},handleDelete:function(e,t){var n=this;this.$msgbox.confirm("确认删除此问卷吗？","删除警告",{type:"warning",confirmButtonText:"确认删除"}).then(function(){re({id:[t.id]}).then(function(e){console.log(e),200===e.data.resultCode?(n.$message.success("删除成功，即将刷新数据。"),n.queryList(1)):n.$message.error("删除问卷失败")})}).catch(function(){})},onSubmit:function(){console.log("submit!"),this.queryList(1)},handleCurrentChange:function(e){this.queryList(e)},queryList:function(e){var t=this,n=this.formInline,s=n.surveyName,i=n.surveyState;ee(this.pageSize,e,s,i).then(function(e){var n=e.data.data;t.tableData=n,t.total=e.data.total,t.currentPage=e.data.current,t.pageSize=e.data.pageSize})},handleDialogConfirm:function(){null===this.form.id?this.createSurvey():this.copySurvey(this.form.id)},createSurvey:function(){var e=this;te({surveyName:this.form.name}).then(function(t){var n=t.data,s=n.data;200===n.resultCode?(e.dialogFormVisible=!1,e.$confirm("问卷创建成功，点击“继续编辑问卷”进入问卷编辑。","系统提示",{confirmButtonText:"继续编辑问卷"}).then(function(e){e.value;window.location.href="/static/diaowen/design.html?surveyId="+s.id}).catch(function(){e.queryList(1)})):e.$message.error("创建问卷失败")})},copySurvey:function(e){var t=this;se(e,this.form.name).then(function(e){var n=e.data,s=n.data;200===n.resultCode?(t.dialogFormVisible=!1,t.$confirm("问卷复制成功，点击“继续编辑问卷”进入问卷编辑。","系统提示",{confirmButtonText:"继续编辑问卷"}).then(function(e){e.value;window.location.href="/static/diaowen/design.html?surveyId="+s.id}).catch(function(){t.queryList(1)})):t.$message.error("问卷复制失败")})}}},ae={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("el-col",{attrs:{span:20,offset:2}},[n("div",{staticClass:"dw-table-form",staticStyle:{"padding-left":"60px"}},[n("el-form",{staticClass:"dw-form-inline",attrs:{inline:!0,model:e.formInline,size:"medium"}},[n("el-form-item",{attrs:{label:"问卷标题"}},[n("el-input",{attrs:{placeholder:"请输入查询的问卷标题",clearable:""},model:{value:e.formInline.surveyName,callback:function(t){e.$set(e.formInline,"surveyName",t)},expression:"formInline.surveyName"}})],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-left":"40px"},attrs:{label:"问卷状态"}},[n("el-select",{attrs:{placeholder:"请选择问卷状态",clearable:""},model:{value:e.formInline.surveyState,callback:function(t){e.$set(e.formInline,"surveyState",t)},expression:"formInline.surveyState"}},[n("el-option",{attrs:{label:"设计中",value:"0"}}),e._v(" "),n("el-option",{attrs:{label:"收集中",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"收集结束",value:"2"}})],1)],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-left":"40px"}},[n("el-button",{on:{click:e.onSubmit}},[e._v("重置")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),n("div",{staticClass:"dw-table"},[n("div",{staticClass:"dw-table-title"},[n("el-row",{attrs:{span:24,type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:4}},[n("h3",[e._v("我的问卷")])]),e._v(" "),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.form.id=null,e.form.name=null,e.dialogTitle="创建问卷",e.dialogFormVisible=!0}}},[e._v("新建问卷")])],1)],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:"问卷"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("p",{domProps:{innerHTML:e._s(t.row.surveyName)}}),e._v(" "),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[null!=t.row.surveyNameText?n("div",{domProps:{textContent:e._s(t.row.surveyNameText)}}):n("div",{domProps:{innerHTML:e._s(t.row.surveyName)}})])])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"答卷数",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(null!=t.row.answerNum?t.row.answerNum:0)+" 份")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.surveyState?n("el-tag",[e._v("设计中")]):1===t.row.surveyState?n("el-tag",{attrs:{type:"success"}},[e._v("收集中")]):2===t.row.surveyState?n("el-tag",{attrs:{type:"info"}},[e._v("收集结束")]):n("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":""}},[e._v("未知")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-time"}),e._v(" "),n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.createDate))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button-group",[n("el-tooltip",{attrs:{effect:"dark",content:"编辑问卷",placement:"top"}},[n("el-button",{attrs:{size:"mini",content:"编辑问卷",icon:"el-icon-edit"},on:{click:function(n){return e.buttonClickA("/static/diaowen/design.html?surveyId="+t.row.id)}}})],1),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"答卷地址",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-share"},on:{click:function(n){return e.handlePush("/dw/survey/c/url/"+t.row.id)}}})],1),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"答卷数据",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-s-data"},on:{click:function(n){return e.handlePush("/dw/survey/d/chart/"+t.row.id)}}})],1),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"预览问卷",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-view"},on:{click:function(n){return e.buttonClickA("/static/diaowen/preview.html?surveyId="+t.row.id)}}})],1),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"复制问卷",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-copy-document"},on:{click:function(n){return e.handleCopy(t.$index,t.row)}}})],1),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"删除问卷",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}})],1)],1)]}}])})],1),e._v(" "),n("div",{staticClass:"dw-pagination"},[n("el-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.total,background:"",layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)],1)])],1),e._v(" "),n("div",[n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{attrs:{model:e.form,"label-position":"top"}},[n("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"问卷标题"}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"请输入问卷标题"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogConfirm}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var le=n("VU/8")(oe,ae,!1,function(e){n("f6Xx")},"data-v-2a001fa8",null).exports,ue={name:"DwSurveyDcsWrapper",props:{id:{type:String,default:""},isAnswerUrl:{type:Boolean,default:!1},isSurveySet:{type:Boolean,default:!1},isSiteShare:{type:Boolean,default:!1},isSiteComp:{type:Boolean,default:!1},isAnswerWx:{type:Boolean,default:!1},isSurveyChart:{type:Boolean,default:!1},isAnswerData:{type:Boolean,default:!1},isSurveyLog:{type:Boolean,default:!1},isAnswerLog:{type:Boolean,default:!1},isAnswerUrlV6:{type:Boolean,default:!1}},data:function(){return{survey:{sid:"",answerUrl:"",answerUrl1:"",answerUrlQR:"",siteCompCodeRoot:"",surveyState:""},prevPath:"/dw"}},mounted:function(){console.debug(Object({NODE_ENV:"production",DW_API_URL:"https://pro.surveyform.cn",DW_WEB_URL:"https://pro.surveyform.cn",DW_RESOURCE_URL:"https://pro.surveyform.cn"})),this.getSurveyInfo()},methods:{buttonClickA:function(e){window.location.href=e},handlePush:function(e){this.$router.push(e)},surveyStateChange:function(){var e=this;console.debug(this.survey.surveyState),ne(this.$route.params.id,this.survey.surveyState).then(function(t){200===t.data.resultCode?e.$message.success("问卷状态设置成功"):e.$message.error("问卷状态设置失败")})},getSurveyInfo:function(){var e=this;ie(this.$route.params.id).then(function(t){var n=t.data.data;e.survey=n,e.survey.answerUrl=location.origin+"/#/diaowen/"+e.survey.sid,e.survey.answerUrl1=location.origin+"/static/diaowen/answer-p.html?sid="+e.survey.sid,e.survey.answerUrlQR="https://pro.surveyform.cn/api/dwsurvey/anon/response/answerTD.do?surveyId="+e.survey.id,e.survey.siteCompCodeRoot='<div id="dwsurveyWebAnswerCompCode"><div id="dwsurveyWebSiteFixed" style="position: fixed; right: 0px; left: auto; top: 520px; z-index: 99999;"><a target=\'_blank\' id="dwsurveyWebSiteFixedA" href="'+e.survey.answerUrl+'" style="background-color: rgb(24, 144, 255); width: 15px; display: block; padding: 10px 6px 10px 10px; color: white; cursor: pointer; float: right; vertical-align: middle; text-decoration: none; font-size: 12px; box-sizing: content-box; line-height: 20px;">问卷调查</a></div></div>',e.survey.surveyDetail.effective=1===n.surveyDetail.effective,e.survey.surveyDetail.effectiveIp=1===n.surveyDetail.effectiveIp,e.survey.surveyDetail.refresh=1===n.surveyDetail.refresh,e.survey.surveyDetail.rule=1===n.surveyDetail.rule,e.survey.surveyDetail.ynEndNum=1===n.surveyDetail.ynEndNum,e.survey.surveyDetail.ynEndTime=1===n.surveyDetail.ynEndTime,e.survey.answerUrlV6=location.origin+"/#/v6/diaowen/an/"+e.survey.sid})}}},de={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("el-col",{attrs:{span:20,offset:2}},[n("div",{staticClass:"dw-dcs-main"},[n("div",{staticClass:"dw-dcs-main-survey-title"},[n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",[n("div",{staticClass:"dw-dcs-main-survey-title-content"},[null!=e.survey.surveyNameText?n("div",{domProps:{textContent:e._s(e.survey.surveyNameText)}}):n("div",{domProps:{innerHTML:e._s(e.survey.surveyName)}})])]),e._v(" "),n("el-col",{attrs:{span:4}},[n("el-select",{attrs:{value:e.survey.surveyState,placeholder:"请选择"},on:{change:e.surveyStateChange},model:{value:e.survey.surveyState,callback:function(t){e.$set(e.survey,"surveyState",t)},expression:"survey.surveyState"}},[n("el-option",{key:"0",attrs:{value:0,label:"设计中"}}),e._v(" "),n("el-option",{key:"1",attrs:{value:1,label:"发布收集"}}),e._v(" "),n("el-option",{key:"2",attrs:{value:2,label:"收集结束"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dw-dcs-main-survey-step"},[n("div",{staticClass:"dw-dcs-main-survey-step-item",staticStyle:{padding:"13px 16px"}},[n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link dw-link-1",class:{"dw-link-primary":e.isSurveySet},attrs:{to:e.prevPath+"/survey/c/attr/"+e.survey.id}},[n("i",{staticClass:"el-icon-edit"}),e._v("问卷设计")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link dw-link-1",class:{"dw-link-primary":e.isAnswerUrl||e.isSiteShare||e.isSiteComp||e.isAnswerWx||e.isAnswerUrlV6},attrs:{to:e.prevPath+"/survey/c/url/"+e.survey.id}},[n("i",{staticClass:"el-icon-link"}),e._v("问卷收集")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link dw-link-1",class:{"dw-link-primary":e.isSurveyChart||e.isAnswerData},attrs:{to:e.prevPath+"/survey/d/chart/"+e.survey.id}},[n("i",{staticClass:"el-icon-s-data"}),e._v("问卷数据")])],1),e._v(" "),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:15}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handlePush("/v6/diaowen/dw-design/survey/"+e.survey.id)}}},[e._v("问卷设计")]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handlePush(e.prevPath+"/survey/c/url/"+e.survey.id)}}},[e._v("答卷地址")])],1)],1)],1),e._v(" "),n("div",{staticClass:"dw-dcs-main-survey-step-item",staticStyle:{"padding-left":"16px"}},[n("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isSurveySet,expression:"isSurveySet"}]},[n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSiteComp},attrs:{to:e.prevPath+"/survey/c/comp/"+e.survey.id}},[n("i",{staticClass:"el-icon-edit"}),e._v("问卷设计")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerWx},attrs:{to:e.prevPath+"/survey/c/weixin/"+e.survey.id}},[n("i",{staticClass:"el-icon-brush"}),e._v("样式设计")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSurveySet},attrs:{to:e.prevPath+"/survey/c/attr/"+e.survey.id}},[n("i",{staticClass:"el-icon-setting"}),e._v("答卷设置")])],1)],1),e._v(" "),n("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isAnswerUrl||e.isSiteShare||e.isSiteComp||e.isAnswerWx||e.isAnswerUrlV6,expression:"isAnswerUrl || isSiteShare || isSiteComp || isAnswerWx || isAnswerUrlV6"}]},[n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerUrl},attrs:{to:e.prevPath+"/survey/c/url/"+e.survey.id}},[n("i",{staticClass:"el-icon-link"}),e._v("答卷地址")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerUrlV6},attrs:{to:e.prevPath+"/survey/c/url/"+e.survey.id}},[n("i",{staticClass:"el-icon-link"}),e._v("答卷地址V6")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSurveySet},attrs:{to:e.prevPath+"/survey/c/attr/"+e.survey.id}},[n("i",{staticClass:"el-icon-setting"}),e._v("答卷设置")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSiteComp},attrs:{to:e.prevPath+"/survey/c/comp/"+e.survey.id}},[n("i",{staticClass:"el-icon-discount"}),e._v("网站组件")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerWx},attrs:{to:e.prevPath+"/survey/c/weixin/"+e.survey.id}},[n("i",{staticClass:"el-icon-chat-dot-round"}),e._v("微信收集")])],1)],1),e._v(" "),n("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isSurveyChart||e.isAnswerData,expression:"isSurveyChart || isAnswerData"}]},[n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSurveyChart},attrs:{to:e.prevPath+"/survey/d/chart/"+e.survey.id}},[n("i",{staticClass:"el-icon-discount"}),e._v("默认统计")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerData},attrs:{to:e.prevPath+"/survey/d/data/"+e.survey.id}},[n("i",{staticClass:"el-icon-receiving"}),e._v("原始数据")])],1),e._v(" "),n("el-col",{attrs:{span:3}}),e._v(" "),n("el-col",{attrs:{span:3}})],1)],1),e._v(" "),n("div",{staticClass:"dw-dcs-main-survey-step-item dw-dcs-main-survey-step-item-status"},[n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:4}},[n("div",[e._v("状态：\n                  "),0===e.survey.surveyState?n("el-tag",{attrs:{size:"mini"}},[e._v("设计中")]):1===e.survey.surveyState?n("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("收集中")]):2===e.survey.surveyState?n("el-tag",{attrs:{type:"info",size:"mini"}},[e._v("收集结束")]):n("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":"",size:"mini"}},[e._v("未知")])],1)]),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",[e._v("收集数："+e._s(null!=e.survey.answerNum?e.survey.answerNum:0)+" 份")])]),e._v(" "),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:16}},[e._v("\n                创建时间："+e._s(e.survey.createDate)+"\n              ")])],1)],1),e._v(" "),n("div",{staticClass:"dw-dcs-main-survey-step-main"},[e._t("dw-dcs-main-slot",null,{survey:e.survey})],2)])])])],1)],1)},staticRenderFns:[]};var ce=n("VU/8")(ue,de,!1,function(e){n("3xCl")},"data-v-495025b0",null).exports,ve={name:"DwSurveyAttr",components:{DwSurveyDcsWrapper:ce},data:function(){return{labelPosition:"right",value1:"",survey:{surveyDetail:{effective:!1,effectiveIp:!1}},form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}}},mounted:function(){this.getSurveyInfo()},methods:{getSurveyInfo:function(){var e=this;ie(this.$route.params.id).then(function(t){var n=t.data.data;e.survey=n,e.survey.surveyDetail.effective=1===n.surveyDetail.effective,e.survey.surveyDetail.effectiveIp=1===n.surveyDetail.effectiveIp,e.survey.surveyDetail.refresh=1===n.surveyDetail.refresh,e.survey.surveyDetail.rule=3===n.surveyDetail.rule,e.survey.surveyDetail.ynEndNum=1===n.surveyDetail.ynEndNum,e.survey.surveyDetail.endNum=n.surveyDetail.endNum,e.survey.surveyDetail.ynEndTime=1===n.surveyDetail.ynEndTime,e.survey.surveyDetail.ruleCode=n.surveyDetail.ruleCode})},onSubmit:function(){var e=this;console.log("submit!");var t=this.survey.surveyDetail,n={dirId:t.dirId,effective:t.effective?1:0,effectiveIp:t.effectiveIp?1:0,refresh:t.refresh?1:0,rule:t.rule?3:0,ynEndNum:t.ynEndNum?1:0,ynEndTime:t.ynEndTime?1:0,endNum:t.endNum,endTime:t.endTime,ruleCode:t.ruleCode};console.log(n),function(e){return x({url:b.surveyUpdate,method:"put",data:e})}(n).then(function(t){console.log(t);var n=t.data;200===n.resultCode?e.$message({type:"success",message:"保存成功"}):e.$message({type:"error",message:n.resultMsg})})}}},pe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-survey-dcs-wrapper",{attrs:{"is-survey-set":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(){return[n("div",[n("div",{staticClass:"dw-dcs-main-title"},[n("h4",[e._v("问卷属性设置")]),e._v(" "),n("div",{staticClass:"dw-dcs-main-p"},[e._v("配置问卷答卷时的收集规则")])]),e._v(" "),n("div",{staticClass:"dw-dcs-main-content"},[n("div",{staticStyle:{padding:"0px 30px"}},[n("el-form",{ref:"form",attrs:{"label-position":e.labelPosition,model:e.form}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("h5",[e._v("回答限制")]),e._v(" "),n("div",{staticStyle:{"padding-left":"10px"}},[n("el-form-item",[n("el-checkbox",{model:{value:e.survey.surveyDetail.effective,callback:function(t){e.$set(e.survey.surveyDetail,"effective",t)},expression:"survey.surveyDetail.effective"}},[e._v("每台电脑或手机只能答一次")])],1),e._v(" "),n("el-form-item",[n("el-checkbox",{model:{value:e.survey.surveyDetail.effectiveIp,callback:function(t){e.$set(e.survey.surveyDetail,"effectiveIp",t)},expression:"survey.surveyDetail.effectiveIp"}},[e._v("每个IP只能答一次")])],1),e._v(" "),n("el-form-item",[n("el-checkbox",{model:{value:e.survey.surveyDetail.refresh,callback:function(t){e.$set(e.survey.surveyDetail,"refresh",t)},expression:"survey.surveyDetail.refresh"}},[e._v("有重复回答启用验证码")])],1),e._v(" "),n("el-form-item",[n("el-checkbox",{model:{value:e.survey.surveyDetail.rule,callback:function(t){e.$set(e.survey.surveyDetail,"rule",t)},expression:"survey.surveyDetail.rule"}},[e._v("启用访问密码，设置密码")]),e._v(" "),n("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入内容"},model:{value:e.survey.surveyDetail.ruleCode,callback:function(t){e.$set(e.survey.surveyDetail,"ruleCode",t)},expression:"survey.surveyDetail.ruleCode"}})],1)],1)]),e._v(" "),n("el-col",{attrs:{span:12}},[n("h5",[e._v("何时结束")]),e._v(" "),n("div",{staticStyle:{"padding-left":"10px"}},[n("el-form-item",[n("el-checkbox",{model:{value:e.survey.surveyDetail.ynEndNum,callback:function(t){e.$set(e.survey.surveyDetail,"ynEndNum",t)},expression:"survey.surveyDetail.ynEndNum"}},[e._v("收集到\n                        "),n("el-input-number",{attrs:{min:1,max:1e5,label:"份数","controls-position":"right"},model:{value:e.survey.surveyDetail.endNum,callback:function(t){e.$set(e.survey.surveyDetail,"endNum",t)},expression:"survey.surveyDetail.endNum"}}),e._v("\n                        份时结束")],1)],1),e._v(" "),n("el-form-item",[n("el-checkbox",{model:{value:e.survey.surveyDetail.ynEndTime,callback:function(t){e.$set(e.survey.surveyDetail,"ynEndTime",t)},expression:"survey.surveyDetail.ynEndTime"}},[e._v("时间到\n                        "),n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.survey.surveyDetail.endTime,callback:function(t){e.$set(e.survey.surveyDetail,"endTime",t)},expression:"survey.surveyDetail.endTime"}}),e._v("\n                        时结束\n                      ")],1)],1)],1)])],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(" 保存修改 ")]),e._v(" "),n("el-button",[e._v("取消")])],1)],1)],1)])])]},proxy:!0}])})],1)},staticRenderFns:[]};var me=n("VU/8")(ve,pe,!1,function(e){n("8Z74")},"data-v-6f342194",null).exports,ye=n("TQvf"),he=n.n(ye),fe={name:"DwAnswerUrlMain",components:{Clipboard:he.a},props:{survey:{type:Object,default:function(){}}},methods:{downloadAnswerImg:function(e){console.debug(e),window.location.href=e},copyActiveCode:function(e,t){var n=this;console.debug(this.survey);var s=new he.a(e.target,{text:function(){return t}});s.on("success",function(e){n.$message({type:"success",message:"复制成功"}),s.off("error"),s.off("success"),s.destroy()}),s.on("error",function(e){n.$message({type:"warning",message:"该浏览器不支持自动复制"}),s.off("error"),s.off("success"),s.destroy()}),s.onClick(e)}}},we={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[e._m(0),e._v(" "),n("div",{staticClass:"dw-dcs-main-content"},[e._m(1),e._v(" "),n("el-input",{staticStyle:{width:"500px"},attrs:{id:"copyCodeInput",readonly:""},model:{value:e.survey.answerUrl,callback:function(t){e.$set(e.survey,"answerUrl",t)},expression:"survey.answerUrl"}}),e._v(" "),n("el-button-group",[n("el-button",{attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,e.survey.answerUrl)}}},[e._v("复制地址")]),e._v(" "),n("el-link",{attrs:{href:e.survey.answerUrl,underline:!1,target:"_blank"}},[n("el-button",{staticStyle:{"border-bottom-left-radius":"0px","border-top-left-radius":"0px"},attrs:{icon:"el-icon-link"}},[e._v("打开问卷")])],1)],1)],1),e._v(" "),n("div",{staticClass:"dw-dcs-main-content"},[e._m(2),e._v(" "),n("el-input",{staticStyle:{width:"500px"},attrs:{id:"copyCodeInput",readonly:""},model:{value:e.survey.answerUrl1,callback:function(t){e.$set(e.survey,"answerUrl1",t)},expression:"survey.answerUrl1"}}),e._v(" "),n("el-button-group",[n("el-button",{attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,e.survey.answerUrl1)}}},[e._v("复制地址")]),e._v(" "),n("el-link",{attrs:{href:e.survey.answerUrl1,underline:!1,target:"_blank"}},[n("el-button",{staticStyle:{"border-bottom-left-radius":"0px","border-top-left-radius":"0px"},attrs:{icon:"el-icon-link"}},[e._v("打开问卷")])],1)],1)],1)]),e._v(" "),n("div",[e._m(3),e._v(" "),n("div",{staticClass:"dw-dcs-main-content"},[n("el-row",{attrs:{type:"flex",justify:"start",align:"middle"}},[n("el-col",{attrs:{span:4}},[n("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:e.survey.answerUrlQR}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n              加载中"),n("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),n("el-col",{attrs:{span:20}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.downloadAnswerImg(e.survey.answerUrlQR+"&down=1")}}},[e._v("下载二维码")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-dcs-main-title"},[t("h4",[this._v("答卷地址")]),this._v(" "),t("div",{staticClass:"dw-dcs-main-p"},[this._v("复制下面的问卷链接到QQ，Email等工具中直接发给被用户")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-dcs-main-title"},[t("div",{staticClass:"dw-dcs-main-p"},[this._v("简短地址：此地址只支持现代浏览器")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-dcs-main-title"},[t("div",{staticClass:"dw-dcs-main-p"},[this._v("\n          兼容地址：此地址支持所有浏览器中使用，如IE等。\n        ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-dcs-main-title"},[t("h4",[this._v("二维码地址")]),this._v(" "),t("div",{staticClass:"dw-dcs-main-p"},[this._v("通过手机扫一扫，或下载二维码，即可进行问卷数据收集。")])])}]};var ge={name:"DwAnswerUrl",components:{DwSurveyDcsWrapper:ce,DwAnswerUrlMain:n("VU/8")(fe,we,!1,function(e){n("Fa0r")},"data-v-3c1b10bc",null).exports}},xe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-survey-dcs-wrapper",{attrs:{id:e.id,"is-answer-url":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){var s=t.survey;return[s?n("dw-answer-url-main",{attrs:{survey:s}}):e._e()]}}])})],1)},staticRenderFns:[]},be=n("VU/8")(ge,xe,!1,null,null,null).exports,Ce={name:"DwSiteComp",components:{DwSurveyDcsWrapper:ce,Clipboard:he.a},data:function(){return{color1:"#409EFF",color2:"#FFFFFF",value:60,radio:"右边",siteCompCode:'<div id="dwsurveyWebSiteFixed" style="position: fixed; right: 0px; left: auto; top: 520px; z-index: 99999;"><a target=\'_blank\' id="dwsurveyWebSiteFixedA" href="" style="background-color: rgb(24, 144, 255); width: 15px; display: block; padding: 10px 6px 10px 10px; color: white; cursor: pointer; float: right; vertical-align: middle; text-decoration: none; font-size: 12px; box-sizing: content-box; line-height: 20px;">问卷调查</a></div>'}},methods:{copyActiveCode:function(e,t){var n=this,s=document.getElementById("dwsurveyWebAnswerCompCode");this.siteCompCode=s.innerHTML;var i=new he.a(e.target,{text:function(){return n.siteCompCode}});i.on("success",function(e){n.$message({type:"success",message:"复制成功"}),i.off("error"),i.off("success"),i.destroy()}),i.on("error",function(e){n.$message({type:"waning",message:"该浏览器不支持自动复制"}),i.off("error"),i.off("success"),i.destroy()}),i.onClick(e)},handleSlider:function(e){var t=window.innerHeight-10*e;t<0&&(t=0);var n=document.getElementById("dwsurveyWebAnswerCompCode");document.getElementById("dwsurveyWebSiteFixed").style.top=t+"px",console.debug(n.innerHTML),this.siteCompCode=n.innerHTML},handleLRButton:function(e){console.debug(e);var t=document.getElementById("dwsurveyWebAnswerCompCode"),n=document.getElementById("dwsurveyWebSiteFixed");"左边"===e?(n.style.left="0px",n.style.right="auto"):(n.style.left="auto",n.style.right="0px"),console.debug(t.innerHTML),this.siteCompCode=t.innerHTML},handleBgColor:function(e){var t=document.getElementById("dwsurveyWebAnswerCompCode");document.getElementById("dwsurveyWebSiteFixedA").style.backgroundColor=e,console.debug(t.innerHTML),this.siteCompCode=t.innerHTML},handleTextColor:function(e){var t=document.getElementById("dwsurveyWebAnswerCompCode");document.getElementById("dwsurveyWebSiteFixedA").style.color=e,console.debug(t.innerHTML),this.siteCompCode=t.innerHTML}}},_e={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-survey-dcs-wrapper",{attrs:{"is-site-comp":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){var s=t.survey;return[n("div",[n("div",{staticClass:"dw-dcs-main-title"},[n("h4",[e._v("通过网站挂件快速收集问卷")]),e._v(" "),n("div",{staticClass:"dw-dcs-main-p"},[e._v("复制右边生成的挂件代码，放入网站Footer页中即可实现全站带有答卷挂件。")])]),e._v(" "),n("div",{staticClass:"dw-dcs-main-content"})]),e._v(" "),n("div",[n("el-row",[n("el-col",{attrs:{span:8}},[n("div",{staticClass:"site-comp-left"},[n("div",{staticClass:"site-comp-left-title"},[e._v("风格设置")]),e._v(" "),n("div",[n("el-row",[n("el-col",{attrs:{span:16}},[n("div",{staticClass:"dw-c-from-item"},[e._v("挂件位置：\n                      "),n("el-radio-group",{attrs:{size:"small"},on:{change:function(t){return e.handleLRButton(t)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[n("el-radio-button",{attrs:{label:"左边"}}),e._v(" "),n("el-radio-button",{attrs:{label:"右边"}})],1)],1),e._v(" "),n("div",{staticClass:"dw-c-from-item dw-c-from-item-color"},[n("span",[e._v("背景颜色：")]),e._v(" "),n("el-color-picker",{on:{"active-change":function(t){return e.handleBgColor(t)}},model:{value:e.color1,callback:function(t){e.color1=t},expression:"color1"}})],1),e._v(" "),n("div",{staticClass:"dw-c-from-item dw-c-from-item-color"},[n("span",[e._v("文字颜色：")]),e._v(" "),n("el-color-picker",{on:{"active-change":function(t){return e.handleTextColor(t)}},model:{value:e.color2,callback:function(t){e.color2=t},expression:"color2"}})],1)]),e._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"dw-c-from-item"},[n("div",[e._v("挂件高度：")]),e._v(" "),n("div",{staticStyle:{"margin-top":"15px"}},[n("el-slider",{attrs:{vertical:"",height:"200px"},on:{input:e.handleSlider},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),n("div",{staticStyle:{"padding-top":"15px"}},[n("el-input-number",{attrs:{min:1,max:100,"controls-position":"right",size:"small"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)])])],1)],1)])]),e._v(" "),n("el-col",{staticStyle:{"text-align":"center",color:"rgb(211, 211, 211)"},attrs:{span:2}},[n("i",{staticClass:"el-icon-right"})]),e._v(" "),n("el-col",{attrs:{span:14}},[n("div",{staticClass:"site-comp-right"},[n("div",[n("el-input",{attrs:{autosize:{minRows:2,maxRows:8},type:"textarea",placeholder:"请输入内容",disabled:""},model:{value:e.siteCompCode,callback:function(t){e.siteCompCode=t},expression:"siteCompCode"}})],1),e._v(" "),n("div",{staticStyle:{"padding-top":"10px"}},[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,e.siteCompCode)}}},[e._v("复制挂件代码")])],1)])])],1),e._v(" "),n("div",{domProps:{innerHTML:e._s(s.siteCompCodeRoot)}})],1)]}}])})],1)},staticRenderFns:[]};var Ae=n("VU/8")(Ce,_e,!1,function(e){n("+Zdd")},"data-v-13096ebc",null).exports,Se={name:"DwSiteShare",components:{DwSurveyDcsWrapper:ce,Clipboard:he.a},data:function(){return{code:"http://ent.surveyform.cn/#/diaowen/wdhl2uv6e9x",src:"https://ent.surveyform.cn/api/dwsurvey/anon/response/answerTD.do?surveyId=465d3020-0880-4c37-ab09-cc40869758de"}},methods:{copyActiveCode:function(e,t){var n=this,s=new he.a(e.target,{text:function(){return t}});s.on("success",function(e){n.$message({type:"success",message:"复制成功"}),s.off("error"),s.off("success"),s.destroy()}),s.on("error",function(e){n.$message({type:"waning",message:"该浏览器不支持自动复制"}),s.off("error"),s.off("success"),s.destroy()}),s.onClick(e)}}},qe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-survey-dcs-wrapper",{attrs:{"is-site-share":"true"}},[t("div",{attrs:{slot:"dw-dcs-main-slot"},slot:"dw-dcs-main-slot"},[t("div",[t("div",{staticClass:"dw-dcs-main-title"},[t("h4",[this._v("分享到社交网络")]),this._v(" "),t("div",{staticClass:"dw-dcs-main-p"},[this._v("赶快分享您的问卷到各大社交网站，让更多关注您的朋友来回答问卷。")])]),this._v(" "),t("div",{staticClass:"dw-dcs-main-content"})])])])],1)},staticRenderFns:[]};var ke=n("VU/8")(Se,qe,!1,function(e){n("0xJ2")},"data-v-7a90d161",null).exports,Ie={name:"DwAnswerWeixin",components:{DwSurveyDcsWrapper:ce,Clipboard:he.a},data:function(){return{code:"http://ent.surveyform.cn/#/diaowen/wdhl2uv6e9x",src:"https://ent.surveyform.cn/api/dwsurvey/anon/response/answerTD.do?surveyId=465d3020-0880-4c37-ab09-cc40869758de"}},methods:{copyActiveCode:function(e,t){var n=this,s=new he.a(e.target,{text:function(){return t}});s.on("success",function(e){n.$message({type:"success",message:"复制成功"}),s.off("error"),s.off("success"),s.destroy()}),s.on("error",function(e){n.$message({type:"waning",message:"该浏览器不支持自动复制"}),s.off("error"),s.off("success"),s.destroy()}),s.onClick(e)}}},Te={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-survey-dcs-wrapper",{attrs:{"is-answer-wx":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){var s=t.survey;return[n("div",[n("div",{staticClass:"dw-dcs-main-title"},[n("h4",[e._v("通过微信二维码发送或分享给好友")]),e._v(" "),n("div",{staticClass:"dw-dcs-main-p"},[e._v("通过手机扫一扫，或下载二维码，发送或分享给好友，即可进行问卷数据收集。")])]),e._v(" "),n("div",{staticClass:"dw-dcs-main-content"},[n("el-row",{attrs:{type:"flex",justify:"start",align:"middle"}},[n("el-col",{attrs:{span:4}},[n("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:s.answerUrlQR}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                  加载中"),n("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),n("el-col",{attrs:{span:20}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-download"}},[e._v("下载二维码")]),e._v(" "),n("div",{staticClass:"dw-dcs-main-p",staticStyle:{padding:"10px"}},[e._v("通过手机扫一扫，或下载二维码，即可进行问卷数据收集。")])],1)],1)],1)]),e._v(" "),n("div",[n("div",{staticClass:"dw-dcs-main-title"},[n("h4",[e._v("微信公众号分享")]),e._v(" "),n("div",{staticClass:"dw-dcs-main-p"},[e._v("通过微信公众号，发送或分享给被访者。")])]),e._v(" "),n("div",{staticClass:"dw-dcs-main-content"},[n("div",{staticStyle:{"background-color":"#F1F1F1",padding:"10px"}},[n("el-row",{attrs:{type:"flex",gutter:"20",justify:"start",align:"middle"}},[n("el-col",{attrs:{span:8}},[n("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("1、使用微信扫一扫功能。")]),e._v(" "),n("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_collect1.jpg"}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),n("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("2、打开问卷后，点击右上角的“分享”按钮。")]),e._v(" "),n("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_collect2.jpg"}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),n("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("3、选择“发送给朋友”或“分享到朋友圈”")]),e._v(" "),n("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_collect3.jpg"}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),n("span",{staticClass:"dot"},[e._v("...")])])])],1)],1)],1)])]),e._v(" "),n("div",[n("div",{staticClass:"dw-dcs-main-title"},[n("h4",[e._v("通过微信公众号")]),e._v(" "),n("div",{staticClass:"dw-dcs-main-p"},[e._v("复制下面的问卷链接到QQ，Email等工具中直接发给被用户")])]),e._v(" "),n("div",{staticClass:"dw-dcs-main-content"},[n("div",[n("el-input",{staticStyle:{width:"400px"},attrs:{id:"copyCodeInput",readonly:""},model:{value:s.answerUrl,callback:function(t){e.$set(s,"answerUrl",t)},expression:"survey.answerUrl"}}),e._v(" "),n("el-button-group",[n("el-button",{attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,s.answerUrl)}}},[e._v("复制地址")])],1)],1),e._v(" "),n("div",{staticStyle:{padding:"10px","background-color":"#F1F1F1","margin-top":"20px"}},[n("el-row",{attrs:{type:"flex",gutter:"20",justify:"start",align:"top"}},[n("el-col",{attrs:{span:8}},[n("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("1、打开公众账号。")]),e._v(" "),n("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_b_s3.png"}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),n("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("2、将链接放入公众号中确认后推送文章。")]),e._v(" "),n("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_b_s4.jpeg"}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),n("span",{staticClass:"dot"},[e._v("...")])])])],1)],1)],1)])])]}}])})],1)},staticRenderFns:[]};var Oe=n("VU/8")(Ie,Te,!1,function(e){n("ORmu")},"data-v-154202b4",null).exports,De=n("Qf3D"),Ee=n("XReE"),Pe=n("mCPF"),Ne=n("tJVo"),Re=n("S+cJ");De.b([Ee.a,Pe.b,Pe.a,Re.a,Ne.b,Ee.c,Ee.d,Ee.b,Pe.c,Ne.a]);var Le={name:"DwsurveyChartsCommon",props:{question:{type:Object,default:function(){return[]}},index:{type:Number,default:0}},data:function(){return{activeName:"bar"}},mounted:function(){console.debug("this.question"),console.debug(this.question);var e=document.getElementById(this.question.id).getElementsByClassName("dwsurveyMain");this.loadChart(e[0],"bar")},methods:{handleClick:function(e,t){console.log(e,t),console.debug(this.activeName),e.$el.style.display="block";var n=e.$el.getElementsByClassName("dwsurveyMain"),s=this.activeName;this.loadChart(n[0],s)},loadChart:function(e,t){var n=De.a(e),s=this.buildOption(this.question,t);s&&n.setOption(s)},buildOption:function(e,t){for(var n=[],s=[],i=[],r=e.quStatOptions,o=0;o<r.length;o++)n.push(r[o].optionName),s.push(r[o].anCount),i.push({value:r[o].anCount,name:r[o].optionName});console.debug(n);var a=!0;"ORDERQU"===e.quType&&(a=!1);var l=void 0;return"line"===t||"bar"===t?l={xAxis:{nameTextStyle:{},nameGap:20,axisLabel:{rotate:-10,interval:0},type:"category",data:n},yAxis:{type:"value",show:a},series:[{data:s,type:t}]}:"barY"===t?l={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01],show:a},yAxis:{type:"category",data:n},series:[{type:"bar",data:s}]}:"pie"===t&&(l={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"Access From",type:"pie",radius:"50%",data:i,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}),l}}},Fe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%"}},[n("div",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[n("span",[e._v(e._s(e.index+1)+"、")]),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.question.quTitle)}}),e._v(" "),n("span",[e._v("【"+e._s(e.question.quTypeName)+"】")])]),e._v(" "),"FILLBLANK"===e.question.quType||"UPLOADFILE"===e.question.quType?n("div",{staticStyle:{padding:"30px"}},[e._v("\n    填写回答："+e._s(e.question.anCount)+" 份\n  ")]):e._e(),e._v(" "),"FILLBLANK"!==e.question.quType&&"UPLOADFILE"!==e.question.quType?n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.question.quStatOptions}},[n("el-table-column",{attrs:{prop:"optionName",label:"题目选项"}}),e._v(" "),n("el-table-column",{attrs:{label:"SCORE"===e.question.quType?"占总分比例":"ORDERQU"===e.question.quType?"排名比例":"MULTIFILLBLANK"===e.question.quType?"填写比例":"频次比例",width:"330"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:e.row.percent}})]}}],null,!1,662113522)}),e._v(" "),"RADIO"===e.question.quType||"CHECKBOX"===e.question.quType?n("el-table-column",{attrs:{label:"频次",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.anCount)+" 次")]}}],null,!1,2232316475)}):e._e(),e._v(" "),"SCORE"===e.question.quType?n("el-table-column",{attrs:{label:"平均分",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("平均 "+e._s(t.row.anCount)+" 分")]}}],null,!1,3397111011)}):e._e(),e._v(" "),"ORDERQU"===e.question.quType?n("el-table-column",{attrs:{label:"排名",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("第 "+e._s(t.row.orderNum)+" 名")]}}],null,!1,1867559684)}):e._e(),e._v(" "),"MULTIFILLBLANK"===e.question.quType?n("el-table-column",{attrs:{label:"填写次数",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.anCount)+" 次")]}}],null,!1,2232316475)}):e._e()],1),e._v(" "),n("div",[n("el-tabs",{staticStyle:{width:"100%"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"柱状图",name:"bar"}},[n("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),n("el-tab-pane",{attrs:{label:"拆线图",name:"line"}},[n("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),n("el-tab-pane",{attrs:{label:"拼状图",name:"pie"}},[n("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),n("el-tab-pane",{attrs:{label:"条形图",name:"barY"}},[n("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})])],1)],1)],1):e._e()])},staticRenderFns:[]};var Qe={name:"DwSurveyCharts",components:{DwSurveyDcsWrapper:ce,DwSurveyChartsCommon:n("VU/8")(Le,Fe,!1,function(e){n("BVzi")},"data-v-79144ca0",null).exports},data:function(){return{questions:[],loading:!0}},mounted:function(){this.surveyChartData()},methods:{surveyChartData:function(){var e,t,n=this;(e=this.$route.params.id,t={surveyId:e},x({url:b.surveyReport,method:"get",params:t})).then(function(e){var t,s=e.data.data;n.questions=s.questions,n.questions.length<=0&&(t="问卷还没有任何题目",Object(m.Message)({message:t,type:"info",duration:5e3}),n.loading=!1);for(var i=0;i<n.questions.length;i++){var r=n.questions[i],o=r.anCount,a=void 0;"CHECKBOX"===r.quType?(r.quTypeName="多选题",a=r.quCheckboxs):"RADIO"===r.quType?(r.quTypeName="单选题",a=r.quRadios):"FILLBLANK"===r.quType?r.quTypeName="填空题":"SCORE"===r.quType?(r.quTypeName="评分题",a=r.quScores):"ORDERQU"===r.quType?(r.quTypeName="排序题",a=r.quOrderbys):"MULTIFILLBLANK"===r.quType?(r.quTypeName="多项填空题",a=r.quMultiFillblanks):r.quTypeName=r.quType;var l=[];if("RADIO"===r.quType||"CHECKBOX"===r.quType||"SCORE"===r.quType||"ORDERQU"===r.quType||"MULTIFILLBLANK"===r.quType)for(var u=0;u<a.length;u++){var d=a[u],c=void 0;if("RADIO"===r.quType||"CHECKBOX"===r.quType){var v=d.anCount;0===o&&(o=1),null===v&&(a[u].anCount=0);var p=(v/o*100).toFixed(2);a[u].percent=p,c={optionName:d.optionName,anCount:d.anCount,percent:p}}else if("SCORE"===r.quType){var y=d.avgScore,h=(y/r.paramInt02*100).toFixed(2),f=y.toFixed(2);c={optionName:d.optionName,anCount:f,percent:h}}else if("ORDERQU"===r.quType){var w=((a.length-u)/((1+a.length)*a.length/2)*100).toFixed(2);c={optionName:d.optionName,anCount:a.length-u,orderNum:u+1,percent:w}}else if("MULTIFILLBLANK"===r.quType){var g=d.anCount;0===o&&(o=1),null===g&&(a[u].anCount=0);var x=(g/o*100).toFixed(2);a[u].percent=x,c={optionName:d.optionName,anCount:d.anCount,percent:x}}l.push(c)}n.questions[i].quStatOptions=l}n.loading=!1})}}},Ue={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-survey-dcs-wrapper",{attrs:{id:e.id,"is-survey-chart":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){return t.survey,[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},e._l(e.questions,function(e,t){return n("dw-survey-charts-common",{key:e.id,attrs:{id:e.id,index:t,question:e}})}),1)]}}])})],1)},staticRenderFns:[]},Be=n("VU/8")(Qe,Ue,!1,null,null,null).exports,Me={name:"DwSurveyAnswer",components:{DwSurveyDcsWrapper:ce},data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,dialogFormVisible:!1,expUpQu:0}},mounted:function(){this.queryList(1)},methods:{handleGo:function(e){this.$router.push(e)},handlePush:function(e){this.$router.push(e)},handleDelete:function(e,t){var n=this;console.log(e,t),this.$msgbox.confirm("确认删除此条答卷吗？","删除警告",{type:"warning",confirmButtonText:"确认删除"}).then(function(){(function(e){return x({url:b.surveyAnswerDelete,method:"delete",data:e})})({id:[t.id]}).then(function(e){console.log(e),200===e.data.resultCode?(n.$message.success("删除成功，即将刷新数据。"),n.queryList(1)):n.$message.error("删除答卷失败")})}).catch(function(){})},handleCurrentChange:function(e){this.queryList(e)},handleExport:function(){this.dialogFormVisible=!0},executeExportData:function(){var e="https://pro.surveyform.cn"+b.surveyAnswerExport+"?surveyId="+this.$route.params.id+"&expUpQu="+this.expUpQu;this.dialogFormVisible=!1,window.location.href=e},queryList:function(e){var t,n,s,i,r=this;(t=this.pageSize,n=e,s=this.$route.params.id,i={pageSize:t,current:n,surveyId:s},x({url:b.surveyAnswerList,method:"get",params:i})).then(function(e){var t=e.data.data;r.tableData=t,r.total=e.data.total,r.currentPage=e.data.current,r.pageSize=e.data.pageSize})}}},$e={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-survey-dcs-wrapper",{attrs:{id:e.id,"is-answer-data":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){return t.survey,[n("div",{staticClass:"dw-dcs-main-title"},[n("el-row",{attrs:{type:"flex"}},[n("el-col",{attrs:{span:18}},[n("div",{staticStyle:{"font-size":"14px",padding:"10px"}},[n("strong",[e._v("原始数据列表")])])]),e._v(" "),n("el-col",{staticStyle:{"text-align":"right","padding-right":"16px"},attrs:{span:6}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleExport}},[e._v("导出数据")])],1)],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:"回答IP"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("p",{domProps:{innerHTML:e._s(t.row.ipAddr)}}),e._v(" "),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("div",{domProps:{innerHTML:e._s(t.row.ipAddr)}})])])]}}],null,!0)}),e._v(" "),n("el-table-column",{attrs:{label:"回答的题数"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(null!=t.row.completeItemNum?t.row.completeItemNum:0)+" 题")])]}}],null,!0)}),e._v(" "),n("el-table-column",{attrs:{label:"回答时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-time"}),e._v(" "),n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.endAnDate))])]}}],null,!0)}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button-group",[n("el-tooltip",{attrs:{effect:"dark",content:"查看数据",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-view"},on:{click:function(n){return e.handleGo("/no-top/dw-survey/d/data/"+t.row.surveyId+"/"+t.row.id)}}})],1),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"删除数据",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}})],1)],1)]}}],null,!0)})],1),e._v(" "),n("div",{staticClass:"dw-pagination"},[n("el-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.total,background:"",layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)]}}])}),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogFormVisible,"append-to-body":"",title:"导出答卷数据",width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("div",{staticStyle:{"line-height":"30px"}},[e._v("是否同时下载上传题的文件")]),e._v(" "),n("div",{staticStyle:{color:"grey","line-height":"30px","font-size":"12px"}},[n("span",[e._v("如果有上传题，选择压缩下载可能比较占用系统资源及时间，请在空闲时间压缩下载")])]),e._v(" "),n("el-switch",{attrs:{"active-text":"同时压缩上传的文件并下载","inactive-text":"仅下载数据Excel","active-value":"1","inactive-value":"0"},model:{value:e.expUpQu,callback:function(t){e.expUpQu=t},expression:"expUpQu"}}),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.executeExportData}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var He=n("VU/8")(Me,$e,!1,function(e){n("Dr96")},"data-v-686292d0",null).exports,je={name:"DwSurveyAnswerInfo",props:{question:{type:Object,default:function(){return[]}},index:{type:Number,default:0}},data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,radio:3,formSize:"medium",rateValue:3.7,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],value:"",dwResourceUrl:""}},mounted:function(){console.debug("https://pro.surveyform.cn"),this.dwResourceUrl="https://pro.surveyform.cn"},methods:{goBack:function(){this.$router.back()},handleInfo:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},handleCurrentChange:function(e){this.queryList(e)}}},Ve={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px","label-position":"left"}},[n("div",{staticClass:"dw-qu-item"},[n("div",{staticClass:"dw-qu-item-title"},[n("span",[e._v(e._s(e.index+1)+"、")]),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.question.quTitle)}}),e._v(" "),n("span",[e._v("【"+e._s(e.question.quTypeName)+"】")])]),e._v(" "),n("div",{staticClass:"dw-qu-item-body"},["RADIO"===e.question.quType?n("div",[n("div",[n("el-radio-group",{model:{value:e.question.anRadio.quItemId,callback:function(t){e.$set(e.question.anRadio,"quItemId",t)},expression:"question.anRadio.quItemId"}},e._l(e.question.quRadios,function(t){return n("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.optionName))])}),1)],1),e._v(" "),n("div",[n("span",[e._v(e._s(e.question.anRadio.otherText))])])]):e._e(),e._v(" "),"CHECKBOX"===e.question.quType?n("div",e._l(e.question.quCheckboxs,function(t){return n("el-checkbox",{key:t.id,attrs:{label:t.id,checked:t.answer}},[e._v(e._s(t.optionName))])}),1):e._e(),e._v(" "),"FILLBLANK"===e.question.quType?n("div",[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-input",{attrs:{readonly:""},model:{value:e.question.anFillblank.answer,callback:function(t){e.$set(e.question.anFillblank,"answer",t)},expression:"question.anFillblank.answer"}})],1)],1)],1):e._e(),e._v(" "),"MULTIFILLBLANK"===e.question.quType?n("div",e._l(e.question.quMultiFillblanks,function(t,s){return n("el-form-item",{key:t.id,attrs:{label:s+1+"、"+t.optionName}},[n("el-input",{staticStyle:{width:"360px"},model:{value:t.answer,callback:function(n){e.$set(t,"answer",n)},expression:"item.answer"}})],1)}),1):e._e(),e._v(" "),"SCORE"===e.question.quType?n("div",e._l(e.question.quScores,function(t,s){return n("el-form-item",{key:t.id,attrs:{label:s+1+"、"+t.optionName}},[n("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:t.answer,callback:function(n){e.$set(t,"answer",n)},expression:"item.answer"}})],1)}),1):e._e(),e._v(" "),"ORDERQU"===e.question.quType?n("div",e._l(e.question.quOrderbys,function(t,s){return n("el-form-item",{key:t.id,attrs:{label:s+1+"、"+t.optionName}},[n("el-input",{staticStyle:{width:"360px"},model:{value:t.answer,callback:function(n){e.$set(t,"answer",n)},expression:"item.answer"}})],1)}),1):e._e(),e._v(" "),"UPLOADFILE"===e.question.quType?n("div",e._l(e.question.anUplodFiles,function(t){return n("div",{key:t.id},[n("a",{attrs:{href:""+e.dwResourceUrl+t.filePath,target:"_blank"}},[e._v(e._s(t.fileName))])])}),0):e._e()])])])],1)},staticRenderFns:[]};var ze={name:"DwSurveyAnswerInfo",components:{DwSurveyDcsWrapper:ce,DwSurveyAnswerQuCommon:n("VU/8")(je,Ve,!1,function(e){n("2RYx")},"data-v-47f964f4",null).exports},data:function(){return{survey:{questions:[]},tableData:[],pageSize:10,currentPage:1,total:0,radio:3,formSize:"medium",rateValue:3.7,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],value:""}},mounted:function(){this.querySurveyAnswer(1)},methods:{goBack:function(){this.$router.back()},handleInfo:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},querySurveyAnswer:function(){var e,t,n=this;(e=this.$route.params.answerId,t={answerId:e},x({url:b.surveyAnswerInfo,method:"get",params:t})).then(function(e){var t=e.data.data;n.survey=t;for(var s=0;s<n.survey.questions.length;s++){var i=n.survey.questions[s],r=i.quType,o=void 0;if("CHECKBOX"===r?(i.quTypeName="多选题",o=i.quCheckboxs):"RADIO"===r?(i.quTypeName="单选题",o=i.quRadios):"FILLBLANK"===r?i.quTypeName="填空题":"SCORE"===r?(i.quTypeName="评分题",o=i.quScores):"ORDERQU"===r?(i.quTypeName="排序题",o=i.quOrderbys):"MULTIFILLBLANK"===r?(i.quTypeName="多项填空题",o=i.quMultiFillblanks):i.quTypeName="UPLOADFILE"===r?"文件上传题":r,"CHECKBOX"===r||"SCORE"===r||"ORDERQU"===r||"MULTIFILLBLANK"===r)for(var a=0;a<o.length;a++){var l=o[a];if("CHECKBOX"===r){for(var u=i.anCheckboxs,d=0;d<u.length;d++)if(u[d].quItemId===l.id){l.answer=!0;break}}else if("SCORE"===r){for(var c=i.anScores,v=0;v<c.length;v++)if(c[v].quRowId===l.id&&null!=c[v].answserScore){l.answer=parseInt(c[v].answserScore);break}}else if("ORDERQU"===r){for(var p=i.anOrders,m=0;m<p.length;m++)if(p[m].quRowId===l.id){l.answer=p[m].orderyNum;break}}else if("MULTIFILLBLANK"===r)for(var y=i.anDFillblanks,h=0;h<y.length;h++)if(y[h].quItemId===l.id){l.answer=y[h].answer;break}}}})},handleCurrentChange:function(e){}}},Ge={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-page-header",{staticClass:"dw-page-header",attrs:{content:"答卷详情"},on:{back:e.goBack}}),e._v(" "),n("div",{staticClass:"dw-answer-content"},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("el-col",{attrs:{span:16,push:4}},[n("div",{staticStyle:{background:"white"}},[n("el-descriptions",{attrs:{column:3,border:""}},[n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-location-information"}),e._v(" 答卷IP\n              ")]),e._v("\n              "+e._s(e.survey.surveyAnswer.ipAddr)+"\n            ")],2),e._v(" "),n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-timer"}),e._v("\n                答卷时间\n              ")]),e._v("\n              "+e._s(e.survey.surveyAnswer.endAnDate)+"\n            ")],2),e._v(" "),n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-monitor"}),e._v("\n                答题数\n              ")]),e._v("\n              "+e._s(e.survey.surveyAnswer.completeItemNum)+"\n            ")],2),e._v(" "),n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-price-tag"}),e._v(" 答卷ID\n              ")]),e._v("\n              "+e._s(e.survey.surveyAnswer.id)+"\n            ")],2)],1),e._v(" "),n("div",{staticClass:"dw-answer-title",staticStyle:{"padding-top":"30px","padding-bottom":"0px"}},[e._v("答卷结果信息")]),e._v(" "),n("div",{staticStyle:{padding:"0px 20px 30px 20px"}},e._l(e.survey.questions,function(e,t){return n("dw-survey-answer-qu-common",{key:e.id,attrs:{id:e.id,index:t,question:e}})}),1)],1)])],1)],1)],1)},staticRenderFns:[]};var Ye=n("VU/8")(ze,Ge,!1,function(e){n("qz4o")},"data-v-eccc95b8",null).exports,We={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-menu",{directives:[{name:"show",rawName:"v-show",value:!e.isLrLayout,expression:"!isLrLayout"}],staticClass:"el-menu-vertical-demo",staticStyle:{height:"600px"},attrs:{"default-active":e.defActive,router:""}},[n("el-menu-item",{attrs:{index:"/v6/dw/user"}},[n("i",{staticClass:"el-icon-user"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("我的账号")])]),e._v(" "),n("el-menu-item",{attrs:{index:"/v6/dw/user/pwd"}},[n("i",{staticClass:"el-icon-key"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("修改密码")])])],1),e._v(" "),n("el-menu",{directives:[{name:"show",rawName:"v-show",value:e.isLrLayout,expression:"isLrLayout"}],staticClass:"el-menu-vertical-demo",staticStyle:{height:"600px"},attrs:{"default-active":e.defActive,router:""}},[n("el-menu-item",{attrs:{index:"/v6/lr/dw/user"}},[n("i",{staticClass:"el-icon-user"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("我的账号")])]),e._v(" "),n("el-menu-item",{attrs:{index:"/v6/lr/dw/user/pwd"}},[n("i",{staticClass:"el-icon-key"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("修改密码")])])],1)],1)},staticRenderFns:[]};var Je=n("VU/8")({name:"DwUserMenu",data:function(){return{defActive:"/v6/lr/dw/user",prevPath:"/v6",isLrLayout:!1}},mounted:function(){this.$route.path.indexOf("/v6/lr")>=0&&(this.prevPath="/v6/lr",this.isLrLayout=!0),this.setDefActive()},methods:{setDefActive:function(){this.$route.fullPath.indexOf("/dw/user/pwd")>=0?this.defActive=this.prevPath+"/dw/user/pwd":this.defActive=this.prevPath+"/dw/user"}}},We,!1,function(e){n("yEZW")},"data-v-66660890",null).exports;var Ze={name:"DwUser",components:{DwUserMenu:Je},data:function(){return{userInfo:{}}},mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var e=this;x({url:b.curUserInfo,method:"get"}).then(function(t){var n=t.data.data;e.userInfo=n})}}},Ke={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("el-col",{attrs:{span:24,offset:0}},[n("div",{staticClass:"dw-user-body"},[n("el-row",[n("el-col",{staticStyle:{height:"600px"},attrs:{span:4}},[n("dw-user-menu")],1),e._v(" "),n("el-col",{attrs:{span:20}},[n("div",{staticStyle:{padding:"30px"}},[n("el-descriptions",{attrs:{title:"账号信息",column:"1",border:""}},[n("el-descriptions-item",{attrs:{label:"账号"}},[e._v(e._s(e.userInfo.loginName))]),e._v(" "),n("el-descriptions-item",{attrs:{label:"状态"}},[0===e.userInfo.status?n("el-tag",{attrs:{type:"danger"}},[e._v("不可用")]):1===e.userInfo.status?n("el-tag",{attrs:{type:"info"}},[e._v("未激活")]):2===e.userInfo.status?n("el-tag",{attrs:{type:"success"}},[e._v("激活")]):n("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":""}},[e._v("未知")])],1),e._v(" "),n("el-descriptions-item",{attrs:{label:"创建时间"}},[e._v(e._s(e.userInfo.createTime))]),e._v(" "),n("el-descriptions-item",{attrs:{label:"登录时间"}},[e._v(e._s(e.userInfo.lastLoginTime))])],1)],1)])],1)],1)])],1)],1)},staticRenderFns:[]};var Xe=n("VU/8")(Ze,Ke,!1,function(e){n("eWKG")},"data-v-0a1f1302",null).exports,et={name:"DwUserPwd",components:{DwUserMenu:Je},data:function(){var e=this;return{ruleForm:{pass:"",checkPass:"",oldPass:""},rules:{pass:[{required:!0,message:"请输入新登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"},{validator:function(t,n,s){""===n?s(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),s())},trigger:"blur"}],checkPass:[{required:!0,message:"请再次输入新登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"},{validator:function(t,n,s){""===n?s(new Error("请再次输入密码")):n!==e.ruleForm.pass?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}],oldPass:[{required:!0,message:"请输入原登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}]}}},mounted:function(){},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var n,s,i;(n=t.ruleForm.oldPass,s=t.ruleForm.pass,i={curpwd:n,pwd:s},x({url:b.curUserPwdUpdate,method:"post",params:i})).then(function(e){200===e.data.resultCode?t.$message.success("密码修改成功"):t.$message.error("密码修改失败")})})},resetForm:function(e){this.$refs[e].resetFields()}}},tt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("el-col",{attrs:{span:24,offset:0}},[n("div",{staticClass:"dw-user-body"},[n("el-row",[n("el-col",{staticStyle:{height:"600px"},attrs:{span:4}},[n("dw-user-menu")],1),e._v(" "),n("el-col",{attrs:{span:20}},[n("div",{staticStyle:{padding:"30px",width:"400px"}},[n("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"status-icon":"","label-width":"100px","label-position":"top"}},[n("el-form-item",{attrs:{label:"原密码",prop:"oldPass"}},[n("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.ruleForm.oldPass,callback:function(t){e.$set(e.ruleForm,"oldPass",t)},expression:"ruleForm.oldPass"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"pass"}},[n("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[n("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),e._v(" "),n("el-form-item",{staticStyle:{"padding-top":"20px"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交修改")]),e._v(" "),n("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])],1)],1)])],1)],1)},staticRenderFns:[]};var nt=n("VU/8")(et,tt,!1,function(e){n("63wl")},"data-v-79177261",null).exports;var st={name:"AdminUserList",data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,formInline:{loginName:null,status:null},dialogTitle:"创建用户",dialogFormVisible:!1,userForm:{id:null,loginName:"",pwd:"",status:2},userFormRules:{loginName:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}],pwd:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}],status:[{required:!0,message:"请选择账号状态",trigger:"change"}]},formLabelWidth:"120px"}},mounted:function(){this.queryList(1)},methods:{buttonClickA:function(e){window.location.href=e},handlePush:function(e){this.$router.push(e)},onSubmit:function(){console.log("submit!"),this.queryList(1)},handleCurrentChange:function(e){this.queryList(e)},openCreateUser:function(){this.dialogTitle="创建用户",this.dialogFormVisible=!0,this.userFormRules.pwd=[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}],this.userForm.id=null},queryList:function(e){var t=this,n=this.formInline,s=n.status,i=n.loginName;(function(e,t,n,s){var i={pageSize:e,current:t,status:n,loginName:s};return x({url:b.adminUserList,method:"get",params:i})})(this.pageSize,e,s,i).then(function(e){var n=e.data.data;t.tableData=n,t.total=e.data.total,t.currentPage=e.data.current,t.pageSize=e.data.pageSize})},handleEdit:function(e,t){this.dialogTitle="编辑用户",this.dialogFormVisible=!0,this.userFormRules.pwd={required:!1},this.userForm.loginName=t.loginName,this.userForm.status=t.status,this.userForm.id=t.id,console.log(e,t)},handleDelete:function(e,t){var n=this;console.log(e,t),this.$msgbox.confirm("确认删除此用户吗？","删除警告",{type:"warning",confirmButtonText:"确认删除"}).then(function(){(function(e){return x({url:b.adminUserDelete,method:"delete",data:e})})({id:[t.id]}).then(function(e){200===e.data.resultCode?(n.$message.success("删除成功，即将刷新数据。"),n.queryList(1)):n.$message.error("添加用户失败")})}).catch(function(){})},handleSaveUser:function(){var e=this;this.$refs.userForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;var n=e.userForm,s=n.id,i=n.loginName,r=n.pwd,o=n.status;null===s?function(e){return x({url:b.adminUserCreate,method:"post",data:e})}({loginName:i,pwd:r,status:o}).then(function(t){200===t.data.resultCode?(e.$message.success("添加成功，即将刷新数据。"),e.queryList(1),e.dialogFormVisible=!1):e.$message.error("添加用户失败")}):function(e){return x({url:b.adminUserUpdate,method:"put",data:e})}({id:s,loginName:i,pwd:r,status:o}).then(function(t){200===t.data.resultCode?(e.$message.success("修改成功，即将刷新数据。"),e.queryList(1),e.dialogFormVisible=!1):e.$message.error("添加用户失败")})})}}},it={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("el-col",{attrs:{span:24,offset:0}},[n("div",{staticClass:"dw-table-form",staticStyle:{"padding-left":"60px"}},[n("el-form",{staticClass:"dw-form-inline",attrs:{inline:!0,model:e.formInline,size:"medium"}},[n("el-form-item",{attrs:{label:"登录账号"}},[n("el-input",{attrs:{placeholder:"请输入查询的账号关键字",clearable:""},model:{value:e.formInline.loginName,callback:function(t){e.$set(e.formInline,"loginName",t)},expression:"formInline.loginName"}})],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-left":"40px"},attrs:{label:"账号状态"}},[n("el-select",{attrs:{placeholder:"请选择账号状态",clearable:""},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},[n("el-option",{attrs:{label:"不可用",value:"0"}}),e._v(" "),n("el-option",{attrs:{label:"未激活",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"激活",value:"2"}})],1)],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-left":"40px"}},[n("el-button",{on:{click:e.onSubmit}},[e._v("重置")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),n("div",{staticClass:"dw-table"},[n("div",{staticClass:"dw-table-title"},[n("el-row",{attrs:{span:24,type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:4}},[n("h3",[e._v("用户管理")])]),e._v(" "),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[n("el-button",{directives:[{name:"has-dw-role",rawName:"v-has-dw-role",value:"DWSURVEY_SUPER_ADMIN",expression:"'DWSURVEY_SUPER_ADMIN'"}],attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.openCreateUser()}}},[e._v("添加用户")])],1)],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:"登录名"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("p",{domProps:{innerHTML:e._s(t.row.loginName)}}),e._v(" "),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("div",{domProps:{innerHTML:e._s(t.row.loginName)}})])])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?n("el-tag",{attrs:{type:"danger"}},[e._v("不可用")]):1===t.row.status?n("el-tag",{attrs:{type:"info"}},[e._v("未激活")]):2===t.row.status?n("el-tag",{attrs:{type:"success"}},[e._v("激活")]):n("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":""}},[e._v("未知")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"登录时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-time"}),e._v(" "),n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.lastLoginTime))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button-group",[n("el-tooltip",{attrs:{effect:"dark",content:"编辑问卷",placement:"top"}},[n("el-button",{attrs:{size:"mini",content:"编辑",icon:"el-icon-edit"},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}})],1),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"删除问卷",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}})],1)],1)]}}])})],1),e._v(" "),n("div",{staticClass:"dw-pagination"},[n("el-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.total,background:"",layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)],1)])],1),e._v(" "),n("div",[n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.userFormRules,"status-icon":"","label-position":"top"}},[n("el-form-item",{staticStyle:{"margin-top":"0px"},attrs:{"label-width":e.formLabelWidth,label:"设置账号",prop:"loginName"}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"请设置登录账号","show-word-limit":""},model:{value:e.userForm.loginName,callback:function(t){e.$set(e.userForm,"loginName",t)},expression:"userForm.loginName"}})],1),e._v(" "),n("el-form-item",{staticClass:"dw-dialog-form-item",attrs:{"label-width":e.formLabelWidth,label:"账号状态",prop:"status"}},[n("el-radio-group",{model:{value:e.userForm.status,callback:function(t){e.$set(e.userForm,"status",t)},expression:"userForm.status"}},[n("el-radio",{attrs:{label:0}},[e._v("不可用")]),e._v(" "),n("el-radio",{attrs:{label:1}},[e._v("未激活")]),e._v(" "),n("el-radio",{attrs:{label:2}},[e._v("激活")])],1)],1),e._v(" "),n("el-form-item",{staticClass:"dw-dialog-form-item",attrs:{"label-width":e.formLabelWidth,label:"设置密码",prop:"pwd"}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"新建时必须设置密码，修改时不设置代表不修改。","show-password":""},model:{value:e.userForm.pwd,callback:function(t){e.$set(e.userForm,"pwd",t)},expression:"userForm.pwd"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSaveUser()}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var rt=n("VU/8")(st,it,!1,function(e){n("MTpB")},"data-v-7ddefd00",null).exports,ot={name:"Login",data:function(){return{ruleForm:{email:"",pass:""},rules:{email:[{required:!0,message:"请输入登录账号",trigger:"blur"}],pass:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}]}}},mounted:function(){this.pageH=window.height,this.loadDwFooter()},methods:{loadDwFooter:function(){var e=this;I.isDemo(function(t){e.showDefaultDemoPwd(t)})},showDefaultDemoPwd:function(e){this.ruleForm.email="service@diaowen.net",this.ruleForm.pass="123456"},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var n,s,i;(n=t.ruleForm.email,s=t.ruleForm.pass,i={userName:n,password:s,type:"account"},x({url:b.loginIn,method:"post",params:i})).then(function(e){var n=e.data;"ok"===n.status?(u.setAuthority(n.currentAuthority),u.setUserName(t.ruleForm.email),t.$router.push("/v6")):n.hasOwnProperty("httpResult")&&null!=n.httpResult&&n.httpResult.hasOwnProperty("resultMsg")?h(n.httpResult.resultMsg):h("登录失败，请确认！")})})},resetForm:function(e){this.$refs[e].resetFields()}}},at={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"loginPage"}},[n("div",{staticClass:"dw-display-flex-center"},[n("div",{staticStyle:{"background-color":"white"}}),e._v(" "),n("div",{staticClass:"loginFormContent"},[n("div",{staticStyle:{"text-align":"center"}},[n("h3",[e._v("欢迎登录")]),e._v(" "),n("div",[n("el-tag",{attrs:{type:"success"}},[e._v("调问网")]),e._v(" "),n("el-tag",{attrs:{type:"warning"}},[e._v("全新的问卷平台")]),e._v(" "),n("el-tag",[e._v("使用纯VUE全部重写")])],1)]),e._v(" "),n("div",[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"status-icon":"","label-position":"top","label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"用户名",prop:"email"}},[n("el-input",{attrs:{autocomplete:"on"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"pass"}},[n("el-input",{attrs:{type:"password",autocomplete:"off","show-password":""},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary","native-type":"submit"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")])],1)],1)],1)])])])},staticRenderFns:[]};var lt=n("VU/8")(ot,at,!1,function(e){n("sFYE")},"data-v-1d4a5c82",null).exports,ut=n("w/TU"),dt=n.n(ut),ct={name:"QuRedio",props:{quNum:{type:String,default:""}},data:function(){return{radio:3}},methods:{clickText:function(e){this.$emit("show-text-editor",e)}}},vt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grid-content"},[n("div",{staticClass:"quContent"},[n("div",{staticClass:"quTitle"},[e._v(e._s(e.quNum)+"、题标题")]),e._v(" "),n("div",{staticClass:"quBody"},[n("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[n("el-radio",{attrs:{label:3}},[e._v("备选项")]),e._v(" "),n("el-radio",{attrs:{label:6}},[e._v("备选项")]),e._v(" "),n("el-radio",{attrs:{label:9}},[e._v("备选项")])],1)],1)])])},staticRenderFns:[]};var pt=n("VU/8")(ct,vt,!1,function(e){n("kqkH")},"data-v-434fa445",null).exports,mt={name:"QuOptions",props:{domId:{type:String,default:""},oldContent:{type:String,default:""}},data:function(){return{active:"",content:this.oldContent}},methods:{mouseleave:function(){this.active=""},mouseover:function(){this.active="background-color: #FDF9CD;"},clickText:function(e){this.$emit("show-text-editor",e)},text2Div:function(e){console.debug("text2Divcontent"),console.debug(e),this.content=e}}},yt={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"quOptionContent",style:e.active,attrs:{id:""+e.domId},on:{click:function(t){return t.stopPropagation(),e.clickText(""+e.domId)},mouseover:e.mouseover,mouseleave:e.mouseleave}},[e._v(e._s(e.content))])},staticRenderFns:[]};var ht=n("VU/8")(mt,yt,!1,function(e){n("ctD/")},"data-v-4a66c880",null).exports,ft={name:"DwCheckbox",components:{QuOptions:ht},props:{domId:{type:String,default:""},label:{type:String,default:""}},methods:{clickText:function(e){this.$emit("show-text-editor",e)}}},wt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dwCheckboxBox"},[t("input",{attrs:{type:"checkbox"}}),this._v(" "),t("qu-options",{attrs:{"dom-id":this.domId,"old-content":this.label},on:{"show-text-editor":this.clickText}})],1)},staticRenderFns:[]};var gt={name:"QuCheckbox",components:{DwCheckbox:n("VU/8")(ft,wt,!1,function(e){n("mCYP")},"data-v-0a0a20c2",null).exports,QuOptions:ht},props:{quNum:{type:String,default:""},child:{type:Array,default:function(){return[]}}},data:function(){return{checkAll:!1,checkedCities:["上海","北京"],cities:this.child,isIndeterminate:!0,active:""}},methods:{mouseleave:function(){this.active=""},mouseover:function(){this.active="background-color: #FDF9CD;"},clickText:function(e){this.$emit("show-text-editor",e)},stop:function(){}}},xt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grid-content"},[n("div",{staticClass:"quContent",on:{click:function(t){return t.stopPropagation(),e.stop.apply(null,arguments)}}},[n("div",{staticClass:"quTitle",style:e.active,attrs:{id:"Qu"+e.quNum},on:{click:function(t){return t.stopPropagation(),e.clickText("Qu"+e.quNum)},mouseover:e.mouseover,mouseleave:e.mouseleave}},[e._v(e._s(e.quNum)+"、题标题")]),e._v(" "),n("div",{staticClass:"quBody"},e._l(e.cities,function(t){return n("dw-checkbox",{key:t.name,attrs:{label:t.name,"dom-id":t.id},on:{"show-text-editor":e.clickText}})}),1)])])},staticRenderFns:[]};var bt=n("VU/8")(gt,xt,!1,function(e){n("Tp1i")},"data-v-f0dd9104",null).exports,Ct={name:"QuRate",props:{quNum:{type:Number,default:0}},data:function(){return{value:3,active:""}},methods:{mouseleave:function(){this.active=""},mouseover:function(){this.active="background-color: #FDF9CD;"},clickText:function(e){this.$emit("show-text-editor",e)}}},_t={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grid-content"},[n("div",{staticClass:"quContent"},[n("div",{staticClass:"quTitle",style:e.active,attrs:{id:"Qu"+e.quNum},on:{click:function(t){return t.stopPropagation(),e.clickText("Qu"+e.quNum)},mouseover:e.mouseover,mouseleave:e.mouseleave}},[e._v(e._s(e.quNum)+"、题标题")]),e._v(" "),n("div",{staticClass:"quBody"},[n("el-rate",{attrs:{"show-text":""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)])])},staticRenderFns:[]};var At=n("VU/8")(Ct,_t,!1,function(e){n("UKxP")},"data-v-fee7c628",null).exports,St={name:"QuSelect",props:{quNum:{type:String,default:""}},data:function(){return{options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],value:""}},methods:{clickText:function(e){this.$emit("show-text-editor",e)}}},qt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grid-content"},[n("div",{staticClass:"quContent"},[n("div",{staticClass:"quTitle"},[e._v(e._s(e.quNum)+"、题标题")]),e._v(" "),n("div",{staticClass:"quBody"},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)])])},staticRenderFns:[]};var kt=n("VU/8")(St,qt,!1,function(e){n("7IGW")},"data-v-6c7f0f5e",null).exports,It=n("7t+N"),Tt=n.n(It),Ot=["上海","北京","广州","深圳"],Dt={name:"DwTextEditor",props:{quNum:{type:String,default:""}},data:function(){return{checkAll:!1,checkedCities:["上海","北京"],cities:Ot,isIndeterminate:!0,textEditorVisible:"",domId:""}},methods:{showEditor:function(e){var t=Tt()("#"+e),n=t.offset();console.debug("dwoffset"),console.debug(n),Tt()("#dwCommonEditRoot").show(),Tt()("#dwCommonEditRoot").offset({top:n.top,left:n.left}),Tt()("#dwCommonEditRoot").width(t.width()+30),Tt()("#dwCommonEditRoot").height(t.outerHeight()),Tt()("#dwCommonEditRoot .dwEditor").focus(),this.domId=e},hideEditor:function(){console.debug("this.curDomId"),Tt()("#dwCommonEditRoot").hide()},getText:function(){return Tt()("#dwCommonEditRoot").text()},keydown:function(){this.$emit("set-edit-text"),this.showEditor(this.domId)}}},Et={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"editorContent",style:this.textEditorVisible,attrs:{id:"dwCommonEditRoot"}},[t("div",{staticClass:"dwEditor",attrs:{contenteditable:"true"},on:{keydown:this.keydown}})])},staticRenderFns:[]};var Pt=n("VU/8")(Dt,Et,!1,function(e){n("Sldd")},"data-v-7ce1efaa",null).exports,Nt={name:"QuInput",props:{quNum:{type:String,default:""}},data:function(){return{input:"322"}},methods:{clickText:function(e){this.$emit("show-text-editor",e)}}},Rt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grid-content"},[n("div",{staticClass:"quContent"},[n("div",{staticClass:"quTitle"},[e._v(e._s(e.quNum)+"、题标题")]),e._v(" "),n("div",{staticClass:"quBody"},[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)])])},staticRenderFns:[]};var Lt=n("VU/8")(Nt,Rt,!1,function(e){n("UYPE")},"data-v-3726a4a1",null).exports,Ft={name:"DwDesign",components:{DwTextEditor:Pt,QuRate:At,QuCheckbox:bt,draggable:dt.a,QuRedio:pt,QuSelect:kt,QuInput:Lt},data:function(){return{textEditorVisible:"display: none",drag:!1,myArray:[{people:"cn",id:1,name:"www.itxst.com"},{people:"cn",id:2,name:"www.baidu.com"},{people:"cn",id:3,name:"www.taobao.com"},{people:"us",id:4,name:"www.google.com"},{people:"us",id:5,name:"www.google.com"},{people:"us",id:6,name:"www.google.com"},{people:"us",id:7,name:"www.google.com"},{people:"us",id:8,name:"www.google.com"},{people:"us",id:9,name:"www.google.com"},{people:"us",id:10,name:"www.google.com"},{people:"us",id:11,name:"www.google.com"},{people:"us",id:12,name:"www.google.com"},{people:"us",id:13,name:"www.google.com"}],arr1:[{id:1,name:"www.itxst.com",quType:"radio"},{id:2,name:"www.jd.com",quType:"checkbox",child:[{id:21,name:"北京"},{id:22,name:"上海"},{id:23,name:"武汉"},{id:24,name:"深圳"}]},{id:3,name:"www.jd.com",quType:"input"},{id:4,name:"www.jd.com",quType:"rate"},{id:5,name:"www.jd.com",quType:"select"}],arr2:[{id:4,name:"www.yahoo.com"}],curDomId:"",curDataIndex:[],headerQuToolbarStyle:""}},mounted:function(){window.addEventListener("scroll",this.onScroll)},methods:{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1},showEditor:function(e){console.debug("design-editor:"+e),this.curDomId=e,this.$refs.dwTextEditor.showEditor(e)},domClick:function(){this.setEditText(),this.$refs.dwTextEditor.hideEditor()},setEditText:function(){var e=this;if(this.curDataIndex.length>0){var t=this.curDataIndex;console.debug("curIndex"),console.debug(t),this.arr1[t[0]].child[t[1]].name=this.$refs.dwTextEditor.getText()}else{this.arr1.forEach(function(t,n){"checkbox"===t.quType&&t.child.forEach(function(t,s){console.debug("this.curDomId"),console.debug(t.id),console.debug(e.curDomId),t.id===e.curDomId&&(console.debug("wweeww"),t.name=e.$refs.dwTextEditor.getText(),e.curDataIndex=[n,s])})})}},onScroll:function(e){console.debug("position"),console.debug(e);var t=document.documentElement.scrollTop||document.body.scrollTop;console.log(t);if(t>=60)this.headerQuToolbarStyle="top:0px;";else{var n=60-t;this.headerQuToolbarStyle="top:"+n+"px;"}}}},Qt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dw-design-container"},[n("el-container",[n("el-header",{staticClass:"header"},[n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"header-content-left"},[n("div",{staticClass:"logo"},[n("a",{attrs:{href:"#"}},[n("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQzRDRFQ0Y5QjVFODExRUJCRENGOUE2Q0FGMTA3RTJEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQzRDRFQ0ZBQjVFODExRUJCRENGOUE2Q0FGMTA3RTJEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDNENEVDRjdCNUU4MTFFQkJEQ0Y5QTZDQUYxMDdFMkQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDNENEVDRjhCNUU4MTFFQkJEQ0Y5QTZDQUYxMDdFMkQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6GJisjAAAFMklEQVR42uzdTYhVZRjA8XNrSAqTIq0EqYSCCoQWgeFCHcJsEbVo1UARkbYIChdFbloFWosWQVAWhFBDmyJa1FhR46YPC0KkhCgzN9OXJH2JhdyeM3Mnq3veMJp5z3lnfj94mCLo3nPu/O97z51z7u31+/0qh9749I88NzbHd336jo8NbUuR2zMxOrM9CfX2/BRzIuboYL6KORxzMOZAzCcxv3dpmzavnL//90gFf3fuYJYP/n3dP/778ZgPYybr3mL2xZxcqDvjDL8P/Ednx6yPeTjm3ZipmKdiNsyutgKBU1bE3DNYUT6LeSDmPIHAsMtjHos5EvN4zEUCgebjmG0xh2J2xCwVCAw7J+ahwUuvO0o8RhEIOdRvxO6O2RNzmUCg2aaY/TFjAoFmy2JeiNkVs0Qg0GxLzN6q4+90CYQ2rY15L+ZKgUCz1YOV5BqBQLMLY96OWSMQaHZ+zGsxqwQCzVYNVpIVAoFmV8S8GnOWQKDZdTGPCgTS7o+5RSDQrD6x8bmYSwUCzep3tp6pWjwLWCB0XX2C4+0CgbT6gH2ZQKDZxTHbBQJp91UtnPkrEEoxe/muQCDh7irzRwoJhJIsHUQiEEjYWmX8u4hAKE19MuN6gUDabQKBtFtjzhQINKu/mmGtQCBts0AgbaNAIO3aKsNluQKhVPWpJ1cLBNLWCATSrhIIpK0WCKRdIhBIWy4QSLtAIJC2RCCQNu9fLz2SeYN6C+wBGtqeidGFtT2LnRUE/u0Zo9/v2wtzaM+UfZDb5pVWEPASC7om20F6b7zsHdUf88tiBQHaWUFmn4gL3EeL5q3PG98p7/GZGJ3fx8cKAgIBgYBAQCAgEBAICAQEAgIBBAICAYGAQEAgIBAQCAgEBAICAQQCAgGBgEBAICAQEAgIBAQCCAQEAgIBgYBAQCAgEBAICAQEAjTq9ft5vhq7Nz79o9jvSe+PLeBfgvE//7HIx2c+HxsrCAgEBAICgZxG2jjgpbsHvHaBFQRO/xkj19u8YAUBgYCD9Ll/LTde9o5aJH9J99hYQaCDK8hs7CU+wS6i3wePjxUEBAICAYHAIjpIX/BKf8sUKwgIBAQCAgGBgEBAICAQEAgIxC4AgYBAQCAgEBAICAQEAgIBgQACAYGAQEAgIBAQCAgEBAICAYEAAgGBgEBAICAQEAgIBAQCAgEEAqch9/ek9+zyTvP4WEGggytIf8zOxgoCAgEvseb66G+87B3115eIpW8LVhAoawWZfSIucB/1bE+x22MFYVH72UssSDshEEg7KhBI+14gkHZEIJB2WCCQ9qlAIO2AQKDZr1YQSPso5jeBQLPJHDciEEr1hkCgWf0HwvcFAs1eijkpEGj2Yq4bEgil+Txmr0Cg2dNVxgu7BEJJ6gukns15gwKhJHUcxwQCw+pTS3bmvlGBUIonYr4RCAz7OmZHGzcsEEqwPeZHgcCwN2N2t3XjAqHLfojZWrX4gXYCoavqKO6qMlx3LhBKVL9r9Urbd0IgdFF9KvuDXbgjAqFrDsXcXGW4nFYglOa7mJsGPyuBwCn1O1abYg526U4JhC74Nub6mP1du2MCoW1fxmyM+biLd04gtOmDmHVde1klELqgvrZjQzVzImJnjXicyKw+6fDemOdLuLMCIae3YrZULZ8+4iUWXTMVc2fMDSXFYQVhvtWXyT4Z80jV0vUcAqGLfhkchO/s+kG4QMjpi5hdgzm2EDZIIPxf9QdJv1zNfBzoZNXixU0CoQuOVzNfXlPH8HrMvirTB0m34Q8BBgDCrqxH8SRKpAAAAABJRU5ErkJggg==",alt:"logo",height:"200"}}),e._v(" "),n("h1",[e._v("调问-全新问卷编辑器")])])])])]),e._v(" "),n("el-col",{attrs:{span:12}},[n("div",{staticStyle:{"text-align":"right"}})])],1)],1),e._v(" "),n("el-main",{staticStyle:{padding:"0px"}},[n("div",[n("div",[n("div",[n("div",{style:e.headerQuToolbarStyle,attrs:{id:"tools_wrap"}},[n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"常用题型"}},[n("div",[n("el-row",[n("el-col",{attrs:{span:20}},[n("el-row",[n("draggable",{attrs:{group:{name:"people",pull:"clone",put:!1},animation:"300","drag-class":"drag-class","ghost-class":"ghost-class","chosen-class":"chosen-class"},on:{start:e.onStart,end:e.onEnd},model:{value:e.arr1,callback:function(t){e.arr1=t},expression:"arr1"}},[n("transition-group",e._l(e.arr1,function(t){return n("el-col",{key:t.id,staticClass:"item",attrs:{span:1}},[n("div",{staticClass:"grid-content"},[e._v("Q"+e._s(t.id))])])}),1)],1)],1)],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content bg-purple-light"},[n("div",[e._v(e._s(e.drag?"拖拽中":"拖拽停止"))])])])],1)],1)]),e._v(" "),n("el-tab-pane",{attrs:{label:"矩阵扩展"}},[e._v("矩阵扩展")]),e._v(" "),n("el-tab-pane",{attrs:{label:"常用题库"}},[e._v("常用题库")])],1)],1),e._v(" "),n("div",{staticStyle:{"margin-top":"137px"}},[n("div",{on:{click:e.domClick}},[n("el-row",[n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content"},[e._v("L")])]),e._v(" "),n("el-col",{attrs:{span:16}},[n("div",{staticClass:"grid-content design-body"},[n("div",{},[e._v("问卷标题")]),e._v(" "),n("draggable",{attrs:{group:"people",animation:"300","drag-class":"drag-class","ghost-class":"ghost-class","chosen-class":"chosen-class"},on:{start:e.onStart,end:e.onEnd},model:{value:e.arr2,callback:function(t){e.arr2=t},expression:"arr2"}},[n("transition-group",e._l(e.arr2,function(t){return n("div",{key:t.id,staticClass:"item"},["radio"===t.quType?[n("qu-redio",{attrs:{"qu-num":t.id}})]:e._e(),e._v(" "),"checkbox"===t.quType?[n("qu-checkbox",{attrs:{child:t.child,"qu-num":t.id},on:{"show-text-editor":e.showEditor}})]:e._e(),e._v(" "),"input"===t.quType?[n("qu-input",{attrs:{"qu-num":t.id}})]:e._e(),e._v(" "),"rate"===t.quType?[n("qu-rate",{attrs:{"qu-num":t.id},on:{"show-text-editor":e.showEditor}})]:e._e(),e._v(" "),"select"===t.quType?[n("qu-select",{attrs:{"qu-num":t.id}})]:e._e()],2)}),0)],1)],1)]),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content"},[e._v("R")])])],1)],1)])])])]),e._v(" "),n("dw-text-editor",{ref:"dwTextEditor",on:{"set-edit-text":e.setEditText}})],1),e._v(" "),n("el-footer",[e._v("Footer")])],1)],1)},staticRenderFns:[]};var Ut=n("VU/8")(Ft,Qt,!1,function(e){n("no+S")},"data-v-a7a7ed6e",null).exports;function Bt(){return x({url:"/api/dwsurvey/app/dw-design-survey/toolbar-qus.do",method:"get"})}function Mt(e){return x({url:"/api/dwsurvey/app/dw-design-survey/save-survey-json.do",method:"post",data:e})}var $t=n("8YIr"),Ht=n.n($t),jt=(n("nCbi"),n("RtFS")),Vt={name:"DwEditor",components:{Editor:jt.a,Toolbar:jt.b},props:{centerDialogVisible:{type:Boolean,default:!1},value:{type:String,default:""}},data:function(){return{editor:null,html:null,toolbarConfig:{},editorConfig:{placeholder:"请输入内容..."},mode:"default"}},mounted:function(){setTimeout(function(){},1500)},beforeDestroy:function(){var e=this.editor;null!=e&&e.destroy()},methods:{onCreated:function(e){this.editor=Ht()(e)},upEditHtml:function(e){this.html=e},confirm:function(){this.html="<p>模拟 Ajax 异步设置内容 HTML</p>"},editDialogClose:function(){this.closeDialogCommon()},editConfirm:function(){var e={dwText:this.editor.getText(),dwHtml:this.editor.getHtml()};this.$emit("upHtmlValue",e)},closeDialogCommon:function(){this.$emit("upVisible",!1)}}},zt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{visible:e.centerDialogVisible,"append-to-body":!0,"destroy-on-close":!0,"show-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,title:"高级编辑器",width:"70%","custom-class":"edit-dialog-root"},on:{"update:visible":function(t){e.centerDialogVisible=t},close:e.closeDialogCommon}},[n("div",{staticStyle:{border:"1px solid #ccc"}},[n("Toolbar",{staticStyle:{"border-bottom":"1px solid #ccc"},attrs:{editor:e.editor,"default-config":e.toolbarConfig,mode:e.mode}}),e._v(" "),n("Editor",{staticStyle:{height:"300px","overflow-y":"hidden"},attrs:{"default-config":e.editorConfig,"auto-focus":!1,mode:e.mode},on:{onCreated:e.onCreated},model:{value:e.html,callback:function(t){e.html=t},expression:"html"}})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.editDialogClose}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.editConfirm}},[e._v("确 定")])],1)])},staticRenderFns:[]};var Gt={name:"DwTextEditLabel",components:{DwEditor:n("VU/8")(Vt,zt,!1,function(e){n("ZTgU")},"data-v-a2dbd1f6",null).exports},model:{prop:"value",event:"update-input"},props:{value:{type:Object,default:function(){}},itemClick:{type:Boolean,default:!1},itemStatus:{type:Object,default:function(){}},btnSize:{type:String,default:"15px"}},data:function(){return{hover:!1,editorText:this.value.dwHtml,centerDialogVisible:!1,clickCount:0}},computed:{itemBtnShow:function(){return this.itemStatus.itemHover||this.itemStatus.itemClick}},watch:{value:function(e,t){console.log("firstName changed from "+t+" to "+e),this.value.hasOwnProperty("isRefreshValue")&&this.value.isRefreshValue&&(this.editorText=this.value.dwHtml,this.$refs.curEdit.innerHTML=this.editorText,this.value.isRefreshValue=!1),this.value.hasOwnProperty("isNew")&&this.value.isNew&&(this.editClick(),this.editFocus(),this.value.isNew=!1)}},methods:{upVisible:function(e){this.centerDialogVisible=e,this.$refs.curEdit.focus()},upHtmlValue:function(e){this.editorText=e.dwHtml,this.centerDialogVisible=!1,this.$emit("upValue",e),this.$refs.curEdit.focus()},editClick:function(){this.$emit("upItemClick",!0),this.selectAllText()},editBlur:function(){this.$emit("upItemClick",!1),this.clickCount=0},inputEdit:function(e){var t={dwText:e.target.innerText,dwHtml:e.target.innerHTML};this.$emit("upValue",t)},mouseleave:function(){this.hover=!1},mouseover:function(){this.hover=!0},focusout:function(){this.hover=!1},addToolbar:function(){this.centerDialogVisible=!0,this.$refs.curDwEditor.upEditHtml(this.value.dwHtml)},upEditorText:function(e){this.editorText=this.value.dwHtml,this.$refs.curEdit.innerHTML=this.editorText},editFocus:function(){this.$refs.curEdit.focus(),this.selectAllText()},selectAllText:function(){if(0===this.clickCount)if(document.selection){var e=document.body.createTextRange();e.moveToElementText(this.$refs.curEdit),e.select()}else if(window.getSelection){var t=document.createRange();t.selectNodeContents(this.$refs.curEdit),window.getSelection().removeAllRanges(),window.getSelection().addRange(t)}this.clickCount=this.clickCount+1}}},Yt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dwEditorRoot dw-width-100bf",on:{input:e.inputEdit,mouseover:e.mouseover,mouseleave:e.mouseleave}},[n("div",{staticClass:"dw-flex-start"},[n("div",{staticClass:"dw-flex-item-auto"},[n("div",{ref:"curEdit",staticClass:"dw-input-default dw-qu-option-text dw-border-blue editor-content-view",class:[e.itemStatus.itemClick?"dw-input-focus":"dwEditRoot",e.itemStatus.itemHover?"dw-input-hover":"dwEditRoot"],attrs:{id:"curEdit",placeholder:e.value.dwPlaceholder,contenteditable:"plaintext-only"},domProps:{innerHTML:e._s(e.editorText)},on:{click:e.editClick,blur:e.editBlur}})]),e._v(" "),n("div",{staticClass:"dw-edit-toolbar"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.itemBtnShow,expression:"itemBtnShow"}],staticClass:"dw-qu-option-text dw-btn-blue-1 dw-cursor-pointer",staticStyle:{"margin-left":"-1px!important"},on:{click:e.addToolbar}},[n("i",{staticClass:"fa fa-align-left"})])])]),e._v(" "),n("div",[n("DwEditor",{ref:"curDwEditor",attrs:{"center-dialog-visible":e.centerDialogVisible},on:{upVisible:e.upVisible,upHtmlValue:e.upHtmlValue}})],1)])},staticRenderFns:[]};var Wt=n("VU/8")(Gt,Yt,!1,function(e){n("fGcr")},"data-v-00e53f37",null).exports,Jt={name:"DwTextEditLabelCommon",components:{DwTextEditLabel:Wt},model:{prop:"value",event:"update-input"},props:{value:{type:Object,default:function(){}},survey:{type:Object,default:function(){}}},data:function(){return{itemStatus:{itemHover:!1,itemClick:!1},itemHover:!1,itemClick:!1,itemIndex:0}},methods:{clickItem:function(){},upItemClick:function(e){this.itemStatus.itemClick=e},mouseleaveItem:function(){this.itemStatus.itemHover=!1},mouseoverItem:function(){this.itemStatus.itemHover=!0},addOptionBefore:function(){},upValue:function(e){console.debug("html",e),this.$emit("update-input",e)},upEditorText:function(e){},editFocus:function(){this.itemStatus.itemClick=!0,this.$refs.curEditLabel.editFocus()}}},Zt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{click:e.clickItem,mouseover:e.mouseoverItem,mouseleave:e.mouseleaveItem}},[n("dw-text-edit-label",{ref:"curEditLabel",attrs:{"item-status":e.itemStatus},on:{upItemClick:e.upItemClick,upValue:e.upValue},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},staticRenderFns:[]};var Kt=n("VU/8")(Jt,Zt,!1,function(e){n("wvgK")},"data-v-7a522cf2",null).exports,Xt=n("kFye");function en(e,t,n){var s=e.questions[t].quType;if("RADIO"===s){var i=e.questions[t].quRadios;i.push(n),e.questions[t].quRadios=i}else if("CHECKBOX"===s){var r=e.questions[t].quCheckboxs;r.push(n),e.questions[t].quCheckboxs=r}else if("SCORE"===s){var o=e.questions[t].quScores;o.push(n),e.questions[t].quScores=o}else if("ORDERQU"===s){var a=e.questions[t].quOrderbys;a.push(n),e.questions[t].quOrderbys=a}else if("MULTIFILLBLANK"===s){var l=e.questions[t].quMultiFillblanks;l.push(n),e.questions[t].quMultiFillblanks=l}return e}function tn(e){e.quTitleObj.isRefreshValue=!0,e.quNoteObj.isRefreshValue=!0,e.hasOwnProperty("dwId")||(e.dwId=Object(Xt.a)());var t=e.quType;return"RADIO"===t?e.quRadios.forEach(function(e,t){return e.optionTitleObj.isRefreshValue=!0,e}):"CHECKBOX"===t?e.quCheckboxs.forEach(function(e,t){return e.optionTitleObj.isRefreshValue=!0,e}):"SCORE"===t?e.quScores.forEach(function(e,t){return e.optionTitleObj.isRefreshValue=!0,e}):"ORDERQU"===t&&e.quOrderbys.forEach(function(e,t){return e.optionTitleObj.isRefreshValue=!0,e}),e}function nn(e){var t=e.questions;return t.forEach(function(e,t){return tn(e)}),e.questions=t,e}var sn={name:"DwPopoverMoreOptions",model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},popoverTitle:{type:String,default:"批量增加选项"},textPlaceholder:{type:String,default:"请输入需要批量新增加的选项内容，每行一个。"},addOrEdit:{type:String,default:"add"}},data:function(){return{itemIndex:0,moreOptionText:""}},methods:{showPopoverLoad:function(){"edit"===this.addOrEdit&&(this.moreOptionText=function(e,t){var n=e.questions[t].quType,s=[];"RADIO"===n?s=e.questions[t].quRadios:"CHECKBOX"===n&&(s=e.questions[t].quCheckboxs);var i="";return s.forEach(function(e,t){i+=e.optionTitleObj.dwText+"\r\n"}),i}(this.survey,this.index))},clickShowPopoverEvent:function(){this.$emit("click-item")},cancelAddOptionEvent:function(){},upAllItemClick:function(e){},addMoreOptionEvent:function(){var e,t,n,s,i=this;if(this.moreOptionText.length>0){var r=this.moreOptionText.split(/\r\n|[\r\n]/);if(void 0!==r&&r.length>0){"edit"===this.addOrEdit&&(e=this.survey,t=this.index,n=function(e){i.survey=e},"RADIO"===(s=e.questions[t].quType)?e.questions[t].quRadios=[]:"CHECKBOX"===s?e.questions[t].quCheckboxs=[]:"SCORE"===s&&(e.questions[t].quOrderbys=[]),n(e));for(var o=0;o<r.length;o++){var a={id:null,optionTitleObj:{dwHtml:r[o],dwText:r[o],dwPlaceholder:"请输入内容"},itemClick:!1};a.dwId=Object(Xt.a)(),this.dwAddQuItem(a)}this.moreOptionText=""}}},dwAddQuItem:function(e){var t=en(this.survey,this.index,e);this.$emit("update-survey",t)}}},rn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{placement:"bottom-start",width:"400",trigger:"click","popper-class":"dw-popover-more-options"},on:{show:e.showPopoverLoad}},[n("div",[n("div",{staticStyle:{"font-size":"14px","padding-bottom":"5px"}},[e._v(e._s(e.popoverTitle))]),e._v(" "),n("el-input",{attrs:{placeholder:e.textPlaceholder,type:"textarea",rows:"10"},model:{value:e.moreOptionText,callback:function(t){e.moreOptionText=t},expression:"moreOptionText"}}),e._v(" "),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"text",size:"small"},on:{click:e.cancelAddOptionEvent}},[e._v("取消")]),e._v(" "),n("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"primary",size:"small"},on:{click:e.addMoreOptionEvent}},[e._v("确认")])],1)],1),e._v(" "),n("div",{attrs:{slot:"reference"},on:{click:function(t){return t.stopPropagation(),e.clickShowPopoverEvent.apply(null,arguments)}},slot:"reference"},[e._t("default")],2)])},staticRenderFns:[]};var on=n("VU/8")(sn,rn,!1,function(e){n("6NPK"),n("FGNV")},"data-v-055b847a",null).exports,an={name:"DwInputProps",model:{prop:"inputProp",event:"update-input-prop"},props:{index:{type:Number,default:0},inputProp:{type:Object,default:function(){}},survey:{type:Object,default:function(){}}},data:function(){return{checkType:[{value:"NO",label:"无验证"},{value:"EMAIL",label:"Email"},{value:"NUM",label:"数字"},{value:"DIGITS",label:"整数"},{value:"TEL_PHONE",label:"手机或电话"},{value:"TIME",label:"时间"},{value:"DATE",label:"日期"},{value:"DATETIME",label:"日期时间"},{value:"ZIPCODE",label:"邮政编码"},{value:"TEL",label:"电话号码"},{value:"PHONE",label:"手机号码"},{value:"IDENT_CODE",label:"身份证号"},{value:"URL",label:"网址"},{value:"UNSTRCN",label:"禁止中文"},{value:"STRCN",label:"仅许中文"}]}},methods:{changeCheckType:function(){var e=this.inputProp.commonAttr.checkType,t=this.inputProp.dateTimeAttr.dateFormat;"TIME"===e&&5!==t&&6!==t?this.inputProp.dateTimeAttr.dateFormat=5:"DATE"===e&&1!==t&&2!==t&&3!==t?this.inputProp.dateTimeAttr.dateFormat=3:"DATETIME"===e&&(this.inputProp.dateTimeAttr.dateFormat=4)},changeDateAttrs:function(e){if(console.debug("val",e),e){var t=e.map(function(e,t){if("more"===e||"range"===e)return e}),n=e.map(function(e,t){if("more"!==e&&"range"!==e)return e});t.length>0&&n.push(t[t.length-1]),this.inputProp.dateTimeAttr.attrs=n}console.debug("inputProp.dateTimeAttr.attrs",this.inputProp.dateTimeAttr.attrs)}}},ln={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{"label-width":"80px",size:"mini"}},[n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"FILLBLANK"!==e.survey.questions[e.index].quType,expression:"survey.questions[index].quType!=='FILLBLANK'"}],attrs:{label:"是否必填"}},[n("el-radio-group",{model:{value:e.inputProp.commonAttr.isRequired,callback:function(t){e.$set(e.inputProp.commonAttr,"isRequired",t)},expression:"inputProp.commonAttr.isRequired"}},[n("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"校验规则"}},[n("el-select",{attrs:{placeholder:"请选择数据校验规则"},on:{change:e.changeCheckType},model:{value:e.inputProp.commonAttr.checkType,callback:function(t){e.$set(e.inputProp.commonAttr,"checkType",t)},expression:"inputProp.commonAttr.checkType"}},e._l(e.checkType,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),n("el-select",{directives:[{name:"show",rawName:"v-show",value:"TIME"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'TIME'"}],staticStyle:{width:"290px"},attrs:{placeholder:"日期格式"},model:{value:e.inputProp.dateTimeAttr.dateFormat,callback:function(t){e.$set(e.inputProp.dateTimeAttr,"dateFormat",t)},expression:"inputProp.dateTimeAttr.dateFormat"}},[n("el-option",{attrs:{value:5,label:"时分秒（HH:mm:ss）"}}),e._v(" "),n("el-option",{attrs:{value:6,label:"时分（HH:mm）"}}),e._v(" "),n("el-option",{attrs:{value:7,label:"时分下拉控件（HH:mm）"}})],1),e._v(" "),n("el-select",{directives:[{name:"show",rawName:"v-show",value:"DATE"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'DATE'"}],staticStyle:{width:"290px"},attrs:{placeholder:"日期格式"},model:{value:e.inputProp.dateTimeAttr.dateFormat,callback:function(t){e.$set(e.inputProp.dateTimeAttr,"dateFormat",t)},expression:"inputProp.dateTimeAttr.dateFormat"}},[n("el-option",{attrs:{value:3,label:"年月日（YYYY-MM-DD）"}}),e._v(" "),n("el-option",{attrs:{value:2,label:"年月（YYYY-MM）"}}),e._v(" "),n("el-option",{attrs:{value:1,label:"年（YYYY）"}})],1),e._v(" "),n("el-select",{directives:[{name:"show",rawName:"v-show",value:"DATETIME"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'DATETIME'"}],staticStyle:{width:"290px"},attrs:{placeholder:"日期格式"},model:{value:e.inputProp.dateTimeAttr.dateFormat,callback:function(t){e.$set(e.inputProp.dateTimeAttr,"dateFormat",t)},expression:"inputProp.dateTimeAttr.dateFormat"}},[n("el-option",{attrs:{value:4,label:"年月日时分秒（YYYY-MM-DD HH:mm:ss）"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"输入提示"}},[n("el-input",{model:{value:e.inputProp.commonAttr.placeholder,callback:function(t){e.$set(e.inputProp.commonAttr,"placeholder",t)},expression:"inputProp.commonAttr.placeholder"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"默认内容"}},[n("el-input",{model:{value:e.inputProp.commonAttr.defaultValue,callback:function(t){e.$set(e.inputProp.commonAttr,"defaultValue",t)},expression:"inputProp.commonAttr.defaultValue"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"显示行数"}},[n("el-input-number",{attrs:{min:1},model:{value:e.inputProp.commonAttr.inputRow,callback:function(t){e.$set(e.inputProp.commonAttr,"inputRow",t)},expression:"inputProp.commonAttr.inputRow"}}),e._v(" 行\n  ")],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"TIME"===e.inputProp.commonAttr.checkType||"DATE"===e.inputProp.commonAttr.checkType||"DATETIME"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'TIME' || inputProp.commonAttr.checkType === 'DATE' || inputProp.commonAttr.checkType === 'DATETIME'"}],attrs:{label:"属性配置"}},[n("el-checkbox-group",{on:{change:e.changeDateAttrs},model:{value:e.inputProp.dateTimeAttr.attrs,callback:function(t){e.$set(e.inputProp.dateTimeAttr,"attrs",t)},expression:"inputProp.dateTimeAttr.attrs"}},[n("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:"DATE"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'DATE'"}],attrs:{label:"more"}},[e._v("可选择多个日期")]),e._v(" "),n("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:1!==e.inputProp.dateTimeAttr.dateFormat,expression:"inputProp.dateTimeAttr.dateFormat!==1"}],attrs:{label:"range"}},[e._v("使用范围选择器")])],1)],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"TIME"===e.inputProp.commonAttr.checkType&&7===e.inputProp.dateTimeAttr.dateFormat||"TIME"===e.inputProp.commonAttr.checkType&&7!==e.inputProp.dateTimeAttr.dateFormat&&!e.inputProp.dateTimeAttr.attrs.includes("range"),expression:"(inputProp.commonAttr.checkType === 'TIME' && inputProp.dateTimeAttr.dateFormat===7) || (inputProp.commonAttr.checkType === 'TIME' && inputProp.dateTimeAttr.dateFormat!==7 && !inputProp.dateTimeAttr.attrs.includes('range'))"}],attrs:{label:"时间限制"}},[n("el-time-picker",{directives:[{name:"show",rawName:"v-show",value:7===e.inputProp.dateTimeAttr.dateFormat||7!==e.inputProp.dateTimeAttr.dateFormat&&!e.inputProp.dateTimeAttr.attrs.includes("range"),expression:"inputProp.dateTimeAttr.dateFormat===7 || (inputProp.dateTimeAttr.dateFormat!==7 && !inputProp.dateTimeAttr.attrs.includes('range'))"}],staticStyle:{"margin-right":"10px",width:"300px"},attrs:{format:"HH:mm","value-format":"HH:mm","is-range":""},model:{value:e.inputProp.dateTimeAttr.timeRange.range,callback:function(t){e.$set(e.inputProp.dateTimeAttr.timeRange,"range",t)},expression:"inputProp.dateTimeAttr.timeRange.range"}}),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:7===e.inputProp.dateTimeAttr.dateFormat,expression:"inputProp.dateTimeAttr.dateFormat === 7"}]},[e._v("步长 "),n("el-time-picker",{staticStyle:{width:"100px"},attrs:{format:"HH:mm","value-format":"HH:mm"},model:{value:e.inputProp.dateTimeAttr.timeRange.step,callback:function(t){e.$set(e.inputProp.dateTimeAttr.timeRange,"step",t)},expression:"inputProp.dateTimeAttr.timeRange.step"}})],1)],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"NUM"===e.inputProp.commonAttr.checkType||"DIGITS"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'NUM' || inputProp.commonAttr.checkType === 'DIGITS'"}],attrs:{label:"数据范围"}},[n("span",[e._v("\n      最小值 "),n("el-input-number",{staticStyle:{"margin-right":"10px"},model:{value:e.inputProp.numAttr.min,callback:function(t){e.$set(e.inputProp.numAttr,"min",t)},expression:"inputProp.numAttr.min"}}),e._v("\n      最大值 "),n("el-input-number",{model:{value:e.inputProp.numAttr.max,callback:function(t){e.$set(e.inputProp.numAttr,"max",t)},expression:"inputProp.numAttr.max"}})],1)]),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"NUM"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'NUM'"}],staticStyle:{display:"none"},attrs:{label:"保留精度"}},[n("el-input-number",{model:{value:e.inputProp.numAttr.precision,callback:function(t){e.$set(e.inputProp.numAttr,"precision",t)},expression:"inputProp.numAttr.precision"}}),e._v(" 位\n  ")],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"NUM"!==e.inputProp.commonAttr.checkType&&"DIGITS"!==e.inputProp.commonAttr.checkType&&"TIME"!==e.inputProp.commonAttr.checkType&&"DATE"!==e.inputProp.commonAttr.checkType&&"DATETIME"!==e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType !== 'NUM' && inputProp.commonAttr.checkType !== 'DIGITS' && inputProp.commonAttr.checkType !== 'TIME' && inputProp.commonAttr.checkType !== 'DATE' && inputProp.commonAttr.checkType !== 'DATETIME'"}],attrs:{label:"数据范围"}},[e._v("\n    最少字数 "),n("el-input-number",{staticStyle:{"margin-right":"10px"},model:{value:e.inputProp.commonAttr.minlength,callback:function(t){e.$set(e.inputProp.commonAttr,"minlength",t)},expression:"inputProp.commonAttr.minlength"}}),e._v("\n    最大字数 "),n("el-input-number",{model:{value:e.inputProp.commonAttr.maxlength,callback:function(t){e.$set(e.inputProp.commonAttr,"maxlength",t)},expression:"inputProp.commonAttr.maxlength"}})],1)],1)},staticRenderFns:[]};var un={name:"DwPopoverQuAttrs",components:{DwInputProps:n("VU/8")(an,ln,!1,function(e){n("VyFQ")},"data-v-cdd0e436",null).exports},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},popoverTitle:{type:String,default:"题目属性"}},data:function(){return{itemIndex:0,checked:!0,tempForm:{selectOptionIndex:0}}},methods:{clickShowPopoverEvent:function(){this.$emit("click-item")},cancelAddOptionEvent:function(){},upAllItemClick:function(e){}}},dn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{placement:"right-start",width:"600",trigger:"click","popper-class":"dw-qu-set-popper"}},[n("div",[n("div",{staticStyle:{"font-size":"14px","padding-bottom":"5px"}},[n("div",{staticClass:"dw-qu-item"},[n("div",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.popoverTitle))]),e._v(" "),n("div",{staticClass:"dw-display-flex-right"})])]),e._v(" "),n("div",{staticStyle:{padding:"5px"}},[n("div",{staticStyle:{"min-height":"50px"}},[n("el-form",{ref:"form",attrs:{"label-width":"80px",size:"mini"}},[n("el-form-item",{attrs:{label:"是否必答"}},[n("el-radio-group",{model:{value:e.survey.questions[e.index].isRequired,callback:function(t){e.$set(e.survey.questions[e.index],"isRequired",t)},expression:"survey.questions[index].isRequired"}},[n("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),"RADIO"===e.survey.questions[e.index].quType||"CHECKBOX"===e.survey.questions[e.index].quType?[n("el-form-item",{attrs:{label:"显示风格"}},[n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择显示风格"},model:{value:e.survey.questions[e.index].hv,callback:function(t){e.$set(e.survey.questions[e.index],"hv",t)},expression:"survey.questions[index].hv"}},[n("el-option",{attrs:{value:1,label:"横向"}}),e._v(" "),n("el-option",{attrs:{value:2,label:"竖向"}}),e._v(" "),n("el-option",{attrs:{value:4,label:"下拉"}})],1),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:1===e.survey.questions[e.index].hv,expression:"survey.questions[index].hv === 1"}]},[e._v("每行显示列数 "),n("el-input-number",{staticStyle:{"margin-right":"10px"},model:{value:e.survey.questions[e.index].cellCount,callback:function(t){e.$set(e.survey.questions[e.index],"cellCount",t)},expression:"survey.questions[index].cellCount"}})],1)],1),e._v(" "),"RADIO"===e.survey.questions[e.index].quType?[n("div",{staticStyle:{border:"2px solid rgb(212 225 237)","border-radius":"4px"}},[n("div",{staticStyle:{background:"rgb(212 225 237)",padding:"8px 0"}},[n("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"选项属性"}},[e._v("\n                      配置选项\n                      "),n("el-select",{attrs:{placeholder:"请选择选项"},model:{value:e.tempForm.selectOptionIndex,callback:function(t){e.$set(e.tempForm,"selectOptionIndex",t)},expression:"tempForm.selectOptionIndex"}},e._l(e.survey.questions[e.index].quRadios,function(e,t){return n("el-option",{key:"quCheckbox_"+t,attrs:{label:e.optionTitleObj.dwText,value:t}})}),1),e._v("\n                      的属性规则如下\n                    ")],1)],1),e._v(" "),n("div",{staticStyle:{"padding-top":"8px","padding-right":"8px"}},[n("el-form-item",{attrs:{label:"选项说明"}},[n("el-radio-group",{model:{value:e.survey.questions[e.index].quRadios[e.tempForm.selectOptionIndex].showOptionNote,callback:function(t){e.$set(e.survey.questions[e.index].quRadios[e.tempForm.selectOptionIndex],"showOptionNote",t)},expression:"survey.questions[index].quRadios[tempForm.selectOptionIndex].showOptionNote"}},[n("el-radio",{attrs:{label:1}},[e._v("显示")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("不显示")])],1)],1),e._v(" "),1===e.survey.questions[e.index].quRadios[e.tempForm.selectOptionIndex].showOptionNote?[n("dw-input-props",{attrs:{survey:e.survey,index:e.index},model:{value:e.survey.questions[e.index].quRadios[e.tempForm.selectOptionIndex].inputAttr,callback:function(t){e.$set(e.survey.questions[e.index].quRadios[e.tempForm.selectOptionIndex],"inputAttr",t)},expression:"survey.questions[index].quRadios[tempForm.selectOptionIndex].inputAttr"}})]:e._e()],2)])]:"CHECKBOX"===e.survey.questions[e.index].quType?[n("el-form-item",{attrs:{label:"选择个数"}},[e._v("\n                  最少 "),n("el-input-number",{staticStyle:{"margin-right":"10px"},model:{value:e.survey.questions[e.index].minLimit,callback:function(t){e.$set(e.survey.questions[e.index],"minLimit",t)},expression:"survey.questions[index].minLimit"}}),e._v("\n                  最多 "),n("el-input-number",{model:{value:e.survey.questions[e.index].maxLimit,callback:function(t){e.$set(e.survey.questions[e.index],"maxLimit",t)},expression:"survey.questions[index].maxLimit"}})],1),e._v(" "),n("div",{staticStyle:{border:"2px solid rgb(212 225 237)","border-radius":"4px"}},[n("div",{staticStyle:{background:"rgb(212 225 237)",padding:"8px 0"}},[n("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"选项属性"}},[e._v("\n                      配置选项\n                      "),n("el-select",{attrs:{placeholder:"请选择选项"},model:{value:e.tempForm.selectOptionIndex,callback:function(t){e.$set(e.tempForm,"selectOptionIndex",t)},expression:"tempForm.selectOptionIndex"}},e._l(e.survey.questions[e.index].quCheckboxs,function(e,t){return n("el-option",{key:"quCheckbox_"+t,attrs:{label:e.optionTitleObj.dwText,value:t}})}),1),e._v("\n                      的属性规则如下\n                    ")],1)],1),e._v(" "),n("div",{staticStyle:{"padding-top":"8px","padding-right":"8px"}},[n("el-form-item",{attrs:{label:"选项说明"}},[n("el-radio-group",{model:{value:e.survey.questions[e.index].quCheckboxs[e.tempForm.selectOptionIndex].showOptionNote,callback:function(t){e.$set(e.survey.questions[e.index].quCheckboxs[e.tempForm.selectOptionIndex],"showOptionNote",t)},expression:"survey.questions[index].quCheckboxs[tempForm.selectOptionIndex].showOptionNote"}},[n("el-radio",{attrs:{label:1}},[e._v("显示")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("不显示")])],1)],1),e._v(" "),1===e.survey.questions[e.index].quCheckboxs[e.tempForm.selectOptionIndex].showOptionNote?[n("dw-input-props",{attrs:{survey:e.survey,index:e.index},model:{value:e.survey.questions[e.index].quCheckboxs[e.tempForm.selectOptionIndex].inputAttr,callback:function(t){e.$set(e.survey.questions[e.index].quCheckboxs[e.tempForm.selectOptionIndex],"inputAttr",t)},expression:"survey.questions[index].quCheckboxs[tempForm.selectOptionIndex].inputAttr"}})]:e._e()],2)])]:e._e()]:"FILLBLANK"===e.survey.questions[e.index].quType?[n("dw-input-props",{attrs:{survey:e.survey,index:e.index},model:{value:e.survey.questions[e.index].quAttr.inputAttr,callback:function(t){e.$set(e.survey.questions[e.index].quAttr,"inputAttr",t)},expression:"survey.questions[index].quAttr.inputAttr"}})]:"SCORE"===e.survey.questions[e.index].quType?[n("el-form-item",{attrs:{label:"分值区间"}},[e._v("\n                从 "),n("el-input-number",{staticStyle:{"margin-right":"10px"},model:{value:e.survey.questions[e.index].paramInt01,callback:function(t){e.$set(e.survey.questions[e.index],"paramInt01",t)},expression:"survey.questions[index].paramInt01"}}),e._v("\n                到 "),n("el-input-number",{model:{value:e.survey.questions[e.index].paramInt02,callback:function(t){e.$set(e.survey.questions[e.index],"paramInt02",t)},expression:"survey.questions[index].paramInt02"}})],1)]:"MULTIFILLBLANK"===e.survey.questions[e.index].quType?[n("el-form-item",{attrs:{label:"最少回答"}},[n("el-input-number",{staticStyle:{"margin-right":"10px"},model:{value:e.survey.questions[e.index].paramInt01,callback:function(t){e.$set(e.survey.questions[e.index],"paramInt01",t)},expression:"survey.questions[index].paramInt01"}}),e._v(" 项\n              ")],1),e._v(" "),n("div",{staticStyle:{border:"2px solid rgb(212 225 237)","border-radius":"4px"}},[n("div",{staticStyle:{background:"rgb(212 225 237)",padding:"8px 0"}},[n("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"选项属性"}},[e._v("\n                    配置选项 "),n("el-select",{attrs:{placeholder:"请选择选项"},model:{value:e.tempForm.selectOptionIndex,callback:function(t){e.$set(e.tempForm,"selectOptionIndex",t)},expression:"tempForm.selectOptionIndex"}},e._l(e.survey.questions[e.index].quMultiFillblanks,function(e,t){return n("el-option",{key:"quMFbk"+t,attrs:{label:e.optionTitleObj.dwText,value:t}})}),1),e._v(" 的属性规则如下\n                  ")],1)],1),e._v(" "),n("div",{staticStyle:{"padding-top":"8px","padding-right":"8px"}},[n("dw-input-props",{attrs:{survey:e.survey,index:e.index},model:{value:e.survey.questions[e.index].quMultiFillblanks[e.tempForm.selectOptionIndex].inputAttr,callback:function(t){e.$set(e.survey.questions[e.index].quMultiFillblanks[e.tempForm.selectOptionIndex],"inputAttr",t)},expression:"survey.questions[index].quMultiFillblanks[tempForm.selectOptionIndex].inputAttr"}})],1)])]:"UPLOADFILE"===e.survey.questions[e.index].quType?[n("el-form-item",{attrs:{label:"文件类型"}},[n("el-select",{staticStyle:{width:"290px"},attrs:{placeholder:"请选择文件类型"},model:{value:e.survey.questions[e.index].fileAccept,callback:function(t){e.$set(e.survey.questions[e.index],"fileAccept",t)},expression:"survey.questions[index].fileAccept"}},[n("el-option",{attrs:{value:0,label:"不限"}}),e._v(" "),n("el-option",{attrs:{value:1,label:"图片(.jpg,.jpeg,.png,.gif,.bmp)"}}),e._v(" "),n("el-option",{attrs:{value:2,label:"文档(.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx)"}}),e._v(" "),n("el-option",{attrs:{value:100,label:"自定义"}})],1),e._v(" "),n("el-input",{directives:[{name:"show",rawName:"v-show",value:100===e.survey.questions[e.index].fileAccept,expression:"survey.questions[index].fileAccept === 100"}],staticStyle:{width:"160px"},model:{value:e.survey.questions[e.index].customFileAccept,callback:function(t){e.$set(e.survey.questions[e.index],"customFileAccept",t)},expression:"survey.questions[index].customFileAccept"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"文件参数"}},[e._v("\n                上传附件数 "),n("el-input-number",{staticStyle:{"margin-right":"15px"},model:{value:e.survey.questions[e.index].fileLimit,callback:function(t){e.$set(e.survey.questions[e.index],"fileLimit",t)},expression:"survey.questions[index].fileLimit"}}),e._v("\n                单个文件最大支持 "),n("el-input-number",{model:{value:e.survey.questions[e.index].fileSize,callback:function(t){e.$set(e.survey.questions[e.index],"fileSize",t)},expression:"survey.questions[index].fileSize"}}),e._v(" M\n                "),n("div",{staticStyle:{color:"#c0c4cc","font-size":"12px"}},[e._v(" (空或0表示限制)")])],1)]:e._e()],2)],1)])]),e._v(" "),n("div",{attrs:{slot:"reference"},on:{click:e.clickShowPopoverEvent},slot:"reference"},[e._t("default")],2)])},staticRenderFns:[]};var cn=n("VU/8")(un,dn,!1,function(e){n("8vOm"),n("16b9")},"data-v-2f65a220",null).exports;function vn(e){var t=e.questions;void 0!==t&&(console.debug("questions",t),t.map(function(e,t){console.debug("item",e),pn(e)}))}function pn(e){var t=e.quType;"RADIO"===t?function(e,t){e.quRadios.map(function(e,t){e.checked=!1})}(e):"CHECKBOX"===t?function(e){e.quCheckboxs.map(function(e,t){e.checked=!1})}(e):"ORDERQU"===t?function(e){e.quOrderbys.forEach(function(e,t){e.checked=!1,e.orderIndex=0})}(e):"MULTIFILLBLANK"===t?function(e){e.quMultiFillblanks.map(function(e,t){e.inputText=""})}(e):"SCORE"===t?function(e){e.quScores.map(function(e,t){e.checked=!1,e.answerScore=0})}(e):"FILLBLANK"===t?function(e){e.answer=null}(e):"UPLOADFILE"===t&&function(e){e.hasOwnProperty("upFileList")&&(e.upFileList=null)}(e),e.hasOwnProperty("anQuestion")&&delete e.anQuestion,e.validateObj={errorText:"",isOk:!0,isAnswerOk:!1}}function mn(e,t){var n=0;return null!==e&&e.forEach(function(e,s){e.logicType===t&&n++}),n}function yn(e){var t=e.questions;null!==t&&t.forEach(function(e,t){})}function hn(e){var t=JSON.parse(e);return t.questions=[],t}var fn={name:"DwQuLogicShowGo",components:{QuInput:Lt},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},popoverTitle:{type:String,default:"批量增加选项"},textPlaceholder:{type:String,default:"请输入需要批量新增加的选项内容，每行一个。"},addOrEdit:{type:String,default:"add"},logicType:{type:String,default:""}},data:function(){return{itemIndex:0,activeName:"first"}},computed:{logicNum:function(){return mn(this.survey.questions[this.index].questionLogics,this.logicType)},options:function(){return e=this.survey.questions[this.index],"RADIO"===(t=e.quType)?e.quRadios:"CHECKBOX"===t?e.quCheckboxs:"ORDERQU"===t?e.quOrderbys:"MULTIFILLBLANK"===t?e.quMultiFillblanks:"SCORE"===t?e.quScores:void 0;var e,t},questions:function(){return function(e,t){var n=[];if(null!==e){var s=1;e.forEach(function(e,i){"PAGETAG"!==e.quType&&"PARAGRAPH"!==e.quType&&(e.quNum=s++,i>t&&n.push(e))})}return n}(this.survey.questions,this.index)}},methods:{addQuLogic:function(){var e={dwId:null,ckQuId:"",cgQuItemId:null,skQuId:null,logicType:this.logicType,geLe:"",scoreNum:0,error:!1};e.dwId=Object(Xt.a)(),this.survey.questions[this.index].questionLogics.push(e)},deleteQuLogic:function(e){this.survey.questions[this.index].questionLogics.splice(e,1)}}},wn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"0 10px"}},[n("div",[e.logicNum>0?n("div",[e._l(e.survey.questions[e.index].questionLogics,function(t,s){return n("div",{key:"logic_"+s},[t.logicType===e.logicType?n("div",[t.error?n("div",[n("div",{staticStyle:{color:"red","font-size":"12px"}},[e._v("请确认每个配置项都有合适的值")])]):e._e(),e._v(" "),n("div",{staticClass:"dw-design-logic-item"},["FILLBLANK"===e.survey.questions[e.index].quType||"UPLOADFILE"===e.survey.questions[e.index].quType?[n("span",[e._v("如果本题被回答，")])]:[n("span",[e._v("如果本题选项")]),e._v(" "),n("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"请选择本题选项",size:"mini",multiple:""},model:{value:t.cgQuItemId,callback:function(n){e.$set(t,"cgQuItemId",n)},expression:"item.cgQuItemId"}},e._l(e.options,function(e,t){return n("el-option",{key:"quOption_"+t,attrs:{value:e.dwId,label:e.optionTitleObj.dwText}})}),1),e._v(" "),"ORDERQU"===e.survey.questions[e.index].quType?n("span",[e._v("排名\n                "),n("el-select",{staticStyle:{width:"70px"},attrs:{placeholder:"请选择关系",size:"mini"},model:{value:t.geLe,callback:function(n){e.$set(t,"geLe",n)},expression:"item.geLe"}},[n("el-option",{attrs:{value:"LTE",label:"小于等于"}}),e._v(" "),n("el-option",{attrs:{value:"GTE",label:"大于等于"}}),e._v(" "),n("el-option",{attrs:{value:"LT",label:"小于"}}),e._v(" "),n("el-option",{attrs:{value:"GT",label:"大于"}})],1),e._v(" "),n("el-input-number",{staticStyle:{width:"60px"},attrs:{controls:!1,size:"mini"},model:{value:t.scoreNum,callback:function(n){e.$set(t,"scoreNum",n)},expression:"item.scoreNum"}}),e._v("\n                名，\n              ")],1):"SCORE"===e.survey.questions[e.index].quType?n("span",[e._v("得分\n                "),n("el-select",{staticStyle:{width:"70px"},attrs:{placeholder:"请选择关系",size:"mini"},model:{value:t.geLe,callback:function(n){e.$set(t,"geLe",n)},expression:"item.geLe"}},[n("el-option",{attrs:{value:"LTE",label:"小于等于"}}),e._v(" "),n("el-option",{attrs:{value:"GTE",label:"大于等于"}}),e._v(" "),n("el-option",{attrs:{value:"LT",label:"小于"}}),e._v(" "),n("el-option",{attrs:{value:"GT",label:"大于"}})],1),e._v(" "),n("el-input-number",{staticStyle:{width:"60px"},attrs:{controls:!1,size:"mini"},model:{value:t.scoreNum,callback:function(n){e.$set(t,"scoreNum",n)},expression:"item.scoreNum"}}),e._v("\n                分，\n              ")],1):"MULTIFILLBLANK"===e.survey.questions[e.index].quType?n("span",[e._v("被回答，")]):n("span",[e._v("被选项，")])],e._v(" "),"GO"===t.logicType?n("span",[e._v("则跳转")]):"SHOW"===t.logicType?n("span",[e._v("则显示")]):e._e(),e._v(" "),n("el-select",{staticStyle:{width:"130px"},attrs:{multiple:"SHOW"===e.logicType,placeholder:"请选择题目",size:"mini"},model:{value:t.skQuId,callback:function(n){e.$set(t,"skQuId",n)},expression:"item.skQuId"}},e._l(e.questions,function(e,t){return n("el-option",{key:"question_"+t,attrs:{value:e.dwId,label:"Q"+e.quNum+"、"+e.quTitleObj.dwText}})}),1),e._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.deleteQuLogic(s)}}})],2)]):e._e()])}),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-button",{attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-plus"},on:{click:e.addQuLogic}},[e._v("新增逻辑")])],1)],2):n("div",[n("el-empty",{attrs:{"image-size":30,description:"暂无相关逻辑数据"}},[n("el-button",{attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-plus"},on:{click:e.addQuLogic}},[e._v("新增逻辑")])],1)],1)])])},staticRenderFns:[]};var gn={name:"DwPopoverQuLogics",components:{DwQuLogicShowGo:n("VU/8")(fn,wn,!1,function(e){n("VDb6")},"data-v-2515a56e",null).exports},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},popoverTitle:{type:String,default:"批量增加选项"},textPlaceholder:{type:String,default:"请输入需要批量新增加的选项内容，每行一个。"},addOrEdit:{type:String,default:"add"}},data:function(){return{itemIndex:0,activeName:"logicShowTab"}},computed:{logicNumGo:function(){return mn(this.survey.questions[this.index].questionLogics,"GO")},logicNumShow:function(){return mn(this.survey.questions[this.index].questionLogics,"SHOW")},popoverValue:function(){return!1}},methods:{showPopoverLoad:function(){var e=!1,t=!1;this.survey.questions[this.index].questionLogics.forEach(function(n,s){"GO"===n.logicType&&(e=!0),"SHOW"===n.logicType&&(t=!0)}),t?this.activeName="logicShowTab":e&&(this.activeName="logicGoTab")},clickShowPopoverEvent:function(){},upAllItemClick:function(e){},beforeLeave:function(e,t){return this.checkQuLogic(!0)},checkQuLogic:function(e){var t=!0;if(this.survey.questions[this.index].questionLogics.length>0){var n=this.survey.questions[this.index].quType;this.survey.questions[this.index].questionLogics.forEach(function(s,i){var r=!1;"FILLBLANK"===n||"UPLOADFILE"===n?(null===s.skQuId||s.skQuId.length<=0)&&(r=!0):(null===s.cgQuItemId||null===s.skQuId||s.cgQuItemId.length<=0||s.skQuId.length<=0)&&(r=!0),r?e&&(s.error=!0,t=!1):s.error=!1}),t||(e&&this.$message({message:"提醒，如果增加了逻辑配置项，请确认每个配置项都有合适的值！",customClass:"dw-msg-waring",iconClass:"el-icon-info"}),this.clickShowPopoverEvent())}return t}}},xn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{placement:"right-start",width:"700",trigger:"click","popper-class":"dw-qu-set-popper"},on:{show:e.showPopoverLoad}},[n("div",[n("div",[n("el-tabs",{attrs:{"before-leave":e.beforeLeave},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"显示逻辑",name:"logicShowTab"}},[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("显示逻辑 "),n("el-badge",{staticClass:"mark",attrs:{value:e.logicNumShow,hidden:e.logicNumShow<=0}})],1),e._v(" "),n("dw-qu-logic-show-go",{attrs:{index:e.index,"logic-type":"SHOW"},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1),e._v(" "),n("el-tab-pane",{attrs:{label:"跳转逻辑",name:"logicGoTab"}},[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("跳转逻辑 "),n("el-badge",{staticClass:"mark",attrs:{value:e.logicNumGo,hidden:e.logicNumGo<=0}})],1),e._v(" "),n("dw-qu-logic-show-go",{attrs:{index:e.index,"logic-type":"GO"},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)],1)],1)]),e._v(" "),n("div",{attrs:{slot:"reference"},on:{click:e.clickShowPopoverEvent},slot:"reference"},[e._t("default")],2)])},staticRenderFns:[]};var bn=n("VU/8")(gn,xn,!1,function(e){n("nkun"),n("5zkL")},"data-v-f5d045fa",null).exports;function Cn(e,t,n){(function(e){return x({url:"/api/dwsurvey/app/dw-design-survey/survey-json-by-survey-id.do",method:"get",params:e})})(e).then(function(e){console.debug("surveyJsonBySurveyId",e);var s=e.data;if(200===s.resultCode){var i=s.data;null!==i&&i.hasOwnProperty("surveyJsonText")&&null!==i.surveyJsonText&&""!==i.surveyJsonText?t(In(JSON.parse(i.surveyJsonText))):n()}})}function _n(e,t){Cn(e,t,function(){!function(e,t){(function(e){return x({url:"/api/dwsurvey/app/design/survey-design/surveyAll.do",method:"post",params:e})})(e).then(function(e){console.debug("querySurveyAll",e);var n=e.data;if(200===n.resultCode){console.debug("httpResult.data",n.data);var s=In(n.data);console.debug("parseResultData",s),t(s)}})}(e,t)})}var An={pageSize:function(e){var t=1;return e.questions.forEach(function(e,n){"PAGETAG"===e.quType&&t++}),t},quInPageNum:function(e,t){var n=0;return e.questions.forEach(function(e,s){"PAGETAG"===e.quType&&s<=t&&n++}),n}},Sn=n("d7EF"),qn=n.n(Sn),kn={rgbToHex:function(e){if(void 0!==e&&null!==e){var t=e.replace("rgb","").replace("(","").replace(")","").split(",");return"#"+parseInt(t[0]).toString(16)+parseInt(t[1]).toString(16)+parseInt(t[2]).toString(16)}return null},hexToRgb:function(e){if(void 0!==e&&null!==e){var t=e.replace("#","");if(t.length%3)return"hex格式不正确！";var n=t.length/3,s=6/t.length;return"rgb("+Math.pow(parseInt("0x"+t.substring(0,n)),s)+", "+Math.pow(parseInt("0x"+t.substring(n,2*n)),s)+", "+Math.pow(parseInt("0x"+t.substring(2*n)),s)+")"}return null},rgbToHsl:function(e,t,n){e/=255,t/=255,n/=255;var s=Math.max(e,t,n),i=Math.min(e,t,n),r=(s+i)/2,o=(s+i)/2,a=(s+i)/2;if(s===i)r=o=0;else{var l=s-i;switch(o=a>.5?l/(2-s-i):l/(s+i),s){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return[r,o,a]},generateSimilarColor:function(e,t,n,s){var i=e.match(/\d+/g).map(Number),r=qn()(i,3),o=r[0],a=r[1],l=r[2],u=this.rgbToHsl(o,a,l),d=qn()(u,3);return function(e,t,n,i,r){return n+=r,n*=100,!s&&n>100&&(n=98),"hsl("+360*e+", "+100*(t+=i)+"%, "+n+"%)"}(d[0],d[1],d[2],t,n)},isWhiteColor:function(e){var t=[e.red,e.green,e.blue].map(function(e){return e/255});console.debug("rgb",t);return t.every(function(e){return e>.95})},hslToRgb:function(e,t,n){function s(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var i=n<.5?n*(1+t):n+t-n*t,r=2*n-i,o=s(r,i,e+1/3),a=s(r,i,e),l=s(r,i,e-1/3);return[Math.round(255*o),Math.round(255*a),Math.round(255*l)]}};function In(e){return null!==e&&(e.hasOwnProperty("surveyNameObj")||(e.surveyNameObj={dwHtml:e.surveyName,dwText:e.surveyNameText,dwPlaceholder:"请输入问卷标题"}),function(e){var t=e.surveyDetail;if(null!==t){var n=null!==t.surveyNoteText?t.surveyNoteText:"";e.surveyDetail.hasOwnProperty("surveyNodeObj")||(e.surveyDetail.surveyNodeObj={dwHtml:t.surveyNote,dwText:n,dwPlaceholder:"请输入问卷介绍"})}e.surveyDetail.effective_model=1===e.surveyDetail.effective,e.surveyDetail.effectiveIp_model=1===e.surveyDetail.effectiveIp,e.surveyDetail.refresh_model=1===e.surveyDetail.refresh,e.surveyDetail.rule_model=3===e.surveyDetail.rule,e.surveyDetail.ynEndNum_model=1===e.surveyDetail.ynEndNum,e.surveyDetail.endNum_model=e.surveyDetail.endNum,e.surveyDetail.ynEndTime_model=1===e.surveyDetail.ynEndTime,e.surveyDetail.hasOwnProperty("dwId")||(e.surveyDetail.dwId=Object(Xt.a)());e.hasOwnProperty("surveyAttrs")||(e.surveyAttrs={anBroAttr:{enabled:!1,anNum:1},anIpAttr:{enabled:!1,anNum:1},anRefreshAttr:{randomCode:!0},anPwdAttr:{enabled:!1,anPwdCode:null},anEndNumAttr:{enabled:!1,endNum:null},anEndTimeAttr:{enabled:!1,endTime:null}})}(e),Tn(e.questions,!0),e.surveyTest="",e.curEditObj=[{itemClick:!1}],e.tempDataType="none",e.hasOwnProperty("dwId")||(e.dwId=Object(Xt.a)()),e.showSurvey=!0,e.hasOwnProperty("surveyStyle")||(e.surveyStyle={pageTopImg:{enabled:!0,src:null,httpSrc:null},pageBgImg:{enabled:!1,src:null,httpSrc:null},logoImg:{enabled:!1,src:null,httpSrc:null,position:"topLogoRight"},pageBgColor:"#eeeeee",pageThemeColor:"#0965c2",pageThemeColor1:"#044a8d",logoBgColor:"#3593ee",progressColor:"#0667c6",showQuNum:!0,showProgressbar:!0,showPageHeader:!0,showQuTypeName:!0,showSurveyTitle:!0,showSurveyNote:!0})),e}function Tn(e,t){return null!==e&&e.length>0&&e.forEach(function(e,n){e.showQu=!0,e.logicIsHide=!1,function(e,t){var n=null!==e.quName?e.quName:e.quTitle;e.hasOwnProperty("quTitleObj")||(e.quTitleObj={dwHtml:e.quTitle,dwText:n,dwPlaceholder:"请输入题目标题",isNew:!1});var s=e.quNote;e.hasOwnProperty("quNoteObj")||(e.quNoteObj={dwHtml:s,dwText:s,dwPlaceholder:"请输入题目备注",isNew:!1});null===e.questionLogics&&(e.questionLogics=[]);t&&!e.hasOwnProperty("dwId")&&(e.dwId=Object(Xt.a)());On(e);var i=e.quType;"RADIO"===i?function(e){e.quTypeName="单选题",0===e.cellCount&&(e.cellCount=2);En(e,e.quRadios)}(e):"CHECKBOX"===i?function(e){e.quTypeName="多选题",0===e.cellCount&&(e.cellCount=2);En(e,e.quCheckboxs)}(e):"ORDERQU"===i?function(e){e.quTypeName="排序题",En(e,e.quOrderbys)}(e):"MULTIFILLBLANK"===i?function(e){e.quTypeName="多项填空题",En(e,e.quMultiFillblanks)}(e):"SCORE"===i?function(e){e.quTypeName="评分题",En(e,e.quScores)}(e):"FILLBLANK"===i?function(e){e.quTypeName="填空题",e.hasOwnProperty("placeholder")||(e.placeholder="请输入");e.hasOwnProperty("step")||(e.step="00:05");var t=Dn();On(e),e.quAttr.hasOwnProperty("inputAttr")&&void 0!==e.quAttr.inputAttr||(e.quAttr.inputAttr=t);e.quAttr.inputAttr.hasOwnProperty("dateTimeAttr")||(e.quAttr.inputAttr.dateTimeAttr=t.dateTimeAttr);var n=e.checkType;"DATE"===n?(e.quAttr.inputAttr.commonAttr.checkType="DATE",console.debug("question.quAttr.inputProp",e.quAttr.inputProp),e.quAttr.inputAttr.dateTimeAttr.dateFormat=3):"TIME"===n?(e.quAttr.inputAttr.commonAttr.checkType="TIME",e.quAttr.inputAttr.dateTimeAttr.dateFormat=7):"EMAIL"===n?e.quAttr.inputAttr.commonAttr.checkType="EMAIL":"PHONENUM"===n?e.quAttr.inputAttr.commonAttr.checkType="PHONE":"IDENTCODE"===n?e.quAttr.inputAttr.commonAttr.checkType="IDENT_CODE":"DIGITS"===n&&(e.quAttr.inputAttr.commonAttr.checkType="DIGITS")}(e):"UPLOADFILE"===i?function(e){e.quTypeName="上传题",e.hasOwnProperty("placeholder")||(e.placeholder="请输入");e.hasOwnProperty("step")||(e.step="00:05")}(e):"PAGETAG"===i?e.quTypeName="分页组件":"PARAGRAPH"===i&&(e.quTypeName="分段组件");e.hasOwnProperty("validateObj")||(e.validateObj={errorText:"",isOk:!0})}(e,t)}),e}function On(e){return e.hasOwnProperty("quAttr")?e.quAttr.hasOwnProperty("isRequired")||(e.quAttr.isRequired=!0):e.quAttr={isRequired:!0},e}function Dn(){return{commonAttr:{checkType:null,placeholder:"",defaultValue:"",inputRow:1,minlength:0,maxlength:123},dateTimeAttr:{timeRange:{range:null,step:null},dateFormat:null,attrs:[]},numAttr:{min:null,max:null}}}function En(e,t){null!==t&&t.length>0&&t.forEach(function(t,n){var s=null!==t.optionTitle?t.optionTitle:t.optionName,i=null!==t.optionName?t.optionName:s;t.hasOwnProperty("optionTitleObj")||(t.optionTitleObj={dwHtml:i,dwText:s,dwPlaceholder:"请输入选项内容"}),t.hasOwnProperty("dateAttrs")||(t.dateAttrs=[]),t.hasOwnProperty("checked")||(t.checked=!1),t.hasOwnProperty("orderIndex")||(t.orderIndex=0),e.hasOwnProperty("dwId")&&!t.hasOwnProperty("dwId")&&(t.dwId=Object(Xt.a)());var r={commonAttr:{checkType:null,placeholder:"",defaultValue:"",inputRow:1,minlength:0,maxlength:123},dateTimeAttr:{timeRange:{range:null,step:null},dateFormat:null,attrs:[]},numAttr:{min:null,max:null}};t.hasOwnProperty("inputAttr")||(t.inputAttr=r),t.hasOwnProperty("showOptionNote")||(t.showOptionNote=0),t.hasOwnProperty("isRequired")||(t.isRequired=1),t.hasOwnProperty("otherText")||(t.otherText=null),t.validateObj={errorText:"",isOk:!0}})}function Pn(e){e.dwId=Object(Xt.a)();var t=e.quType;"RADIO"===t?Nn(e,e.quRadios):"CHECKBOX"===t?Nn(e,e.quCheckboxs):"ORDERQU"===t?Nn(e,e.quOrderbys):"MULTIFILLBLANK"===t?Nn(e,e.quMultiFillblanks):"SCORE"===t&&Nn(e,e.quScores)}function Nn(e,t){null!==t&&t.length>0&&t.forEach(function(e,t){e.dwId=Object(Xt.a)()})}var Rn={name:"DwDesignQuestionCommon",components:{DwPopoverQuLogics:bn,DwPopoverQuAttrs:cn,DwPopoverMoreOptions:on,DwTextEditLabelCommon:Kt,DwTextEditLabel:Wt},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},options:{type:Object,default:function(){return{themeColor:"red"}}},survey:{type:Object,default:function(){}}},data:function(){return{itemClick:!1,hover:!1,itemHover:!1,quTitle:"text",itemIndex:0,moreOptionText:"",openDelay:300}},computed:{quNum:function(){var e=this,t=0;return this.survey.questions.forEach(function(n,s){"PAGETAG"!==n.quType&&"PARAGRAPH"!==n.quType&&s<=e.index&&t++}),t}},watch:{survey:function(e,t){console.log("firstName changed from "+t+" to "+e)}},mounted:function(){this.survey.questions[this.index].hasOwnProperty("isNew")&&this.survey.questions[this.index].isNew&&(this.$refs.hasOwnProperty("dwQuTitle")&&(this.$refs.dwQuTitle.clickItem(),this.$refs.dwQuTitle.editFocus()),this.survey.questions[this.index].isNew=!1)},methods:{mouseleave:function(){this.hover=!1},mouseover:function(){this.hover=!0},mouseleaveItem:function(){this.itemHover=!1},mouseoverItem:function(){this.itemHover=!0},clickItem:function(){},dwAddQuItemEvent:function(){var e={id:null,optionTitleObj:{dwHtml:"",dwText:"",dwPlaceholder:"请输入内容",isRefreshValue:!0},itemClick:!0};e.dwId=Object(Xt.a)();var t=en(this.survey,this.index,e);this.$emit("update-survey",t)},deleteQu:function(){var e=this;this.$confirm("此操作将永久删除该题目, 是否继续？",{type:"warning",confirmButtonText:"是，确定删除",cancelButtonText:"否，放弃删除"}).then(function(t){e.survey.questions.splice(e.index,1),e.survey=nn(e.survey),e.survey.isRefreshAllQu=!0}).catch(function(e){})},copyQu:function(){var e=this.$loading({lock:!0,text:"复制中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),t=this.survey.questions[this.index],n=tn(JSON.parse(l()(t)));Pn(n);var s=nn(this.survey);s.questions.splice(this.index+1,0,n),this.survey=s,this.survey.isRefreshAllQu=!0,e.close()},upQu:function(){var e=tn(JSON.parse(l()(this.survey.questions[this.index]))),t=tn(JSON.parse(l()(this.survey.questions[this.index-1])));this.survey.questions.splice(this.index-1,1,e),this.survey.questions.splice(this.index,1,t)},downQu:function(){var e=tn(JSON.parse(l()(this.survey.questions[this.index]))),t=tn(JSON.parse(l()(this.survey.questions[this.index+1])));this.survey.questions.splice(this.index+1,1,e),this.survey.questions.splice(this.index,1,t)}}},Ln={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"dw-question-root dw-padding-tb-5",class:e.hover||e.itemClick?"focus-question":"",on:{mouseover:e.mouseover,mouseleave:e.mouseleave}},[n("div",{staticClass:"dw-question-top dw-height-20px",staticStyle:{display:"none"}},[n("div",{},[n("div",{staticClass:"dw-margin-left-right-10",staticStyle:{"font-size":"14px"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.hover||e.itemClick,expression:"hover || itemClick"}],staticClass:"dw-display-flex-right"},[n("el-tooltip",{staticClass:"item",attrs:{"open-delay":e.openDelay,effect:"dark",content:"复制本题",placement:"top"}},[n("div",{staticClass:"dw-question-toolbar dw-margin-right-10"},[n("i",{staticClass:"dwMoveSortQu dw-cursor-pointer dw-event-icon dw-event-color fa fa-copy",attrs:{"aria-hidden":"true"}})])]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{"open-delay":e.openDelay,effect:"dark",content:"向上移",placement:"top"}},[n("div",{staticClass:"dw-question-toolbar dw-margin-right-5"},[n("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-list-ul",attrs:{"aria-hidden":"true"}})])]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{"open-delay":e.openDelay,effect:"dark",content:"向下移",placement:"top"}},[n("div",{staticClass:"dw-question-toolbar dw-margin-right-10"},[n("i",{staticClass:"dwMoveSortQu dw-cursor-pointer dw-event-icon dw-event-color fa el-icon-bottom",attrs:{"aria-hidden":"true"}})])])],1)])]),e._v(" "),n("div",{staticClass:"dw-question-body"},[n("div",{staticClass:"dw-question-body-left dw-text-align-center dw-padding-top-2"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.hover||e.itemClick,expression:"hover || itemClick"}]},[n("el-tooltip",{staticClass:"item",attrs:{"open-delay":e.openDelay,effect:"dark",content:"移动本题",placement:"left"}},[n("div",{staticClass:"dw-question-toolbar dw-margin-bottom-10"},[n("i",{staticClass:"dwMoveSortQu dw-cursor-pointer dw-event-color fa fa-arrows",attrs:{"aria-hidden":"true"}})])]),e._v(" "),"PARAGRAPH"!==e.survey.questions[e.index].quType&&"PAGETAG"!==e.survey.questions[e.index].quType?[n("el-tooltip",{staticClass:"item",attrs:{"open-delay":e.openDelay,effect:"dark",content:"题目设置",placement:"left"}},[n("dw-popover-qu-attrs",{attrs:{index:e.index,"add-or-edit":"add"},on:{"click-item":e.clickItem},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}},[n("div",{staticClass:"dw-question-toolbar dw-margin-bottom-10"},[n("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-cog",attrs:{"aria-hidden":"true"}})])])],1),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{"open-delay":e.openDelay,effect:"dark",content:"题目逻辑",placement:"left"}},[n("dw-popover-qu-logics",{attrs:{index:e.index,"add-or-edit":"add"},on:{"click-item":e.clickItem},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}},[n("el-badge",{staticClass:"dw-el-badge-logic-set",attrs:{hidden:e.survey.questions[e.index].questionLogics.length<=0,value:e.survey.questions[e.index].questionLogics.length}},[n("div",{staticClass:"dw-question-toolbar dw-margin-bottom-10"},[n("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-code-fork",attrs:{"aria-hidden":"true"}})])])],1)],1)]:e._e(),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{"open-delay":e.openDelay,effect:"dark",content:"删除本题",placement:"left"}},[n("div",{staticClass:"dw-question-toolbar dw-margin-bottom-10",on:{click:e.deleteQu}},[n("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-trash-alt",attrs:{"aria-hidden":"true"}})])])],2)]),e._v(" "),n("div",{staticClass:"dw-question-body-center"},[n("div",{staticClass:"dw-question-body-center-body dw-color-333"},[n("div",{staticClass:"dw-qu-content"},["PAGETAG"!==e.survey.questions[e.index].quType?n("div",{staticClass:"dw-qu-title-body dw-display-flex dw-width-100bf"},["PARAGRAPH"!==e.survey.questions[e.index].quType?n("div",{staticClass:"dw-qu-num"},[e._v(e._s(e.quNum)+"、")]):e._e(),e._v(" "),n("div",{staticClass:"dw-flex-item-auto",class:"PARAGRAPH"!==e.survey.questions[e.index].quType?"":"dw-qu-paragraph"},[n("dw-text-edit-label-common",{ref:"dwQuTitle",attrs:{survey:e.survey},model:{value:e.survey.questions[e.index].quTitleObj,callback:function(t){e.$set(e.survey.questions[e.index],"quTitleObj",t)},expression:"survey.questions[index].quTitleObj"}})],1),e._v(" "),n("div",{staticClass:"dw-qu-type-name dw-padding-left-10"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.hover,expression:"hover"}],staticClass:"dw-font-12 dw-color-grey-10"},[e._v(e._s(e.survey.questions[e.index].quTypeName))])])]):e._e(),e._v(" "),n("div",{staticStyle:{"font-size":"12px",color:"grey","margin-bottom":"5px"}},[n("dw-text-edit-label-common",{ref:"dwQuNote",attrs:{survey:e.survey},model:{value:e.survey.questions[e.index].quNoteObj,callback:function(t){e.$set(e.survey.questions[e.index],"quNoteObj",t)},expression:"survey.questions[index].quNoteObj"}})],1),e._v(" "),n("div",{staticClass:"dw-qu-content-body"},[n("div",{staticClass:"dw-qu-content-body-content"},[e._t("editQuContent")],2),e._v(" "),n("div",{staticClass:"dw-question-body-bottom dw-padding-top-10 dw-height-20px"},["PARAGRAPH"!==e.survey.questions[e.index].quType&&"PAGETAG"!==e.survey.questions[e.index].quType?n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.hover,expression:"hover"}]},["FILLBLANK"!==e.survey.questions[e.index].quType&&"UPLOADFILE"!==e.survey.questions[e.index].quType?n("div",{staticClass:"dw-display-flex-left"},[4===e.survey.questions[e.index].hv?[n("el-tooltip",{staticClass:"item dw-margin-right-10",attrs:{"open-delay":e.openDelay,effect:"dark",content:"修改选项",placement:"left"}},[n("dw-popover-more-options",{attrs:{index:e.index,"add-or-edit":"edit","popover-title":"修改题目选项","text-placeholder":"请输入修改的内容"},on:{"click-item":e.clickItem},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}},[n("div",{staticClass:"dw-question-toolbar"},[n("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-pencil",attrs:{"aria-hidden":"true"}})])])],1)]:[n("el-tooltip",{staticClass:"item dw-margin-right-10",attrs:{"open-delay":e.openDelay,effect:"dark",content:"单项添加选项",placement:"left"}},[n("div",{staticClass:"dw-question-toolbar",on:{click:function(t){return t.stopPropagation(),e.dwAddQuItemEvent.apply(null,arguments)}}},[n("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-plus",attrs:{"aria-hidden":"true"}})])])],e._v(" "),[n("el-tooltip",{staticClass:"item dw-margin-right-10",attrs:{"open-delay":e.openDelay,effect:"dark",content:"批量添加选项",placement:"right"}},[n("dw-popover-more-options",{attrs:{index:e.index,"add-or-edit":"add"},on:{"click-item":e.clickItem},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}},[n("div",{staticClass:"dw-question-toolbar"},[n("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-list-ul",attrs:{"aria-hidden":"true"}})])])],1)]],2):e._e()])]):e._e()])])])])]),e._v(" "),n("div",{staticClass:"dw-question-body-right dw-text-align-center dw-padding-top-2"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.hover||e.itemClick,expression:"hover || itemClick"}]},[n("div",{staticClass:"dw-question-toolbar dw-margin-bottom-10",on:{click:function(t){return t.stopPropagation(),e.copyQu.apply(null,arguments)}}},[n("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-clipboard",attrs:{"aria-hidden":"true"}})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.index>0,expression:"index>0"}],staticClass:"dw-question-toolbar dw-margin-bottom-10",on:{click:function(t){return t.stopPropagation(),e.upQu.apply(null,arguments)}}},[n("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-arrow-up",attrs:{"aria-hidden":"true"}})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.index+1<e.survey.questions.length,expression:"(index+1)<survey.questions.length"}],staticClass:"dw-question-toolbar dw-margin-bottom-10",on:{click:function(t){return t.stopPropagation(),e.downQu.apply(null,arguments)}}},[n("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-arrow-down",attrs:{"aria-hidden":"true"}})])])])])])])},staticRenderFns:[]};var Fn=n("VU/8")(Rn,Ln,!1,function(e){n("Np+H"),n("MLud")},"data-v-1929b34b",null).exports,Qn={name:"DwQuOptionCommon2Item",components:{DwTextEditLabel:Wt},model:{prop:"options",event:"update-options"},props:{quIndex:{type:Number,default:0},optionIndex:{type:Number,default:0},options:{type:Array,default:function(){return[]}},option:{type:Object,default:function(){}},survey:{type:Object,default:function(){}},quType:{type:String,default:""},value:{type:Object,default:function(){}}},data:function(){return{itemStatus:{itemHover:!1,itemClick:!1},itemIndex:0,inputText:""}},computed:{itemBtnShow:function(){return this.itemStatus.itemHover||this.itemStatus.itemClick}},watch:{options:function(e,t){}},mounted:function(){this.options[this.optionIndex].itemClick&&(this.upItemClick(),this.editFocus(),this.options[this.optionIndex].itemClick=!1)},methods:{clickItem:function(){},upItemClick:function(e){this.itemStatus.itemClick=e},upAllItemClick:function(){},mouseleaveItem:function(){this.itemStatus.itemHover=!1},mouseoverItem:function(){this.itemStatus.itemHover=!0},addOptionBefore:function(){var e={id:null,optionTitleObj:{dwHtml:"",dwText:"",dwPlaceholder:"请输入内容"},itemClick:!1};e.dwId=Object(Xt.a)(),this.options.splice(this.optionIndex+1,0,e),this.$emit("update-options",this.options),this.$emit("refresh-options",this.optionIndex+1)},upValue:function(e){this.options[this.optionIndex].optionTitleObj=e,this.$emit("update-options",this.options)},dragClick:function(e){this.$refs.dwEditLabel.upEditorText(this.options[this.optionIndex].optionTitleObj.dwHtml),console.debug("this.optionIndex",this.optionIndex),console.debug("focusIndex",e),null!==e&&this.optionIndex===e&&(this.upItemClick(),this.editFocus())},editFocus:function(){this.$refs.dwEditLabel.editFocus()},deleteOption:function(){console.debug("delete"),this.options.splice(this.optionIndex,1),this.$emit("refresh-options",null)}}},Un={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{click:e.clickItem,mouseover:e.mouseoverItem,mouseleave:e.mouseleaveItem}},[n("div",{staticClass:"dw-qu-item-body"},[n("div",{staticClass:"dw-qu-item"},[n("div",{staticClass:"dw-qu-item-el-checkbox-radio"},["RADIO"===e.quType?n("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon far fa-circle"}):e._e(),e._v(" "),"CHECKBOX"===e.quType?n("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon far fa-square"}):e._e(),e._v(" "),n("dw-text-edit-label",{ref:"dwEditLabel",attrs:{"item-status":e.itemStatus},on:{upItemClick:e.upItemClick,upValue:e.upValue},model:{value:e.options[e.optionIndex].optionTitleObj,callback:function(t){e.$set(e.options[e.optionIndex],"optionTitleObj",t)},expression:"options[optionIndex].optionTitleObj"}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.itemBtnShow,expression:"itemBtnShow"}],staticClass:"dw-qu-item-toolbar dw-display-flex-right"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"排序选项",placement:"top"}},[n("div",{staticClass:"dw-question-toolbar dw-margin-right-10"},[n("i",{staticClass:"dwMoveSortQuOption dw-cursor-pointer dw-event-color el-icon-rank",attrs:{"aria-hidden":"true"}})])]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"在后添加选项",placement:"top"}},[n("div",{staticClass:"dw-question-toolbar dw-margin-right-10",on:{click:function(t){return t.stopPropagation(),e.addOptionBefore.apply(null,arguments)}}},[n("i",{staticClass:"dw-cursor-pointer dw-event-color el-icon-circle-plus-outline",attrs:{"aria-hidden":"true"}})])]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除当前选项",placement:"top"}},[n("div",{staticClass:"dw-question-toolbar dw-margin-right-10",on:{click:function(t){return t.stopPropagation(),e.deleteOption.apply(null,arguments)}}},[n("i",{staticClass:"dw-cursor-pointer dw-event-color el-icon-remove-outline",attrs:{"aria-hidden":"true"}})])])],1)]),e._v(" "),"MULTIFILLBLANK"===e.quType||("RADIO"===e.quType||"CHECKBOX"===e.quType)&&e.options[e.optionIndex].showOptionNote?[e.options[e.optionIndex].answerInputRow>1?n("el-input",{attrs:{placeholder:e.options[e.optionIndex].inputAttr.commonAttr.placeholder,autosize:{minRows:e.options[e.optionIndex].inputAttr.commonAttr.inputRow},type:"textarea"},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}}):n("el-input",{attrs:{placeholder:e.options[e.optionIndex].inputAttr.commonAttr.placeholder},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}})]:e._e(),e._v(" "),"SCORE"===e.quType?n("el-rate",{attrs:{max:e.survey.questions[e.quIndex].paramInt02}}):e._e()],2)])},staticRenderFns:[]};var Bn=n("VU/8")(Qn,Un,!1,function(e){n("OEMn")},"data-v-6bd74cd2",null).exports,Mn={name:"DwQuOptionCommon2",components:{DwQuOptionCommon2Item:Bn,draggable:dt.a},model:{prop:"options",event:"update-options"},props:{index:{type:Number,default:0},options:{type:Array,default:function(){return[]}},survey:{type:Object,default:function(){}},quType:{type:String,default:""}},data:function(){return{dragOptions:this.options,drag:!1}},watch:{options:function(e,t){this.refreshData()}},methods:{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1,this.refreshOptions(null)},upAllItemClick:function(){},refreshOptions:function(e){var t=this;this.$emit("update-options",this.dragOptions),this.$nextTick(function(){for(var n=t.$refs.quCommonItem,s=0;s<n.length;s++)n[s].dragClick(e)})},refreshData:function(){this.dragOptions=this.options}}},$n={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("draggable",{attrs:{"force-fallback":!0,group:{name:"qu-option",pull:!1,put:!1},handle:".dwMoveSortQuOption",animation:"300","drag-class":"dwDragClass","ghost-class":"dwGhostClass","chosen-class":"dwChosenClass"},on:{start:e.onStart,end:e.onEnd},model:{value:e.dragOptions,callback:function(t){e.dragOptions=t},expression:"dragOptions"}},[n("transition-group",e._l(e.dragOptions,function(t,s){return n("div",{key:"quOption-"+s},[n("dw-qu-option-common2-item",{ref:"quCommonItem",refInFor:!0,attrs:{survey:e.survey,"qu-index":e.index,"option-index":s,"qu-type":e.quType},on:{"refresh-options":e.refreshOptions},model:{value:e.dragOptions,callback:function(t){e.dragOptions=t},expression:"dragOptions"}})],1)}),0)],1)],1)},staticRenderFns:[]};var Hn=n("VU/8")(Mn,$n,!1,function(e){n("e8dA")},"data-v-fbd5b7b6",null).exports,jn={name:"DwQuOptionCommon1Item",components:{DwTextEditLabel:Wt},model:{prop:"options",event:"update-options"},props:{optionIndex:{type:Number,default:0},options:{type:Array,default:function(){return[]}},survey:{type:Object,default:function(){}},quType:{type:String,default:""},value:{type:Object,default:function(){}}},data:function(){return{itemStatus:{itemHover:!1,itemClick:!1},itemHover:!1,itemClick:!1,itemIndex:0,inputText:null}},computed:{itemBtnShow:function(){return this.itemStatus.itemHover||this.itemStatus.itemClick}},watch:{options:function(e,t){}},mounted:function(){this.options[this.optionIndex].itemClick&&(this.upItemClick(),this.editFocus(),this.options[this.optionIndex].itemClick=!1)},methods:{clickItem:function(){},upItemClick:function(e){this.itemStatus.itemClick=e},upAllItemClick:function(){},mouseleaveItem:function(){this.itemStatus.itemHover=!1},mouseoverItem:function(){this.itemStatus.itemHover=!0},addOptionBefore:function(){this.options.splice(this.optionIndex+1,0,{id:null,optionTitleObj:{dwHtml:"",dwText:"",dwPlaceholder:"请输入内容"},itemClick:!1}),this.$emit("update-options",this.options),this.$emit("refresh-options",this.optionIndex+1)},upValue:function(e){this.options[this.optionIndex].optionTitleObj=e,this.$emit("update-options",this.options)},dragClick:function(e){this.$refs.dwEditLabel.upEditorText(this.options[this.optionIndex].optionTitleObj.dwHtml),null!==e&&this.optionIndex===e&&(this.upItemClick(),this.editFocus())},editFocus:function(){this.$refs.dwEditLabel.editFocus()},deleteOption:function(){this.options.splice(this.optionIndex,1),this.$emit("refresh-options",null)}}},Vn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dw-qu-item",on:{click:e.clickItem,mouseover:e.mouseoverItem,mouseleave:e.mouseleaveItem}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.itemBtnShow,expression:"itemBtnShow"}],staticClass:"dw-qu-item-toolbar"},[n("div",{staticClass:"dw-display-grid"},[e._m(0),e._v(" "),n("div",{staticClass:"dw-question-toolbar",on:{click:function(t){return t.stopPropagation(),e.addOptionBefore.apply(null,arguments)}}},[n("i",{staticClass:"dw-cursor-pointer dw-event-color el-icon-circle-plus-outline",attrs:{"aria-hidden":"true"}})]),e._v(" "),n("div",{staticClass:"dw-question-toolbar",on:{click:function(t){return t.stopPropagation(),e.deleteOption.apply(null,arguments)}}},[n("i",{staticClass:"dw-cursor-pointer dw-event-color el-icon-remove-outline",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),n("div",{staticClass:"dw-qu-item-body"},[n("div",{staticClass:"dw-qu-item-el-checkbox-radio"},[n("i",{directives:[{name:"show",rawName:"v-show",value:"RADIO"===e.quType,expression:"quType==='RADIO'"}],staticClass:"dw-qu-item-el-checkbox-radio-icon far fa-circle"}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:"CHECKBOX"===e.quType,expression:"quType==='CHECKBOX'"}],staticClass:"dw-qu-item-el-checkbox-radio-icon far fa-square"}),e._v(" "),n("dw-text-edit-label",{ref:"dwEditLabel",attrs:{"item-status":e.itemStatus},on:{upItemClick:e.upItemClick,upValue:e.upValue},model:{value:e.options[e.optionIndex].optionTitleObj,callback:function(t){e.$set(e.options[e.optionIndex],"optionTitleObj",t)},expression:"options[optionIndex].optionTitleObj"}})],1),e._v(" "),"RADIO"!==e.quType&&"CHECKBOX"!==e.quType||!e.options[e.optionIndex].showOptionNote?e._e():[e.options[e.optionIndex].inputAttr.commonAttr.inputRow>1?n("el-input",{attrs:{placeholder:e.options[e.optionIndex].inputAttr.commonAttr.placeholder,autosize:{minRows:e.options[e.optionIndex].inputAttr.commonAttr.inputRow},type:"textarea"},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}}):n("el-input",{attrs:{placeholder:e.options[e.optionIndex].inputAttr.commonAttr.placeholder},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}})]],2)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-question-toolbar"},[t("i",{staticClass:"dwMoveSortQuOption dw-cursor-pointer dw-event-color el-icon-rank",attrs:{"aria-hidden":"true"}})])}]};var zn=n("VU/8")(jn,Vn,!1,function(e){n("Io/8")},"data-v-563c342a",null).exports,Gn={name:"DwQuOptionCommon1",components:{DwQuOptionCommon1Item:zn,draggable:dt.a},model:{prop:"options",event:"update-options"},props:{index:{type:Number,default:0},options:{type:Array,default:function(){return[]}},survey:{type:Object,default:function(){}},quType:{type:String,default:""}},data:function(){return{dragOptions:this.options,drag:!1}},watch:{options:function(e,t){console.debug("index",this.index),this.refreshData()}},methods:{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1,this.refreshOptions(null)},upAllItemClick:function(){},refreshOptions:function(e){var t=this;this.$emit("update-options",this.dragOptions),this.$nextTick(function(){for(var n=t.$refs.quCommonItem,s=0;s<n.length;s++)n[s].dragClick(e)})},refreshData:function(){this.dragOptions=this.options}}},Yn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("draggable",{attrs:{"force-fallback":!0,group:{name:"option",pull:!1,put:!1},handle:".dwMoveSortQuOption",animation:"300","drag-class":"dwDragClass","ghost-class":"dwGhostClass","chosen-class":"dwChosenClass"},on:{start:e.onStart,end:e.onEnd},model:{value:e.dragOptions,callback:function(t){e.dragOptions=t},expression:"dragOptions"}},[n("transition-group",{staticClass:"dw-grid",style:"grid-template-columns: repeat("+e.survey.questions[e.index].cellCount+", minmax(auto,1fr));"},e._l(e.dragOptions,function(t,s){return n("div",{key:"quOption-"+s,staticStyle:{width:"100%"}},[n("dw-qu-option-common1-item",{ref:"quCommonItem",refInFor:!0,attrs:{survey:e.survey,"qu-index":e.index,"option-index":s,"qu-type":e.quType},on:{"refresh-options":e.refreshOptions},model:{value:e.dragOptions,callback:function(t){e.dragOptions=t},expression:"dragOptions"}})],1)}),0)],1)],1)])},staticRenderFns:[]};var Wn=n("VU/8")(Gn,Yn,!1,function(e){n("SEaj")},"data-v-dab8bbd8",null).exports,Jn={name:"DwQuOptionCommon4",components:{draggable:dt.a},model:{prop:"options",event:"update-options"},props:{index:{type:Number,default:0},options:{type:Array,default:function(){return[]}},survey:{type:Object,default:function(){}},quType:{type:String,default:""}},data:function(){return{value:null}},methods:{}},Zn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-select",{attrs:{multiple:"CHECKBOX"===e.quType,placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e,t){return n("el-option",{key:"fa_"+t,attrs:{label:e.optionTitleObj.dwHtml,value:e.optionTitleObj.dwHtml}})}),1)],1)},staticRenderFns:[]};var Kn=n("VU/8")(Jn,Zn,!1,function(e){n("3mwL")},"data-v-7f5d1d1a",null).exports,Xn={name:"DwQuRadioOptions",components:{DwQuOptionCommon4:Kn,DwQuOptionCommon2:Hn,DwQuOptionCommon1:Wn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{}},methods:{updateOptions:function(e){this.survey.questions[this.index].quRadios=e}}},es={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[1===e.survey.questions[e.index].hv?n("dw-qu-option-common1",{attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quRadios,callback:function(t){e.$set(e.survey.questions[e.index],"quRadios",t)},expression:"survey.questions[index].quRadios"}}):e._e(),e._v(" "),2===e.survey.questions[e.index].hv?n("dw-qu-option-common2",{attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quRadios,callback:function(t){e.$set(e.survey.questions[e.index],"quRadios",t)},expression:"survey.questions[index].quRadios"}}):e._e(),e._v(" "),4===e.survey.questions[e.index].hv?n("dw-qu-option-common4",{attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quRadios,callback:function(t){e.$set(e.survey.questions[e.index],"quRadios",t)},expression:"survey.questions[index].quRadios"}}):e._e()],1)},staticRenderFns:[]};var ts=n("VU/8")(Xn,es,!1,function(e){n("aMUv")},"data-v-ddb03886",null).exports,ns={name:"DwDesignQuestionBottomType1",model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},methods:{dwAddQuItem:function(){this.survey.questions[this.index].quTitle="wooooooo",this.survey.surveyNode="更新问卷副标题备注",this.$emit("update-question",this.survey)}}},ss={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-display-flex-left"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加选项",placement:"left"}},[t("div",{staticClass:"dw-question-toolbar dw-margin-right-10",on:{click:this.dwAddQuItem}},[t("i",{staticClass:"dwMoveSortQu dw-cursor-pointer dw-event-color fa fa-plus",attrs:{"aria-hidden":"true"}})])]),this._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"批量添加选项",placement:"right"}},[t("div",{staticClass:"dw-question-toolbar dw-margin-right-10"},[t("i",{staticClass:"dwMoveSortQu dw-cursor-pointer dw-event-color fa fa-list-ul",attrs:{"aria-hidden":"true"}})])])],1)},staticRenderFns:[]};var is={name:"DwDesignQuRadio",components:{DwDesignQuestionBottomType1:n("VU/8")(ns,ss,!1,function(e){n("2sPn")},"data-v-385d9a70",null).exports,DwQuRadioOptions:ts,DwQuOptionCommon1:Hn,DwDesignQuestionCommon:Fn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}}},rs={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-radio-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var os=n("VU/8")(is,rs,!1,function(e){n("NWAF")},"data-v-1d7427b0",null).exports,as={name:"DwQuCheckboxOptions",components:{DwQuOptionCommon4:Kn,DwQuOptionCommon1:Wn,DwQuOptionCommon2:Hn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}}},ls={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[1===e.survey.questions[e.index].hv?n("dw-qu-option-common1",{ref:"dwCommon1",attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quCheckboxs,callback:function(t){e.$set(e.survey.questions[e.index],"quCheckboxs",t)},expression:"survey.questions[index].quCheckboxs"}}):e._e(),e._v(" "),2===e.survey.questions[e.index].hv?n("dw-qu-option-common2",{ref:"dwCommon2",attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quCheckboxs,callback:function(t){e.$set(e.survey.questions[e.index],"quCheckboxs",t)},expression:"survey.questions[index].quCheckboxs"}}):e._e(),e._v(" "),4===e.survey.questions[e.index].hv?n("dw-qu-option-common4",{ref:"dwCommon4",attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quCheckboxs,callback:function(t){e.$set(e.survey.questions[e.index],"quCheckboxs",t)},expression:"survey.questions[index].quCheckboxs"}}):e._e()],1)},staticRenderFns:[]};var us={name:"DwDesignQuCheckbox",components:{DwQuCheckboxOptions:n("VU/8")(as,ls,!1,function(e){n("gaH1")},"data-v-3c22d4ad",null).exports,DwDesignQuestionCommon:Fn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}}},ds={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-checkbox-options",{ref:"dwQuestion",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var cs=n("VU/8")(us,ds,!1,function(e){n("eblm")},"data-v-88160d36",null).exports,vs={name:"DwDesignQuFbk",components:{DwDesignQuestionCommon:Fn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{inputText:""}}},ps={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dw-qu-item",staticStyle:{padding:"10px 0"}},[e.survey.questions[e.index].answerInputRow>1?n("el-input",{attrs:{placeholder:e.survey.questions[e.index].placeholder,autosize:{minRows:e.survey.questions[e.index].answerInputRow},type:"textarea"},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}}):n("el-input",{attrs:{placeholder:e.survey.questions[e.index].placeholder},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}})],1)},staticRenderFns:[]};var ms=n("VU/8")(vs,ps,!1,function(e){n("Ry/m")},"data-v-649e2b49",null).exports,ys={name:"DwQuOrderbyOptions",components:{DwQuOptionCommon1:Hn,DwQuOptionCommon2Item:zn,DwQuOptionCommon2:Wn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{}},methods:{}},hs={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-qu-option-common1",{attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quOrderbys,callback:function(t){e.$set(e.survey.questions[e.index],"quOrderbys",t)},expression:"survey.questions[index].quOrderbys"}})],1)},staticRenderFns:[]};var fs={name:"DwDesignQuOderby",components:{DwQuOrderbyOptions:n("VU/8")(ys,hs,!1,function(e){n("6vVf")},"data-v-42f5a3b1",null).exports,DwQuOptionCommon1:Hn,DwDesignQuestionCommon:Fn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}}},ws={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-orderby-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var gs=n("VU/8")(fs,ws,!1,function(e){n("HLG5")},"data-v-23b4fdaf",null).exports,xs={name:"DwQuMFbkOptions",components:{DwQuOptionCommon1:Hn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{}},methods:{}},bs={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-qu-option-common1",{attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quMultiFillblanks,callback:function(t){e.$set(e.survey.questions[e.index],"quMultiFillblanks",t)},expression:"survey.questions[index].quMultiFillblanks"}})],1)},staticRenderFns:[]};var Cs={name:"DwDesignQuMFbk",components:{DwQuMFbkOptions:n("VU/8")(xs,bs,!1,function(e){n("sFek")},"data-v-53722894",null).exports,DwDesignQuestionCommon:Fn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}}},_s={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-m-fbk-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var As=n("VU/8")(Cs,_s,!1,function(e){n("7PL2")},"data-v-c0331208",null).exports,Ss={name:"DwDesignQuUpload",components:{DwDesignQuestionCommon:Fn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{fileList:[]}},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")}}},qs={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"10px"}},[n("el-upload",{staticClass:"upload-demo",attrs:{"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,limit:3,"on-exceed":e.handleExceed,"file-list":e.fileList,action:"https://jsonplaceholder.typicode.com/posts/",multiple:""}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)},staticRenderFns:[]};var ks=n("VU/8")(Ss,qs,!1,function(e){n("okw5")},"data-v-4963abb4",null).exports,Is={name:"DwQuScoreOptions",components:{DwQuOptionCommon1:Hn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{}},methods:{}},Ts={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-qu-option-common1",{attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quScores,callback:function(t){e.$set(e.survey.questions[e.index],"quScores",t)},expression:"survey.questions[index].quScores"}})],1)},staticRenderFns:[]};var Os=n("VU/8")(Is,Ts,!1,function(e){n("nIrY")},"data-v-3ba03e14",null).exports,Ds={name:"DwDesignQuScore",components:{DwQuScoreOptions:Os,DwQuMFbkOptions:Os,DwDesignQuestionCommon:Fn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}}},Es={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-score-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var Ps=n("VU/8")(Ds,Es,!1,function(e){n("F9qX")},"data-v-7eb38276",null).exports,Ns={name:"DwDesignQuPage",components:{DwDesignQuestionCommon:Fn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{inputText:""}},computed:{pageSize:function(){return An.pageSize(this.survey)},pageNum:function(){return An.quInPageNum(this.survey,this.index)}}},Rs={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{padding:"10px","border-top":"5px solid #efefef"}},[t("div",{staticStyle:{"text-align":"right",color:"grey","font-size":"13px"}},[this._v("下一页("+this._s(this.pageNum)+"/"+this._s(this.pageSize)+")")])])},staticRenderFns:[]};var Ls=n("VU/8")(Ns,Rs,!1,function(e){n("uhve")},"data-v-5a1da102",null).exports,Fs={name:"DwDesignQuParagraph",components:{DwDesignQuestionCommon:Fn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{inputText:""}}},Qs={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{"font-size":"12px"}},[t("div",{staticStyle:{color:"#c6c6c7"}},[t("el-icon",{staticClass:"el-icon-warning-outline"}),this._v(" 请在上方输入段落的标题或备注")],1)])},staticRenderFns:[]};var Us={name:"DwDesignQuestion",components:{DwDesignQuParagraph:n("VU/8")(Fs,Qs,!1,function(e){n("6uRV")},"data-v-4a0660ac",null).exports,DwDesignQuPage:Ls,DwQuRadioOptions:ts,DwDesignQuestionCommon:Fn,DwDesignQuScore:Ps,DwDesignQuUpload:ks,DwDesignQuMFbk:As,DwDesignQuOderby:gs,DwDesignQuFbk:ms,DwDesignQuCheckbox:cs,DwDesignQuRadio:os},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},item:{type:Object,default:function(){}},survey:{type:Object,default:function(){}}}},Bs={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-design-question-common",{ref:"dwDesignQuestionCommon",attrs:{index:e.index},scopedSlots:e._u([{key:"editQuContent",fn:function(){return["RADIO"===e.item.quType?n("div",[n("dw-design-qu-radio",{ref:"dwQuRadio",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"CHECKBOX"===e.item.quType?n("div",[n("dw-design-qu-checkbox",{ref:"dwQuCheckbox",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"FILLBLANK"===e.item.quType?n("div",[n("dw-design-qu-fbk",{ref:"dwQuFbk",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"SCORE"===e.item.quType?n("div",[n("dw-design-qu-score",{ref:"dwQuScore",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"ORDERQU"===e.item.quType?n("div",[n("dw-design-qu-oderby",{ref:"dwQuOderby",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"MULTIFILLBLANK"===e.item.quType?n("div",[n("dw-design-qu-m-fbk",{ref:"dwQuMfbk",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"UPLOADFILE"===e.item.quType?n("div",[n("dw-design-qu-upload",{ref:"dwQuUpload",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"PAGETAG"===e.item.quType?n("div",[n("dw-design-qu-page",{ref:"dwQuPage",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"PARAGRAPH"===e.item.quType?n("div",[n("dw-design-qu-paragraph",{ref:"dwQuUpload",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e()]},proxy:!0}]),model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)},staticRenderFns:[]};var Ms=n("VU/8")(Us,Bs,!1,function(e){n("ACNE")},"data-v-01fc4494",null).exports,$s={name:"DwDesignHeader",model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{logoTitle:"调问网-全新问卷编辑器",logoTitleNote:"纯VUE全部重写，易于二开上手",switchValue:"上下",defActive:"/v6/diaowen/dw-design/survey/"+this.$route.params.id,prevPath:"/v6"}},mounted:function(){this.loadPage()},methods:{loadPage:function(){var e=this;I.getDwFooterInfoAuto(function(t){I.isDemo(function(t){e.logoTitleNote="纯VUE全部重写，易于二开上手"},function(t){e.logoTitleNote=""}),I.isLayoutLr(function(t){e.prevPath="/v6/lr"})})},handleSelect:function(e,t){console.log(e,t)}}},Hs={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:16}},[n("div",{staticClass:"header-content-left"},[n("div",{staticClass:"logo"},[n("router-link",{attrs:{to:e.prevPath+"/dw/survey"}},[n("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQzRDRFQ0Y5QjVFODExRUJCRENGOUE2Q0FGMTA3RTJEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQzRDRFQ0ZBQjVFODExRUJCRENGOUE2Q0FGMTA3RTJEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDNENEVDRjdCNUU4MTFFQkJEQ0Y5QTZDQUYxMDdFMkQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDNENEVDRjhCNUU4MTFFQkJEQ0Y5QTZDQUYxMDdFMkQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6GJisjAAAFMklEQVR42uzdTYhVZRjA8XNrSAqTIq0EqYSCCoQWgeFCHcJsEbVo1UARkbYIChdFbloFWosWQVAWhFBDmyJa1FhR46YPC0KkhCgzN9OXJH2JhdyeM3Mnq3veMJp5z3lnfj94mCLo3nPu/O97z51z7u31+/0qh9749I88NzbHd336jo8NbUuR2zMxOrM9CfX2/BRzIuboYL6KORxzMOZAzCcxv3dpmzavnL//90gFf3fuYJYP/n3dP/778ZgPYybr3mL2xZxcqDvjDL8P/Ednx6yPeTjm3ZipmKdiNsyutgKBU1bE3DNYUT6LeSDmPIHAsMtjHos5EvN4zEUCgebjmG0xh2J2xCwVCAw7J+ahwUuvO0o8RhEIOdRvxO6O2RNzmUCg2aaY/TFjAoFmy2JeiNkVs0Qg0GxLzN6q4+90CYQ2rY15L+ZKgUCz1YOV5BqBQLMLY96OWSMQaHZ+zGsxqwQCzVYNVpIVAoFmV8S8GnOWQKDZdTGPCgTS7o+5RSDQrD6x8bmYSwUCzep3tp6pWjwLWCB0XX2C4+0CgbT6gH2ZQKDZxTHbBQJp91UtnPkrEEoxe/muQCDh7irzRwoJhJIsHUQiEEjYWmX8u4hAKE19MuN6gUDabQKBtFtjzhQINKu/mmGtQCBts0AgbaNAIO3aKsNluQKhVPWpJ1cLBNLWCATSrhIIpK0WCKRdIhBIWy4QSLtAIJC2RCCQNu9fLz2SeYN6C+wBGtqeidGFtT2LnRUE/u0Zo9/v2wtzaM+UfZDb5pVWEPASC7om20F6b7zsHdUf88tiBQHaWUFmn4gL3EeL5q3PG98p7/GZGJ3fx8cKAgIBgYBAQCAgEBAICAQEAgIBBAICAYGAQEAgIBAQCAgEBAICAQQCAgGBgEBAICAQEAgIBAQCCAQEAgIBgYBAQCAgEBAICAQEAjTq9ft5vhq7Nz79o9jvSe+PLeBfgvE//7HIx2c+HxsrCAgEBAICgZxG2jjgpbsHvHaBFQRO/xkj19u8YAUBgYCD9Ll/LTde9o5aJH9J99hYQaCDK8hs7CU+wS6i3wePjxUEBAICAYHAIjpIX/BKf8sUKwgIBAQCAgGBgEBAICAQEAgIxC4AgYBAQCAgEBAICAQEAgIBgQACAYGAQEAgIBAQCAgEBAICAYEAAgGBgEBAICAQEAgIBAQCAgEEAqch9/ek9+zyTvP4WEGggytIf8zOxgoCAgEvseb66G+87B3115eIpW8LVhAoawWZfSIucB/1bE+x22MFYVH72UssSDshEEg7KhBI+14gkHZEIJB2WCCQ9qlAIO2AQKDZr1YQSPso5jeBQLPJHDciEEr1hkCgWf0HwvcFAs1eijkpEGj2Yq4bEgil+Txmr0Cg2dNVxgu7BEJJ6gukns15gwKhJHUcxwQCw+pTS3bmvlGBUIonYr4RCAz7OmZHGzcsEEqwPeZHgcCwN2N2t3XjAqHLfojZWrX4gXYCoavqKO6qMlx3LhBKVL9r9Urbd0IgdFF9KvuDXbgjAqFrDsXcXGW4nFYglOa7mJsGPyuBwCn1O1abYg526U4JhC74Nub6mP1du2MCoW1fxmyM+biLd04gtOmDmHVde1klELqgvrZjQzVzImJnjXicyKw+6fDemOdLuLMCIae3YrZULZ8+4iUWXTMVc2fMDSXFYQVhvtWXyT4Z80jV0vUcAqGLfhkchO/s+kG4QMjpi5hdgzm2EDZIIPxf9QdJv1zNfBzoZNXixU0CoQuOVzNfXlPH8HrMvirTB0m34Q8BBgDCrqxH8SRKpAAAAABJRU5ErkJggg==",alt:"logo",height:"32"}}),e._v(" "),n("h1",[e._v(e._s(e.logoTitle))]),e._v(" "),n("span",{staticStyle:{"font-size":"13px",color:"#c7c7c7"}},[e._v(e._s(e.logoTitleNote))])])],1)])]),e._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticStyle:{"text-align":"right"}},[n("el-menu",{staticClass:"dw-design-survey-menu dw-menu-height",attrs:{"default-active":e.defActive,router:"",mode:"horizontal"},on:{select:e.handleSelect}},[n("el-menu-item",{attrs:{index:e.prevPath+"/dw/survey"}},[e._v("我的问卷")]),e._v(" "),n("el-menu-item",{attrs:{index:e.prevPath+"/dw/survey/d/chart/"+e.$route.params.id}},[e._v("统计")]),e._v(" "),n("el-menu-item",{attrs:{index:e.prevPath+"/dw/survey/c/url/"+e.$route.params.id}},[e._v("收集")]),e._v(" "),n("el-menu-item",{attrs:{index:"/v6/diaowen/dw-design/survey/"+e.$route.params.id}},[e._v("设计")])],1)],1)])],1)},staticRenderFns:[]};var js=n("VU/8")($s,Hs,!1,function(e){n("Gxvo")},"data-v-d6e318b0",null).exports,Vs={name:"DwHtmlLabelCommon",components:{},props:{value:{type:Object,default:function(){}},itemClick:{type:Boolean,default:!1},btnSize:{type:String,default:"15px"},quNum:{type:Number,default:null},isRequired:{type:Boolean,default:!1}},data:function(){return{hover:!1,editorText:this.value.dwHtml,centerDialogVisible:!1,requiredTag:'<span style="color: #f56c6c;font-weight: bold;">*&nbsp;</span>'}},methods:{}},zs={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dwEditorRoot dw-width-100bf"},[n("div",[n("div",{ref:"curEdit",staticClass:"dwEditRoot dw-input-default",domProps:{innerHTML:e._s((void 0!==e.isRequired&&e.isRequired?e.requiredTag:"")+(void 0!==e.quNum&&null!==e.quNum?e.quNum+"、":"")+(null!==e.value.dwHtml?e.value.dwHtml:""))}})])])},staticRenderFns:[]};var Gs=n("VU/8")(Vs,zs,!1,function(e){n("1mV4")},"data-v-6a2db86f",null).exports;function Ys(e,t){if(e.dwEsSurveyAnswer=t,e.firstLoadAnswer=!0,null!=t&&t.hasOwnProperty("anQuestions")){var n=e.questions,s=t.anQuestions;null!==s&&s.length>0&&s.forEach(function(e,t){var s=e.quDwId;n.forEach(function(t,n){var i=t.dwId;s===i&&(!function(e,t){var n=e.quType;console.debug("parseAnQuAnswer2SurveyQu",n),"RADIO"===n?function(e,t){var n=e.quRadios;if(t.hasOwnProperty("anRadio")){var s=t.anRadio;if(null!=s&&s.hasOwnProperty("optionDwId")){var i=s.optionDwId;void 0!==i&&null!==i&&n.map(function(e,t){i===e.dwId&&(e.checked=!0,e.otherText=s.otherText)}),e.anQuestion=t}}}(e,t):"CHECKBOX"===n?function(e,t){var n=e.quCheckboxs;if(t.hasOwnProperty("anCheckboxs")){var s=t.anCheckboxs;null!==s&&s.length>0&&(s.forEach(function(e,t){if(e.hasOwnProperty("optionDwId")){var s=e.optionDwId;n.forEach(function(t,n){t.dwId===s&&(t.checked=!0,t.otherText=e.otherText)})}}),e.anQuestion=t)}}(e,t):"ORDERQU"===n?function(e,t){var n=e.quOrderbys;if(t.hasOwnProperty("anOrders")){var s=t.anOrders;null!==s&&s.length>0&&(s.forEach(function(e,t){if(e.hasOwnProperty("optionDwId")){var s=e.optionDwId;n.forEach(function(t,n){t.dwId===s&&(t.checked=!0,t.orderIndex=e.orderNum)})}}),e.anQuestion=t)}}(e,t):"MULTIFILLBLANK"===n?function(e,t){var n=e.quMultiFillblanks;if(t.hasOwnProperty("anMFbks")){var s=t.anMFbks;null!==s&&s.length>0&&(s.forEach(function(e,t){if(e.hasOwnProperty("optionDwId")){var s=e.optionDwId;n.forEach(function(t,n){t.dwId===s&&(t.inputText=e.answer)})}}),e.anQuestion=t)}}(e,t):"SCORE"===n?function(e,t){var n=e.quScores;if(t.hasOwnProperty("anScores")){var s=t.anScores;null!==s&&s.length>0&&(s.forEach(function(e,t){if(e.hasOwnProperty("optionDwId")){var s=e.optionDwId;n.forEach(function(t,n){t.dwId===s&&(t.checked=!0,null!==e.answerScore&&e.answerScore>=0&&(t.answerScore=parseInt(e.answerScore)))})}}),e.anQuestion=t)}}(e,t):"FILLBLANK"===n?function(e,t){if(t.hasOwnProperty("anFbk")){var n=t.anFbk;null!==n&&(e.answer=n.answer,e.anQuestion=t)}}(e,t):"UPLOADFILE"===n&&function(e,t){if(t.hasOwnProperty("anUploadFiles")){var n=t.anUploadFiles;if(null!==n){var s=[];n.forEach(function(e,t){s.push({response:{data:[{location:e.filePath,filename:e.fileName}]},name:e.fileName})}),e.upFileList=s,e.anQuestion=t}}}(e,t)}(t,e),console.debug("surveyQuId",i))})})}console.debug("parseAnswerData survey",e)}function Ws(e){var t=e.questions;if(null!==t&&t.length>0){var n=1;t.forEach(function(e,t){var s=e.quType,i=e.quAttr;if("FILLBLANK"===s){var r=i.inputAttr;!function(e){var t=e.commonAttr,n=t.checkType,s=t.placeholder,i="请输入";void 0!==s&&null!==s&&""!==s&&"请输入"!==s||("EMAIL"===n?i="请输入邮箱":"NUM"===n?i="请输入数字":"DIGITS"===n?i="请输入整数":"TEL_PHONE"===n?i="请选择电话或手机":"TIME"===n?i="请选择时间":"DATE"===n?i="请选择日期":"DATETIME"===n?i="请选择日期时间":"ZIPCODE"===n?i="请输入邮政编码":"TEL"===n?i="请输入电话号码":"PHONE"===n?i="请输入手机号码":"IDENTCODE"===n?i="请输入身份证号":"URL"===n?i="请输入网址":"UNSTRCN"===n?i="请输入非中文":"STRCN"===n&&(i="请输入中文"),t.placeholder=i)}(r);var o=r.commonAttr;"TIME"===o.checkType&&r.dateTimeAttr.attrs.includes("range")&&(e.answer={startTime:null,endTime:null});var a=o.defaultValue;null!==a&&""!==a&&(e.answer=a)}e.showQu=!0,e.logicIsHide=!1,e.pageIndex=n,"PAGETAG"===e.quType&&n++})}e.pageAttr={pageSize:An.pageSize(e),curPage:1},e.answerProgress={totalAnQu:0,completeAnQu:0,percentage:0}}function Js(e,t){e.questions.forEach(function(e,n){console.debug("item.pageIndex === pageIndex",e.pageIndex===t),e.showQu=e.pageIndex===t}),e.pageAttr.curPage=t}function Zs(e){var t=e.dwId,n=Object(Xt.a)(),s={answerCommon:{surveyId:e.id,surveyDwId:t,answerDwId:n,anUser:{userId:null,userName:null},anTime:{bgAnDate:null,endAnDate:null,totalTime:0},anIp:{ip:null,city:null,addr:null},anState:{anQuNum:0,isEff:1,handleState:0},isDelete:0},anQuestions:[]},i=e.questions;return void 0!==i&&(console.debug("questions",i),s.anQuestions=i.map(function(e,t){return console.debug("item",e),Ks(e)})),s}function Ks(e){var t=e.quType,n={quDwId:e.dwId,quType:t};return"RADIO"===t?function(e,t){e.quRadios.map(function(e,n){e.hasOwnProperty("checked")&&e.checked&&(t.anRadio={optionDwId:e.dwId,otherText:e.otherText})})}(e,n):"CHECKBOX"===t?function(e,t){var n=e.quCheckboxs;t.anCheckboxs=[],n.map(function(e,n){e.hasOwnProperty("checked")&&e.checked&&t.anCheckboxs.push({optionDwId:e.dwId,otherText:e.otherText})})}(e,n):"ORDERQU"===t?function(e,t){console.debug("getQuOrderByAnswerData question",e),console.debug("anQuestion",t);var n=e.quOrderbys;t.anOrders=[],n.forEach(function(e,n){e.hasOwnProperty("checked")&&e.checked&&e.orderIndex>0&&t.anOrders.push({optionDwId:e.dwId,orderNum:e.orderIndex})})}(e,n):"MULTIFILLBLANK"===t?function(e,t){var n=e.quMultiFillblanks;t.anMFbks=[],n.map(function(e,n){e.hasOwnProperty("inputText")&&""!==e.inputText&&t.anMFbks.push({optionDwId:e.dwId,answer:e.inputText})})}(e,n):"SCORE"===t?function(e,t){var n=e.quScores;t.anScores=[],n.map(function(e,n){e.hasOwnProperty("checked")&&e.checked&&e.hasOwnProperty("answerScore")&&t.anScores.push({optionDwId:e.dwId,answerScore:e.answerScore})})}(e,n):"FILLBLANK"===t?function(e,t){t.anFbk={answer:e.answer},console.debug("anFillblank",t.anFbk.answer)}(e,n):"UPLOADFILE"===t&&function(e,t){if(t.anUploadFiles=[],e.hasOwnProperty("upFileList")){var n=e.upFileList;console.debug("quUpFileList",n),void 0!==n&&null!==n&&n.forEach(function(e,n){if(e.hasOwnProperty("response")&&e.response.hasOwnProperty("data")){var s=e.response.data;s.forEach(function(e){var n={filePath:e.location,fileName:e.filename};t.anUploadFiles.push(n)})}}),console.debug("anQuestion.anUploadFiles",t.anUploadFiles)}}(e,n),e.anQuestion=n,n}function Xs(e){var t=!0;return function(e,t){null!==e&&e.length>0&&e.forEach(function(e,n){e.showOptionError=t,ei(e)})}(e,!0),e.forEach(function(e,n){if(e.showQu&&!e.logicIsHide&&!e.validateObj.isOk)return t=!1,!1}),t}function ei(e){if(null!==e){var t=e.quType;e.showQu&&!e.logicIsHide&&(e.validateObj={errorText:"此题必答",isOk:!0,isAnswerOk:!1},"PAGETAG"!==t&&"PARAGRAPH"!==t&&("RADIO"===t?function(e){var t=[],n=e.validateObj,s=0;Ks(e),e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anRadio")&&(s=e.anQuestion.anRadio.length);e.hasOwnProperty("isRequired")&&1===e.isRequired&&s<=0&&t.push("此题必答");if(e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anRadio"))for(var i=e.anQuestion.anRadio,r=e.quRadios,o=0;o<r.length;o++){var a=r[o];if(a.validateObj={errorText:"",isOk:!0},a.dwId===i.optionDwId&&a.hasOwnProperty("showOptionNote")&&1===a.showOptionNote&&a.hasOwnProperty("inputAttr")){var l=a.inputAttr,u=i.otherText,d=[];ti(e,l,d,u),d.length>0&&e.hasOwnProperty("showOptionError")&&e.showOptionError&&(a.validateObj.errorText=d.join("，"),a.validateObj.isOk=!1,n.isOk=!1)}}n.errorText="",t.length>0&&(n.errorText=t.join("，"),n.isOk=!1);e.validateObj=n}(e):"CHECKBOX"===t?function(e){var t=[],n=e.validateObj,s=0;e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anCheckboxs")&&(s=e.anQuestion.anCheckboxs.length);e.hasOwnProperty("isRequired")&&1===e.isRequired&&s<=0&&t.push("此题必答");if(n.isOk){if(e.hasOwnProperty("minLimit")){var i=e.minLimit;null!=i&&i>0&&s<i&&t.push("至少需要选择"+i+"个选项")}if(e.hasOwnProperty("maxLimit"))e.maxLimit}if(e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anCheckboxs"))for(var r=e.anQuestion.anCheckboxs,o=e.quCheckboxs,a=0;a<o.length;a++){var l=o[a];l.validateObj={errorText:"",isOk:!0};for(var u=0;u<r.length;u++){var d=r[u];if(l.dwId===d.optionDwId&&l.hasOwnProperty("showOptionNote")&&1===l.showOptionNote&&l.hasOwnProperty("inputAttr")){var c=l.inputAttr,v=l.otherText,p=[];ti(e,c,p,v),p.length>0&&e.hasOwnProperty("showOptionError")&&e.showOptionError&&(l.validateObj.errorText=p.join("，"),l.validateObj.isOk=!1,n.isOk=!1)}}}n.errorText="",t.length>0&&(n.errorText=t.join("，"),n.isOk=!1);e.validateObj=n}(e):"ORDERQU"===t?function(e){var t=e.quOrderbys,n=e.validateObj,s=0;e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anOrders")&&(s=e.anQuestion.anOrders.length);e.hasOwnProperty("isRequired")&&1===e.isRequired&&s<t.length&&(n.errorText="此题必答",n.isOk=!1);e.validateObj=n}(e):"MULTIFILLBLANK"===t?function(e){var t=e.quMultiFillblanks,n=e.validateObj,s=0;e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anMFbks")&&(s=e.anQuestion.anMFbks.length);e.hasOwnProperty("isRequired")&&1===e.isRequired&&s<t.length&&(n.errorText="此题必答",n.isOk=!1);e.validateObj=n}(e):"SCORE"===t?function(e){var t=e.quScores,n=e.validateObj,s=0;e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anScores")&&(s=e.anQuestion.anScores.length);console.debug("quScores.answerSize",s),console.debug("quScores.length",t.length),console.debug("question.anQuestion",e.anQuestion),e.hasOwnProperty("isRequired")&&1===e.isRequired&&s<t.length&&(n.errorText="此题必答",n.isOk=!1);e.validateObj=n}(e):"FILLBLANK"===t?function(e){var t=e.validateObj,n=null;e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anFbk")&&(n=e.anQuestion.anFbk.answer);e.hasOwnProperty("isRequired")&&1===e.isRequired&&(null===n||void 0===n||n.length<=0)&&(t.errorText="此题必答",t.isOk=!1);var s=[];null!==n&&void 0!==n||(n="");if(e.hasOwnProperty("quAttr")){var i=e.quAttr;if(i.hasOwnProperty("isRequired")&&i.isRequired&&n.length<=0&&s.push("此题必答"),i.hasOwnProperty("inputAttr")){var r=i.inputAttr;ti(e,r,s,n),s.length>0&&(t.errorText=s.join("，"),t.isOk=!1)}}e.validateObj=t}(e):"UPLOADFILE"===t&&function(e){var t=e.validateObj,n=0;e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anUploadFiles")&&(n=e.anQuestion.anUploadFiles.length);e.hasOwnProperty("isRequired")&&1===e.isRequired&&n<=0&&(t.errorText="此题必答",t.isOk=!1);e.validateObj=t}(e)),e.validateObj.isOk&&(e.validateObj.isAnswerOk=!0))}return e}function ti(e,t,n,s){if(t.hasOwnProperty("commonAttr")){var i=t.commonAttr;if(i.hasOwnProperty("isRequired")&&1===i.isRequired&&(void 0===s||null===s||s.length<=0)&&(n.push("此项必答"),e.showOptionError=!0),void 0!==s&&null!==s&&s.length>0&&i.hasOwnProperty("checkType")||i.hasOwnProperty("isRequired")&&1===i.isRequired){e.showOptionError=!0;var r=i.checkType;if(null!==r){var o=function(e,t,n){var s={isOK:!0,msg:""};if((null===t||void 0===t||t.length<=0)&&(s.isOK=!1,s.msg="输入值不能为空"),"NO"===e)t.length<=0&&(s.isOK=!1,s.msg="输入值不能为空");else if("EMAIL"===e)/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)||(s.isOK=!1,s.msg="请输入值邮箱地址");else if("UNSTRCN"===e)/^[\u3220-\uFA29]+$/.test(t)&&(s.isOK=!1,s.msg="请输入非中文字符");else if("STRCN"===e)/^[\u3220-\uFA29]+$/.test(t)||(s.isOK=!1,s.msg="请输入中文字符");else if("NUM"===e)/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)||(s.isOK=!1,s.msg="请输入数字");else if("DIGITS"===e)/^\d+$/.test(t)||(s.isOK=!1,s.msg="请输入整数");else if("TEL"===e)/^\d{3,4}-{1}\d{7,9}-?\d{1,6}$/.test(t)||/^(400{1}-?[0-9]{3}-?[0-9]{4})|(800{1}-?[0-9]{3}-?[0-9]{4})$/.test(t)||(s.isOK=!1,s.msg="请输入电话号");else if("PHONE"===e)11===t.length&&/^(((13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[0-9]{1})|(18[0-9]{1})|(19[0-9]{1}))+\d{8})$/.test(t)||(s.isOK=!1,s.msg="请输入手机号");else if("TEL_PHONE"===e)/^(400{1}-?[0-9]{3}-?[0-9]{4})|(800{1}-?[0-9]{3}-?[0-9]{4})$/.test(t)||/^\d{3,4}-{1}\d{7,9}-?\d{1,6}$/.test(t)||/^(((13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[0-9]{1})|(18[0-9]{1})|(19[0-9]{1}))+\d{8})$/.test(t)||(s.isOK=!1,s.msg="请输入电话或手机号");else if("DATE"===e){var i=new RegExp(/^[1-9]\d{3}$/),r=new RegExp(/^[1-9]\d{3}-(0[1-9]|1[0-2])$/),o=new RegExp(/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/),a=new RegExp(/^(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/),l=new RegExp(/^(20|21|22|23|[0-1]\d):[0-5]\d$/),u=new RegExp(/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])\s+(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/);i.test(t)||o.test(t)||r.test(t)||a.test(t)||u.test(t)||l.test(t)||(s.isOK=!1,s.msg="请输入日期，如2014-01-01")}else"IDENT_CODE"===e?(!/^\d{15}|(\d{17}(\d|x|X))$/.test(t)||15!==t.length&&18!==t.length)&&(s.isOK=!1,s.msg="请输入身份证号"):"ZIPCODE"===e?/^[0-9]{6}$/.test(t)||(s.isOK=!1,s.msg="请输入邮政编号"):"URL"===e?/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)||(s.isOK=!1,s.msg="请输入网址URL"):"CUSTOM"===e&&(new RegExp(n).test(t)||(s.isOK=!1,s.msg="不符合校验规则"));return s}(r,s,null);"DATE"===r&&(o.isOK=!0),o.isOK||n.push(o.msg)}if("NO"===r||"EMAIL"===r||"URL"===r||"UNSTRCN"===r||"STRCN"===r){var a=s.length;if(i.hasOwnProperty("minlength")){var l=i.minlength;a<l&&n.push("最少输入"+l+"字")}if(i.hasOwnProperty("maxlength")){var u=i.maxlength;a>u&&n.push("最多输入"+u+"字")}}else if("NUM"===r||"DIGITS"===r){var d=t.numAttr,c=parseFloat(s);if(d.hasOwnProperty("min")){var v=d.min;null!==v&&v>0&&c<v&&n.push("最小值不小于"+v)}if(d.hasOwnProperty("max")){var p=d.max;null!==p&&p>0&&c>p&&n.push("最大值不大于"+p)}}}}}var ni={name:"DwAnswerQuestionCommon",components:{DwHtmlLabelCommon:Gs,DwPopoverQuAttrs:cn,DwPopoverMoreOptions:on,DwTextEditLabelCommon:Kt,DwTextEditLabel:Wt},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},options:{type:Object,default:function(){return{themeColor:"red"}}},survey:{type:Object,default:function(){}}},data:function(){return{hover:!1,itemHover:!1,quTitle:"text",itemIndex:0,moreOptionText:"",openDelay:300}},computed:{quNum:function(){var e=this;if(this.survey.hasOwnProperty("surveyStyle")){var t=this.survey.surveyStyle;if(null!=t&&t.hasOwnProperty("showQuNum")&&t.showQuNum){var n=0;return this.survey.questions.forEach(function(t,s){"PAGETAG"!==t.quType&&"PARAGRAPH"!==t.quType&&s<=e.index&&!t.logicIsHide&&n++}),n}}return null}},watch:{survey:function(e,t){console.log("firstName changed from "+t+" to "+e)}},methods:{nextPage:function(e){(e<this.survey.pageAttr.curPage||Xs(this.survey.questions))&&Js(this.survey,e)},mouseleave:function(){this.hover=!1},mouseover:function(){this.hover=!0},mouseleaveItem:function(){this.itemHover=!1},mouseoverItem:function(){this.itemHover=!0},clickItem:function(){this.survey,this.itemIndex,this.index},dwAddQuItemEvent:function(){var e=en(this.survey,this.index,{id:null,optionTitleObj:{dwHtml:"",dwText:"",dwPlaceholder:"请输入内容",isRefreshValue:!0},itemClick:!0});this.$emit("update-survey",e),this.survey},deleteQu:function(){var e=this;this.$confirm("确认删除？").then(function(t){e.survey.questions.splice(e.index,1)}).catch(function(e){})},copyQu:function(){var e=this.survey.questions[this.index],t=tn(JSON.parse(l()(e)));this.survey.questions.splice(this.index+1,0,t)},upQu:function(){var e=tn(JSON.parse(l()(this.survey.questions[this.index]))),t=tn(JSON.parse(l()(this.survey.questions[this.index-1])));this.survey.questions.splice(this.index-1,1,e),this.survey.questions.splice(this.index,1,t)},downQu:function(){var e=tn(JSON.parse(l()(this.survey.questions[this.index]))),t=tn(JSON.parse(l()(this.survey.questions[this.index+1])));this.survey.questions.splice(this.index+1,1,e),this.survey.questions.splice(this.index,1,t)}}},si={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"dw-question-root",on:{mouseover:e.mouseover,mouseleave:e.mouseleave}},[n("div",{staticClass:"dw-question-body"},[n("div",{staticClass:"dw-question-body-center"},[n("div",{staticClass:"dw-question-body-center-body dw-color-333"},[n("div",{staticClass:"dw-qu-content"},[n("div",{staticClass:"dw-qu-title-body dw-display-flex dw-width-100bf",staticStyle:{"align-items":"baseline","flex-wrap":"wrap"}},["PAGETAG"!==e.survey.questions[e.index].quType?[n("div",{staticClass:"dw-display-flex",staticStyle:{"align-items":"baseline"}},[n("div",{staticClass:"dw-display-flex",staticStyle:{"align-items":"baseline","flex-wrap":"wrap"}},["PARAGRAPH"!==e.survey.questions[e.index].quType?n("div",{staticClass:"dw-qu-title"},[n("dw-html-label-common",{ref:"dwQuTitle",attrs:{survey:e.survey,"qu-num":e.quNum,"is-required":1===e.survey.questions[e.index].isRequired},model:{value:e.survey.questions[e.index].quTitleObj,callback:function(t){e.$set(e.survey.questions[e.index],"quTitleObj",t)},expression:"survey.questions[index].quTitleObj"}})],1):n("div",{staticClass:"dw-qu-title dw-qu-paragraph"},[n("dw-html-label-common",{ref:"dwQuTitle",attrs:{survey:e.survey,"is-required":!1},model:{value:e.survey.questions[e.index].quTitleObj,callback:function(t){e.$set(e.survey.questions[e.index],"quTitleObj",t)},expression:"survey.questions[index].quTitleObj"}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.hasOwnProperty("surveyStyle")&&e.survey.surveyStyle.hasOwnProperty("showQuTypeName")&&e.survey.surveyStyle.showQuTypeName,expression:"survey.hasOwnProperty('surveyStyle') && survey.surveyStyle.hasOwnProperty('showQuTypeName') && survey.surveyStyle.showQuTypeName"}],staticClass:"dw-qu-type-name"},[n("div",{staticClass:"dw-font-12 dw-color-grey-10"},[e._v("【"+e._s(e.survey.questions[e.index].quTypeName)+"】")])])])])]:[n("div",{staticClass:"dw-width-100bf"},[e.survey.hasOwnProperty("pageAttr")&&e.survey.pageAttr.hasOwnProperty("curPage")?[n("el-button",{staticClass:"dw-answer-button-style1",attrs:{type:"primary"},on:{click:function(t){return e.nextPage(e.survey.pageAttr.curPage+1)}}},[e._v("下一页（"+e._s(e.survey.pageAttr.curPage)+"/"+e._s(e.survey.pageAttr.pageSize)+"）")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.survey.pageAttr.curPage>1,expression:"survey.pageAttr.curPage>1"}],staticClass:"dw-answer-button-style1",attrs:{type:"primary",plain:""},on:{click:function(t){return e.nextPage(e.survey.pageAttr.curPage-1)}}},[e._v("上一页")])]:e._e()],2)]],2),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.survey.questions[e.index].quNoteObj.dwHtml&&""!==e.survey.questions[e.index].quNoteObj.dwHtml,expression:"survey.questions[index].quNoteObj.dwHtml !==null && survey.questions[index].quNoteObj.dwHtml !=='' "}],staticStyle:{"font-size":"12px",color:"grey","margin-bottom":"5px"}},[n("dw-html-label-common",{ref:"dwQuNote",attrs:{survey:e.survey},model:{value:e.survey.questions[e.index].quNoteObj,callback:function(t){e.$set(e.survey.questions[e.index],"quNoteObj",t)},expression:"survey.questions[index].quNoteObj"}})],1),e._v(" "),n("div",{staticClass:"dw-qu-content-body",staticStyle:{"padding-top":"5px"}},[n("div",{staticClass:"dw-qu-content-body-content"},[e._t("editQuContent")],2),e._v(" "),n("div",{staticClass:"dw-question-body-bottom"},[n("div",[n("transition",{attrs:{"enter-active-class":"animate__animated animate__flipInX","leave-active-class":"animate__animated animate__flipOutX"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.survey.questions[e.index].validateObj.isOk&&""!==e.survey.questions[e.index].validateObj.errorText,expression:"!survey.questions[index].validateObj.isOk && survey.questions[index].validateObj.errorText!==''"}],staticClass:"dw-answer-question-error"},[n("i",{staticClass:"fa-solid fa-circle-exclamation"}),e._v("\n                      "+e._s(e.survey.questions[e.index].validateObj.errorText)+"\n                    ")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.dwDebug,expression:"survey.dwDebug"}]},[e._v(e._s(e.survey.questions[e.index].validateObj))])],1)])])])])]),e._v(" "),n("div",{staticClass:"dw-question-body-right dw-text-align-center dw-padding-top-2"})])])])},staticRenderFns:[]};var ii=n("VU/8")(ni,si,!1,function(e){n("e9wV"),n("2JVw")},"data-v-303e2178",null).exports;function ri(e){return e.$notify({title:"提示",message:"当前为只读状态，不可答题",type:"warning"}),!1}function oi(e,t){return e+"_"+t}function ai(e,t){localStorage.setItem(e,l()(t))}function li(e){return localStorage.getItem(e)}function ui(e){for(var t=[],n=0;n<localStorage.length;n++){var s=localStorage.key(n);s.includes(e)&&t.push(s)}return t}function di(e){e.hasOwnProperty("answerProgress")||ci(e,function(e){return ei(e),e.validateObj.isOk=!0,e.validateObj.isAnswerOk})}function ci(e,t){var n={totalAnQu:0,completeAnQu:0,percentage:0};e.questions.forEach(function(e,s){if(e.hasOwnProperty("quAttr")){var i=e.quAttr;i.hasOwnProperty("isRequired")&&i.isRequired&&!e.logicIsHide&&(n.totalAnQu=n.totalAnQu+1,t(e)&&(n.completeAnQu=n.completeAnQu+1))}}),n.totalAnQu>0&&(n.percentage=(n.completeAnQu/n.totalAnQu*100).toFixed(2)),e.answerProgress.totalAnQu=n.totalAnQu,e.answerProgress.completeAnQu=n.completeAnQu,e.answerProgress.percentage=n.percentage}var vi="survey_init",pi="survey_answer_history",mi="survey_answer_history_action",yi={saveSurvey2LocalStorage:function(e){if(null!==e){var t=e.sid,n=wi(e);this.saveSurvey2LocalStorageByParams(t,n,e)}},saveSurvey2LocalStorageByParams:function(e,t,n){ai(oi(e,""+vi+fi(t)),n)},getSurveyByLocalStorage:function(e,t){var n=li(oi(e,""+vi+fi(t)));return JSON.parse(n)}},hi={saveSurveyAnswer2LocalStorage:function(e){if(null!==e){var t=e.sid,n=wi(e);this.saveSurveyAnswer2LocalStorageByParams(t,n,e)}},saveSurveyAnswer2LocalStorageByParams:function(e,t,n){var s=parseInt(this.getSurveyAnswerActionNum(e,t)),i=this.getSurveyAnswerTextByLocalStorage(e,t);l()(n)!==i&&(ai(oi(e,""+pi+fi(t)+"_"+s),n),this.saveSurveyAnswerActionNum(e,t,s))},getSurveyAnswerTextByLocalStorage:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return void 0!==n&&null!==n||(n=this.getSurveyAnswerActionNum(e,t)),li(oi(e,""+pi+fi(t)+"_"+n))},getSurveyAnswerObjByLocalStorage:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return JSON.parse(this.getSurveyAnswerTextByLocalStorage(e,t,n))},saveSurveyAnswerActionNum:function(e,t,n){return ai(oi(e,""+mi+fi(t)),{num:0,dateTime:(new Date).getTime()})},getSurveyAnswerActionNum:function(e,t){var n=this.getSurveyAnswerAction(e,t);return null!==n&&n.hasOwnProperty("num")?n.num:0},getSurveyAnswerActionTime:function(e){if(null!==e){var t=e.sid,n=wi(e);return this.getSurveyAnswerActionTimeBySid(t,n)}return 0},getSurveyAnswerActionTimeBySid:function(e,t){var n=this.getSurveyAnswerAction(e,t);return null!==n&&n.hasOwnProperty("dateTime")?n.dateTime:0},getSurveyAnswerAction:function(e,t){var n=oi(e,""+mi+fi(t));if(localStorage.hasOwnProperty(n)){var s=li(n);if(null!==s)return JSON.parse(s)}return null},deleteAnswerHistoryLtNum:function(e,t,n){for(var s=1;s<n;s++){var i=oi(e,""+pi+fi(t)+"_"+s);localStorage.removeItem(i)}},clearAnswerHistory:function(e,t){for(var n=oi(e,""+mi+fi(t)),s=oi(e,""+pi+fi(t)),i=localStorage.length,r=[],o=0;o<i;o++){var a=localStorage.key(o);null!=a&&(a.indexOf(n)>=0||a.indexOf(s)>=0)&&r.push(a)}for(var l=0;l<r.length;l++)localStorage.removeItem(r[l])},getSurveyAnswerActionByKey:function(e){if(localStorage.hasOwnProperty(e)){var t=li(e);if(null!==t)return JSON.parse(t)}return null},clearAnswerByDate:function(){var e=this;ui(mi).forEach(function(t,n){var s=0,i=e.getSurveyAnswerActionByKey(t);null!==i&&i.hasOwnProperty("dateTime")&&(s=i.dateTime);var r=(new Date).getTime(),o=s+864e5;if(console.debug("lastActionTime",o,r,o<r),o<r){var a=t.replace("survey_answer_history_action","");console.debug("deleteKey sid",a),ui(a).forEach(function(e,t){localStorage.removeItem(e)})}})}};function fi(e){return void 0===e||null===e?"":"_"+e}function wi(e){return e.hasOwnProperty("dwEsSurveyAnswer")&&e.dwEsSurveyAnswer.hasOwnProperty("esId")?e.dwEsSurveyAnswer.esId:null}function gi(e){var t=e.questions;void 0!==t&&t.map(function(t,n){xi(e,n)})}function xi(e,t){var n=e.questions;e.hasOwnProperty("surveyLogicControl")||(e.surveyLogicControl={hideQus:[]}),void 0!==n&&bi(e,n[t]),function(e){var t=e.questions;void 0!==t&&t.map(function(t,n){var s=Ci(e,t);!t.logicIsHide&&s&&(e.hasOwnProperty("firstLoadAnswer")&&e.firstLoadAnswer||pn(t),bi(e,t)),t.logicIsHide=s})}(e)}function bi(e,t){var n=t.quType;function s(e,t,n){var s=n.dwId,i=n.logicType,r=n.skQuId;if("GO"===i){var o=function(e,t,n){for(var s=[],i=!1,r=e.questions,o=0;o<r.length;o++){var a=r[o].dwId;if(a===t){i=!1;break}a===n?i=!0:i&&s.push(a)}return s}(e,r,t.dwId);e.surveyLogicControl.hideQus.push({idType:"quId",hideQuDwId:o,trigger:s})}else if("SHOW"===i){var a=e.surveyLogicControl.hideQus;e.surveyLogicControl.hideQus=a.filter(function(e){return e.trigger!==s})}}function i(t){var n=t.dwId,s=t.logicType,i=t.skQuId;if("GO"===s){var r=e.surveyLogicControl.hideQus;e.surveyLogicControl.hideQus=r.filter(function(e){return e.trigger!==n})}else"SHOW"===s&&e.surveyLogicControl.hideQus.push({idType:"quId",hideQuDwId:i,trigger:n})}t.questionLogics.forEach(function(r,o){r.logicType,r.dwId,r.cgQuItemId,r.skQuId;t.hasOwnProperty("anQuestion")&&void 0!==t.anQuestion?"RADIO"===n?function(e,t,n){var r=t.anQuestion,o=n.cgQuItemId;r.hasOwnProperty("anRadio")&&r.anRadio.hasOwnProperty("optionDwId")&&o.includes(r.anRadio.optionDwId)?s(e,t,n):i(n)}(e,t,r):"CHECKBOX"===n?function(e,t,n){var r=t.anQuestion,o=n.cgQuItemId;if(r.hasOwnProperty("anCheckboxs")&&null!=r.anCheckboxs&&r.anCheckboxs.length>0){var a=r.anCheckboxs,l=!1;a.forEach(function(e,t){e.hasOwnProperty("optionDwId")&&o.includes(e.optionDwId)&&(l=!0)}),l?s(e,t,n):i(n)}else i(n)}(e,t,r):"ORDERQU"===n?function(e,t,n){var r=t.anQuestion,o=n.cgQuItemId;if(r.hasOwnProperty("anOrders")&&null!=r.anOrders&&r.anOrders.length>0){var a=r.anOrders,l=!1;a.forEach(function(e,t){if(e.hasOwnProperty("optionDwId")&&o.includes(e.optionDwId)){e.optionDwId;var s=e.orderNum,i=n.geLe,r=n.scoreNum;"LTE"===i&&s>=r?l=!0:"GTE"===i&&s<=r?l=!0:"LT"===i&&s>r?l=!0:"GT"===i&&s<r&&(l=!0)}}),l?s(e,t,n):i(n)}else i(n)}(e,t,r):"MULTIFILLBLANK"===n?function(e,t,n){var r=t.anQuestion,o=n.cgQuItemId;if(r.hasOwnProperty("anMFbks")&&null!=r.anMFbks&&r.anMFbks.length>0){var a=r.anMFbks,l=!1;a.forEach(function(e,t){if(e.hasOwnProperty("optionDwId")&&o.includes(e.optionDwId)){e.optionDwId;var n=e.answer;void 0!==n&&null!==n&&""!==n&&(l=!0)}}),l?s(e,t,n):i(n)}else i(n)}(e,t,r):"SCORE"===n?function(e,t,n){var r=t.anQuestion,o=n.cgQuItemId;if(r.hasOwnProperty("anScores")&&null!=r.anScores&&r.anScores.length>0){var a=r.anScores,l=!1;a.forEach(function(e,t){if(e.hasOwnProperty("optionDwId")&&o.includes(e.optionDwId)){e.optionDwId;var s=e.answerScore,i=n.geLe,r=n.scoreNum;"LTE"===i&&s<=r?l=!0:"GTE"===i&&s>=r?l=!0:"LT"===i&&s<r?l=!0:"GT"===i&&s>r&&(l=!0)}}),l?s(e,t,n):i(n)}else i(n)}(e,t,r):"FILLBLANK"===n?function(e,t,n){var r=t.anQuestion;n.cgQuItemId;r.hasOwnProperty("anFbk")&&r.anFbk.hasOwnProperty("answer")&&void 0!==r.anFbk.answer&&null!==r.anFbk.answer&&""!==r.anFbk.answer?s(e,t,n):i(n)}(e,t,r):"UPLOADFILE"===n&&function(e,t,n){var r=t.anQuestion;n.cgQuItemId;console.debug("anUploadFiles",r.anUploadFiles),r.hasOwnProperty("anUploadFiles")&&null!=r.anUploadFiles&&r.anUploadFiles.length>0?s(e,t,n):i(n)}(e,t,r):i(r)})}function Ci(e,t){var n=!1;if(e.hasOwnProperty("surveyLogicControl")&&e.surveyLogicControl.hasOwnProperty("hideQus"))for(var s=e.surveyLogicControl.hideQus,i=0;i<s.length;i++){if(s[i].hideQuDwId.includes(t.dwId)){n=!0;break}}return n}function _i(e,t,n){(function(e){return x({url:"/api/dwsurvey/none/v6/dw-answer-survey/survey-json-by-survey-id.do",method:"get",params:e})})(e).then(function(e){console.debug("surveyJsonBySurveyId",e);var s=e.data;if(200===s.resultCode){var i=s.data;if(i.hasOwnProperty("answerCheckResult")&&i.hasOwnProperty("surveyJson")){var r=i.answerCheckResult,o=i.surveyJson;null!==o&&o.hasOwnProperty("surveyJsonText")&&null!==o.surveyJsonText&&""!==o.surveyJsonText?t(In(JSON.parse(o.surveyJsonText)),r):n(r)}}})}function Ai(e,t){Si(e,t,!1)}function Si(e,t,n){e.questions[t].hasOwnProperty("showOptionError")&&!e.questions[t].showOptionError&&n||e.questions[t].hasOwnProperty("showOptionError"),Ks(e.questions[t]),xi(e,t),ei(e.questions[t]),hi.saveSurveyAnswer2LocalStorage(e),function(e){ci(e,function(e){return e.validateObj.isAnswerOk})}(e)}var qi={name:"DwAnswerInput1",components:{},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},inputAttr:{type:Object,default:function(){}},optionIndex:{type:Number,default:0}},data:function(){return{inputAnswer:void 0}},computed:{isAnswer:function(){return!1}},mounted:function(){var e=this.survey.questions[this.index].quType;if("FILLBLANK"===e)try{this.survey.questions[this.index].hasOwnProperty("answer")&&void 0!==this.survey.questions[this.index].answer&&(this.inputAnswer=JSON.parse(this.survey.questions[this.index].answer))}catch(e){console.debug("e",e),this.survey.questions[this.index].hasOwnProperty("answer")&&void 0!==this.survey.questions[this.index].answer&&(this.inputAnswer=this.survey.questions[this.index].answer)}else if("MULTIFILLBLANK"===e)try{this.survey.questions[this.index].quMultiFillblanks[this.optionIndex].hasOwnProperty("inputText")&&void 0!==this.survey.questions[this.index].quMultiFillblanks[this.optionIndex].inputText&&(this.inputAnswer=JSON.parse(this.survey.questions[this.index].quMultiFillblanks[this.optionIndex].inputText))}catch(e){console.debug("e",e),this.survey.questions[this.index].quMultiFillblanks[this.optionIndex].hasOwnProperty("inputText")&&void 0!==this.survey.questions[this.index].quMultiFillblanks[this.optionIndex].inputText&&(this.inputAnswer=this.survey.questions[this.index].quMultiFillblanks[this.optionIndex].inputText)}else if("RADIO"===e)try{this.survey.questions[this.index].quRadios[this.optionIndex].hasOwnProperty("otherText")&&void 0!==this.survey.questions[this.index].quRadios[this.optionIndex].otherText&&(this.inputAnswer=JSON.parse(this.survey.questions[this.index].quRadios[this.optionIndex].otherText))}catch(e){console.debug("e",e),this.survey.questions[this.index].quRadios[this.optionIndex].hasOwnProperty("otherText")&&void 0!==this.survey.questions[this.index].quRadios[this.optionIndex].otherText&&(this.inputAnswer=this.survey.questions[this.index].quRadios[this.optionIndex].otherText)}else if("CHECKBOX"===e)try{this.survey.questions[this.index].quCheckboxs[this.optionIndex].hasOwnProperty("otherText")&&void 0!==this.survey.questions[this.index].quCheckboxs[this.optionIndex].otherText&&(this.inputAnswer=JSON.parse(this.survey.questions[this.index].quCheckboxs[this.optionIndex].otherText))}catch(e){console.debug("e",e),this.survey.questions[this.index].quCheckboxs[this.optionIndex].hasOwnProperty("otherText")&&void 0!==this.survey.questions[this.index].quCheckboxs[this.optionIndex].otherText&&(this.inputAnswer=this.survey.questions[this.index].quCheckboxs[this.optionIndex].otherText)}},methods:{parseNumber:function(e){return e.replace(/[^\d]/g,"")},formatNumber:function(e){return e.toString().replace(/(\d+)(\d{3})/,"$1$2")},onBlur:function(e){var t=this.survey.questions[this.index].quType;"FILLBLANK"===t?this.survey.questions[this.index].answer=this.inputAnswer:"MULTIFILLBLANK"===t?this.survey.questions[this.index].quMultiFillblanks[this.optionIndex].inputText=this.inputAnswer:"RADIO"===t?this.survey.questions[this.index].quRadios[this.optionIndex].otherText=this.inputAnswer:"CHECKBOX"===t&&(this.survey.questions[this.index].quCheckboxs[this.optionIndex].otherText=this.inputAnswer),Si(this.survey,this.index,!0)}}},ki={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dw-qu-item",staticStyle:{padding:"0","margin-bottom":"5px"}},["TIME"===e.inputAttr.commonAttr.checkType?[7===e.inputAttr.dateTimeAttr.dateFormat?[n("div",[e.inputAttr.dateTimeAttr.attrs.includes("range")?[n("div",[null!=e.inputAttr.dateTimeAttr.timeRange.step&&null!==e.inputAttr.dateTimeAttr.timeRange.range?[n("div",[n("el-time-select",{attrs:{editable:!1,"picker-options":{start:e.inputAttr.dateTimeAttr.timeRange.range[0],step:e.inputAttr.dateTimeAttr.timeRange.step,end:e.inputAttr.dateTimeAttr.timeRange.range[1],format:5===e.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"起始时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer.startTime,callback:function(t){e.$set(e.inputAnswer,"startTime",t)},expression:"inputAnswer.startTime"}})],1),e._v(" "),n("div",[n("el-time-select",{attrs:{editable:!1,"picker-options":{start:e.inputAttr.dateTimeAttr.timeRange.range[0],step:e.inputAttr.dateTimeAttr.timeRange.step,end:e.inputAttr.dateTimeAttr.timeRange.range[1],minTime:e.inputAnswer.startTime,format:5===e.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"结束时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer.endTime,callback:function(t){e.$set(e.inputAnswer,"endTime",t)},expression:"inputAnswer.endTime"}})],1)]:e._e(),e._v(" "),null===e.inputAttr.dateTimeAttr.timeRange.step&&null!==e.inputAttr.dateTimeAttr.timeRange.range?[n("div",[n("el-time-select",{attrs:{editable:!1,"picker-options":{start:e.inputAttr.dateTimeAttr.timeRange.range[0],end:e.inputAttr.dateTimeAttr.timeRange.range[1],format:5===e.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"起始时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer.startTime,callback:function(t){e.$set(e.inputAnswer,"startTime",t)},expression:"inputAnswer.startTime"}})],1),e._v(" "),n("div",[n("el-time-select",{attrs:{editable:!1,"picker-options":{start:e.inputAttr.dateTimeAttr.timeRange.range[0],end:e.inputAttr.dateTimeAttr.timeRange.range[1],minTime:e.inputAnswer.startTime,format:5===e.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"结束时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer.endTime,callback:function(t){e.$set(e.inputAnswer,"endTime",t)},expression:"inputAnswer.endTime"}})],1)]:null!==e.inputAttr.dateTimeAttr.timeRange.step&&null===e.inputAttr.dateTimeAttr.timeRange.range?[n("div",[n("el-time-select",{attrs:{editable:!1,"picker-options":{step:e.inputAttr.dateTimeAttr.timeRange.step,format:5===e.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"起始时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer.startTime,callback:function(t){e.$set(e.inputAnswer,"startTime",t)},expression:"inputAnswer.startTime"}})],1),e._v(" "),n("div",[n("el-time-select",{attrs:{editable:!1,"picker-options":{step:e.inputAttr.dateTimeAttr.timeRange.step,minTime:e.inputAnswer.startTime,format:5===e.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"结束时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer.endTime,callback:function(t){e.$set(e.inputAnswer,"endTime",t)},expression:"inputAnswer.endTime"}})],1)]:e._e()],2)]:[n("div",[null!=e.inputAttr.dateTimeAttr.timeRange.step&&null!==e.inputAttr.dateTimeAttr.timeRange.range?[n("div",[n("el-time-select",{attrs:{editable:!1,"picker-options":{start:e.inputAttr.dateTimeAttr.timeRange.range[0],step:e.inputAttr.dateTimeAttr.timeRange.step,end:e.inputAttr.dateTimeAttr.timeRange.range[1],format:5===e.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"请选择时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})],1)]:e._e(),e._v(" "),null===e.inputAttr.dateTimeAttr.timeRange.step&&null!==e.inputAttr.dateTimeAttr.timeRange.range?[n("div",[n("el-time-select",{attrs:{editable:!1,"picker-options":{start:e.inputAttr.dateTimeAttr.timeRange.range[0],end:e.inputAttr.dateTimeAttr.timeRange.range[1],format:5===e.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"请选择时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})],1)]:null!==e.inputAttr.dateTimeAttr.timeRange.step&&null===e.inputAttr.dateTimeAttr.timeRange.range?[n("div",[n("el-time-select",{attrs:{editable:!1,"picker-options":{step:e.inputAttr.dateTimeAttr.timeRange.step,format:5===e.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"请选择时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})],1)]:[n("div",[n("el-time-select",{attrs:{editable:!1,"picker-options":{format:5===e.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"请选择时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})],1)]],2)]],2)]:[e.inputAttr.dateTimeAttr.attrs.includes("range")?[n("el-time-picker",{staticClass:"dw-answer-custom-theme",class:e.isAnswer?"dw-input-active":"",attrs:{format:5===e.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm",editable:!1,disabled:e.survey.readonly,"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},on:{blur:e.onBlur,input:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]:[null!==e.inputAttr.dateTimeAttr.timeRange.range?[n("el-time-picker",{class:e.isAnswer?"dw-input-active":"",attrs:{editable:!1,"picker-options":{selectableRange:null!==e.inputAttr.dateTimeAttr.timeRange.range?e.inputAttr.dateTimeAttr.timeRange.range[0]+" - "+e.inputAttr.dateTimeAttr.timeRange.range[1]:null},format:5===e.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm",placeholder:e.inputAttr.commonAttr.placeholder,disabled:e.survey.readonly,"popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur,input:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]:[n("el-time-picker",{class:e.isAnswer?"dw-input-active":"",attrs:{editable:!1,format:5===e.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm",placeholder:e.inputAttr.commonAttr.placeholder,disabled:e.survey.readonly,"popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur,input:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]]]]:"DATE"===e.inputAttr.commonAttr.checkType?[e.inputAttr.dateTimeAttr.attrs.includes("range")?[3===e.inputAttr.dateTimeAttr.dateFormat?[n("el-date-picker",{attrs:{disabled:e.survey.readonly,editable:!1,type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]:2===e.inputAttr.dateTimeAttr.dateFormat?[n("el-date-picker",{attrs:{disabled:e.survey.readonly,editable:!1,type:"monthrange","start-placeholder":"开始月份","end-placeholder":"结束月份","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]:1===e.inputAttr.dateTimeAttr.dateFormat?[n("el-date-picker",{attrs:{disabled:e.survey.readonly,editable:!1,type:"date",placeholder:"选择日期","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]:e._e()]:[3===e.inputAttr.dateTimeAttr.dateFormat?[n("el-date-picker",{attrs:{editable:!1,type:e.inputAttr.dateTimeAttr.attrs.includes("more")?"dates":"date",disabled:e.survey.readonly,placeholder:"选择日期","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]:2===e.inputAttr.dateTimeAttr.dateFormat?[n("el-date-picker",{attrs:{editable:!1,type:e.inputAttr.dateTimeAttr.attrs.includes("more")?"months":"month",disabled:e.survey.readonly,placeholder:"选择月","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]:1===e.inputAttr.dateTimeAttr.dateFormat?[n("el-date-picker",{attrs:{editable:!1,type:e.inputAttr.dateTimeAttr.attrs.includes("more")?"years":"year",disabled:e.survey.readonly,placeholder:"选择年","popper-popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]:e._e()]]:"DATETIME"===e.inputAttr.commonAttr.checkType?[e.inputAttr.dateTimeAttr.attrs.includes("range")?[n("el-date-picker",{attrs:{editable:!1,disabled:e.survey.readonly,type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]:[n("el-date-picker",{attrs:{editable:!1,disabled:e.survey.readonly,type:"datetime",placeholder:"选择日期","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]]:"NUM"===e.inputAttr.commonAttr.checkType?[n("el-input",{attrs:{disabled:e.survey.readonly,controls:!1,placeholder:e.inputAttr.commonAttr.placeholder,"controls-position":"none"},on:{blur:e.onBlur,input:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]:"DIGITS"===e.inputAttr.commonAttr.checkType?[n("el-input",{attrs:{disabled:e.survey.readonly,controls:!1,placeholder:e.inputAttr.commonAttr.placeholder,"controls-position":"none"},on:{blur:e.onBlur,input:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]:[e.inputAttr.commonAttr.inputRow>1?[n("el-input",{class:e.isAnswer?"dw-input-active":"",attrs:{minlength:e.inputAttr.commonAttr.minlength,maxlength:e.inputAttr.commonAttr.maxlength,placeholder:e.inputAttr.commonAttr.placeholder,autosize:{minRows:e.inputAttr.commonAttr.inputRow},type:"textarea"},on:{blur:e.onBlur,input:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]:[n("el-input",{class:e.isAnswer?"dw-input-active":"",attrs:{minlength:e.inputAttr.commonAttr.minlength,maxlength:e.inputAttr.commonAttr.maxlength,placeholder:e.inputAttr.commonAttr.placeholder,disabled:e.survey.readonly,"show-word-limit":""},on:{blur:e.onBlur,input:e.onBlur},model:{value:e.inputAnswer,callback:function(t){e.inputAnswer=t},expression:"inputAnswer"}})]]],2)},staticRenderFns:[]};var Ii=n("VU/8")(qi,ki,!1,function(e){n("2dwJ"),n("RkCJ")},"data-v-78814d0e",null).exports,Ti={name:"DwQuOptionCommon2Item",components:{DwAnswerInput1:Ii,DwHtmlLabelCommon:Gs},model:{prop:"survey",event:"update-survey"},props:{quIndex:{type:Number,default:0},optionIndex:{type:Number,default:0},options:{type:Array,default:function(){return[]}},option:{type:Object,default:function(){}},survey:{type:Object,default:function(){}},quType:{type:String,default:""},value:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}},data:function(){return{itemHover:!1,itemClick:!1,itemIndex:0,inputText:"",themeColor:this.survey.surveyStyle.themeColor,rateColors:[this.survey.surveyStyle.themeColor,this.survey.surveyStyle.themeColor,this.survey.surveyStyle.themeColor],minLimit:0,maxLimit:0}},computed:{isAnswer:function(){var e=this.survey.questions[this.quIndex];if("MULTIFILLBLANK"===e.quType){var t=e.quMultiFillblanks[this.optionIndex].inputText;return null!==t&&void 0!==t&&""!==t}return!1}},watch:{options:function(e,t){}},mounted:function(){var e=this.survey.questions[this.quIndex];"CHECKBOX"===e.quType&&(this.minLimit=e.minLimit,this.maxLimit=e.maxLimit)},methods:{clickItem:function(){if(this.survey.readonly)return ri(this);var e=this.quType;console.debug("quType",e),"RADIO"===e?(this.survey.questions[this.quIndex].quRadios[this.optionIndex].checked=!0,this.resetOtherRadio()):"CHECKBOX"===e?this.survey.questions[this.quIndex].quCheckboxs[this.optionIndex].checked=!this.survey.questions[this.quIndex].quCheckboxs[this.optionIndex].checked:"SCORE"===e&&(this.survey.questions[this.quIndex].quScores[this.optionIndex].checked=!0),this.onBlur()},resetOtherRadio:function(){var e=this;this.survey.questions[this.quIndex].quRadios.forEach(function(t,n){n!==e.optionIndex&&(t.checked=!1)})},onBlur:function(){Ai(this.survey,this.quIndex)}}},Oi={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"dw-qu-item",on:{click:function(t){return t.stopPropagation(),e.clickItem.apply(null,arguments)}}},[n("div",{staticClass:"dw-qu-item-body"},["RADIO"===e.quType?[n("div",{staticClass:"dw-qu-item-el-checkbox-radio",class:e.survey.questions[e.quIndex].quRadios[e.optionIndex].checked?"dw-item-checked":""},[e.survey.questions[e.quIndex].quRadios[e.optionIndex].checked?n("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-radio-icon fa-solid fa-circle-dot animate__animated animate__tada dw-checked"}):n("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-radio-icon fa-regular fa-circle"}),e._v(" "),n("div",{staticClass:"dw-qu-item-option-title"},[n("dw-html-label-common",{ref:"dwEditLabel",attrs:{value:e.options[e.optionIndex].optionTitleObj}})],1),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.survey.dwDebug,expression:"survey.dwDebug"}]},[e._v(e._s(e.survey.questions[e.quIndex].quRadios[e.optionIndex].checked)+" ")])])]:"CHECKBOX"===e.quType?[n("div",{staticClass:"dw-qu-item-el-checkbox-radio",class:e.survey.questions[e.quIndex].quCheckboxs[e.optionIndex].checked?"dw-item-checked":""},[e.survey.questions[e.quIndex].quCheckboxs[e.optionIndex].checked?n("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-checkbox-icon fa-solid fa-square-check animate__animated animate__tada dw-checked"}):e._e(),e._v(" "),e.survey.questions[e.quIndex].quCheckboxs[e.optionIndex].checked?e._e():n("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-checkbox-icon fa-regular fa-square"}),e._v(" "),n("div",{staticClass:"dw-qu-item-option-title"},[n("dw-html-label-common",{ref:"dwEditLabel",attrs:{value:e.options[e.optionIndex].optionTitleObj}})],1),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.survey.dwDebug,expression:"survey.dwDebug"}]},[e._v(e._s(e.survey.questions[e.quIndex].quCheckboxs[e.optionIndex].checked))])])]:[n("div",{staticStyle:{"margin-bottom":"5px"}},[n("div",{staticClass:"dw-qu-item-option-title"},[n("dw-html-label-common",{ref:"dwEditLabel",attrs:{value:e.options[e.optionIndex].optionTitleObj}})],1),e._v(" "),"MULTIFILLBLANK"===e.quType?[n("dw-answer-input1",{attrs:{index:e.quIndex,"option-index":e.optionIndex,"input-attr":e.survey.questions[e.quIndex].quMultiFillblanks[e.optionIndex].inputAttr},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})]:e._e(),e._v(" "),"SCORE"===e.quType?n("el-rate",{attrs:{max:e.survey.questions[e.quIndex].paramInt02,colors:[e.survey.surveyStyle.pageThemeColor,e.survey.surveyStyle.pageThemeColor,e.survey.surveyStyle.pageThemeColor],disabled:e.survey.readonly},on:{change:e.clickItem},model:{value:e.survey.questions[e.quIndex].quScores[e.optionIndex].answerScore,callback:function(t){e.$set(e.survey.questions[e.quIndex].quScores[e.optionIndex],"answerScore",t)},expression:"survey.questions[quIndex].quScores[optionIndex].answerScore"}}):e._e()],2)],e._v(" "),[n("transition",{attrs:{"enter-active-class":"animate__animated animate__flipInX","leave-active-class":"animate__animated animate__flipOutX"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.options[e.optionIndex].hasOwnProperty("validateObj")&&!e.options[e.optionIndex].validateObj.isOk,expression:"options[optionIndex].hasOwnProperty('validateObj') && !options[optionIndex].validateObj.isOk"}],staticClass:"dw-answer-question-error dw-answer-question-option-error"},[n("i",{staticClass:"fa-solid fa-circle-exclamation"}),e._v("\n            "+e._s(e.options[e.optionIndex].validateObj.errorText)+"\n          ")])])]],2),e._v(" "),n("div",{staticClass:"dw-qu-item-toolbar dw-display-flex-right"})]),e._v(" "),n("div",[e.options[e.optionIndex].checked&&("RADIO"===e.quType||"CHECKBOX"===e.quType)&&e.options[e.optionIndex].showOptionNote?[n("div",{staticStyle:{"margin-bottom":"5px"}},[n("dw-answer-input1",{attrs:{index:e.quIndex,"option-index":e.optionIndex,"input-attr":e.options[e.optionIndex].inputAttr},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)]:e._e()],2)])},staticRenderFns:[]};var Di={name:"DwQuOptionCommon2",components:{DwQuOptionCommon2Item:n("VU/8")(Ti,Oi,!1,function(e){n("5pkX")},"data-v-fe2ff38c",null).exports,draggable:dt.a},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},options:{type:Array,default:function(){return[]}},survey:{type:Object,default:function(){}},quType:{type:String,default:""},answer:{type:Object,default:function(){}}},data:function(){return{dragOptions:this.options,drag:!1}},watch:{options:function(e,t){this.refreshData()}},methods:{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1,this.refreshOptions(null)},upAllItemClick:function(){},refreshOptions:function(e){var t=this;this.$emit("update-options",this.dragOptions),this.upAllItemClick(),this.$nextTick(function(){for(var n=t.$refs.quCommonItem,s=0;s<n.length;s++)n[s].dragClick(e)})},refreshData:function(){this.dragOptions=this.options}}},Ei={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.options,function(t,s){return n("div",{key:"quOption2-"+e.index+"-"+s},[n("dw-qu-option-common2-item",{ref:"quCommonItem",refInFor:!0,attrs:{options:e.options,"qu-index":e.index,"option-index":s,"qu-type":e.quType},on:{"refresh-options":e.refreshOptions},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)}),0)},staticRenderFns:[]};var Pi=n("VU/8")(Di,Ei,!1,function(e){n("gk54")},"data-v-0121d0b7",null).exports,Ni={name:"DwQuOptionCommon1Item",components:{DwAnswerInput1:Ii,DwHtmlLabelCommon:Gs},model:{prop:"survey",event:"update-survey"},props:{quIndex:{type:Number,default:0},optionIndex:{type:Number,default:0},options:{type:Array,default:function(){return[]}},option:{type:Object,default:function(){}},survey:{type:Object,default:function(){}},quType:{type:String,default:""},value:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}},data:function(){return{itemHover:!1,itemClick:!1,itemIndex:0,inputText:"",themeColor:this.survey.surveyStyle.themeColor,rateColors:[this.survey.surveyStyle.themeColor,this.survey.surveyStyle.themeColor,this.survey.surveyStyle.themeColor]}},mounted:function(){this.options[this.optionIndex].itemClick&&(this.upItemClick(),this.editFocus(),this.options[this.optionIndex].itemClick=!1)},methods:{clickItem:function(){if(this.survey.readonly)return ri(this);var e=this.quType;console.debug("quType",e),"RADIO"===e?(this.survey.questions[this.quIndex].quRadios[this.optionIndex].checked=!0,this.resetOtherRadio()):"CHECKBOX"===e&&(this.survey.questions[this.quIndex].quCheckboxs[this.optionIndex].checked=!this.survey.questions[this.quIndex].quCheckboxs[this.optionIndex].checked),Ai(this.survey,this.quIndex)},resetOtherRadio:function(){var e=this;this.survey.questions[this.quIndex].quRadios.forEach(function(t,n){n!==e.optionIndex&&(t.checked=!1)})}}},Ri={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dw-qu-item",on:{click:function(t){return t.stopPropagation(),e.clickItem.apply(null,arguments)}}},[e._m(0),e._v(" "),n("div",{staticClass:"dw-qu-item-body"},["RADIO"===e.quType?[n("div",{staticClass:"dw-qu-item-el-checkbox-radio",class:e.survey.questions[e.quIndex].quRadios[e.optionIndex].checked?"dw-item-checked":""},[e.survey.questions[e.quIndex].quRadios[e.optionIndex].checked?n("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-radio-icon fa-solid fa-circle-dot animate__animated animate__tada dw-checked"}):n("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-radio-icon fa-regular fa-circle"}),e._v(" "),n("div",{staticClass:"dw-qu-item-option-title"},[n("dw-html-label-common",{ref:"dwEditLabel",attrs:{value:e.options[e.optionIndex].optionTitleObj}})],1),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.survey.dwDebug,expression:"survey.dwDebug"}]},[e._v(e._s(e.survey.questions[e.quIndex].quRadios[e.optionIndex].checked))])])]:"CHECKBOX"===e.quType?[n("div",{staticClass:"dw-qu-item-el-checkbox-radio",class:e.survey.questions[e.quIndex].quCheckboxs[e.optionIndex].checked?"dw-item-checked":""},[e.survey.questions[e.quIndex].quCheckboxs[e.optionIndex].checked?n("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-checkbox-icon fa-solid fa-square-check animate__animated animate__tada dw-checked",staticStyle:{"font-size":"22px"}}):n("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-checkbox-icon fa-regular fa-square",staticStyle:{"font-size":"22px"}}),e._v(" "),n("div",{staticClass:"dw-qu-item-option-title"},[n("dw-html-label-common",{ref:"dwEditLabel",attrs:{value:e.options[e.optionIndex].optionTitleObj}})],1),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.survey.dwDebug,expression:"survey.dwDebug"}]},[e._v(e._s(e.survey.questions[e.quIndex].quCheckboxs[e.optionIndex].checked))])])]:[n("dw-html-label-common",{ref:"dwEditLabel",attrs:{value:e.options[e.optionIndex].optionTitleObj}})],e._v(" "),[n("transition",{attrs:{"enter-active-class":"animate__animated animate__flipInX","leave-active-class":"animate__animated animate__flipOutX"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.options[e.optionIndex].hasOwnProperty("validateObj")&&!e.options[e.optionIndex].validateObj.isOk,expression:"options[optionIndex].hasOwnProperty('validateObj') && !options[optionIndex].validateObj.isOk"}],staticClass:"dw-answer-question-error dw-answer-question-option-error"},[n("i",{staticClass:"fa-solid fa-circle-exclamation"}),e._v("\n          "+e._s(e.options[e.optionIndex].validateObj.errorText)+"\n        ")])])]],2),e._v(" "),e.options[e.optionIndex].checked&&("RADIO"===e.quType||"CHECKBOX"===e.quType)&&e.options[e.optionIndex].showOptionNote?[n("dw-answer-input1",{attrs:{index:e.quIndex,"option-index":e.optionIndex,"input-attr":e.options[e.optionIndex].inputAttr},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})]:e._e()],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-qu-item-toolbar"},[t("div",{staticClass:"dw-display-grid"})])}]};var Li={name:"DwQuOptionCommon1",components:{DwQuOptionCommon1Item:n("VU/8")(Ni,Ri,!1,function(e){n("3+GO")},"data-v-7d3d1640",null).exports,draggable:dt.a},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},options:{type:Array,default:function(){return[]}},survey:{type:Object,default:function(){}},quType:{type:String,default:""},answer:{type:Object,default:function(){}}},data:function(){return{dragOptions:this.options,drag:!1}},methods:{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1,this.refreshOptions(null)},upAllItemClick:function(){},refreshOptions:function(e){var t=this;this.$emit("update-options",this.dragOptions),this.upAllItemClick(),this.$nextTick(function(){for(var n=t.$refs.quCommonItem,s=0;s<n.length;s++)n[s].dragClick(e)})}}},Fi={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("div",{staticClass:"dw-grid",style:"grid-template-columns: repeat("+e.survey.questions[e.index].cellCount+", minmax(auto,1fr));"},e._l(e.options,function(t,s){return n("div",{key:"quOption1-"+e.index+"-"+s,staticStyle:{width:"100%"}},[n("dw-qu-option-common1-item",{ref:"quCommonItem",refInFor:!0,attrs:{options:e.options,"qu-index":e.index,"option-index":s,"qu-type":e.quType},on:{"refresh-options":e.refreshOptions},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)}),0)])])},staticRenderFns:[]};var Qi=n("VU/8")(Li,Fi,!1,function(e){n("CUPB")},"data-v-4e10bcdc",null).exports,Ui={name:"DwQuOptionCommon4",components:{draggable:dt.a},model:{prop:"options",event:"update-options"},props:{index:{type:Number,default:0},options:{type:Array,default:function(){return[]}},survey:{type:Object,default:function(){}},quType:{type:String,default:""}},data:function(){return{value:null,minLimit:0,maxLimit:0,inputText:""}},mounted:function(){var e=this,t=this.survey.questions[this.index];"RADIO"===t.quType&&this.survey.questions[this.index].quRadios.forEach(function(t){t.checked&&(e.value=t.optionTitleObj.dwHtml)});"CHECKBOX"===t.quType&&(this.minLimit=t.minLimit,this.maxLimit=t.maxLimit,this.survey.questions[this.index].quCheckboxs.forEach(function(t){t.checked&&e.value.push(t.optionTitleObj.dwHtml)}))},methods:{onChange:function(e){console.debug("onChange",e),console.debug("onChange Value",this.value),this.resetOptionChecked();var t=this.survey.questions[this.index].quType;if("RADIO"===t){var n=this.survey.questions[this.index].quRadios;this.checkQuOptions(n,[e])}else if("CHECKBOX"===t){var s=this.survey.questions[this.index].quCheckboxs;this.checkQuOptions(s,e)}Ai(this.survey,this.index)},checkQuOptions:function(e,t){e.forEach(function(e){t.forEach(function(t){if(e.optionTitleObj.dwHtml===t)return e.checked=!0,!1})})},resetOptionChecked:function(){var e=this.survey.questions[this.index].quType;if("RADIO"===e)this.survey.questions[this.index].quRadios.forEach(function(e){e.checked=!1});else if("CHECKBOX"===e){this.survey.questions[this.index].quCheckboxs.forEach(function(e){e.checked=!1})}}}},Bi={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{"margin-bottom":"5px"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.survey.readonly,multiple:"CHECKBOX"===e.quType,"multiple-limit":e.maxLimit,"popper-class":"dw-answer-custom-theme",placeholder:"请选择"},on:{change:e.onChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e,t){return n("el-option",{key:"fa_"+t,attrs:{label:e.optionTitleObj.dwHtml,value:e.optionTitleObj.dwHtml}})}),1),e._v(" "),e._l(e.options,function(t,s){return n("div",{key:"quOption4-"+e.index+"-"+s},[e.options[s].checked&&("RADIO"===e.quType||"CHECKBOX"===e.quType)&&e.options[s].showOptionNote?n("div",{staticStyle:{padding:"10px 0"}},[e.options[s].inputAttr.commonAttr.inputRow>1?n("el-input",{attrs:{placeholder:e.options[s].inputAttr.commonAttr.placeholder,autosize:{minRows:e.options[s].inputAttr.commonAttr.inputRow},type:"textarea"},model:{value:e.options[s].otherText,callback:function(t){e.$set(e.options[s],"otherText",t)},expression:"options[optionIndex].otherText"}}):n("el-input",{attrs:{placeholder:e.options[s].inputAttr.commonAttr.placeholder},model:{value:e.options[s].otherText,callback:function(t){e.$set(e.options[s],"otherText",t)},expression:"options[optionIndex].otherText"}})],1):e._e()])})],2)])},staticRenderFns:[]};var Mi=n("VU/8")(Ui,Bi,!1,function(e){n("HT56")},"data-v-9d27816e",null).exports,$i={name:"DwQuRadioOptions",components:{DwQuOptionCommon4:Mi,DwQuOptionCommon2:Pi,DwQuOptionCommon1:Qi},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{}},methods:{updateOptions:function(e){this.survey.questions[this.index].quRadios=e}}},Hi={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[1===e.survey.questions[e.index].hv?n("dw-qu-option-common1",{attrs:{options:e.survey.questions[e.index].quRadios,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}}):e._e(),e._v(" "),2===e.survey.questions[e.index].hv?n("dw-qu-option-common2",{attrs:{options:e.survey.questions[e.index].quRadios,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}}):e._e(),e._v(" "),4===e.survey.questions[e.index].hv?n("dw-qu-option-common4",{attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quRadios,callback:function(t){e.$set(e.survey.questions[e.index],"quRadios",t)},expression:"survey.questions[index].quRadios"}}):e._e()],1)},staticRenderFns:[]};var ji={name:"DwAnswerQuRadio",components:{DwQuRadioOptions:n("VU/8")($i,Hi,!1,function(e){n("RQbm")},"data-v-557a281a",null).exports,DwQuOptionCommon1:Pi},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}}},Vi={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-radio-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var zi=n("VU/8")(ji,Vi,!1,function(e){n("CVIr")},"data-v-6b6cf25a",null).exports,Gi={name:"DwQuCheckboxOptions",components:{DwQuOptionCommon4:Mi,DwQuOptionCommon1:Qi,DwQuOptionCommon2:Pi},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}}},Yi={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[1===e.survey.questions[e.index].hv?n("dw-qu-option-common1",{ref:"dwCommon1",attrs:{options:e.survey.questions[e.index].quCheckboxs,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}}):e._e(),e._v(" "),2===e.survey.questions[e.index].hv?n("dw-qu-option-common2",{ref:"dwCommon2",attrs:{options:e.survey.questions[e.index].quCheckboxs,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}}):e._e(),e._v(" "),4===e.survey.questions[e.index].hv?n("dw-qu-option-common4",{ref:"dwCommon4",attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quCheckboxs,callback:function(t){e.$set(e.survey.questions[e.index],"quCheckboxs",t)},expression:"survey.questions[index].quCheckboxs"}}):e._e()],1)},staticRenderFns:[]};var Wi={name:"DwAnswerQuCheckbox",components:{DwQuCheckboxOptions:n("VU/8")(Gi,Yi,!1,function(e){n("7cuw")},"data-v-6857275f",null).exports},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}}},Ji={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-checkbox-options",{ref:"dwQuestion",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var Zi=n("VU/8")(Wi,Ji,!1,function(e){n("oXSW")},"data-v-73d16e22",null).exports,Ki={name:"DwAnswerQuFbk",components:{DwAnswerInput1:Ii},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}},data:function(){return{inputText:""}},computed:{isAnswer:function(){if(this.survey.questions[this.index].hasOwnProperty("answer")){var e=this.survey.questions[this.index].answer;return null!==e&&void 0!==e&&""!==e}return!1}},mounted:function(){try{this.survey.questions[this.index].hasOwnProperty("answer")&&void 0!==this.survey.questions[this.index].answer&&(this.survey.questions[this.index].answer=JSON.parse(this.survey.questions[this.index].answer))}catch(e){console.debug("e",e)}},methods:{onBlur:function(e){Ai(this.survey,this.index)}}},Xi={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-answer-input1",{attrs:{index:e.index,"input-attr":e.survey.questions[e.index].quAttr.inputAttr},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)},staticRenderFns:[]};var er=n("VU/8")(Ki,Xi,!1,function(e){n("CkuZ"),n("fF4Y")},"data-v-c3dc28b0",null).exports,tr={name:"DwQuScoreOptions",components:{DwQuOptionCommon2:Pi},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{}},methods:{}},nr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-qu-option-common2",{attrs:{options:e.survey.questions[e.index].quScores,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)},staticRenderFns:[]};var sr=n("VU/8")(tr,nr,!1,function(e){n("O6RM")},"data-v-7b337356",null).exports,ir={name:"DwAnswerQuScore",components:{DwQuScoreOptions:sr,DwQuMFbkOptions:sr},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}}},rr={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-score-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var or=n("VU/8")(ir,rr,!1,function(e){n("7enl")},"data-v-622e504b",null).exports,ar={name:"DwQuOrderOptions",components:{DwHtmlLabelCommon:Gs,DwTextEditLabel:Wt,DwQuOptionCommon2Item:Bn,DwQuOptionCommon2:Pi,draggable:dt.a},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{dataNum:0,themeColor:this.survey.surveyStyle.themeColor}},mounted:function(){var e=this;this.survey.questions[this.index].quOrderbys.forEach(function(t,n){e.dataNum<t.orderIndex&&(e.dataNum=t.orderIndex)})},methods:{onStart:function(){this.drag=!0},onEnd:function(e){this.drag=!1},clickItem:function(e){if(this.survey.questions[this.index].hasOwnProperty("anQuestion")||(this.dataNum=0),this.survey.readonly)return ri(this);e.checked=!e.checked;var t=this.survey.questions[this.index].quOrderbys.length;if(e.hasOwnProperty("orderIndex")&&e.orderIndex>0){var n=e.orderIndex;this.survey.questions[this.index].quOrderbys.forEach(function(e,t){n<e.orderIndex&&(e.orderIndex=e.orderIndex-1)}),e.orderIndex=0;var s=this.dataNum-1;s>=0&&(this.dataNum=s)}else{var i=this.dataNum+1;i<=t&&(e.orderIndex=i,this.dataNum=i)}this.survey.questions[this.index].quOrderbys.sort(function(e,n){var s=0===e.orderIndex?t+1:e.orderIndex,i=0===n.orderIndex?t+1:n.orderIndex;return s<i?-1:s>i?1:0}),Ai(this.survey,this.index)}}},lr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dw-qu-order-group"},[n("transition-group",{attrs:{name:"flip-list"}},e._l(e.survey.questions[e.index].quOrderbys,function(t,s){return n("div",{key:"modelComponents"===e.survey.tempDataType?"orderBy-"+s:t.dwId,staticClass:"dw-qu-order-group-item dwMoveSortQuOption"},[n("div",{staticClass:"dw-qu-item",on:{click:function(n){return e.clickItem(t)}}},[n("div",{staticClass:"dw-qu-item-body"},[n("div",{staticClass:"dw-qu-item-body-order-option",class:t.checked?"dw-item-checked":""},[t.orderIndex>0?n("i",{staticClass:"fa dw-qu-order-num dw-num-order animate__animated animate__tada",style:"background: "+e.themeColor+";border-color: "+e.themeColor},[e._v(e._s(t.orderIndex))]):n("i",{staticClass:"fa dw-qu-order-num dw-num-empty"},[e._v(" "+e._s(t.orderIndex)+" ")]),e._v(" "),n("div",{staticClass:"dw-qu-item-option-title"},[n("dw-html-label-common",{ref:"dwEditLabel",refInFor:!0,attrs:{value:t.optionTitleObj}})],1)])])])])}),0)],1)},staticRenderFns:[]};var ur={name:"DwAnswerQuOrder",components:{DwQuOrderOptions:n("VU/8")(ar,lr,!1,function(e){n("JOAr")},"data-v-95281de4",null).exports,DwQuOptionCommon1:Pi},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}}},dr={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-order-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var cr=n("VU/8")(ur,dr,!1,function(e){n("R4Iz")},"data-v-3b9446a9",null).exports,vr={name:"DwQuMFbkOptions",components:{DwQuOptionCommon2:Pi},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}},data:function(){return{}},methods:{}},pr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-qu-option-common2",{attrs:{options:e.survey.questions[e.index].quMultiFillblanks,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)},staticRenderFns:[]};var mr={name:"DwAnswerQuMFbk",components:{DwQuMFbkOptions:n("VU/8")(vr,pr,!1,function(e){n("Ncat")},"data-v-1d05062a",null).exports},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}}},yr={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-m-fbk-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var hr=n("VU/8")(mr,yr,!1,function(e){n("q84n")},"data-v-4de84427",null).exports,fr={name:"DwAnswerQuUpload",components:{},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}},data:function(){return{upFileList:[],limit:0,accept:"",listType:"text",uploadAction:"/api/dwsurvey/up/up-file-wb.do",fileSize:10}},mounted:function(){var e=this.survey.questions[this.index];if(e.hasOwnProperty("fileLimit")&&null!==e.fileLimit&&(this.limit=e.fileLimit),e.hasOwnProperty("fileAccept")&&null!==e.fileAccept){var t=e.fileAccept;0===t&&(this.accept=""),1===t&&(this.accept=".jpg,.jpeg,.png,.gif,.bmp"),2===t&&(this.accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx"),100===t&&(this.accept=e.customFileAccept)}e.hasOwnProperty("fileSize")&&null!==e.fileSize&&(this.fileSize=e.fileSize),this.upFileList=this.survey.questions[this.index].upFileList},methods:{handleRemove:function(e,t){console.log(e,t),this.upFileList=t,this.updateUpFileAnswer()},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 "+this.limit+" 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){},beforeAvatarUpload:function(e){if(null!==this.fileSize&&this.fileSize>0){var t=e.size/1024/1024<this.fileSize;return t||this.$message.warning("上传文件大小不能超过 "+this.fileSize+"MB!"),e.checkSize=!1,t}return!0},handleSuccess:function(e,t,n){console.debug("response",e),console.debug("file",t),console.debug("fileList",n),this.upFileList=n,this.updateUpFileAnswer()},updateUpFileAnswer:function(){this.survey.questions[this.index].upFileList=this.upFileList,Ai(this.survey,this.index)}}},wr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-upload",{staticClass:"upload-demo",attrs:{"before-remove":e.beforeRemove,"before-upload":e.beforeAvatarUpload,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"on-success":e.handleSuccess,limit:e.limit,accept:e.accept,"file-list":e.upFileList,"list-type":e.listType,action:e.uploadAction,multiple:""}},[n("el-button",{attrs:{size:"small",type:"primary",plain:""}},[e._v("点击上传")]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[n("div",{staticClass:"dw-answer-question-remind",staticStyle:{"line-height":"20px"}},[""!==e.accept&&e.fileSize>0&&e.limit>0?[e._v("\n            请上传"),n("span",{staticClass:"span-high"},[e._v(e._s(e.accept))]),e._v("类型文件，单个文件大小不超过"),n("span",{staticClass:"span-high"},[e._v(e._s(e.fileSize)+"M")]),e._v("，最多只能上传"),n("span",{staticClass:"span-high"},[e._v(e._s(e.limit)+"个")]),e._v("文件\n          ")]:e._e(),e._v(" "),""===e.accept&&e.fileSize>0&&e.limit>0?[e._v("\n            单个文件大小不超过"),n("span",{staticClass:"span-high"},[e._v(e._s(e.fileSize)+"M")]),e._v("，最多只能上传"),n("span",{staticClass:"span-high"},[e._v(e._s(e.limit)+"个")]),e._v("文件\n          ")]:e._e(),e._v(" "),""===e.accept&&e.fileSize<=0&&e.limit>0?[e._v("\n            最多只能上传"),n("span",{staticClass:"span-high"},[e._v(e._s(e.limit)+"个")]),e._v("文件\n          ")]:e._e()],2)])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.dwDebug,expression:"survey.dwDebug"}]},[n("div",[e._v(e._s(e.upFileList))])])],1)},staticRenderFns:[]};var gr={name:"DwAnswerQuestion",components:{DwAnswerQuUpload:n("VU/8")(fr,wr,!1,function(e){n("kuGm")},"data-v-fd252376",null).exports,DwAnswerQuMFbk:hr,DwAnswerQuOrder:cr,DwAnswerQuScore:or,DwAnswerQuFbk:er,DwAnswerQuCheckbox:Zi,DwAnswerQuRadio:zi,DwAnswerQuestionCommon:ii},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},item:{type:Object,default:function(){}},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}},data:function(){return{}},computed:{isLogicHide:function(){var e=Ci(this.survey,this.item);return console.debug("isHide",e),e}}},xr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-collapse-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.item.showQu&&!e.item.logicIsHide,expression:"(item.showQu && !item.logicIsHide)"}]},[n("dw-answer-question-common",{ref:"dwDesignQuestionCommon",attrs:{index:e.index},scopedSlots:e._u([{key:"editQuContent",fn:function(){return["RADIO"===e.item.quType?n("div",[n("dw-answer-qu-radio",{ref:"dwQuRadio",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"CHECKBOX"===e.item.quType?n("div",[n("dw-answer-qu-checkbox",{ref:"dwQuCheckbox",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"FILLBLANK"===e.item.quType?n("div",[n("dw-answer-qu-fbk",{ref:"dwQuFbk",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"SCORE"===e.item.quType?n("div",[n("dw-answer-qu-score",{ref:"dwQuScore",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"ORDERQU"===e.item.quType?n("div",[n("dw-answer-qu-order",{ref:"dwQuOrder",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"MULTIFILLBLANK"===e.item.quType?n("div",[n("dw-answer-qu-m-fbk",{ref:"dwQuMfbk",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"UPLOADFILE"===e.item.quType?n("div",[n("dw-answer-qu-upload",{ref:"dwQuUpload",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e()]},proxy:!0}]),model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],1)},staticRenderFns:[]};var br=n("VU/8")(gr,xr,!1,function(e){n("sAHm")},"data-v-1f3ad0e8",null).exports,Cr={name:"DwDesignQuestionModelCommon",components:{DwAnswerQuestion:br,DwDesignQuestion:Ms},props:{item:{type:Object,default:function(){}}},data:function(){return{survey:{surveyNameObj:{dwHtml:"survey.surveyName",dwText:"survey.surveyNameText",dwPlaceholder:"请输入问卷标题"},questions:[this.item],surveyTest:"",curEditObj:[{itemClick:!1}],surveyStyle:{themeColor:"red"},tempDataType:"modelComponents"},index:0}}},_r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dw-answer-custom-theme"},[e._t("default"),e._v(" "),null!==e.item.dwsurveyfont?[e._t("quModelTagDwsurveyfont"),e._v(" "),n("div",{staticClass:"cloneQuRoot"},[n("div",[n("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])]:["RADIO"===e.item.quType?n("div",[4===e.item.hv?n("div",[e._t("quModelTagXialati"),e._v(" "),n("div",{staticClass:"cloneQuRoot"},[n("div",[n("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):n("div",[e._t("quModelTagDanxuan"),e._v(" "),n("div",{staticClass:"cloneQuRoot"},[n("div",[n("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2)]):"CHECKBOX"===e.item.quType?n("div",[e._t("quModelTagDuoxuan"),e._v(" "),n("div",{staticClass:"cloneQuRoot"},[n("div",[n("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):"FILLBLANK"===e.item.quType?n("div",[e.item.answerInputRow>1?n("div",[e._t("quModelTagDuoxiangwenben"),e._v(" "),n("div",{staticClass:"cloneQuRoot"},[n("div",[n("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):n("div",[e._t("quModelTagTiankong"),e._v(" "),n("div",{staticClass:"cloneQuRoot"},[n("div",[n("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2)]):"SCORE"===e.item.quType?n("div",[e._t("quModelTagPingfen"),e._v(" "),n("div",{staticClass:"cloneQuRoot"},[n("div",[n("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):"ORDERQU"===e.item.quType?n("div",[e._t("quModelTagPaixu"),e._v(" "),n("div",{staticClass:"cloneQuRoot"},[n("div",[n("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):"MULTIFILLBLANK"===e.item.quType?n("div",[e._t("quModelTagDuoxiangtiankong"),e._v(" "),n("div",{staticClass:"cloneQuRoot"},[n("div",[n("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):"UPLOADFILE"===e.item.quType?n("div",[e._t("quModelTagShangchuan"),e._v(" "),n("div",{staticClass:"cloneQuRoot"},[n("div",[n("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):"PAGETAG"===e.item.quType?n("div",[e._t("quModelTagFenye"),e._v(" "),n("div",{staticClass:"cloneQuRoot"},[n("div",[n("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):"PARAGRAPH"===e.item.quType?n("div",[e._t("quModelTagFenduan"),e._v(" "),n("div",{staticClass:"cloneQuRoot"},[n("div",[n("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):n("div",[e._t("default",function(){return[e._m(0)]}),e._v(" "),n("div",{staticClass:"cloneQuRoot"},[n("div",[n("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2)]],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"toolbar-item-content"},[t("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-duoxiangtiankong"})])}]};var Ar=n("VU/8")(Cr,_r,!1,function(e){n("wVxy")},"data-v-3f809e06",null).exports,Sr={name:"DwDesignToolbarQuestion",components:{DwDesignQuestionModelCommon:Ar,DwAnswerQuestion:br,DwDesignQuestion:Ms},props:{item:{type:Object,default:function(){}}},data:function(){return{}},methods:{}},qr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-design-question-model-common",{attrs:{item:e.item},scopedSlots:e._u([{key:"quModelTagDwsurveyfont",fn:function(){return[n("div",{staticClass:"toolbar-item-content"},[n("div",{staticClass:"dwToolbar_icon dwsurveyfont",class:e.item.dwsurveyfont})])]},proxy:!0},{key:"quModelTagXialati",fn:function(){return[n("div",{staticClass:"toolbar-item-content"},[n("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-xialati"})])]},proxy:!0},{key:"quModelTagDanxuan",fn:function(){return[n("div",{staticClass:"toolbar-item-content"},[n("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-danxuan"})])]},proxy:!0},{key:"quModelTagDuoxuan",fn:function(){return[n("div",{staticClass:"toolbar-item-content"},[n("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-duoxuan"})])]},proxy:!0},{key:"quModelTagDuoxiangwenben",fn:function(){return[n("div",{staticClass:"toolbar-item-content"},[n("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-duoxiangwenben"})])]},proxy:!0},{key:"quModelTagTiankong",fn:function(){return[n("div",{staticClass:"toolbar-item-content"},[n("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-tiankong"})])]},proxy:!0},{key:"quModelTagPingfen",fn:function(){return[n("div",{staticClass:"toolbar-item-content"},[n("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-pingfen"})])]},proxy:!0},{key:"quModelTagPaixu",fn:function(){return[n("div",{staticClass:"toolbar-item-content"},[n("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-paixu"})])]},proxy:!0},{key:"quModelTagDuoxiangtiankong",fn:function(){return[n("div",{staticClass:"toolbar-item-content"},[n("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-duoxiangtiankong"})])]},proxy:!0},{key:"quModelTagShangchuan",fn:function(){return[n("div",{staticClass:"toolbar-item-content"},[n("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-shangchuan"})])]},proxy:!0},{key:"quModelTagFenye",fn:function(){return[n("div",{staticClass:"toolbar-item-content"},[n("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-fenye"})])]},proxy:!0},{key:"quModelTagFenduan",fn:function(){return[n("div",{staticClass:"toolbar-item-content"},[n("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-fenduan"})])]},proxy:!0}])})],1)},staticRenderFns:[]};var kr={name:"DwDesignToolbar",components:{DwAnswerQuestion:br,DwDesignToolbarQuestion:n("VU/8")(Sr,qr,!1,function(e){n("mXQ4")},"data-v-03a33f28",null).exports,DwDesignQuestion:Ms,draggable:dt.a},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{questions:[],questions1:[],tabs:[],drag:!1,loading:!0,isAutoSave:!0,autoSaveTime:30,intervalSaveSurvey:null}},mounted:function(){this.loadDesignSurveyData(),this.autoSaveSurvey()},beforeDestroy:function(){this.stopIntervalSaveSurvey()},methods:{clickToolbarItem:function(e){void 0!==e.eventName&&null!==e.eventName||(e.isNew=!0,this.survey.questions.push(tn(JSON.parse(l()(e)))),Pn(this.survey.questions[this.survey.questions.length-1]))},onStart:function(){this.drag=!0,this.$emit("start-drag")},onEnd:function(){this.$emit("end-drag"),this.drag=!1},loadDesignSurveyData:function(){var e=this;Bt().then(function(t){console.debug("questionComps-response"),console.debug(t);var n=t.data;if(n.hasOwnProperty("resultCode")&&200===n.resultCode){var s=n.data;s.map(function(e,t){e.tabQus.map(function(e,t){var n;e.questions=(null!==(n=Tn(e.questions,!1))&&n.length>0&&n.map(function(e,t){e.isRequired=1,e.showQu=!0,e.logicIsHide=!1,On(e)}),n)})}),e.tabs=s,e.loading=!1}})},autoSaveSurvey:function(){this.isAutoSave?this.startIntervalSaveSurvey():this.stopIntervalSaveSurvey()},startIntervalSaveSurvey:function(){var e=this;this.autoSaveTime=20,this.intervalSaveSurvey=setInterval(function(){e.saveSurveyFun(null),e.autoSaveTime=20,console.log("每隔20秒执行一次自动保存")},2e4),this.intervalSaveSurveyTime=setInterval(function(){e.autoSaveTime=e.autoSaveTime-1,e.autoSaveTime<=0&&(e.autoSaveTime=0)},1e3)},stopIntervalSaveSurvey:function(){null!==this.intervalSaveSurvey&&clearInterval(this.intervalSaveSurvey),null!==this.intervalSaveSurveyTime&&clearInterval(this.intervalSaveSurveyTime)},saveSurvey:function(){this.saveSurveyFun(null)},devSurvey:function(){this.stopIntervalSaveSurvey(),this.previewSurvey()},previewSurvey:function(){var e=this;this.saveSurveyFun(function(){var t=e.$route.params.id;e.$router.push("/v6/diaowen/dw-preview/survey/"+t)})},saveSurveyFun:function(e){var t=this,n=this.survey.id,s=this.survey.sid;yn(this.survey),console.debug("save this.survey",this.survey);var i=l()(this.survey),r={surveyId:n,sid:s,surveyJsonText:i,surveyJsonSimple:l()(hn(i))};console.debug("surveyJson data",r),Mt(r).then(function(n){console.debug("dwSaveSurveyJson-response",n);var s=n.data;s.hasOwnProperty("resultCode")&&200===s.resultCode?(t.$message({message:"保存成功！",type:"success"}),null!=e&&e()):t.$message.error("保存失败！")})}}},Ir={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tabs.length>0?n("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"border-card"}},[n("el-tab-pane",{staticStyle:{padding:"0px"},attrs:{label:"常用题型"}},[n("div",{staticClass:"toolbars-contents"},[n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:18}},[n("div",{staticClass:"toolbars-contents-body"},e._l(e.tabs[0].tabQus,function(t,s){return n("div",{key:"toolbar"+s,staticClass:"tools_item"},[n("div",{staticClass:"toolbars"},[void 0===t.eventType||null===t.eventType?[n("draggable",{staticClass:"toolbars-draggable",attrs:{group:{name:"questionGroup",pull:"clone",put:!1},sort:!1,"force-fallback":!0,animation:"300","drag-class":"dragClass","ghost-class":"ghostClass","chosen-class":"chosenClass"},on:{start:e.onStart,end:e.onEnd},model:{value:t.questions,callback:function(n){e.$set(t,"questions",n)},expression:"item.questions"}},[n("transition-group",{staticClass:"toolbars-draggable-group"},e._l(t.questions,function(t,s){return n("div",{key:"base"+s,staticClass:"toolbar-item",on:{click:function(n){return n.stopPropagation(),e.clickToolbarItem(t)}}},[n("dw-design-toolbar-question",{attrs:{item:t}})],1)}),0)],1)]:[n("div",{staticClass:"toolbars-draggable-group"},e._l(t.questions,function(t,s){return n("div",{key:"base"+s,staticClass:"toolbar-item",on:{click:function(n){return n.stopPropagation(),e.clickToolbarItem(t)}}},[n("dw-design-toolbar-question",{attrs:{item:t}})],1)}),0)]],2),e._v(" "),n("div",[n("div",{staticClass:"toolbars-text"},[e._v(e._s(t.tabQuName))])])])}),0)]),e._v(" "),n("el-col",{attrs:{span:6}},[n("div",{staticStyle:{"text-align":"right","padding-right":"10px"}},[n("span",{staticStyle:{"margin-right":"10px","font-size":"12px"}},[n("el-switch",{attrs:{"active-text":"自动保存"},on:{change:e.autoSaveSurvey},model:{value:e.isAutoSave,callback:function(t){e.isAutoSave=t},expression:"isAutoSave"}}),e._v(" "),n("span",{staticStyle:{color:"#afafb0"}},[e._v("("+e._s(e.autoSaveTime)+")")])],1),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.devSurvey}},[n("i",{staticClass:"fa fa-paper-plane"}),e._v(" 发布")]),e._v(" "),n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{plain:"",size:"small"},on:{click:e.saveSurvey}},[n("i",{staticClass:"fa-solid fa-floppy-disk"}),e._v(" 保存")])],1)])],1)],1)])],1):e._e()},staticRenderFns:[]};var Tr=n("VU/8")(kr,Ir,!1,function(e){n("6+1S")},"data-v-34f027d5",null).exports,Or={name:"DwDesignContainerBodyCenter",components:{DwDesignQuestionCommon:Fn,DwFooter:F,DwDesignToolbar:Tr,DwDesignHeader:js,DwTextEditLabelCommon:Kt,DwDesignQuRadio:os,DwTextEditLabel:Wt,DwDesignQuestion:Ms,draggable:dt.a},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{drag:!1}},methods:{onAdd:function(e){console.debug("onAdd attrs",e);var t=e.newIndex;console.debug("newIndex",t),this.refreshData(t),this.survey.questions[t].isNew=!0,Pn(this.survey.questions[t])},onStart:function(){this.drag=!0,this.$emit("start-drag-container")},onEnd:function(e){this.$emit("end-drag"),console.debug("attrs",e),this.drag=!1;var t=e.newIndex,n=e.oldIndex;t>n?this.refreshData(n):this.refreshData(t),this.documentClick()},documentClick:function(){},refreshQuData:function(e){var t=this;this.$nextTick(function(){for(var n=t.$refs.designQuestion,s=0;s<n.length;s++)n[s].refreshQuData(e)})},refreshData:function(e){var t=this;this.survey.questions.forEach(function(n,s){s>=e&&t.survey.questions.splice(s,1,tn(JSON.parse(l()(n))))})}}},Dr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dw-container-body-center"},[n("div",{staticStyle:{"min-height":"600px"}},[n("div",{staticStyle:{"text-align":"center",padding:"20px"}},[n("dw-text-edit-label-common",{attrs:{survey:e.survey},model:{value:e.survey.surveyNameObj,callback:function(t){e.$set(e.survey,"surveyNameObj",t)},expression:"survey.surveyNameObj"}})],1),e._v(" "),n("div",{staticStyle:{padding:"0 40px"}},[n("dw-text-edit-label-common",{attrs:{survey:e.survey},model:{value:e.survey.surveyDetail.surveyNodeObj,callback:function(t){e.$set(e.survey.surveyDetail,"surveyNodeObj",t)},expression:"survey.surveyDetail.surveyNodeObj"}})],1),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("div",[n("draggable",{staticClass:"dwDraggable",attrs:{"force-fallback":!0,group:{name:"questionGroup",pull:!1,put:!0},handle:".dwMoveSortQu",animation:"300","drag-class":"dwDragClass","ghost-class":"dwGhostClass","chosen-class":"dwChosenClass"},on:{add:e.onAdd,start:e.onStart,end:e.onEnd},model:{value:e.survey.questions,callback:function(t){e.$set(e.survey,"questions",t)},expression:"survey.questions"}},[n("transition-group",e._l(e.survey.questions,function(t,s){return n("div",{key:t.hasOwnProperty("dwId")?"quDwId_"+t.dwId:"Qu_"+s},[n("dw-design-question",{ref:"designQuestion",refInFor:!0,attrs:{index:s,item:t},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)}),0)],1)],1)])])])},staticRenderFns:[]};var Er=n("VU/8")(Or,Dr,!1,function(e){n("0J5D")},"data-v-5ff6a5cc",null).exports,Pr={name:"DwDesignCatalogQuItem",model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},computed:{quNum:function(){var e=this,t=0;return this.survey.questions.forEach(function(n,s){"PAGETAG"!==n.quType&&"PARAGRAPH"!==n.quType&&s<=e.index&&t++}),t},pageSize:function(){var e=1;return this.survey.questions.forEach(function(t,n){"PAGETAG"===t.quType&&e++}),e},pageNum:function(){var e=this,t=0;return this.survey.questions.forEach(function(n,s){"PAGETAG"===n.quType&&s<=e.index&&t++}),t}}},Nr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["PARAGRAPH"===e.survey.questions[e.index].quType||"PAGETAG"===e.survey.questions[e.index].quType?["PAGETAG"===e.survey.questions[e.index].quType?n("div",[n("div",{staticClass:"qu-catalogue-item qu-catalogue-page"},[e._v("分页：下一页("+e._s(e.pageNum)+"/"+e._s(e.pageSize)+")")])]):e._e(),e._v(" "),"PARAGRAPH"===e.survey.questions[e.index].quType?n("div",[n("div",{staticClass:"qu-catalogue-item qu-catalogue-paragraph"},[e._v("分段："+e._s(e.survey.questions[e.index].quTitleObj.dwText))])]):e._e()]:[n("div",{staticClass:"qu-catalogue-item qu-catalogue-other"},[e._v("Q"+e._s(e.quNum)+"、"+e._s(e.survey.questions[e.index].quTitleObj.dwText))])]],2)},staticRenderFns:[]};var Rr=n("VU/8")(Pr,Nr,!1,function(e){n("jDzI")},"data-v-8963bbe2",null).exports,Lr={name:"DwDesignSurveyAttrs",model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{labelPosition:"right"}},methods:{}},Fr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"form",attrs:{size:"mini"}},[n("div",[n("div",{staticClass:"dw-title-attr"},[e._v("回答限制")]),e._v(" "),n("div",{staticStyle:{"padding-left":"10px"}},[n("el-form-item",[n("div",[n("el-checkbox",{model:{value:e.survey.surveyAttrs.anBroAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anBroAttr,"enabled",t)},expression:"survey.surveyAttrs.anBroAttr.enabled"}},[e._v("启用浏览器终端回答限制")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyAttrs.anBroAttr.enabled,expression:"survey.surveyAttrs.anBroAttr.enabled"}],staticStyle:{"font-size":"12px"}},[e._v("\n            每个浏览器可回答次数"),n("el-input-number",{staticStyle:{width:"130px"},attrs:{min:1,max:1e5,size:"mini"},model:{value:e.survey.surveyAttrs.anBroAttr.anNum,callback:function(t){e.$set(e.survey.surveyAttrs.anBroAttr,"anNum",t)},expression:"survey.surveyAttrs.anBroAttr.anNum"}}),e._v(" 次\n          ")],1)]),e._v(" "),n("el-form-item",[n("div",[n("el-checkbox",{model:{value:e.survey.surveyAttrs.anIpAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anIpAttr,"enabled",t)},expression:"survey.surveyAttrs.anIpAttr.enabled"}},[e._v("启用IP回答限制")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyAttrs.anIpAttr.enabled,expression:"survey.surveyAttrs.anIpAttr.enabled"}],staticStyle:{"font-size":"12px"}},[e._v("\n            每个IP可回答次数"),n("el-input-number",{staticStyle:{width:"130px"},attrs:{min:1,max:1e5,size:"mini"},model:{value:e.survey.surveyAttrs.anIpAttr.anNum,callback:function(t){e.$set(e.survey.surveyAttrs.anIpAttr,"anNum",t)},expression:"survey.surveyAttrs.anIpAttr.anNum"}}),e._v(" 次\n          ")],1)]),e._v(" "),n("el-checkbox",{model:{value:e.survey.surveyAttrs.anRefreshAttr.randomCode,callback:function(t){e.$set(e.survey.surveyAttrs.anRefreshAttr,"randomCode",t)},expression:"survey.surveyAttrs.anRefreshAttr.randomCode"}},[e._v("重复回答启用验证码")]),e._v(" "),n("el-form-item",[n("div",[n("el-checkbox",{model:{value:e.survey.surveyAttrs.anPwdAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anPwdAttr,"enabled",t)},expression:"survey.surveyAttrs.anPwdAttr.enabled"}},[e._v("启用通过密码答卷")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyAttrs.anPwdAttr.enabled,expression:"survey.surveyAttrs.anPwdAttr.enabled"}]},[n("el-input",{staticStyle:{width:"160px"},attrs:{size:"mini",placeholder:"请输入密码"},model:{value:e.survey.surveyAttrs.anPwdAttr.anPwdCode,callback:function(t){e.$set(e.survey.surveyAttrs.anPwdAttr,"anPwdCode",t)},expression:"survey.surveyAttrs.anPwdAttr.anPwdCode"}})],1)])],1)]),e._v(" "),n("div",{staticStyle:{"margin-top":"20px"}},[n("div",{staticClass:"dw-title-attr"},[e._v("何时结束")]),e._v(" "),n("div",{staticStyle:{"padding-left":"10px"}},[n("el-form-item",[n("div",[n("el-checkbox",{model:{value:e.survey.surveyAttrs.anEndNumAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anEndNumAttr,"enabled",t)},expression:"survey.surveyAttrs.anEndNumAttr.enabled"}},[e._v("指定结束份数")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyAttrs.anEndNumAttr.enabled,expression:"survey.surveyAttrs.anEndNumAttr.enabled"}]},[n("el-input-number",{staticStyle:{width:"160px"},attrs:{min:1,max:1e5,size:"mini"},model:{value:e.survey.surveyAttrs.anEndNumAttr.endNum,callback:function(t){e.$set(e.survey.surveyAttrs.anEndNumAttr,"endNum",t)},expression:"survey.surveyAttrs.anEndNumAttr.endNum"}})],1)]),e._v(" "),n("el-form-item",[n("div",[n("el-checkbox",{model:{value:e.survey.surveyAttrs.anEndTimeAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anEndTimeAttr,"enabled",t)},expression:"survey.surveyAttrs.anEndTimeAttr.enabled"}},[e._v("指定结束时间")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyAttrs.anEndTimeAttr.enabled,expression:"survey.surveyAttrs.anEndTimeAttr.enabled"}]},[n("el-date-picker",{staticStyle:{width:"160px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.survey.surveyAttrs.anEndTimeAttr.endTime,callback:function(t){e.$set(e.survey.surveyAttrs.anEndTimeAttr,"endTime",t)},expression:"survey.surveyAttrs.anEndTimeAttr.endTime"}})],1)])],1)])])],1)},staticRenderFns:[]};var Qr=n("VU/8")(Lr,Fr,!1,function(e){n("pPbJ")},"data-v-4522c63c",null).exports,Ur={name:"DwDesignContainerBodyLeft",components:{DwDesignSurveyAttrs:Qr,DwDesignCatalogQuItem:Rr,draggable:dt.a},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{contentStyle:"",drag:!1}},mounted:function(){window.addEventListener("scroll",this.onScroll)},methods:{onAdd:function(e){console.debug("left onAdd attrs",e);var t=e.newIndex;this.refreshData(t),this.survey.questions[t].quTitleObj.isNew=!0},onStart:function(){this.drag=!0},onEnd:function(e){this.drag=!1;var t=e.newIndex,n=e.oldIndex;t>n?this.refreshData(n):this.refreshData(t)},onScroll:function(){var e=document.documentElement.scrollTop||document.body.scrollTop;if(e>=60){var t=window.innerHeight-217-20;this.contentStyle="height:"+t+"px;"}else{var n=60-e,s=window.innerHeight-(217+n)-20;this.contentStyle="height:"+s+"px;"}},refreshData:function(e){var t=this;this.survey.questions.forEach(function(n,s){s>=e&&t.survey.questions.splice(s,1,tn(JSON.parse(l()(n))))})}}},Br={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"大纲"}},[n("div",{staticStyle:{"overflow-y":"scroll"},style:e.contentStyle},[n("div",{staticClass:"dw_left_ul"},[n("div",{staticStyle:{"padding-bottom":"5px"}},[n("el-alert",{attrs:{title:"拖动目录可修改题目排序",type:"info","show-icon":""}})],1),e._v(" "),n("draggable",{attrs:{"force-fallback":!0,group:{name:"questionGroup",pull:!1,put:!1},animation:"300","drag-class":"dwDragClass","ghost-class":"dwGhostClass","chosen-class":"dwChosenClass"},on:{onAdd:e.onAdd,start:e.onStart,end:e.onEnd},model:{value:e.survey.questions,callback:function(t){e.$set(e.survey,"questions",t)},expression:"survey.questions"}},[n("transition-group",e._l(e.survey.questions,function(t,s){return n("div",{key:"surveyQu"+s},[n("dw-design-catalog-qu-item",{attrs:{index:s},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)}),0)],1)],1)])]),e._v(" "),n("el-tab-pane",{attrs:{label:"属性"}},[n("div",{staticStyle:{"padding-bottom":"5px"}},[n("el-alert",{attrs:{title:"可以配置整个问卷的基本属性",type:"info","show-icon":""}})],1),e._v(" "),n("dw-design-survey-attrs",{model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)],1)],1)},staticRenderFns:[]};var Mr=n("VU/8")(Ur,Br,!1,function(e){n("LpzW")},"data-v-6c4dd634",null).exports;var $r={name:"DwDesignQuBankQuestion",components:{DwDesignQuestionModelCommon:Ar,DwAnswerQuestion:br,DwDesignQuestion:Ms},props:{item:{type:Object,default:function(){}}},data:function(){return{}}},Hr={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-design-question-model-common",{attrs:{item:this.item}},[t("div",{staticClass:"dw-list-group-item-content qu-bank-question-content"},[t("div",{staticClass:"dw-list-group-item-in"},[this._v(" "+this._s(this.item.quName)+" "),t("span",{staticClass:"dw-list-group-item-in-type"},[this._v("["+this._s(this.item.quTypeName)+"]")])])])])],1)},staticRenderFns:[]};var jr={name:"DwDesignQuBanks",components:{DwDesignQuBankQuestion:n("VU/8")($r,Hr,!1,function(e){n("kYXk")},"data-v-a9e08812",null).exports,draggable:dt.a},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{activeName:0,quBanks:[]}},mounted:function(){this.loadQuBanks()},methods:{loadQuBanks:function(){var e=this;x({url:"/api/dwsurvey/app/dw-design-survey/bank-qus.do",method:"get"}).then(function(t){console.debug("bankQuestions-response"),console.debug(t);var n=t.data;if(n.hasOwnProperty("resultCode")&&200===n.resultCode){var s=n.data;s.map(function(e,t){e.questions=Tn(e.questions,!1)}),e.quBanks=s,e.loading=!1}})},onStart:function(){this.drag=!0,this.$emit("start-drag-right")},onEnd:function(){this.$emit("end-drag"),this.drag=!1}}},Vr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.quBanks,function(t,s){return n("el-collapse-item",{key:"quBank_"+s,attrs:{title:t.tabQuName,name:s}},[n("div",{staticStyle:{"padding-bottom":"5px"}},[n("el-alert",{attrs:{title:"点击或拖动可加入到问卷中",type:"info","show-icon":""}})],1),e._v(" "),[n("div",{staticClass:"quBanks"},[n("draggable",{staticClass:"toolbars-draggable",attrs:{group:{name:"questionGroup",pull:"clone",put:!1},sort:!1,"force-fallback":!0,animation:"300","drag-class":"dragClass","ghost-class":"ghostClass","chosen-class":"chosenClass"},on:{start:e.onStart,end:e.onEnd},model:{value:t.questions,callback:function(n){e.$set(t,"questions",n)},expression:"item.questions"}},[n("transition-group",{staticClass:"dw-list-group dw-grid"},e._l(t.questions,function(e,t){return n("div",{key:"quBankQu_"+t,staticClass:"dw-list-group-item"},[n("dw-design-qu-bank-question",{attrs:{item:e}})],1)}),0)],1)],1)]],2)}),1)],1)},staticRenderFns:[]};var zr={name:"DwDesignContainerBodyRight",components:{DwDesignQuBanks:n("VU/8")(jr,Vr,!1,function(e){n("tYYF")},"data-v-0c8f1627",null).exports},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},methods:{onStartRight:function(){this.drag=!0,this.$emit("start-drag-right")},onEnd:function(){this.$emit("end-drag"),this.drag=!1}}},Gr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"题库"}},[n("dw-design-qu-banks",{on:{"start-drag-right":e.onStartRight,"end-drag":e.onEnd},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)],1)],1)},staticRenderFns:[]};var Yr={name:"DwDesignTopBottomLayout",components:{DwFooter:F,DwDesignContainerBodyRight:n("VU/8")(zr,Gr,!1,function(e){n("YAJd")},"data-v-61197388",null).exports,DwDesignContainerBodyLeft:Mr,DwDesignContainerBodyCenter:Er,DwDesignToolbar:Tr,DwDesignHeader:js,DwTextEditLabelCommon:Kt,DwDesignQuRadio:os,DwTextEditLabel:Wt,DwDesignQuestion:Ms,draggable:dt.a},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{surveyId:"",drag:!1,headerQuToolbarStyle:{top:60,index:200},containerLRStyle:{top:0,index:100},lrContentHeight:"",containerBodyStyle:"",questions:[],radio:"1",hover:!1}},mounted:function(){this.loadDesignSurveyData(),window.addEventListener("scroll",this.onScroll)},methods:{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1,this.resetStyleIndex()},resetStyleIndex:function(){this.headerQuToolbarStyle.index=200,this.containerLRStyle.index=100},onStartToolbar:function(){this.onStart(),this.resetStyleIndex()},onStartDragContainer:function(){this.onStart(),this.headerQuToolbarStyle.index=20,this.containerLRStyle.index=10},onStartRight:function(){this.onStart(),this.headerQuToolbarStyle.index=100,this.containerLRStyle.index=200},loadDesignSurveyData:function(){var e=this;Bt().then(function(t){console.debug("response"),console.debug(t);var n=t.data;200===n.resultCode&&(e.questions=n.data)});this.$route.params.id;this.centerMarginTop()},centerMarginTop:function(){var e=157;return window.innerHeight>1280&&(e=160),this.containerBodyStyle="margin-top:"+e+"px;",e},onScroll:function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,n=this.centerMarginTop();if(t>=60){var s=t-60,i=window.innerHeight-n-10;console.debug("lrHeight",i),this.headerQuToolbarStyle.top="0px",this.containerLRStyle.top=s+"px",this.lrContentHeight=i}else{var r=60-t;console.debug("window.innerHeight",window.innerHeight);var o=window.innerHeight-(n+r)-10;this.headerQuToolbarStyle.top=r+"px",this.containerLRStyle.top="0px",this.lrContentHeight=o}},documentClick:function(){}}},Wr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dw-design-container"},[n("el-container",[n("el-header",{staticClass:"header"},[n("dw-design-header",{model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1),e._v(" "),n("el-main",{staticStyle:{padding:"0"}},[n("div",{staticStyle:{"min-height":"600px"}},[null!=e.survey?n("div",[n("div",{ref:"toolsWrap",style:"top:"+e.headerQuToolbarStyle.top+";z-index: "+e.headerQuToolbarStyle.index+";",attrs:{id:"tools_wrap"}},[n("dw-design-toolbar",{on:{"start-drag":e.onStartToolbar,"end-drag":e.onEnd},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1),e._v(" "),n("div",{staticStyle:{"margin-top":"157px","margin-bottom":"0"},style:e.containerBodyStyle},[n("div",{staticClass:"dw-container-body"},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:4}},[n("div",{staticClass:"dw-container-body-center-left dw-container-body-lr",style:"top:"+e.containerLRStyle.top+";z-index: "+e.containerLRStyle.index+";"},[n("dw-design-container-body-left",{model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)]),e._v(" "),n("el-col",{attrs:{span:16}},[n("dw-design-container-body-center",{ref:"designContainerBody",on:{"start-drag-container":e.onStartDragContainer,"end-drag":e.onEnd},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",{staticClass:"dw-container-body-center-right dw-container-body-lr",style:"top:"+e.containerLRStyle.top+";z-index: "+e.containerLRStyle.index+";"},[n("dw-design-container-body-right",{on:{"start-drag-right":e.onStartRight,"end-drag":e.onEnd},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],1)],1)])]):e._e()]),e._v(" "),n("div",{},[n("dw-footer")],1)])],1)],1)},staticRenderFns:[]};var Jr=n("VU/8")(Yr,Wr,!1,function(e){n("MZCF")},"data-v-3f7106ac",null).exports,Zr={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var Kr={name:"DwDesignSurveyCore",components:{DwDesignLeftRightLayout:n("VU/8")({name:"DwDesignLeftRightLayout"},Zr,!1,function(e){n("Z+Xa")},"data-v-063ca560",null).exports,DwDesignTopBottomLayout:Jr,DwTextEditLabelCommon:Kt,DwDesignQuRadio:os,DwTextEditLabel:Wt,DwDesignQuestion:Ms,draggable:dt.a},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{surveyId:"",drag:!1,headerQuToolbarStyle:"",containerLRStyle:"",questions:[],radio:"1",hover:!1}},mounted:function(){this.loadDesignSurveyData(),window.addEventListener("scroll",this.onScroll)},methods:{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1},loadDesignSurveyData:function(){var e=this;Bt().then(function(t){console.debug("response"),console.debug(t);var n=t.data;200===n.resultCode&&(e.questions=n.data)})},onScroll:function(e){var t=document.documentElement.scrollTop||document.body.scrollTop;if(t>=60){this.headerQuToolbarStyle="top:0px;";var n=t-60;this.containerLRStyle="top:"+n+"px;"}else{var s=60-t;this.headerQuToolbarStyle="top:"+s+"px;",this.containerLRStyle="top:0px;"}},documentClick:function(){}}},Xr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-design-top-bottom-layout",{model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)},staticRenderFns:[]};var eo={name:"DwDesignSurveyMain",components:{DwDesignSurveyCore:n("VU/8")(Kr,Xr,!1,function(e){n("oY4z")},"data-v-1436d09d",null).exports},data:function(){return{loading:!0,survey:null,surveyJsonText:null}},mounted:function(){this.loadSurvey()},methods:{loadSurvey:function(){var e=this;_n({surveyId:this.$route.params.id},function(t){console.debug("design survey",t),e.survey=t,e.loading=!1})}}},to={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("dw-design-survey-core",{model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)},staticRenderFns:[]};var no=n("VU/8")(eo,to,!1,function(e){n("bUYC")},"data-v-b893041a",null).exports,so={name:"DwSurveyDesignContent",components:{DwDesignSurveyMain:no}},io={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-design-survey-main")],1)},staticRenderFns:[]};var ro=n("VU/8")(so,io,!1,function(e){n("++uD")},"data-v-652cd94a",null).exports,oo={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n  答卷成功\n")])},staticRenderFns:[]};function ao(e){if(e.hasOwnProperty("surveyStyle")){var t=e.surveyStyle;if(t.hasOwnProperty("pageTopImg")){var n=t.pageTopImg;if(n.hasOwnProperty("src")){var s=n.src;void 0!==s&&null!==s&&(e.surveyStyle.pageTopImg.httpSrc="https://pro.surveyform.cn"+s)}}if(t.hasOwnProperty("pageBgImg")){var i=t.pageBgImg;if(i.hasOwnProperty("src")){var r=i.src;void 0!==r&&null!==r&&(i.enabled?(e.surveyStyle.pageBgImg.httpSrc="https://pro.surveyform.cn"+r,document.documentElement.style.setProperty("--dw-answer-page-bg-image","url("+e.surveyStyle.pageBgImg.httpSrc+")")):document.documentElement.style.setProperty("--dw-answer-page-bg-image","none"))}}if(t.hasOwnProperty("logoImg")){var o=t.logoImg;if(o.hasOwnProperty("src")){var a=o.src;void 0!==a&&null!==a&&(e.surveyStyle.logoImg.httpSrc="https://pro.surveyform.cn"+a)}}}}function lo(e){if(e.hasOwnProperty("surveyStyle")){var t=e.surveyStyle,n=t.pageThemeColor,s=t.pageBgColor,i=t.logoBgColor,r=t.pageThemeColor1;document.documentElement.style.setProperty("--dw-answer-page-bg-color",s),document.documentElement.style.setProperty("--dw-answer-primary-color",n),document.documentElement.style.setProperty("--dw-answer-primary-color-1",r),document.documentElement.style.setProperty("--dw-answer-logo-bg-color",i),console.debug("surveyStyle",t)}}var uo={dwUpSurveyStyleMain:function(e){null!==e&&(ao(e),lo(e))},dwUpImgSrcVar:ao,dwUpAnswerStyleVar:lo},co={name:"DwAnswerSurveyBody",components:{DwAnswerMessageBody:n("VU/8")({name:"DwAnswerMessageBody"},oo,!1,function(e){n("GswC")},"data-v-116c0dac",null).exports,DwHtmlLabelCommon:Gs,DwAnswerQuestion:br,DwFooter:F,DwDesignQuestion:Ms,DwTextEditLabelCommon:Kt},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}},extProps:{type:Object,default:function(){}}},data:function(){return{fullscreenLoading:!1,answer:{},isReAnswer:!1,anPwd:""}},mounted:function(){uo.dwUpSurveyStyleMain(this.survey)},methods:{nextPage:function(e){(e<this.survey.pageAttr.curPage||Xs(this.survey.questions))&&Js(this.survey,e)},backReAnswer:function(){this.survey.answerMsg.showAnswerMsg=!1,this.survey.answerMsg.answerMsgInfo=null,this.answer={},this.survey.questions=yi.getSurveyByLocalStorage(this.survey.sid,this.survey.dwEsSurveyAnswer.esId).questions,this.survey.pageAttr.curPage=1},configCheckAnswerPwdButton:function(){var e=this;this.fullscreenLoading=!0,setTimeout(function(){e.checkAnPwd()},200)},checkAnPwd:function(){var e=this;(function(e){return x({url:"/api/dwsurvey/none/v6/dw-answer-survey/check-answer-pwd.do",method:"get",params:e})})({sid:this.survey.sid,anPwd:this.anPwd}).then(function(t){var n=t.data;n.hasOwnProperty("resultCode")&&200===n.resultCode?(e.$message.success("验证通过，请开始答卷"),e.survey.answerMsg.showAnswerMsg=!1,e.survey.answerMsg.showAnswerPwd=!1):e.$message.warning("密码错误！"),e.fullscreenLoading=!1})},submitAnswer:function(){Xs(this.survey.questions)?null!==this.extProps&&void 0!==this.extProps&&this.extProps.hasOwnProperty("isPreview")&&this.extProps.isPreview?this.$message.warning("当前预览状态，不可以提交答卷！"):this.submitAnswerPost():this.$message.warning("请根据提示完成表单！")},submitAnswerPost:function(){var e=this,t=this.survey.sid,n=wi(this.survey),s=Zs(this.survey);s.anPwd=this.anPwd,this.answer=s,console.debug("answer",s);var i=l()(s),r={surveyId:s.answerCommon.surveyId,sid:t,jsonVersion:6,answerJson:i};this.fullscreenLoading=!0,function(e){return x({url:"/api/dwsurvey/none/v6/dw-answer-survey/save-survey-answer.do",method:"post",data:e})}(r).then(function(s){var i=s.data;if(i.hasOwnProperty("resultCode")&&200===i.resultCode){var r=i.data;if(r.hasOwnProperty("anCheckIsPass")&&r.hasOwnProperty("anCheckResultCode")&&r.hasOwnProperty("indexResponseId")){var o=r.anCheckIsPass,a=r.anCheckResultCode,l=r.indexResponseId;if(o&&201===a&&null!==l)e.survey.answerMsg.showAnswerMsg=!0,e.survey.answerMsg.answerMsgInfo="答卷提交成功，感谢您的支持!",hi.clearAnswerHistory(t,n);else if(r.hasOwnProperty("anCheckResultMsg")){var u=r.anCheckResultMsg;e.survey.answerMsg.showAnswerMsg=!0,e.survey.answerMsg.answerMsgInfo=u,e.survey.answerMsg.answerCheckResult=r}else e.$message.warning("数据未保存，请确认！"),e.isReAnswer=!0}}else e.$message.error("保存失败！"),e.survey.answerMsg.showAnswerMsg=!0,e.survey.answerMsg.answerMsgInfo="答卷保存失败，请重试!",e.isReAnswer=!0;e.fullscreenLoading=!1}),console.debug("submit-answer")}}},vo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[null!==e.survey&&e.survey.hasOwnProperty("answerMsg")?n("div",[n("div",[e.survey.hasOwnProperty("answerMsg")&&!e.survey.answerMsg.showAnswerMsg?n("div",[n("div",{staticClass:"dw-container-body-center",staticStyle:{"padding-bottom":"30px"}},[n("div",[n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyStyle.pageTopImg.enabled&&e.survey.surveyStyle.pageTopImg.hasOwnProperty("httpSrc")&&null!==e.survey.surveyStyle.pageTopImg.httpSrc,expression:"survey.surveyStyle.pageTopImg.enabled && survey.surveyStyle.pageTopImg.hasOwnProperty('httpSrc') && survey.surveyStyle.pageTopImg.httpSrc!==null"}]},[n("div",{staticStyle:{position:"relative"}},[n("el-image",{staticStyle:{width:"100%",height:"200px",display:"block"},attrs:{src:e.survey.surveyStyle.pageTopImg.httpSrc,fit:"cover"}}),e._v(" "),e.survey.surveyStyle.logoImg.enabled&&e.survey.surveyStyle.logoImg.hasOwnProperty("httpSrc")&&null!==e.survey.surveyStyle.logoImg.httpSrc?["pageTopImgLeft"===e.survey.surveyStyle.logoImg.position?n("div",{staticStyle:{position:"absolute",left:"10px",top:"10px"}},[n("el-image",{staticStyle:{height:"40px",display:"block"},attrs:{src:e.survey.surveyStyle.logoImg.httpSrc,fit:"cover"}})],1):e._e(),e._v(" "),"pageTopImgRight"===e.survey.surveyStyle.logoImg.position?n("div",{staticStyle:{position:"absolute",right:"10px",top:"10px"}},[n("el-image",{staticStyle:{height:"40px",display:"block"},attrs:{src:e.survey.surveyStyle.logoImg.httpSrc,fit:"cover"}})],1):e._e()]:e._e()],2)]),e._v(" "),e.survey.surveyStyle.logoImg.enabled&&e.survey.surveyStyle.logoImg.hasOwnProperty("httpSrc")&&null!==e.survey.surveyStyle.logoImg.httpSrc?n("div",["topLogoLeft"===e.survey.surveyStyle.logoImg.position?n("div",{staticClass:"dw-display-flex-left dw-answer-logo-bg-color"},[n("div",{staticStyle:{padding:"10px"}},[n("el-image",{staticStyle:{height:"40px",display:"block"},attrs:{src:e.survey.surveyStyle.logoImg.httpSrc,fit:"cover"}})],1)]):e._e(),e._v(" "),"topLogoCenter"===e.survey.surveyStyle.logoImg.position?n("div",{staticClass:"dw-display-flex-center dw-answer-logo-bg-color"},[n("div",{staticStyle:{padding:"10px"}},[n("el-image",{staticStyle:{height:"40px",display:"block"},attrs:{src:e.survey.surveyStyle.logoImg.httpSrc,fit:"cover"}})],1)]):e._e(),e._v(" "),"topLogoRight"===e.survey.surveyStyle.logoImg.position?n("div",{staticClass:"dw-display-flex-right dw-answer-logo-bg-color"},[n("div",{staticStyle:{padding:"10px"}},[n("el-image",{staticStyle:{height:"40px",display:"block"},attrs:{src:e.survey.surveyStyle.logoImg.httpSrc,fit:"cover"}})],1)]):e._e()]):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.hasOwnProperty("surveyStyle")&&e.survey.surveyStyle.hasOwnProperty("showPageHeader")&&e.survey.surveyStyle.showPageHeader,expression:"survey.hasOwnProperty('surveyStyle') && survey.surveyStyle.hasOwnProperty('showPageHeader') && survey.surveyStyle.showPageHeader"}],staticStyle:{padding:"20px 20px 0 20px"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.hasOwnProperty("surveyStyle")&&e.survey.surveyStyle.hasOwnProperty("showSurveyTitle")&&e.survey.surveyStyle.showSurveyTitle,expression:"survey.hasOwnProperty('surveyStyle') && survey.surveyStyle.hasOwnProperty('showSurveyTitle') && survey.surveyStyle.showSurveyTitle"}],staticStyle:{"text-align":"center","font-weight":"bold",padding:"10px 0"}},[n("dw-html-label-common",{attrs:{survey:e.survey},model:{value:e.survey.surveyNameObj,callback:function(t){e.$set(e.survey,"surveyNameObj",t)},expression:"survey.surveyNameObj"}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.hasOwnProperty("surveyStyle")&&e.survey.surveyStyle.hasOwnProperty("showSurveyNote")&&e.survey.surveyStyle.showSurveyNote,expression:"survey.hasOwnProperty('surveyStyle') && survey.surveyStyle.hasOwnProperty('showSurveyNote') && survey.surveyStyle.showSurveyNote"}],staticStyle:{"font-size":"13px",color:"#7b7b7b","text-indent":"2em","line-height":"20px","padding-top":"15px"}},[void 0!==e.survey.surveyDetail?n("dw-html-label-common",{attrs:{survey:e.survey},model:{value:e.survey.surveyDetail.surveyNodeObj,callback:function(t){e.$set(e.survey.surveyDetail,"surveyNodeObj",t)},expression:"survey.surveyDetail.surveyNodeObj"}}):e._e()],1)]),e._v(" "),n("div",{staticClass:"dw-survey-answer-body",staticStyle:{"padding-top":"20px"}},[n("div",[n("div",[n("transition-group",e._l(e.survey.questions,function(t,s){return n("div",{key:"surveyQu"+s},[n("dw-answer-question",{ref:"designQuestion",refInFor:!0,attrs:{index:s,item:t},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)}),0)],1)]),e._v(" "),!e.survey.readonly&&e.survey.pageAttr.curPage>=e.survey.pageAttr.pageSize?n("div",{staticClass:"dw-width-100bf",staticStyle:{"text-align":"left"}},[e.survey.answerMsg.noSurveyJson?e._e():n("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"dw-answer-button-style1",attrs:{type:"primary"},on:{click:e.submitAnswer}},[e._v("提交答卷")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.survey.pageAttr.curPage>1,expression:"survey.pageAttr.curPage>1"}],staticClass:"dw-answer-button-style1",attrs:{type:"primary",plain:""},on:{click:function(t){return e.nextPage(e.survey.pageAttr.curPage-1)}}},[e._v("上一页")])],1):e._e()])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.dwDebug,expression:"survey.dwDebug"}],staticClass:"dw-debug"},[e._v(e._s(e.answer))])])])]):n("div",[n("div",{staticStyle:{padding:"50px 20px","text-align":"center",background:"white"}},[n("div",{staticStyle:{"padding-bottom":"20px"}},[e.survey.answerMsg.noSurveyJson?e._e():n("div",{staticStyle:{"text-align":"center","font-weight":"bold"}},[n("dw-html-label-common",{attrs:{survey:e.survey},model:{value:e.survey.surveyNameObj,callback:function(t){e.$set(e.survey,"surveyNameObj",t)},expression:"survey.surveyNameObj"}})],1)]),e._v(" "),e.survey.answerMsg.hasOwnProperty("showAnswerPwd")&&e.survey.answerMsg.showAnswerPwd?n("div",{staticStyle:{"text-align":"left"}},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{label:"此问卷需要答卷密码，请输入答卷密码"}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"请输入答卷密码",clearable:""},model:{value:e.anPwd,callback:function(t){e.anPwd=t},expression:"anPwd"}}),e._v(" "),n("div",{staticStyle:{color:"red"}},[e._v(e._s(e.survey.answerMsg.answerPwdError))])],1)],1),e._v(" "),n("div",{staticClass:"dw-width-100bf",staticStyle:{"text-align":"left"}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"dw-answer-button-style1",attrs:{type:"primary"},on:{click:e.configCheckAnswerPwdButton}},[e._v("开始答卷")])],1)],1):e._e(),e._v(" "),n("div",[e.survey.answerMsg.hasOwnProperty("answerCheckResult")&&e.survey.answerMsg.answerCheckResult.hasOwnProperty("anCheckResultCode")&&e.survey.answerMsg.answerCheckResult.anCheckResultCode>=400?[n("div",{staticStyle:{color:"red","font-size":"13px"}},[e._v(" "+e._s(e.survey.answerMsg.answerCheckResult.anCheckResultMsg))])]:[n("div",{staticStyle:{color:"dodgerblue","font-size":"13px"}},[e._v(" "+e._s(e.survey.answerMsg.answerMsgInfo))])],e._v(" "),e.isReAnswer?n("div",{staticStyle:{"padding-top":"15px"}},[n("el-button",{on:{click:e.backReAnswer}},[e._v("重新填写")])],1):e._e()],2)])])])]):e._e()])},staticRenderFns:[]};var po=n("VU/8")(co,vo,!1,function(e){n("gQcA")},"data-v-92475a7a",null).exports,mo={name:"DwFooterSm",data:function(){return{footerInfo:{siteName:"调问网",siteUrl:"http://www.diaowen.net",siteIcp:"京ICP备13050030号-3",siteMail:"service@diaowen.net",sitePhone:"18888888888",versionInfo:"DWSurvey OSS V5.0 Vue",versionNumber:"OSS V5.0",versionBuilt:"20211128",years:"2012-2021"}}},mounted:function(){this.queryDWSurveyFooter()},methods:{queryDWSurveyFooter:function(){var e=this;this.axios.get(b.surveyFooterInfo,{}).then(function(t){var n=t.data.data;console.debug(n),e.footerInfo=n})}}},yo={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-footer-main"},[t("div",[t("span",[this._v("Powered by "),this._m(0),this._v(" "+this._s(this.footerInfo.versionNumber)+" Vue ")])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"www.diaowen.net"}},[t("strong",[this._v("DWSurvey")])])}]};var ho={name:"DwAnswerDefaultLayout",components:{DwFooterSm:n("VU/8")(mo,yo,!1,function(e){n("uUGI")},"data-v-06da80a6",null).exports,DwFooter:F,DwAnswerSurveyBody:po,DwDesignContainerBodyCenter:Er},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}},extProps:{type:Object,default:function(){}}},data:function(){return{surveyId:"",drag:!1,headerQuToolbarStyle:"",containerLRStyle:"",lrContentHeight:"",containerBodyStyle:"",questions:[],radio:"1",hover:!1,answerSurvey:{questions:[]},anBodySpan:{xs:{span:24,offset:0},sm:{span:24,offset:0},md:{span:20,offset:2},lg:{span:16,offset:4},xl:{span:12,offset:6}},anBodyStyle:{},customColor:"#025bb7",dwElProgressStyle:"position: fixed;z-index:10000;"}},mounted:function(){if(null!==this.extProps&&void 0!==this.extProps){var e=this.extProps;if(console.debug("extProps",e),e.hasOwnProperty("anBodySpan")){var t=e.anBodySpan;t.hasOwnProperty("xs")&&(this.anBodySpan.xs=t.xs),t.hasOwnProperty("sm")&&(this.anBodySpan.sm=t.sm),t.hasOwnProperty("md")&&(this.anBodySpan.md=t.md),t.hasOwnProperty("lg")&&(this.anBodySpan.lg=t.lg),t.hasOwnProperty("xl")&&(this.anBodySpan.xl=t.xl)}e.hasOwnProperty("anBodyStyle")&&(this.anBodyStyle=e.anBodyStyle),e.hasOwnProperty("isPreview")&&e.isPreview&&(this.dwElProgressStyle="")}hi.clearAnswerByDate()},beforeCreate:function(){},beforeDestroy:function(){},methods:{}},fo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dw-answer-container",style:e.anBodyStyle},[n("el-row",[n("el-col",{attrs:{xs:e.anBodySpan.xs,sm:e.anBodySpan.sm,md:e.anBodySpan.md,lg:e.anBodySpan.lg,xl:e.anBodySpan.xl}},[n("el-container",[null!=e.survey&&e.survey.hasOwnProperty("showSurvey")&&e.survey.showSurvey?n("el-main",{staticStyle:{padding:"10px"}},[n("div",[n("div",[n("div",{staticClass:"dw-container-body"},[e.survey.hasOwnProperty("surveyStyle")&&e.survey.surveyStyle.hasOwnProperty("showProgressbar")&&e.survey.surveyStyle.showProgressbar?n("div",{staticClass:"dw-survey-answer-progress",style:e.dwElProgressStyle},[n("el-progress",{attrs:{"show-text":!1,"stroke-width":3,percentage:e.survey.hasOwnProperty("answerProgress")?parseFloat(e.survey.answerProgress.percentage):0,color:e.survey.surveyStyle.progressColor,"define-back-color":"#dcdfe6"}})],1):e._e(),e._v(" "),n("dw-answer-survey-body",{ref:"designContainerBody",attrs:{"ext-props":e.extProps},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])]),e._v(" "),n("div",{},[n("dw-footer-sm")],1)]):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var wo=n("VU/8")(ho,fo,!1,function(e){n("gmhw"),n("Qdlr")},"data-v-7053942c",null).exports,go={name:"DwAnswerSurveyMain",components:{DwAnswerDefaultLayout:wo,DwAnswerSurveyBody:po},props:{extProps:{type:Object,default:function(){}},answerProps:{type:Object,default:function(){}}},data:function(){return{uuidList:[],survey:null,loading:!0,answerData:null,answerCheckResult:null}},mounted:function(){this.loadSurvey()},methods:{loadSurvey:function(){var e=this,t=m.Loading.service({fullscreen:!0,spinner:"fa-solid fa-spinner fa-spin-pulse",background:"#00000091",customClass:"dw-loading dw-answer-custom-theme",text:"数据加载中"});console.debug("sidProps",this.answerProps);var n={sid:this.answerProps.sid,answerId:this.answerProps.answerId,anPwd:this.answerProps.anPwd};console.debug("loadSurvey params 1",n),this.$route.query.hasOwnProperty("anPwd")&&(n.anPwd=this.$route.query.anPwd),console.debug("loadSurvey params",n),_i(n,function(n,s){n.dwDebug=!1,null!=e.extProps&&e.extProps.hasOwnProperty("readonly")&&(n.readonly=e.extProps.readonly),e.answerCheckResult=s,s.hasOwnProperty("anCheckIsPass")&&s.hasOwnProperty("anCheckResultMsg")&&!s.anCheckIsPass&&403!==s.anCheckResultCode?(n.answerMsg={showAnswerMsg:!0,answerMsgInfo:s.anCheckResultMsg,noSurveyJson:!1,answerCheckResult:s},e.survey=n):(Ws(n),e.loadAnswerData(n));var i=n.surveyNameObj.dwText;document.title=i+" - 调问网",e.$nextTick(function(){t.close()})},function(n){if(n.hasOwnProperty("anCheckIsPass")&&n.hasOwnProperty("anCheckResultMsg")&&!n.anCheckIsPass){var s={showAnswerMsg:!0,answerMsgInfo:n.anCheckResultMsg,noSurveyJson:!0,answerCheckResult:n};e.survey={answerMsg:s,showSurvey:!0},n.anCheckResultCode>=500&&e.$message.error(n.anCheckResultMsg)}e.$nextTick(function(){t.close()})})},loadAnswerData:function(e){var t,n=this;if(this.answerProps.hasOwnProperty("answerId")&&null!==this.answerProps.answerId&&void 0!==this.answerProps.answerId){var s=this.answerProps.answerId;(t={answerId:s},x({url:"/api/dwsurvey/none/v6/dw-answer-survey/get-survey-answer.do",method:"get",params:t})).then(function(t){console.debug("loadAnswer response",t);var s=t.data;200===s.resultCode?n.answerData=s.data:n.$message.warning("未找到对应的答卷记录！"),n.answerData2Survey(e)})}else this.answerData2Survey(e)},answerData2Survey:function(e){null!=this.answerData&&Ys(e,this.answerData),console.debug("db survey",e),e.answerMsg={showAnswerMsg:!1,answerMsgInfo:null,noSurveyJson:!1},this.setSurveyData(e),console.debug("this survey",e)},setSurveyData:function(e){var t=this;if(this.answerProps.hasOwnProperty("answerId")&&null!==this.answerProps.answerId&&void 0!==this.answerProps.answerId){if(e.hasOwnProperty("dwEsSurveyAnswer")&&null!==e.dwEsSurveyAnswer){var n=e.dwEsSurveyAnswer;if((void 0===this.extProps||this.extProps.hasOwnProperty("readonly")&&!this.extProps.readonly)&&n.hasOwnProperty("answerCommon")&&n.answerCommon.hasOwnProperty("anTime")&&n.answerCommon.anTime.hasOwnProperty("endAnDate")){var s=n.answerCommon.anTime.endAnDate;if(null!==s){var i=new Date(s).getTime(),r=hi.getSurveyAnswerActionTime(e);console.debug("endAnDateTime",i),console.debug("localLastActionDateTime",r),r>i?this.$confirm("检测到当前加载的答卷数据在本地有过修改，是否使用本地最新修改。","提示",{confirmButtonText:"是，使用本地最新数据",cancelButtonText:"否，使用原始提交数据",type:"warning"}).then(function(){t.localStorage2Survey(e),t.lastSetSurvey()}).catch(function(){t.survey=e,t.lastSetSurvey()}):(this.survey=e,this.lastSetSurvey())}else this.survey=e,this.lastSetSurvey()}else this.survey=e,this.lastSetSurvey()}}else this.localStorage2Survey(e),this.lastSetSurvey()},localStorage2Survey:function(e){var t=this.getLocalStorage(e);null!==t?this.survey=t:(Js(e,1),this.survey=e)},getLocalStorage:function(e){var t=e.sid,n=wi(e),s=hi.getSurveyAnswerObjByLocalStorage(t,n);if(null!==s&&(e.hasOwnProperty("dwVersion")&&s.hasOwnProperty("dwVersion")))return e.dwVersion===s.dwVersion?s:(Ys(e,Zs(s)),Js(e,1),e);return null},checkAnswerPwd:function(){var e=this.survey;null!=e&&e.hasOwnProperty("surveyAttrs")&&e.surveyAttrs.hasOwnProperty("anPwdAttr")&&e.surveyAttrs.anPwdAttr.hasOwnProperty("enabled")&&e.surveyAttrs.anPwdAttr.enabled&&!this.answerCheckResult.anCheckIsPass&&(this.survey.answerMsg.showAnswerMsg=!0,this.survey.answerMsg.showAnswerPwd=!0,this.survey.answerMsg.answerPwdError="请输入正确密码")},lastSetSurvey:function(){var e=this.survey;di(e),gi(e),Js(e,1),yi.saveSurvey2LocalStorage(this.survey),this.checkAnswerPwd(),null!=this.survey&&this.survey.hasOwnProperty("firstLoadAnswer")&&(this.survey.firstLoadAnswer=!1)}}},xo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-answer-default-layout",{attrs:{"ext-props":e.extProps},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)},staticRenderFns:[]};var bo=n("VU/8")(go,xo,!1,function(e){n("3pxz"),n("hxPH")},"data-v-43281088",null).exports,Co={name:"DwAnswerSurvey",components:{DwAnswerSurveyMain:bo},props:{extProps:{type:Object,default:function(){}},answerProps:{type:Object,default:function(){return{sid:null,answerId:null,anPwd:null}}}},data:function(){return{}},mounted:function(){null===this.answerProps||!this.answerProps.hasOwnProperty("sid")||this.answerProps.sid},methods:{}},_o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-answer-custom-theme"},[t("el-row",[void 0!==this.answerProps.sid&&null!==this.answerProps.sid?t("el-col",[t("dw-answer-survey-main",{attrs:{"answer-props":this.answerProps,"ext-props":this.extProps}})],1):this._e()],1)],1)},staticRenderFns:[]};var Ao=n("VU/8")(Co,_o,!1,function(e){n("SxyH"),n("EIEt"),n("uzEK")},"data-v-4fa5e37c",null).exports,So={name:"DwSurveyStyleDesignAside",model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{options:[{value:"topLogoLeft",label:"顶部LOGO行居左"},{value:"topLogoCenter",label:"顶部LOGO行居中"},{value:"topLogoRight",label:"顶部LOGO行居右"},{value:"pageTopImgLeft",label:"在页眉图片左上角"},{value:"pageTopImgRight",label:"在页眉图片右上角"}],color:"rgba(19, 206, 102, 0.8)",imageUrl:""}},mounted:function(){this.upImgSrc()},methods:{handleSuccessTopImg:function(e,t){this.handleSuccess(e,t,"pageTopImg")},handleSuccessBgImg:function(e,t){this.handleSuccess(e,t,"pageBgImg")},handleSuccessLogoImg:function(e,t){this.handleSuccess(e,t,"logoImg")},handleSuccess:function(e,t,n){if(e.hasOwnProperty("resultCode")&&200===e.resultCode){var s=e.data;"pageTopImg"===n?this.survey.surveyStyle.pageTopImg.src=s[0].location:"pageBgImg"===n?this.survey.surveyStyle.pageBgImg.src=s[0].location:"logoImg"===n&&(this.survey.surveyStyle.logoImg.src=s[0].location),this.upImgSrc()}else this.$message.error("上传失败")},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,n=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&n},upImgSrc:function(){uo.dwUpImgSrcVar(this.survey)},upAnswerStyle:function(){uo.dwUpAnswerStyleVar(this.survey)},upThemeColor:function(){var e=this.survey;if(null!==e&&e.hasOwnProperty("surveyStyle")){var t=e.surveyStyle.pageThemeColor;this.survey.surveyStyle.pageThemeColor1=kn.generateSimilarColor(t,-.1,.1),console.debug("pageThemeColor",t);var n=kn.generateSimilarColor(t,-.2,.3,!1);this.survey.surveyStyle.pageBgColor=n,kn.isWhiteColor(n)&&(this.survey.surveyStyle.pageBgColor="#dfdfe0"),console.debug("this.survey.pageBgColor",n),this.survey.surveyStyle.progressColor=kn.generateSimilarColor(t,.1,-.2,!1);var s=kn.generateSimilarColor(t,-.2,.5,!0);this.survey.surveyStyle.logoBgColor=s;var i=kn.hslToRgb(s);console.debug("logoBgColorRgb",i,i.red),kn.isWhiteColor(i)&&(this.survey.surveyStyle.pageBgColor="#efefef"),this.upAnswerStyle(),console.debug("this.survey.surveyStyle.logoBgColor",this.survey.surveyStyle.logoBgColor)}}}},qo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return null!=e.survey&&e.survey.hasOwnProperty("surveyStyle")?n("div",[n("div",[n("div",{staticStyle:{padding:"40px 10px 10px 10px"}},[e._m(0),e._v(" "),n("div",{staticStyle:{padding:"5px 0"}},[n("el-alert",{attrs:{title:"配置完成点击确认发布才会生效",type:"info","show-icon":""}})],1),e._v(" "),n("div",[n("el-form",{ref:"form",attrs:{size:"small"}},[n("div",[n("div",{staticClass:"dw-title-attr"},[e._v("图片属性")]),e._v(" "),n("div",{staticStyle:{"padding-left":"10px"}},[n("el-form-item",[n("div",[n("el-checkbox",{model:{value:e.survey.surveyStyle.pageTopImg.enabled,callback:function(t){e.$set(e.survey.surveyStyle.pageTopImg,"enabled",t)},expression:"survey.surveyStyle.pageTopImg.enabled"}},[e._v("页眉图")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyStyle.pageTopImg.enabled,expression:"survey.surveyStyle.pageTopImg.enabled"}],staticStyle:{"font-size":"12px"}},[n("el-row",{staticStyle:{height:"40px"},attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:10}},[n("el-image",{staticClass:"dw-style-el-image",attrs:{src:e.survey.surveyStyle.pageTopImg.httpSrc,fit:"cover"}},[n("div",{staticClass:"el-image__error",attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"fa-regular fa-image",staticStyle:{"margin-right":"6px"}}),e._v("请上传图片")])])],1),e._v(" "),n("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:14}},[n("el-upload",{attrs:{"on-success":e.handleSuccessTopImg,"show-file-list":!1,action:"/api/dwsurvey/up/up-file.do"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1)],1)]),e._v(" "),n("el-form-item",[n("div",[n("el-checkbox",{on:{change:e.upImgSrc},model:{value:e.survey.surveyStyle.pageBgImg.enabled,callback:function(t){e.$set(e.survey.surveyStyle.pageBgImg,"enabled",t)},expression:"survey.surveyStyle.pageBgImg.enabled"}},[e._v("背景图")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyStyle.pageBgImg.enabled,expression:"survey.surveyStyle.pageBgImg.enabled"}],staticStyle:{"font-size":"12px"}},[n("el-row",{staticStyle:{height:"40px"},attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:10}},[n("el-image",{staticClass:"dw-style-el-image",attrs:{src:e.survey.surveyStyle.pageBgImg.httpSrc,fit:"cover"}},[n("div",{staticClass:"el-image__error",attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"fa-regular fa-image",staticStyle:{"margin-right":"6px"}}),e._v("请上传图片")])])],1),e._v(" "),n("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:14}},[n("el-upload",{attrs:{"on-success":e.handleSuccessBgImg,"show-file-list":!1,action:"/api/dwsurvey/up/up-file.do"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1)],1)]),e._v(" "),n("el-form-item",[n("div",[n("el-checkbox",{model:{value:e.survey.surveyStyle.logoImg.enabled,callback:function(t){e.$set(e.survey.surveyStyle.logoImg,"enabled",t)},expression:"survey.surveyStyle.logoImg.enabled"}},[e._v("LOGO图")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyStyle.logoImg.enabled,expression:"survey.surveyStyle.logoImg.enabled"}],staticStyle:{"font-size":"12px"}},[n("el-row",{staticStyle:{height:"40px"},attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:10}},[n("el-image",{staticClass:"dw-style-el-image",attrs:{src:e.survey.surveyStyle.logoImg.httpSrc,fit:"fill"}},[n("div",{staticClass:"el-image__error",attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"fa-regular fa-image",staticStyle:{"margin-right":"6px"}}),e._v("请上传图片")])])],1),e._v(" "),n("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:14}},[n("el-upload",{attrs:{"on-success":e.handleSuccessLogoImg,"show-file-list":!1,action:"/api/dwsurvey/up/up-file.do"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1),e._v(" "),n("div",{staticStyle:{"padding-top":"5px"}},[n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:24}},[n("span",{staticStyle:{"font-size":"14px","font-weight":"500",color:"#606266"}},[e._v("显示位置")]),e._v(" "),n("el-select",{staticStyle:{width:"144px"},attrs:{placeholder:"请选择"},model:{value:e.survey.surveyStyle.logoImg.position,callback:function(t){e.$set(e.survey.surveyStyle.logoImg,"position",t)},expression:"survey.surveyStyle.logoImg.position"}},e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1)])],1)]),e._v(" "),n("div",{staticStyle:{"margin-top":"20px"}},[n("div",{staticClass:"dw-title-attr"},[e._v("颜色属性")]),e._v(" "),n("div",{staticStyle:{"padding-left":"10px"}},[n("el-form-item",[n("div",{staticStyle:{"font-size":"12px"}},[n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:14}},[n("div",{staticStyle:{"font-size":"14px","font-weight":"500",color:"#606266"}},[e._v("主题色"),n("span",{staticStyle:{"font-size":"12px","font-weight":"normal",color:"#969696"}},[e._v("（表单控件）")])])]),e._v(" "),n("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:10}},[n("el-color-picker",{staticStyle:{display:"block"},attrs:{"show-alpha":"",size:"medium"},on:{change:e.upThemeColor},model:{value:e.survey.surveyStyle.pageThemeColor,callback:function(t){e.$set(e.survey.surveyStyle,"pageThemeColor",t)},expression:"survey.surveyStyle.pageThemeColor"}})],1)],1)],1)]),e._v(" "),n("el-form-item",[n("div",{staticStyle:{"font-size":"12px"}},[n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:14}},[n("div",{staticStyle:{"font-size":"14px","font-weight":"500",color:"#606266"}},[e._v("背景色"),n("span",{staticStyle:{"font-size":"12px","font-weight":"normal",color:"#969696"}},[e._v("（背景图优先）")])])]),e._v(" "),n("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:10}},[n("el-color-picker",{staticStyle:{display:"block"},attrs:{"show-alpha":"",size:"medium"},on:{change:e.upAnswerStyle},model:{value:e.survey.surveyStyle.pageBgColor,callback:function(t){e.$set(e.survey.surveyStyle,"pageBgColor",t)},expression:"survey.surveyStyle.pageBgColor"}})],1)],1)],1)]),e._v(" "),n("el-form-item",[n("div",{staticStyle:{"font-size":"12px"}},[n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:14}},[n("div",{staticStyle:{"font-size":"14px","font-weight":"500",color:"#606266"}},[e._v("LOGO行背景色")])]),e._v(" "),n("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:10}},[n("el-color-picker",{staticStyle:{display:"block"},attrs:{"show-alpha":"",size:"medium"},on:{change:e.upAnswerStyle},model:{value:e.survey.surveyStyle.logoBgColor,callback:function(t){e.$set(e.survey.surveyStyle,"logoBgColor",t)},expression:"survey.surveyStyle.logoBgColor"}})],1)],1)],1)]),e._v(" "),n("el-form-item",[n("div",{staticStyle:{"font-size":"12px"}},[n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:14}},[n("div",{staticStyle:{"font-size":"14px","font-weight":"500",color:"#606266"}},[e._v("进度条色"),n("span",{staticStyle:{"font-size":"12px","font-weight":"normal",color:"#969696"}},[e._v("（优先级高）")])])]),e._v(" "),n("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:10}},[n("el-color-picker",{staticStyle:{display:"block"},attrs:{"show-alpha":"",size:"medium"},on:{change:e.upAnswerStyle},model:{value:e.survey.surveyStyle.progressColor,callback:function(t){e.$set(e.survey.surveyStyle,"progressColor",t)},expression:"survey.surveyStyle.progressColor"}})],1)],1)],1)])],1)]),e._v(" "),n("div",{staticStyle:{"margin-top":"20px"}},[n("div",{staticClass:"dw-title-attr"},[e._v("显示配置")]),e._v(" "),n("div",{staticStyle:{"padding-left":"10px"}},[n("el-form-item",[n("div",{staticStyle:{"font-size":"12px"}},[n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:12}},[n("div",[n("el-checkbox",{model:{value:e.survey.surveyStyle.showQuNum,callback:function(t){e.$set(e.survey.surveyStyle,"showQuNum",t)},expression:"survey.surveyStyle.showQuNum"}},[e._v("显示题号")])],1)]),e._v(" "),n("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:12}},[n("div",[n("el-checkbox",{model:{value:e.survey.surveyStyle.showProgressbar,callback:function(t){e.$set(e.survey.surveyStyle,"showProgressbar",t)},expression:"survey.surveyStyle.showProgressbar"}},[e._v("显示进度")])],1)])],1)],1)]),e._v(" "),n("el-form-item",[n("div",{staticStyle:{"font-size":"12px"}},[n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:12}},[n("div",[n("el-checkbox",{model:{value:e.survey.surveyStyle.showPageHeader,callback:function(t){e.$set(e.survey.surveyStyle,"showPageHeader",t)},expression:"survey.surveyStyle.showPageHeader"}},[e._v("显示表头")])],1)]),e._v(" "),n("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:12}},[n("div",[n("el-checkbox",{model:{value:e.survey.surveyStyle.showQuTypeName,callback:function(t){e.$set(e.survey.surveyStyle,"showQuTypeName",t)},expression:"survey.surveyStyle.showQuTypeName"}},[e._v("显示题型")])],1)])],1)],1)]),e._v(" "),n("el-form-item",[n("div",{staticStyle:{"font-size":"12px"}},[n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:12}},[n("div",[n("el-checkbox",{model:{value:e.survey.surveyStyle.showSurveyTitle,callback:function(t){e.$set(e.survey.surveyStyle,"showSurveyTitle",t)},expression:"survey.surveyStyle.showSurveyTitle"}},[e._v("显示问卷标题")])],1)]),e._v(" "),n("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:12}},[n("div",[n("el-checkbox",{model:{value:e.survey.surveyStyle.showSurveyNote,callback:function(t){e.$set(e.survey.surveyStyle,"showSurveyNote",t)},expression:"survey.surveyStyle.showSurveyNote"}},[e._v("显示问卷说明")])],1)])],1)],1)])],1)])])],1)])])]):e._e()},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{"font-size":"14px","font-weight":"bold","text-align":"left",padding:"10px 0"}},[t("i",{staticClass:"fa-solid fa-palette",staticStyle:{color:"#7d55f7"}}),this._v(" 问卷样式配置\n      ")])}]};var ko={name:"DwPreviewSurveyMain",components:{DwSurveyStyleDesignAside:n("VU/8")(So,qo,!1,function(e){n("Ideb")},"data-v-25f849be",null).exports,DwAnswerDefaultLayout:wo,DwAnswerSurvey:Ao,DwAnswerSurveyMain:bo},data:function(){return{loading:!0,survey:null,drawer:!1,direction:"ltl",activeName:"first",previewTypeClass:"dw-preview-pc",padPhoneAnBodySpan:{xs:{span:24,offset:0},sm:{span:24,offset:0},md:{span:24,offset:0},lg:{span:24,offset:0},xl:{span:24,offset:0}},answerProps:{sid:null,answerId:null,anPwd:null},prevPath:"/v6"}},mounted:function(){var e=this;this.answerProps.sid=this.$route.params.id,this.loadSurvey(),I.isLayoutLr(function(t){e.prevPath="/v6/lr"})},methods:{handlePush:function(e){this.$router.push(e)},loadSurvey:function(){var e=this;_n({surveyId:this.$route.params.id},function(t){console.debug("design survey",t),t.hasOwnProperty("surveyStyle")&&t.surveyStyle.hasOwnProperty("pageThemeColor")||(t.surveyStyle={pageTopImg:{enabled:!0,src:null,httpSrc:null},pageBgImg:{enabled:!1,src:null,httpSrc:null},logoImg:{enabled:!1,src:null,httpSrc:null,position:"topLogoRight"},pageBgColor:"#eeeeee",pageThemeColor:"#0965c2",pageThemeColor1:"#044a8d",logoBgColor:"#3593ee",progressColor:"#0667c6",showQuNum:!0,showProgressbar:!0,showPageHeader:!0,showQuTypeName:!0,showSurveyTitle:!0,showSurveyNote:!0}),t.dwDebug=!1,t.answerMsg={showAnswerMsg:!1,answerMsgInfo:null,noSurveyJson:!1},Ws(t),gi(t),di(t),Js(t,1),e.survey=t,e.loading=!1})},handleClick:function(e,t){console.log(e,t)},previewTabClick:function(e){this.previewTypeClass=e},designSurvey:function(){var e=this.$route.params.id;this.$router.push("/v6/diaowen/dw-design/survey/"+e)},devSurvey:function(){var e=this,t=this.$route.params.id;(function(e){return x({url:"/api/dwsurvey/app/dw-design-survey/dev-survey.do",method:"post",params:e})})({surveyId:t}).then(function(n){console.debug("response"),console.debug(n),200===n.data.resultCode?(hi.clearAnswerHistory(e.survey.sid,null),e.$router.push(e.prevPath+"/dw/survey/c/url/"+t)):e.$message.error("发布失败，请重试或联系管理员！")})},saveSurvey:function(){this.saveSurveyFun(null)},saveSurveyFun:function(e){var t=this,n=this.survey.id,s=this.survey.sid;yn(this.survey),vn(this.survey),console.debug("save this.survey",this.survey);var i=l()(this.survey),r={surveyId:n,sid:s,surveyJsonText:i,surveyJsonSimple:l()(hn(i))};console.debug("surveyJson data",r),Mt(r).then(function(n){console.debug("dwSaveSurveyJson-response",n);var s=n.data;s.hasOwnProperty("resultCode")&&200===s.resultCode?(t.$message.success("保存成功！"),null!=e&&e()):t.$message.success("保存失败！")})}}},Io={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dw-preview-container"},[n("div",{staticClass:"dw-preview-header"},[e._m(0),e._v(" "),n("div",{staticClass:"dw-preview-header-center"},[n("label",[n("i",{staticClass:"dw-icon-button fas fa-desktop",class:"dw-preview-pc"===e.previewTypeClass?"active":"",on:{click:function(t){return e.previewTabClick("dw-preview-pc")}}})]),e._v(" "),n("label",[n("i",{staticClass:"dw-icon-button fas fa-tablet-alt",class:"dw-preview-pad"===e.previewTypeClass?"active":"",on:{click:function(t){return e.previewTabClick("dw-preview-pad")}}})]),e._v(" "),n("label",[n("i",{staticClass:"dw-icon-button fas fa-mobile-alt",class:"dw-preview-phone"===e.previewTypeClass?"active":"",on:{click:function(t){return e.previewTabClick("dw-preview-phone")}}})])]),e._v(" "),n("div",{staticClass:"dw-preview-header-right"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.devSurvey}},[e._v("确认发布")]),e._v(" "),n("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:e.saveSurvey}},[e._v("保存修改")]),e._v(" "),n("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:e.designSurvey}},[e._v("返回编辑")]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handlePush(e.prevPath+"/dw/survey/c/attr/"+e.survey.id)}}},[e._v("答卷配置")]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handlePush(e.prevPath)}}},[e._v("返回列表")])],1)]),e._v(" "),n("el-container",{staticStyle:{height:"calc(100vh)"}},[n("el-aside",{staticStyle:{width:"300px","border-right":"1px solid rgb(230 228 228)"}},[null!==e.survey?n("div",{staticClass:"dw-preview-left-aside"},[n("dw-survey-style-design-aside",{model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e()]),e._v(" "),n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{flex:"auto"}},[n("div",{staticStyle:{width:"100%"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"dw-preview-pc"===e.previewTypeClass,expression:"previewTypeClass === 'dw-preview-pc'"}],staticClass:"dw-preview-main"},[n("div",{staticClass:"dw-preview-answer-survey-container"},[n("div",{staticClass:"dw-preview-pc"},[n("div",{staticClass:"dw-preview-body"},[n("div",[n("div",{staticClass:"dw-answer-custom-theme"},[n("dw-answer-default-layout",{attrs:{"ext-props":{isPreview:!0}},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])])])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"dw-preview-pad"===e.previewTypeClass,expression:"previewTypeClass === 'dw-preview-pad'"}],staticClass:"dw-preview-main"},[n("div",{staticClass:"dw-preview-answer-survey-container"},[n("div",{staticClass:"dw-preview-pad"},[n("div",{staticClass:"dw-preview-body"},[n("div",[n("div",{staticClass:"dw-answer-custom-theme"},[n("dw-answer-default-layout",{attrs:{"ext-props":{anBodySpan:e.padPhoneAnBodySpan,anBodyStyle:{minHeight:"630px",height:"auto"},isPreview:!0}},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])])])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"dw-preview-phone"===e.previewTypeClass,expression:"previewTypeClass === 'dw-preview-phone'"}],staticClass:"dw-preview-main"},[n("div",{staticClass:"dw-preview-answer-survey-container"},[n("div",{staticClass:"dw-preview-phone"},[n("div",{staticClass:"dw-preview-body"},[n("div",[n("div",{staticClass:"dw-answer-custom-theme"},[n("dw-answer-default-layout",{attrs:{"ext-props":{anBodySpan:e.padPhoneAnBodySpan,anBodyStyle:{minHeight:"861px",height:"auto"},isPreview:!0}},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])])])])])])])],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-preview-header-left"},[t("label",[t("i",{staticClass:"dw-icon-button fa-regular fa-eye active",staticStyle:{color:"#7249ee"}}),this._v("问卷预览")])])}]};var To={name:"DwSurveyDesignContent",components:{DwPreviewSurveyMain:n("VU/8")(ko,Io,!1,function(e){n("kHFh"),n("YNhe")},"data-v-f6fc2102",null).exports,DwDesignSurveyMain:no}},Oo={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-preview-survey-main")],1)},staticRenderFns:[]};var Do=n("VU/8")(To,Oo,!1,function(e){n("JQHi")},"data-v-7278a29a",null).exports;var Eo={name:"DwSurveyAnswerReview",components:{DwAnswerSurvey:Ao,DwAnswerSurveyMain:bo},props:{dwEsSurveyAnswer:{type:Object,default:function(){}}},data:function(){return{thDwEsSurveyAnswer:null,padPhoneAnBodySpan:{xs:{span:24,offset:0},sm:{span:24,offset:0},md:{span:24,offset:0},lg:{span:24,offset:0},xl:{span:24,offset:0}},answerProps:{sid:null,answerId:null,anPwd:""}}},mounted:function(){this.$route.params.hasOwnProperty("sid")&&this.$route.params.hasOwnProperty("answerId")?(this.answerProps.sid=this.$route.params.sid,this.answerProps.answerId=this.$route.params.answerId):null!==this.dwEsSurveyAnswer&&(this.answerProps.sid=this.dwEsSurveyAnswer.answerCommon.surveyId,this.answerProps.answerId=this.dwEsSurveyAnswer.esId)},methods:{}},Po={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"answerReviewRoot"},[n("el-row",[n("el-col",[n("div",{staticStyle:{"background-color":"#dfdfe0"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.dwEsSurveyAnswer,expression:"dwEsSurveyAnswer!==null"}],staticStyle:{padding:"10px"}},[n("el-descriptions",{attrs:{column:2,title:"答卷基本信息",border:""}},[n("template",{slot:"extra"}),e._v(" "),n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-key"}),e._v("  ID")]),e._v("\n              "+e._s(e.dwEsSurveyAnswer.esId)+"\n            ")],2),e._v(" "),n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-user"}),e._v("  用户")]),e._v("\n              "+e._s(e.dwEsSurveyAnswer.answerCommon.anUser.userName)+"\n            ")],2),e._v(" "),n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-date"}),e._v("  时间")]),e._v("\n              "+e._s(e.dwEsSurveyAnswer.answerCommon.anTime.endAnDate)+"\n            ")],2),e._v(" "),n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-place"}),e._v("  IP\n              ")]),e._v("\n              "+e._s(e.dwEsSurveyAnswer.answerCommon.anIp.ip)+"\n            ")],2),e._v(" "),n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-office-building"}),e._v("  IP地址\n              ")]),e._v("\n              "+e._s(e.dwEsSurveyAnswer.answerCommon.anIp.addr)+"\n            ")],2)],2)],1),e._v(" "),n("div",{staticStyle:{"margin-top":"0"}},[n("dw-answer-survey",{attrs:{"answer-props":e.answerProps,"ext-props":{anBodySpan:e.padPhoneAnBodySpan,anBodyStyle:{minHeight:"630px",height:"auto"},isPreview:!0,readonly:!0}}})],1)])])],1)],1)},staticRenderFns:[]};var No=n("VU/8")(Eo,Po,!1,function(e){n("n9Cl")},"data-v-176d987e",null).exports,Ro={name:"DwSurveyAnswerInfoDialog",components:{DwSurveyAnswerReview:No},data:function(){return{dialogFormVisible:!1,row:null}},methods:{openDialog:function(e){this.dialogFormVisible=!0,this.row=e,console.debug("row",e)},closeDialog:function(){this.row=null}}},Lo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{staticClass:"dialogRoot",attrs:{visible:e.dialogFormVisible,"append-to-body":"",title:"答卷数据",width:"60%"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[n("div",{staticStyle:{padding:"0 20px"},attrs:{slot:"default"},slot:"default"},[null!==e.row?n("div",{staticStyle:{height:"600px",overflow:"scroll"}},[n("dw-survey-answer-review",{attrs:{"dw-es-survey-answer":e.row}})],1):e._e()]),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("关 闭")])],1)])],1)},staticRenderFns:[]};var Fo={name:"DwSurveyAnswerDataList",components:{DwSurveyAnswerInfoDialog:n("VU/8")(Ro,Lo,!1,function(e){n("6r3r")},"data-v-157da446",null).exports},data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,dialogFormVisible:!1,expUpQu:0,formInline:{ip:null,city:null,anTime:null,handleState:100},handleState:100,threadMax:6e3,expDataContent:1,formInlineDivStyle:"display: flex;",isProgress:!1,percentage:0,customColor:"#1989fa",customColors:[{color:"#cde2f6",percentage:0},{color:"#c1dbf5",percentage:10},{color:"#a7cdf3",percentage:20},{color:"#8bbff3",percentage:40},{color:"#6eb2f6",percentage:60},{color:"#4ca2fa",percentage:80},{color:"#1989fa",percentage:100}],exportLogId:null,exportLogInfoInterval:null}},mounted:function(){this.queryList(1)},methods:{secondsToHms:function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=e%60;return t>0?(t<10?"0"+t:t)+" 时 "+(n<10?"0"+n:n)+" 分 "+(s<10?"0"+s:s)+" 秒":n>0?(n<10?"0"+n:n)+" 分 "+(s<10?"0"+s:s)+" 秒":(s<10?"0"+s:s)+" 秒"},handleGo:function(e){this.$router.push(e)},handlePush:function(e){this.$router.push(e)},handleDelete:function(e,t){var n=this;console.log(e,t),this.$msgbox.confirm("确认删除此条答卷吗？","删除警告",{type:"warning",confirmButtonText:"确认删除"}).then(function(){(function(e){return x({url:"/api/dwsurvey/app/v6/dw-answer-data-survey/delete-answer.do",method:"delete",data:e})})({id:[t.esId]}).then(function(e){if(console.log(e),200===e.data.resultCode){n.$message.success("删除成功，即将刷新数据。");var t=n;setTimeout(function(){t.queryList(1)},2e3)}else n.$message.error("删除答卷失败")})}).catch(function(){})},handleCurrentChange:function(e){this.queryList(e)},queryList:function(e){var t=this;this.currentPage=e;(e-1)*this.pageSize>=1e4&&(this.$message({message:"提示：一次查询只展示前1万条数据，如果要查看更多可以修改查询条件，请缩小查询范围！",type:"warning",duration:1e4}),this.currentPage=1e4/this.pageSize-1),console.debug("anTime:",this.formInline.anTime),console.debug("anIp:",this.formInline.ip),console.debug("anCity:",this.formInline.city);var n={bgAnDate:null,endAnDate:null},s=this.formInline.anTime;null!==s&&(n.bgAnDate=s[0],n.endAnDate=s[1]),function(e){return x({url:"/api/dwsurvey/app/v6/dw-answer-data-survey/list.do",method:"get",params:e})}({surveyId:this.$route.params.id,pageNo:this.currentPage,bgAnDate:n.bgAnDate,endAnDate:n.endAnDate,ip:this.formInline.ip,city:this.formInline.city}).then(function(e){var n=e.data;t.pageSize=n.pageSize,t.currentPage=n.pageNo,t.total=n.totalItems,t.tableData=n.result,console.debug("dwSurveyAnswerListV6",e)})},resetSearch:function(){this.formInline={ip:null,city:null,anTime:null},this.queryList(1)},answerView:function(e){this.$refs.dwAnswerInfoDialog.openDialog(e)},handleExport:function(){this.dialogFormVisible=!0,this.percentage=0,this.exportLogId=null,this.isProgress=!1},executeExportData:function(){var e=this;this.isProgress=!0,function(e){return x({url:"/api/dwsurvey/app/v6/dw-answer-data-survey/export-by-sync.do",method:"get",params:e})}({surveyId:this.$route.params.id,expUpQu:this.expUpQu,handleState:this.handleState,threadMax:this.threadMax,expDataContent:this.expDataContent}).then(function(t){console.log("dwSurveyAnswerExportSync",t);var n=t.data;if(200===n.resultCode){var s=n.data;e.exportLogId=s.id,console.log("this.exportLogId",e.exportLogId),e.percentage=0,e.exportProgress()}else e.$message.error("导出出错"+n.resultMsg)})},exportProgress:function(){null!==this.exportLogId&&(this.exportLogInfoInterval=setInterval(this.upExportProgress,500))},upExportProgress:function(){var e=this;(function(e){return x({url:"/api/dwsurvey/app/answer/export-log/export-log-info.do",method:"get",params:e})})({id:this.exportLogId}).then(function(t){console.log("dwSurveyAnswerExportLogInfo",t);var n=t.data,s=!0;if(200===n.resultCode){var i=n.data;if(null!==i){console.log("progress",i.progress);var r=(100*parseFloat(i.progress)).toFixed(2);console.log("this progress",r),e.percentage=parseInt(r),r<=1&&(e.percentage=1),console.log("this percentage",e.percentage),s=!1,r>=100&&(e.percentage=100,s=!0)}}s&&clearInterval(e.exportLogInfoInterval)})},downloadExportData:function(){var e="https://pro.surveyform.cn/api/dwsurvey/app/answer/export-log/download-answer-xls.do?surveyId="+this.$route.params.id+"&exportLogId="+this.exportLogId;console.log("downUrl",e),window.location.href=e},cancelExportData:function(){null!==this.exportLogId&&null!==this.exportLogInfoInterval&&(clearInterval(this.exportLogInfoInterval),this.percentage=0,this.exportLogId=null,this.isProgress=!1,this.dialogFormVisible=!1)}}},Qo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"dw-dcs-main-title"},[n("div",{staticStyle:{padding:"5px 10px"}},[n("el-row",{attrs:{type:"flex"}},[n("el-col",{attrs:{span:18}},[n("div",{staticStyle:{"font-size":"14px"}},[n("strong",[e._v("原始数据列表")])])]),e._v(" "),n("el-col",{staticStyle:{"text-align":"right","padding-right":"16px"},attrs:{span:6}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleExport}},[e._v("导出数据")])],1)],1)],1),e._v(" "),n("div",{staticStyle:{padding:"5px 10px"}},[n("el-form",{staticClass:"dw-form-inline",attrs:{inline:!0,model:e.formInline,"label-width":"50px",size:"medium"}},[n("el-form-item",{attrs:{label:"时间"}},[n("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.formInline.anTime,callback:function(t){e.$set(e.formInline,"anTime",t)},expression:"formInline.anTime"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"IP"}},[n("el-input",{attrs:{placeholder:"请输入查询的问卷标题",clearable:""},model:{value:e.formInline.ip,callback:function(t){e.$set(e.formInline,"ip",t)},expression:"formInline.ip"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"城市"}},[n("el-input",{attrs:{placeholder:"请输入查询的问卷标题",clearable:""},model:{value:e.formInline.city,callback:function(t){e.$set(e.formInline,"city",t)},expression:"formInline.city"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{"margin-left":"20px"},on:{click:e.resetSearch}},[e._v("重置")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.queryList(1)}}},[e._v("查询")])],1)],1)],1)]),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[n("el-table-column",{attrs:{type:"selection",width:"45"}}),e._v(" "),n("el-table-column",{attrs:{label:"序号",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(e._s(e.pageSize*(e.currentPage-1)+t.$index+1))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"答卷IP",prop:"answerCommon.anIp.ip"}}),e._v(" "),n("el-table-column",{attrs:{label:"答卷地区",prop:"answerCommon.anIp.city"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(e._s(null!=t.row.answerCommon.anIp.city?t.row.answerCommon.anIp.city:"-"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"回答时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(e._s(t.row.answerCommon.anTime.endAnDate))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"回答用时"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(e._s(null!=t.row.answerCommon.anTime.totalTime?e.secondsToHms(Math.floor(t.row.answerCommon.anTime.totalTime/1e3)):0))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"回答题数"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(e._s(null!=t.row.answerCommon.anState.anQuNum?t.row.answerCommon.anState.anQuNum:0)+" 题")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button-group",[n("el-tooltip",{attrs:{effect:"dark",content:"查看数据",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-view"},on:{click:function(n){return e.answerView(t.row)}}})],1),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"删除数据",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}})],1)],1)]}}])})],1),e._v(" "),n("div",{staticClass:"dw-pagination"},[n("el-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.total,background:"",layout:"total, prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogFormVisible,"append-to-body":"",title:"导出答卷数据",width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("div",{staticStyle:{"line-height":"30px"}},[e._v("是否同时下载上传题的文件")]),e._v(" "),n("div",{staticStyle:{color:"grey","line-height":"30px","font-size":"12px"}},[n("span",[e._v("如果有上传题，选择压缩下载可能比较占用系统资源及时间，请在空闲时间压缩下载")])]),e._v(" "),n("div",{staticStyle:{padding:"10px"}},[n("el-switch",{attrs:{"active-text":"同时压缩上传的文件并下载","inactive-text":"仅下载数据Excel","active-value":"1","inactive-value":"0"},model:{value:e.expUpQu,callback:function(t){e.expUpQu=t},expression:"expUpQu"}})],1),e._v(" "),n("div",{staticStyle:{padding:"10px"}},[e._v("\n      数据类型\n      "),n("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},model:{value:e.handleState,callback:function(t){e.handleState=t},expression:"handleState"}},[n("el-option",{attrs:{value:0,label:"未审核"}}),e._v(" "),n("el-option",{attrs:{value:1,label:"审核的数据"}}),e._v(" "),n("el-option",{attrs:{value:300,label:"甄别的数据"}}),e._v(" "),n("el-option",{attrs:{value:100,label:"全部有效数据（包含未审核与审核）"}})],1)],1),e._v(" "),n("div",{staticStyle:{padding:"10px"}},[e._v("\n      单个线程最多导出\n      "),n("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},model:{value:e.threadMax,callback:function(t){e.threadMax=t},expression:"threadMax"}},[n("el-option",{attrs:{value:2e3,label:"2000条"}}),e._v(" "),n("el-option",{attrs:{value:4e3,label:"4000条"}}),e._v(" "),n("el-option",{attrs:{value:6e3,label:"6000条"}}),e._v(" "),n("el-option",{attrs:{value:8e3,label:"8000条"}}),e._v(" "),n("el-option",{attrs:{value:1e4,label:"10000条"}})],1)],1),e._v(" "),n("div",{staticStyle:{padding:"10px"}},[e._v("\n      导出的数据\n      "),n("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},model:{value:e.expDataContent,callback:function(t){e.expDataContent=t},expression:"expDataContent"}},[n("el-option",{attrs:{value:1,label:"原始答卷数据"}}),e._v(" "),n("el-option",{attrs:{value:2,label:"答卷选项分值"}})],1)],1),e._v(" "),n("div",{staticStyle:{padding:"10px"}},[n("el-progress",{attrs:{percentage:e.percentage,color:e.customColor,"text-inside":!0,"stroke-width":26}})],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.cancelExportData}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{disabled:e.isProgress,type:"primary"},on:{click:e.executeExportData}},[e._v("开始导出")]),e._v(" "),n("el-button",{attrs:{disabled:e.percentage<100,type:"primary"},on:{click:e.downloadExportData}},[e._v("下载数据")])],1)]),e._v(" "),n("dw-survey-answer-info-dialog",{ref:"dwAnswerInfoDialog",on:{"refresh-data":function(t){return e.queryList(null)}}})],1)},staticRenderFns:[]};var Uo=n("VU/8")(Fo,Qo,!1,function(e){n("M3T1")},"data-v-83d141e6",null).exports,Bo={name:"DwSurveyDcsWrapperV6",props:{id:{type:String,default:""},isAnswerUrl:{type:Boolean,default:!1},isSurveySet:{type:Boolean,default:!1},isSiteShare:{type:Boolean,default:!1},isSiteComp:{type:Boolean,default:!1},isAnswerWx:{type:Boolean,default:!1},isSurveyChart:{type:Boolean,default:!1},isAnswerData:{type:Boolean,default:!1},isSurveyLog:{type:Boolean,default:!1},isAnswerLog:{type:Boolean,default:!1},isAnswerUrlV6:{type:Boolean,default:!1}},data:function(){return{survey:{sid:"",answerUrl:"",answerUrl1:"",answerUrlQR:"",siteCompCodeRoot:"",surveyState:""},prevPath:"/v6/dw"}},mounted:function(){console.debug(Object({NODE_ENV:"production",DW_API_URL:"https://pro.surveyform.cn",DW_WEB_URL:"https://pro.surveyform.cn",DW_RESOURCE_URL:"https://pro.surveyform.cn"})),this.getSurveyInfo(),this.$route.path.indexOf("/v6/lr")>=0&&(this.prevPath="/v6/lr/dw")},methods:{buttonClickA:function(e){window.location.href=e},handlePush:function(e){this.$router.push(e)},surveyStateChange:function(){var e=this;console.debug(this.survey.surveyState),ne(this.$route.params.id,this.survey.surveyState).then(function(t){200===t.data.resultCode?e.$message.success("问卷状态设置成功"):e.$message.error("问卷状态设置失败")})},getSurveyInfo:function(){var e=this;ie(this.$route.params.id).then(function(t){var n=t.data.data;e.survey=n,e.survey.answerUrl=location.origin+"/#/diaowen/"+e.survey.sid,e.survey.answerUrl1=location.origin+"/static/diaowen/answer-p.html?sid="+e.survey.sid,e.survey.answerUrlQR="https://pro.surveyform.cn/api/dwsurvey/anon/response/answerTD.do?version=v6&sid="+e.survey.sid,e.survey.answerUrlV6=location.origin+"/#/v6/diaowen/an/"+e.survey.sid,e.survey.siteCompCodeRoot='<div id="dwsurveyWebAnswerCompCode"><div id="dwsurveyWebSiteFixed" style="position: fixed; right: 0px; left: auto; top: 520px; z-index: 99999;"><a target=\'_blank\' id="dwsurveyWebSiteFixedA" href="'+e.survey.answerUrlV6+'" style="background-color: rgb(24, 144, 255); width: 15px; display: block; padding: 10px 6px 10px 10px; color: white; cursor: pointer; float: right; vertical-align: middle; text-decoration: none; font-size: 12px; box-sizing: content-box; line-height: 20px;">问卷调查</a></div></div>',e.survey.surveyDetail.effective=1===n.surveyDetail.effective,e.survey.surveyDetail.effectiveIp=1===n.surveyDetail.effectiveIp,e.survey.surveyDetail.refresh=1===n.surveyDetail.refresh,e.survey.surveyDetail.rule=1===n.surveyDetail.rule,e.survey.surveyDetail.ynEndNum=1===n.surveyDetail.ynEndNum,e.survey.surveyDetail.ynEndTime=1===n.surveyDetail.ynEndTime})}}},Mo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"dw-dcs-main"},[n("div",{staticClass:"dw-dcs-main-survey-title"},[n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",[n("div",{staticClass:"dw-dcs-main-survey-title-content"},[null!=e.survey.surveyNameText?n("div",{domProps:{textContent:e._s(e.survey.surveyNameText)}}):n("div",{domProps:{innerHTML:e._s(e.survey.surveyName)}})])]),e._v(" "),n("el-col",{attrs:{span:4}},[n("el-select",{attrs:{value:e.survey.surveyState,placeholder:"请选择"},on:{change:e.surveyStateChange},model:{value:e.survey.surveyState,callback:function(t){e.$set(e.survey,"surveyState",t)},expression:"survey.surveyState"}},[n("el-option",{key:"0",attrs:{value:0,label:"设计中"}}),e._v(" "),n("el-option",{key:"1",attrs:{value:1,label:"发布收集"}}),e._v(" "),n("el-option",{key:"2",attrs:{value:2,label:"收集结束"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dw-dcs-main-survey-step"},[n("div",{staticClass:"dw-dcs-main-survey-step-item",staticStyle:{padding:"13px 16px"}},[n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link dw-link-1",class:{"dw-link-primary":e.isSurveySet},attrs:{to:e.prevPath+"/survey/c/attr/"+e.survey.id}},[n("i",{staticClass:"el-icon-edit"}),e._v("问卷设计")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link dw-link-1",class:{"dw-link-primary":e.isAnswerUrl||e.isSiteShare||e.isSiteComp||e.isAnswerWx||e.isAnswerUrlV6},attrs:{to:e.prevPath+"/survey/c/url/"+e.survey.id}},[n("i",{staticClass:"el-icon-link"}),e._v("问卷收集")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link dw-link-1",class:{"dw-link-primary":e.isSurveyChart||e.isAnswerData},attrs:{to:e.prevPath+"/survey/d/chart/"+e.survey.id}},[n("i",{staticClass:"el-icon-s-data"}),e._v("问卷数据")])],1),e._v(" "),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:15}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handlePush("/v6/diaowen/dw-design/survey/"+e.survey.id)}}},[e._v("问卷设计")]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handlePush(e.prevPath+"/survey/c/url/"+e.survey.id)}}},[e._v("答卷地址")])],1)],1)],1),e._v(" "),n("div",{staticClass:"dw-dcs-main-survey-step-item",staticStyle:{"padding-left":"16px"}},[n("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isSurveySet,expression:"isSurveySet"}]},[n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSiteComp},attrs:{to:"/v6/diaowen/dw-design/survey/"+e.survey.id}},[n("i",{staticClass:"el-icon-edit"}),e._v("问卷设计")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerWx},attrs:{to:"/v6/diaowen/dw-preview/survey/"+e.survey.id}},[n("i",{staticClass:"el-icon-brush"}),e._v("样式设计")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSurveySet},attrs:{to:e.prevPath+"/survey/c/attr/"+e.survey.id}},[n("i",{staticClass:"el-icon-setting"}),e._v("答卷设置")])],1)],1),e._v(" "),n("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isAnswerUrl||e.isSiteShare||e.isSiteComp||e.isAnswerWx||e.isAnswerUrlV6,expression:"isAnswerUrl || isSiteShare || isSiteComp || isAnswerWx || isAnswerUrlV6"}]},[n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerUrlV6},attrs:{to:e.prevPath+"/survey/c/url/"+e.survey.id}},[n("i",{staticClass:"el-icon-link"}),e._v("答卷地址")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSiteComp},attrs:{to:e.prevPath+"/survey/c/comp/"+e.survey.id}},[n("i",{staticClass:"el-icon-discount"}),e._v("网站组件")])],1)],1),e._v(" "),n("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isSurveyChart||e.isAnswerData,expression:"isSurveyChart || isAnswerData"}]},[n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSurveyChart},attrs:{to:e.prevPath+"/survey/d/chart/"+e.survey.id}},[n("i",{staticClass:"el-icon-discount"}),e._v("默认统计")])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerData},attrs:{to:e.prevPath+"/survey/d/data/"+e.survey.id}},[n("i",{staticClass:"el-icon-receiving"}),e._v("原始数据")])],1),e._v(" "),n("el-col",{attrs:{span:3}}),e._v(" "),n("el-col",{attrs:{span:3}})],1)],1),e._v(" "),n("div",{staticClass:"dw-dcs-main-survey-step-item dw-dcs-main-survey-step-item-status"},[n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:4}},[n("div",[e._v("状态：\n                  "),0===e.survey.surveyState?n("el-tag",{attrs:{size:"mini"}},[e._v("设计中")]):1===e.survey.surveyState?n("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("收集中")]):2===e.survey.surveyState?n("el-tag",{attrs:{type:"info",size:"mini"}},[e._v("收集结束")]):n("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":"",size:"mini"}},[e._v("未知")])],1)]),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",[e._v("收集数："+e._s(null!=e.survey.answerNum?e.survey.answerNum:0)+" 份")])]),e._v(" "),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:16}},[e._v("\n                创建时间："+e._s(e.survey.createDate)+"\n              ")])],1)],1),e._v(" "),n("div",{staticClass:"dw-dcs-main-survey-step-main"},[e._t("dw-dcs-main-slot",null,{survey:e.survey})],2)])])])],1)],1)},staticRenderFns:[]};var $o=n("VU/8")(Bo,Mo,!1,function(e){n("wICd")},"data-v-436bd2e0",null).exports,Ho={name:"DwSurveyAnswerDataListV6",components:{DwSurveyDcsWrapperV6:$o,DwSurveyAnswerDataList:Uo,DwSurveyDcsWrapper:ce},data:function(){return{}},mounted:function(){},methods:{}},jo={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-survey-dcs-wrapper-v6",{attrs:{"is-answer-data":!0},scopedSlots:this._u([{key:"dw-dcs-main-slot",fn:function(e){return e.survey,[t("div",[t("dw-survey-answer-data-list")],1)]}}])})],1)},staticRenderFns:[]};var Vo=n("VU/8")(Ho,jo,!1,function(e){n("BCXD")},"data-v-f6daabb6",null).exports,zo={name:"DwAnswerUrlV6",components:{DwSurveyDcsWrapperV6:$o,DwSurveyDcsWrapper:ce,Clipboard:he.a},props:{survey:{type:Object,default:function(){}}},methods:{downloadAnswerImg:function(e){console.debug(e),window.location.href=e},copyActiveCode:function(e,t){var n=this;console.debug(this.survey);var s=new he.a(e.target,{text:function(){return t}});s.on("success",function(e){n.$message({type:"success",message:"复制成功"}),s.off("error"),s.off("success"),s.destroy()}),s.on("error",function(e){n.$message({type:"warning",message:"该浏览器不支持自动复制"}),s.off("error"),s.off("success"),s.destroy()}),s.onClick(e)}}},Go={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-survey-dcs-wrapper-v6",{attrs:{"is-answer-url-v6":!0},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){var s=t.survey;return[n("div",[n("div",[n("div",{staticClass:"dw-dcs-main-title"},[n("h4",[e._v("答卷地址")]),e._v(" "),n("div",{staticClass:"dw-dcs-main-p"},[e._v("复制下面的问卷链接到QQ，Email等工具中直接发给被用户")])]),e._v(" "),n("div",{staticClass:"dw-dcs-main-content"},[n("div",{staticClass:"dw-dcs-main-title"},[n("div",{staticClass:"dw-dcs-main-p"},[e._v("V6新版答卷地址")])]),e._v(" "),n("el-input",{staticStyle:{width:"500px"},attrs:{id:"copyCodeInput",readonly:""},model:{value:s.answerUrlV6,callback:function(t){e.$set(s,"answerUrlV6",t)},expression:"survey.answerUrlV6"}}),e._v(" "),n("el-button-group",[n("el-button",{attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,s.answerUrlV6)}}},[e._v("复制地址")]),e._v(" "),n("el-link",{attrs:{href:s.answerUrlV6,underline:!1,target:"_blank"}},[n("el-button",{staticStyle:{"border-bottom-left-radius":"0px","border-top-left-radius":"0px"},attrs:{icon:"el-icon-link"}},[e._v("打开问卷")])],1)],1)],1)]),e._v(" "),n("div",[n("div",{staticClass:"dw-dcs-main-title"},[n("h4",[e._v("二维码地址")]),e._v(" "),n("div",{staticClass:"dw-dcs-main-p"},[e._v("通过手机扫一扫，或下载二维码，即可进行问卷数据收集。")])]),e._v(" "),n("div",{staticClass:"dw-dcs-main-content"},[n("el-row",{attrs:{type:"flex",justify:"start",align:"middle"}},[n("el-col",{attrs:{span:4}},[n("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:s.answerUrlQR}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),n("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),n("el-col",{attrs:{span:20}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.downloadAnswerImg(s.answerUrlQR+"&down=1")}}},[e._v("下载二维码")])],1)],1)],1)])])]}}])})],1)},staticRenderFns:[]};var Yo=n("VU/8")(zo,Go,!1,function(e){n("B5FP")},"data-v-09c65d34",null).exports,Wo={name:"DwAnswerSurveyV6",components:{DwAnswerSurvey:Ao,DwAnswerSurveyMain:bo},data:function(){return{answerProps:{sid:null,answerId:null,anPwd:""}}},mounted:function(){console.debug("first sid",this.$route.params.sid),console.debug("first answerId",this.$route.params.answerId),this.answerProps.sid=this.$route.params.sid,this.answerProps.answerId=this.$route.params.answerId}},Jo={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-row",[t("el-col",[t("dw-answer-survey",{attrs:{"answer-props":this.answerProps}})],1)],1)],1)},staticRenderFns:[]};var Zo=n("VU/8")(Wo,Jo,!1,function(e){n("ysZS")},"data-v-428ec40f",null).exports,Ko={name:"DwSurveyList",data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,dialogTitle:"创建问卷",formInline:{surveyName:null,surveyState:null},dialogFormVisible:!1,form:{name:"",id:null,surveyType:null},formLabelWidth:"120px",prevPath:"/v6/dw"}},mounted:function(){this.queryList(1),this.$route.path.indexOf("/v6/lr")>=0&&(this.prevPath="/v6/lr/dw")},methods:{buttonClickA:function(e){window.location.href=e},handlePush:function(e){this.$router.push(e)},handleCopy:function(e,t){console.log(e,t),this.form.id=t.id,void 0!==t.surveyNameText&&null!==t.surveyNameText?this.form.name=""+t.surveyNameText:this.form.name="复制问卷标题",this.dialogFormVisible=!0,this.dialogTitle="复制问卷"},handleDelete:function(e,t){var n=this;this.$msgbox.confirm("确认删除此问卷吗？","删除警告",{type:"warning",confirmButtonText:"确认删除"}).then(function(){re({id:[t.id]}).then(function(e){console.log(e),200===e.data.resultCode?(n.$message.success("删除成功，即将刷新数据。"),n.queryList(1)):n.$message.error("删除问卷失败")})}).catch(function(){})},onReset:function(){this.formInline={surveyName:null,surveyState:null},this.queryList(1)},onSubmit:function(){console.log("submit!"),this.queryList(1)},handleCurrentChange:function(e){this.queryList(e)},queryList:function(e){var t=this,n=this.formInline,s=n.surveyName,i=n.surveyState;ee(this.pageSize,e,s,i).then(function(e){var n=e.data.data;t.tableData=n,t.total=e.data.total,t.currentPage=e.data.current,t.pageSize=e.data.pageSize})},handleDialogConfirm:function(){null===this.form.id?this.createSurvey():this.copySurvey(this.form.id)},createSurvey:function(){var e=this;te({surveyName:this.form.name,surveyType:this.form.surveyType}).then(function(t){var n=t.data,s=n.data;200===n.resultCode?(e.dialogFormVisible=!1,e.$confirm("问卷创建成功，点击“继续编辑问卷”进入问卷编辑。","系统提示",{confirmButtonText:"继续编辑问卷"}).then(function(t){t.value;e.$router.push("/v6/diaowen/dw-design/survey/"+s.id)}).catch(function(){e.queryList(1)})):e.$message.error("创建问卷失败")})},copySurvey:function(e){var t=this;se(e,this.form.name).then(function(e){var n=e.data,s=n.data;200===n.resultCode?(t.dialogFormVisible=!1,t.$confirm("问卷复制成功，点击“继续编辑问卷”进入问卷编辑。","系统提示",{confirmButtonText:"继续编辑问卷"}).then(function(e){e.value;t.$router.push("/v6/diaowen/dw-design/survey/"+s.id)}).catch(function(){t.queryList(1)})):t.$message.error("问卷复制失败")})}}},Xo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"dw-table-form",staticStyle:{"padding-left":"60px"}},[n("el-form",{staticClass:"dw-form-inline",attrs:{inline:!0,model:e.formInline,size:"medium"}},[n("el-form-item",{attrs:{label:"问卷标题"}},[n("el-input",{attrs:{placeholder:"请输入查询的问卷标题",clearable:""},model:{value:e.formInline.surveyName,callback:function(t){e.$set(e.formInline,"surveyName",t)},expression:"formInline.surveyName"}})],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-left":"40px"},attrs:{label:"问卷状态"}},[n("el-select",{attrs:{placeholder:"请选择问卷状态",clearable:""},model:{value:e.formInline.surveyState,callback:function(t){e.$set(e.formInline,"surveyState",t)},expression:"formInline.surveyState"}},[n("el-option",{attrs:{label:"设计中",value:"0"}}),e._v(" "),n("el-option",{attrs:{label:"收集中",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"收集结束",value:"2"}})],1)],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-left":"40px"}},[n("el-button",{on:{click:e.onReset}},[e._v("重置")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),n("div",{staticClass:"dw-table"},[n("div",{staticClass:"dw-table-title"},[n("el-row",{attrs:{span:24,type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:4}},[n("h3",[e._v("我的问卷")])]),e._v(" "),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.form.id=null,e.form.name=null,e.dialogTitle="创建问卷",e.dialogFormVisible=!0}}},[e._v("新建问卷")])],1)],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:"问卷"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("p",{domProps:{innerHTML:e._s(t.row.surveyName)}}),e._v(" "),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[null!=t.row.surveyNameText?n("div",{domProps:{textContent:e._s(t.row.surveyNameText)}}):n("div",{domProps:{innerHTML:e._s(t.row.surveyName)}})])])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"答卷数",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(null!=t.row.answerNum?t.row.answerNum:0)+" 份")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.surveyState?n("el-tag",[e._v("设计中")]):1===t.row.surveyState?n("el-tag",{attrs:{type:"success"}},[e._v("收集中")]):2===t.row.surveyState?n("el-tag",{attrs:{type:"info"}},[e._v("收集结束")]):n("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":""}},[e._v("未知")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-time"}),e._v(" "),n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.createDate))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button-group",[n("el-tooltip",{attrs:{effect:"dark",content:"编辑问卷",placement:"top"}},[n("el-button",{attrs:{size:"mini",content:"编辑问卷",icon:"el-icon-edit"},on:{click:function(n){return e.handlePush("/v6/diaowen/dw-design/survey/"+t.row.id)}}})],1),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"答卷地址",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-share"},on:{click:function(n){return e.handlePush(e.prevPath+"/survey/c/url/"+t.row.id)}}})],1),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"答卷数据",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-s-data"},on:{click:function(n){return e.handlePush(e.prevPath+"/survey/d/chart/"+t.row.id)}}})],1),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"预览问卷",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-view"},on:{click:function(n){return e.handlePush("/v6/diaowen/dw-preview/survey/"+t.row.id)}}})],1),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"删除问卷",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}})],1)],1)]}}])})],1),e._v(" "),n("div",{staticClass:"dw-pagination"},[n("el-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.total,background:"",layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)],1)])],1),e._v(" "),n("div",[n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{attrs:{model:e.form,"label-position":"top"}},[n("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"问卷标题"}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"请输入问卷标题"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogConfirm}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var ea={name:"DwSurveyListV6",components:{DwSurveyList:n("VU/8")(Ko,Xo,!1,function(e){n("vLnb")},"data-v-62981888",null).exports},data:function(){return{}},mounted:function(){},methods:{}},ta={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-survey-list")],1)},staticRenderFns:[]};var na=n("VU/8")(ea,ta,!1,function(e){n("JyEw")},"data-v-3f90d2aa",null).exports;De.b([Ee.a,Pe.b,Pe.a,Re.a,Ne.b,Ee.c,Ee.d,Ee.b,Pe.c,Ne.a]);var sa={name:"DwSurveyChartsCommon",props:{question:{type:Object,default:function(){return[]}},index:{type:Number,default:0}},data:function(){return{activeName:"bar"}},mounted:function(){console.debug("this.question"),console.debug(this.question);var e=this.$refs.dwsChart_bar;e&&this.loadChart(e,"bar")},methods:{handleClick:function(e,t){console.log(e,t),console.debug(this.activeName),e.$el.style.display="block";var n=e.$el.getElementsByClassName("dwsurveyMain"),s=this.activeName;this.loadChart(n[0],s)},loadChart:function(e,t){var n=De.a(e),s=this.buildOption(this.question,t);s&&n.setOption(s)},buildOption:function(e,t){for(var n=[],s=[],i=[],r=e.quStatOptions,o=0;o<r.length;o++)n.push(r[o].optionName),s.push(r[o].anCount),i.push({value:r[o].anCount,name:r[o].optionName});console.debug(n);var a=!0;"ORDERQU"===e.quType&&(a=!1);var l=void 0;return"line"===t||"bar"===t?l={xAxis:{nameTextStyle:{},nameGap:20,axisLabel:{rotate:-10,interval:0},type:"category",data:n},yAxis:{type:"value",show:a},series:[{data:s,type:t}]}:"barY"===t?l={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01],show:a},yAxis:{type:"category",data:n},series:[{type:"bar",data:s}]}:"pie"===t&&(l={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"Access From",type:"pie",radius:"50%",data:i,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}),l}}},ia={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%"}},[n("div",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[n("span",[e._v(e._s(e.index+1)+"、")]),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.question.quTitle)}}),e._v(" "),n("span",[e._v("【"+e._s(e.question.quTypeName)+"】")])]),e._v(" "),"FILLBLANK"===e.question.quType||"UPLOADFILE"===e.question.quType?n("div",{staticStyle:{padding:"30px"}},[e._v("\n    填写回答："+e._s(e.question.anCount)+" 份\n  ")]):e._e(),e._v(" "),"FILLBLANK"!==e.question.quType&&"UPLOADFILE"!==e.question.quType?n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.question.quStatOptions}},[n("el-table-column",{attrs:{prop:"optionName",label:"题目选项"}}),e._v(" "),n("el-table-column",{attrs:{label:"SCORE"===e.question.quType?"占总分比例":"ORDERQU"===e.question.quType?"排名占总名次比":"MULTIFILLBLANK"===e.question.quType?"填写比例":"频次比例",width:"330"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:parseFloat(e.row.percent),"text-color":"white"}})]}}],null,!1,733140522)}),e._v(" "),"RADIO"===e.question.quType||"CHECKBOX"===e.question.quType?n("el-table-column",{attrs:{label:"频次",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.anCount)+" 次")]}}],null,!1,2232316475)}):e._e(),e._v(" "),"SCORE"===e.question.quType?n("el-table-column",{attrs:{label:"平均分",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("平均 "+e._s(t.row.anCount)+" 分")]}}],null,!1,3397111011)}):e._e(),e._v(" "),"ORDERQU"===e.question.quType?n("el-table-column",{attrs:{label:"名次平均值",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.avgOrder)+" 名")]}}],null,!1,2431138661)}):e._e(),e._v(" "),"MULTIFILLBLANK"===e.question.quType?n("el-table-column",{attrs:{label:"填写次数",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.anCount)+" 次")]}}],null,!1,2232316475)}):e._e()],1),e._v(" "),n("div",[n("el-tabs",{staticStyle:{width:"100%"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"柱状图",name:"bar"}},[n("div",{ref:"dwsChart_bar",staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),n("el-tab-pane",{attrs:{label:"拆线图",name:"line"}},[n("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),n("el-tab-pane",{attrs:{label:"拼状图",name:"pie"}},[n("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),n("el-tab-pane",{attrs:{label:"条形图",name:"barY"}},[n("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})])],1)],1)],1):e._e()])},staticRenderFns:[]};var ra={name:"DwSurveyAnswerCharts",components:{DwSurveyChartsCommon:n("VU/8")(sa,ia,!1,function(e){n("IhqA")},"data-v-58501cee",null).exports},data:function(){return{survey:null,surveyAggStats:null,questions:[],loading:!0}},mounted:function(){this.surveyState()},methods:{surveyState:function(){var e=this,t={surveyId:this.$route.params.id};_n(t,function(n){console.debug("design survey",n),e.survey=n,function(e){return x({url:"/api/dwsurvey/app/v6/dw-answer-data-survey/survey-stats.do",method:"get",params:e})}(t).then(function(t){console.debug("response",t);var n=t.data;e.surveyAggStats=n.data;var s=e.surveyAggStats,i=e.survey.questions;console.debug("questions",i),i.map(function(e,t){var n=0;console.debug("question",e);var i=e.quType;if("RADIO"===i)e.quRadios.map(function(e,t){if(s.hasOwnProperty("countRadio")){var i=s.countRadio;for(var r in i)if(i.hasOwnProperty(r)){var o=i[r].docCount;if(e.dwId===r){e.anCount=o,n+=e.anCount;break}}}});else if("CHECKBOX"===i){e.quCheckboxs.map(function(e,t){if(s.hasOwnProperty("countCheckbox")){var i=s.countCheckbox;for(var r in i)if(i.hasOwnProperty(r)){var o=i[r].docCount;if(e.dwId===r){e.anCount=o,n+=e.anCount;break}}}})}else if("SCORE"===i){e.quScores.map(function(e,t){if(s.hasOwnProperty("optionStats")){var n=s.optionStats;for(var i in n)if(n.hasOwnProperty(i)){var r=n[i].statsAvg;if(console.debug("value",r),e.dwId===i){console.debug("option.dwId",e.dwId,i),e.avgScore=r;break}}}})}else if("ORDERQU"===i){e.quOrderbys.map(function(e,t){if(s.hasOwnProperty("optionStats")){var n=s.optionStats;for(var i in n)if(n.hasOwnProperty(i)){var r=n[i].statsAvg;if(e.dwId===i){console.debug("option.avgOrder",r),e.avgOrder=r;break}}}})}if(s.hasOwnProperty("countQu")){var r=s.countQu;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o].docCount;if(e.dwId===o){n=a;break}}}e.anCount=n}),e.anCountStats(i),e.loading=!1})})},anCountStats:function(e){for(var t=0;t<e.length;t++){var n=e[t],s=n.anCount,i=void 0;"CHECKBOX"===n.quType?(n.quTypeName="多选题",i=n.quCheckboxs):"RADIO"===n.quType?(n.quTypeName="单选题",i=n.quRadios):"FILLBLANK"===n.quType?n.quTypeName="填空题":"SCORE"===n.quType?(n.quTypeName="评分题",i=n.quScores):"ORDERQU"===n.quType?(n.quTypeName="排序题",i=n.quOrderbys):"MULTIFILLBLANK"===n.quType?(n.quTypeName="多项填空题",i=n.quMultiFillblanks):n.quTypeName=n.quType;var r=[];if("RADIO"===n.quType||"CHECKBOX"===n.quType||"SCORE"===n.quType||"ORDERQU"===n.quType||"MULTIFILLBLANK"===n.quType)for(var o=0;o<i.length;o++){var a=i[o],l=void 0;if("RADIO"===n.quType||"CHECKBOX"===n.quType){var u=0;a.hasOwnProperty("anCount")&&(u=a.anCount),0===s&&(s=1),null!==u&&void 0!==u||(u=0),a.anCount=u;var d=(a.anCount/s*100).toFixed(2);i[o].percent=d,l={optionName:a.optionTitleObj.dwText,anCount:a.anCount,percent:d}}else if("SCORE"===n.quType){var c=0;a.hasOwnProperty("avgScore")&&(c=a.avgScore),null!==c&&void 0!==c||(c=0),a.avgScore=c;var v=(c/n.paramInt02*100).toFixed(2),p=c.toFixed(2);l={optionName:a.optionTitleObj.dwText,anCount:p,percent:v}}else if("ORDERQU"===n.quType){var m=0;a.hasOwnProperty("avgOrder")&&(m=a.avgOrder),null!==m&&void 0!==m||(m=0),a.avgOrder=m;var y=(0!==m?i.length-m:m/i.length*100).toFixed(2);console.debug("percent",y);var h=m.toFixed(2);l={optionName:a.optionTitleObj.dwText,anCount:0!==m?i.length-m:0,orderNum:null,percent:y,avgOrder:h}}else if("MULTIFILLBLANK"===n.quType){var f=0;a.hasOwnProperty("anCount")&&(f=a.anCount),0===s&&(s=1),null!==f&&void 0!==f||(f=0),a.anCount=f;var w=(a.anCount/s*100).toFixed(2);i[o].percent=w,l={optionName:a.optionTitleObj.dwText,anCount:a.anCount,percent:w}}r.push(l)}e[t].quStatOptions=r}this.questions=e}}},oa={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}]},this._l(this.questions,function(e,n){return t("dw-survey-charts-common",{key:e.id,attrs:{id:e.id,index:n,question:e}})}),1)])},staticRenderFns:[]};var aa={name:"DwSurveyChartsV6",components:{DwSurveyDcsWrapperV6:$o,DwSurveyAnswerCharts:n("VU/8")(ra,oa,!1,function(e){n("MhZF")},"data-v-07d3800b",null).exports,DwSurveyDcsWrapper:ce},data:function(){return{questions:[],loading:!0}},mounted:function(){},methods:{}},la={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-survey-dcs-wrapper-v6",{attrs:{"is-survey-chart":!0},scopedSlots:this._u([{key:"dw-dcs-main-slot",fn:function(e){return e.survey,[t("dw-survey-answer-charts")]}}])})],1)},staticRenderFns:[]},ua=n("VU/8")(aa,la,!1,null,null,null).exports,da={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{height:"100vh"}},[t("el-row",[t("el-col",[t("div",{staticStyle:{"font-size":"18px","text-align":"center",padding:"30px"}},[this._v("加载中...")])])],1)],1)},staticRenderFns:[]};var ca=n("VU/8")({name:"DwAnswerSurveyV6",data:function(){return{answerProps:{sid:null,answerId:null,anPwd:""}}},mounted:function(){this.autoPush()},methods:{autoPush:function(){var e=this.$route.params.sid;this.$route.params.answerId,this.$router.push("/v6/diaowen/an/"+e)}}},da,!1,function(e){n("i8dq")},"data-v-7bc7d6ae",null).exports,va={name:"DwSurveyAttr",components:{DwDesignSurveyAttrs:Qr,DwSurveyDcsWrapperV6:$o,DwSurveyDcsWrapper:ce},data:function(){return{labelPosition:"right",value1:"",survey:null,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}}},mounted:function(){this.loadSurvey()},methods:{loadSurvey:function(){var e=this;_n({surveyId:this.$route.params.id},function(t){console.debug("design survey",t),e.survey=t,e.loading=!1})},onSubmit:function(){this.saveSurveyFun(null)},saveSurveyFun:function(e){var t=this,n=this.survey.id,s=this.survey.sid;yn(this.survey),vn(this.survey),console.debug("save this.survey",this.survey);var i=l()(this.survey),r={surveyId:n,sid:s,surveyJsonText:i,surveyJsonSimple:l()(hn(i))};console.debug("surveyJson data",r),Mt(r).then(function(n){console.debug("dwSaveSurveyJson-response",n);var s=n.data;s.hasOwnProperty("resultCode")&&200===s.resultCode?(t.$message.success("保存成功！"),null!=e&&e()):t.$message.success("保存失败！")})}}},pa={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-survey-dcs-wrapper-v6",{attrs:{"is-survey-set":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(){return[n("div",[n("div",{staticClass:"dw-dcs-main-title"},[n("h4",[e._v("问卷属性设置")]),e._v(" "),n("div",{staticClass:"dw-dcs-main-p"},[e._v("配置问卷答卷时的收集规则")])]),e._v(" "),n("div",{staticClass:"dw-dcs-main-content"},[n("div",{staticStyle:{padding:"0px 30px"}},[n("el-form",{ref:"form",attrs:{"label-position":e.labelPosition,model:e.form}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("h5",[e._v("回答限制")]),e._v(" "),n("div",{staticStyle:{"padding-left":"10px"}},[n("el-form-item",[n("div",[n("el-checkbox",{model:{value:e.survey.surveyAttrs.anBroAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anBroAttr,"enabled",t)},expression:"survey.surveyAttrs.anBroAttr.enabled"}},[e._v("启用浏览器终端回答限制")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyAttrs.anBroAttr.enabled,expression:"survey.surveyAttrs.anBroAttr.enabled"}],staticStyle:{"font-size":"12px"}},[e._v("\n                        每个浏览器可回答次数"),n("el-input-number",{staticStyle:{width:"130px"},attrs:{min:1,max:1e5,size:"mini"},model:{value:e.survey.surveyAttrs.anBroAttr.anNum,callback:function(t){e.$set(e.survey.surveyAttrs.anBroAttr,"anNum",t)},expression:"survey.surveyAttrs.anBroAttr.anNum"}}),e._v(" 次\n                      ")],1)]),e._v(" "),n("el-form-item",[n("div",[n("el-checkbox",{model:{value:e.survey.surveyAttrs.anIpAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anIpAttr,"enabled",t)},expression:"survey.surveyAttrs.anIpAttr.enabled"}},[e._v("启用IP回答限制")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyAttrs.anIpAttr.enabled,expression:"survey.surveyAttrs.anIpAttr.enabled"}],staticStyle:{"font-size":"12px"}},[e._v("\n                        每个IP可回答次数"),n("el-input-number",{staticStyle:{width:"130px"},attrs:{min:1,max:1e5,size:"mini"},model:{value:e.survey.surveyAttrs.anIpAttr.anNum,callback:function(t){e.$set(e.survey.surveyAttrs.anIpAttr,"anNum",t)},expression:"survey.surveyAttrs.anIpAttr.anNum"}}),e._v(" 次\n                      ")],1)]),e._v(" "),n("el-form-item",[n("el-checkbox",{model:{value:e.survey.surveyAttrs.anRefreshAttr.randomCode,callback:function(t){e.$set(e.survey.surveyAttrs.anRefreshAttr,"randomCode",t)},expression:"survey.surveyAttrs.anRefreshAttr.randomCode"}},[e._v("重复回答启用验证码")])],1),e._v(" "),n("el-form-item",[n("div",[n("el-checkbox",{model:{value:e.survey.surveyAttrs.anPwdAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anPwdAttr,"enabled",t)},expression:"survey.surveyAttrs.anPwdAttr.enabled"}},[e._v("启用通过密码答卷")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyAttrs.anPwdAttr.enabled,expression:"survey.surveyAttrs.anPwdAttr.enabled"}]},[n("el-input",{staticStyle:{width:"160px"},attrs:{size:"mini",placeholder:"请输入密码"},model:{value:e.survey.surveyAttrs.anPwdAttr.anPwdCode,callback:function(t){e.$set(e.survey.surveyAttrs.anPwdAttr,"anPwdCode",t)},expression:"survey.surveyAttrs.anPwdAttr.anPwdCode"}})],1)])],1)]),e._v(" "),n("el-col",{attrs:{span:12}},[n("h5",[e._v("何时结束")]),e._v(" "),n("div",{staticStyle:{"padding-left":"10px"}},[n("el-form-item",[n("el-checkbox",{model:{value:e.survey.surveyAttrs.anEndNumAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anEndNumAttr,"enabled",t)},expression:"survey.surveyAttrs.anEndNumAttr.enabled"}},[e._v("收集到\n                        "),n("el-input-number",{attrs:{min:1,max:1e5,label:"份数","controls-position":"right"},model:{value:e.survey.surveyAttrs.anEndNumAttr.endNum,callback:function(t){e.$set(e.survey.surveyAttrs.anEndNumAttr,"endNum",t)},expression:"survey.surveyAttrs.anEndNumAttr.endNum"}}),e._v("\n                        份时结束")],1)],1),e._v(" "),n("el-form-item",[n("el-checkbox",{model:{value:e.survey.surveyAttrs.anEndTimeAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anEndTimeAttr,"enabled",t)},expression:"survey.surveyAttrs.anEndTimeAttr.enabled"}},[e._v("时间到\n                        "),n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.survey.surveyAttrs.anEndTimeAttr.endTime,callback:function(t){e.$set(e.survey.surveyAttrs.anEndTimeAttr,"endTime",t)},expression:"survey.surveyAttrs.anEndTimeAttr.endTime"}}),e._v("\n                        时结束\n                      ")],1)],1)],1)])],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(" 保存修改 ")]),e._v(" "),n("el-button",[e._v("取消")])],1)],1)],1)])])]},proxy:!0}])})],1)},staticRenderFns:[]};var ma=n("VU/8")(va,pa,!1,function(e){n("S35E")},"data-v-66c51dc6",null).exports,ya={name:"DwSiteComp",components:{DwSurveyDcsWrapperV6:$o,DwSurveyDcsWrapper:ce,Clipboard:he.a},data:function(){return{color1:"#409EFF",color2:"#FFFFFF",value:60,radio:"右边",siteCompCode:'<div id="dwsurveyWebSiteFixed" style="position: fixed; right: 0px; left: auto; top: 520px; z-index: 99999;"><a target=\'_blank\' id="dwsurveyWebSiteFixedA" href="" style="background-color: rgb(24, 144, 255); width: 15px; display: block; padding: 10px 6px 10px 10px; color: white; cursor: pointer; float: right; vertical-align: middle; text-decoration: none; font-size: 12px; box-sizing: content-box; line-height: 20px;">问卷调查</a></div>'}},methods:{copyActiveCode:function(e,t){var n=this,s=document.getElementById("dwsurveyWebAnswerCompCode");this.siteCompCode=s.innerHTML;var i=new he.a(e.target,{text:function(){return n.siteCompCode}});i.on("success",function(e){n.$message({type:"success",message:"复制成功"}),i.off("error"),i.off("success"),i.destroy()}),i.on("error",function(e){n.$message({type:"waning",message:"该浏览器不支持自动复制"}),i.off("error"),i.off("success"),i.destroy()}),i.onClick(e)},handleSlider:function(e){var t=window.innerHeight-10*e;t<0&&(t=0);var n=document.getElementById("dwsurveyWebAnswerCompCode");document.getElementById("dwsurveyWebSiteFixed").style.top=t+"px",console.debug(n.innerHTML),this.siteCompCode=n.innerHTML},handleLRButton:function(e){console.debug(e);var t=document.getElementById("dwsurveyWebAnswerCompCode"),n=document.getElementById("dwsurveyWebSiteFixed");"左边"===e?(n.style.left="0px",n.style.right="auto"):(n.style.left="auto",n.style.right="0px"),console.debug(t.innerHTML),this.siteCompCode=t.innerHTML},handleBgColor:function(e){var t=document.getElementById("dwsurveyWebAnswerCompCode");document.getElementById("dwsurveyWebSiteFixedA").style.backgroundColor=e,console.debug(t.innerHTML),this.siteCompCode=t.innerHTML},handleTextColor:function(e){var t=document.getElementById("dwsurveyWebAnswerCompCode");document.getElementById("dwsurveyWebSiteFixedA").style.color=e,console.debug(t.innerHTML),this.siteCompCode=t.innerHTML}}},ha={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("dw-survey-dcs-wrapper-v6",{attrs:{"is-site-comp":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){var s=t.survey;return[n("div",[n("div",{staticClass:"dw-dcs-main-title"},[n("h4",[e._v("通过网站挂件快速收集问卷")]),e._v(" "),n("div",{staticClass:"dw-dcs-main-p"},[e._v("复制右边生成的挂件代码，放入网站Footer页中即可实现全站带有答卷挂件。")])]),e._v(" "),n("div",{staticClass:"dw-dcs-main-content"})]),e._v(" "),n("div",[n("el-row",[n("el-col",{attrs:{span:8}},[n("div",{staticClass:"site-comp-left"},[n("div",{staticClass:"site-comp-left-title"},[e._v("风格设置")]),e._v(" "),n("div",[n("el-row",[n("el-col",{attrs:{span:16}},[n("div",{staticClass:"dw-c-from-item"},[e._v("挂件位置：\n                      "),n("el-radio-group",{attrs:{size:"small"},on:{change:function(t){return e.handleLRButton(t)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[n("el-radio-button",{attrs:{label:"左边"}}),e._v(" "),n("el-radio-button",{attrs:{label:"右边"}})],1)],1),e._v(" "),n("div",{staticClass:"dw-c-from-item dw-c-from-item-color"},[n("span",[e._v("背景颜色：")]),e._v(" "),n("el-color-picker",{on:{"active-change":function(t){return e.handleBgColor(t)}},model:{value:e.color1,callback:function(t){e.color1=t},expression:"color1"}})],1),e._v(" "),n("div",{staticClass:"dw-c-from-item dw-c-from-item-color"},[n("span",[e._v("文字颜色：")]),e._v(" "),n("el-color-picker",{on:{"active-change":function(t){return e.handleTextColor(t)}},model:{value:e.color2,callback:function(t){e.color2=t},expression:"color2"}})],1)]),e._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"dw-c-from-item"},[n("div",[e._v("挂件高度：")]),e._v(" "),n("div",{staticStyle:{"margin-top":"15px"}},[n("el-slider",{attrs:{vertical:"",height:"200px"},on:{input:e.handleSlider},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),n("div",{staticStyle:{"padding-top":"15px"}},[n("el-input-number",{attrs:{min:1,max:100,"controls-position":"right",size:"small"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)])])],1)],1)])]),e._v(" "),n("el-col",{staticStyle:{"text-align":"center",color:"rgb(211, 211, 211)"},attrs:{span:2}},[n("i",{staticClass:"el-icon-right"})]),e._v(" "),n("el-col",{attrs:{span:14}},[n("div",{staticClass:"site-comp-right"},[n("div",[n("el-input",{attrs:{autosize:{minRows:2,maxRows:8},type:"textarea",placeholder:"请输入内容",disabled:""},model:{value:e.siteCompCode,callback:function(t){e.siteCompCode=t},expression:"siteCompCode"}})],1),e._v(" "),n("div",{staticStyle:{"padding-top":"10px"}},[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,e.siteCompCode)}}},[e._v("复制挂件代码")])],1)])])],1),e._v(" "),n("div",{domProps:{innerHTML:e._s(s.siteCompCodeRoot)}})],1)]}}])})],1)},staticRenderFns:[]};var fa=n("VU/8")(ya,ha,!1,function(e){n("7vXl")},"data-v-5c74c55c",null).exports,wa={name:"DwSiteShare",components:{DwSurveyDcsWrapper:ce,Clipboard:he.a},data:function(){return{code:"http://ent.surveyform.cn/#/diaowen/wdhl2uv6e9x",src:"https://ent.surveyform.cn/api/dwsurvey/anon/response/answerTD.do?surveyId=465d3020-0880-4c37-ab09-cc40869758de"}},methods:{copyActiveCode:function(e,t){var n=this,s=new he.a(e.target,{text:function(){return t}});s.on("success",function(e){n.$message({type:"success",message:"复制成功"}),s.off("error"),s.off("success"),s.destroy()}),s.on("error",function(e){n.$message({type:"waning",message:"该浏览器不支持自动复制"}),s.off("error"),s.off("success"),s.destroy()}),s.onClick(e)}}},ga={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-survey-dcs-wrapper",{attrs:{"is-site-share":"true"}},[t("div",{attrs:{slot:"dw-dcs-main-slot"},slot:"dw-dcs-main-slot"},[t("div",[t("div",{staticClass:"dw-dcs-main-title"},[t("h4",[this._v("分享到社交网络")]),this._v(" "),t("div",{staticClass:"dw-dcs-main-p"},[this._v("赶快分享您的问卷到各大社交网站，让更多关注您的朋友来回答问卷。")])]),this._v(" "),t("div",{staticClass:"dw-dcs-main-content"})])])])],1)},staticRenderFns:[]};var xa=n("VU/8")(wa,ga,!1,function(e){n("DOvI")},"data-v-0631fdbd",null).exports,ba={name:"DwLrNavMenu",data:function(){return{defActive:"/dw/admin/survey/list"}},watch:{$route:function(e,t){this.setDefActive()}},mounted:function(){this.setDefActive()},methods:{handleSelect:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},setDefActive:function(){var e=this.$route.fullPath;e.indexOf("/dw/survey")>=0?this.defActive="/dw/survey":e.indexOf("/dw/admin")>=0?this.defActive="/dw/admin/survey/list":e.indexOf("/dw/user")>=0&&(this.defActive="/dw/user")}}},Ca={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-menu",{staticClass:"dw-menu-height dw-menu",attrs:{"default-active":e.defActive,mode:"horizontal","background-color":"#233c54","text-color":"#fff","active-text-color":"#ffd04b",router:""},on:{select:e.handleSelect}},[n("el-menu-item",{attrs:{index:"/dw/survey"}},[e._v("我的问卷")]),e._v(" "),n("el-menu-item",{attrs:{index:"/dw/task"}},[e._v("我的任务")]),e._v(" "),n("el-menu-item",{directives:[{name:"has-dw-role",rawName:"v-has-dw-role",value:"DWSURVEY_SUPER_ADMIN",expression:"'DWSURVEY_SUPER_ADMIN'"}],attrs:{index:"/dw/template"}},[e._v("模板中心")]),e._v(" "),n("el-menu-item",{directives:[{name:"has-dw-role",rawName:"v-has-dw-role",value:"DWSURVEY_SUPER_ADMIN",expression:"'DWSURVEY_SUPER_ADMIN'"}],attrs:{index:"/dw/admin/survey/list"}},[e._v("管理后台")])],1)},staticRenderFns:[]};var _a={name:"DwLrHeader",components:{SwitchLayoutDialog:D,DwLrNavMenu:n("VU/8")(ba,Ca,!1,function(e){n("IRKp")},"data-v-6d4f52e8",null).exports,DwNavMenu:o},data:function(){return{userName:"dwsurvey",prevPath:"/v6/lr"}},mounted:function(){this.userName=u.getUserName(),this.$route.path.indexOf("/v6/lr")>=0&&(this.prevPath="/v6/lr")},methods:{handleCommand:function(e){var t=this;"logout"===e?C().then(function(){t.$router.push("/login")}):"myAccount"===e?this.$router.push(this.prevPath+"/dw/user"):"updatePwd"===e&&this.$router.push(this.prevPath+"/dw/user/pwd")},openSwitchLayoutDialog:function(){this.$refs.switchLayoutDialog.openDialog()}}},Aa={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-row",{staticClass:"dw-lr-header"},[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"dw-header-main"},[n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:18}},[n("div",{staticClass:"header-content-left"},[n("div",{staticClass:"logo"},[n("router-link",{attrs:{to:e.prevPath+"/dw/survey"}},[n("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQzRDRFQ0Y5QjVFODExRUJCRENGOUE2Q0FGMTA3RTJEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQzRDRFQ0ZBQjVFODExRUJCRENGOUE2Q0FGMTA3RTJEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDNENEVDRjdCNUU4MTFFQkJEQ0Y5QTZDQUYxMDdFMkQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDNENEVDRjhCNUU4MTFFQkJEQ0Y5QTZDQUYxMDdFMkQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6GJisjAAAFMklEQVR42uzdTYhVZRjA8XNrSAqTIq0EqYSCCoQWgeFCHcJsEbVo1UARkbYIChdFbloFWosWQVAWhFBDmyJa1FhR46YPC0KkhCgzN9OXJH2JhdyeM3Mnq3veMJp5z3lnfj94mCLo3nPu/O97z51z7u31+/0qh9749I88NzbHd336jo8NbUuR2zMxOrM9CfX2/BRzIuboYL6KORxzMOZAzCcxv3dpmzavnL//90gFf3fuYJYP/n3dP/778ZgPYybr3mL2xZxcqDvjDL8P/Ednx6yPeTjm3ZipmKdiNsyutgKBU1bE3DNYUT6LeSDmPIHAsMtjHos5EvN4zEUCgebjmG0xh2J2xCwVCAw7J+ahwUuvO0o8RhEIOdRvxO6O2RNzmUCg2aaY/TFjAoFmy2JeiNkVs0Qg0GxLzN6q4+90CYQ2rY15L+ZKgUCz1YOV5BqBQLMLY96OWSMQaHZ+zGsxqwQCzVYNVpIVAoFmV8S8GnOWQKDZdTGPCgTS7o+5RSDQrD6x8bmYSwUCzep3tp6pWjwLWCB0XX2C4+0CgbT6gH2ZQKDZxTHbBQJp91UtnPkrEEoxe/muQCDh7irzRwoJhJIsHUQiEEjYWmX8u4hAKE19MuN6gUDabQKBtFtjzhQINKu/mmGtQCBts0AgbaNAIO3aKsNluQKhVPWpJ1cLBNLWCATSrhIIpK0WCKRdIhBIWy4QSLtAIJC2RCCQNu9fLz2SeYN6C+wBGtqeidGFtT2LnRUE/u0Zo9/v2wtzaM+UfZDb5pVWEPASC7om20F6b7zsHdUf88tiBQHaWUFmn4gL3EeL5q3PG98p7/GZGJ3fx8cKAgIBgYBAQCAgEBAICAQEAgIBBAICAYGAQEAgIBAQCAgEBAICAQQCAgGBgEBAICAQEAgIBAQCCAQEAgIBgYBAQCAgEBAICAQEAjTq9ft5vhq7Nz79o9jvSe+PLeBfgvE//7HIx2c+HxsrCAgEBAICgZxG2jjgpbsHvHaBFQRO/xkj19u8YAUBgYCD9Ll/LTde9o5aJH9J99hYQaCDK8hs7CU+wS6i3wePjxUEBAICAYHAIjpIX/BKf8sUKwgIBAQCAgGBgEBAICAQEAgIxC4AgYBAQCAgEBAICAQEAgIBgQACAYGAQEAgIBAQCAgEBAICAYEAAgGBgEBAICAQEAgIBAQCAgEEAqch9/ek9+zyTvP4WEGggytIf8zOxgoCAgEvseb66G+87B3115eIpW8LVhAoawWZfSIucB/1bE+x22MFYVH72UssSDshEEg7KhBI+14gkHZEIJB2WCCQ9qlAIO2AQKDZr1YQSPso5jeBQLPJHDciEEr1hkCgWf0HwvcFAs1eijkpEGj2Yq4bEgil+Txmr0Cg2dNVxgu7BEJJ6gukns15gwKhJHUcxwQCw+pTS3bmvlGBUIonYr4RCAz7OmZHGzcsEEqwPeZHgcCwN2N2t3XjAqHLfojZWrX4gXYCoavqKO6qMlx3LhBKVL9r9Urbd0IgdFF9KvuDXbgjAqFrDsXcXGW4nFYglOa7mJsGPyuBwCn1O1abYg526U4JhC74Nub6mP1du2MCoW1fxmyM+biLd04gtOmDmHVde1klELqgvrZjQzVzImJnjXicyKw+6fDemOdLuLMCIae3YrZULZ8+4iUWXTMVc2fMDSXFYQVhvtWXyT4Z80jV0vUcAqGLfhkchO/s+kG4QMjpi5hdgzm2EDZIIPxf9QdJv1zNfBzoZNXixU0CoQuOVzNfXlPH8HrMvirTB0m34Q8BBgDCrqxH8SRKpAAAAABJRU5ErkJggg==",alt:"logo",height:"32"}}),e._v(" "),n("h1",[e._v("调问网")])])],1)])]),e._v(" "),n("el-col",{staticStyle:{"text-align":"right","padding-right":"10px"},attrs:{span:6}},[n("div",{staticClass:"dw-display-flex-right"},[n("div",{staticStyle:{color:"#c2a20c","padding-right":"20px","font-size":"14px",cursor:"pointer"},on:{click:e.openSwitchLayoutDialog}},[n("i",{staticClass:"fa-solid fa-toggle-on"}),e._v(" 切换布局\n                ")]),e._v(" "),n("el-dropdown",{on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[e._v("\n                    "+e._s(e.userName)+" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"myAccount"}},[e._v("我的账号")]),e._v(" "),n("el-dropdown-item",{attrs:{command:"updatePwd"}},[e._v("修改密码")]),e._v(" "),n("el-dropdown-item",{attrs:{command:"logout"}},[e._v("退出登录")])],1)],1)],1)])],1)],1)])],1),e._v(" "),n("switch-layout-dialog",{ref:"switchLayoutDialog"})],1)])},staticRenderFns:[]};var Sa=n("VU/8")(_a,Aa,!1,function(e){n("2lsq")},"data-v-f430c194",null).exports,qa={name:"DwLrAsideMenu",data:function(){return{isCollapse:!1,isCollapseActive:!1,defActive:"/v6/lr/dw/survey",routesAdminChildren:Pa}},watch:{$route:function(e,t){this.setActiveMenu()}},mounted:function(){this.setActiveMenu()},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},mouseEnterIsCollapse:function(){},mouseLeaveIsCollapse:function(){},setActiveMenu:function(){var e=this.$route.fullPath;e.indexOf("/dw/survey")>=0?this.defActive="/v6/lr/dw/survey":e.indexOf("/dw/admin/user")>=0?this.defActive="/v6/lr/dw/admin/user":e.indexOf("/dw/user")>=0&&(this.defActive="/v6/lr/dw/user")}}},ka={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-aside",{staticClass:"dw-lr-aside",attrs:{width:"initial"}},[n("div",[n("el-menu",{staticClass:"dw-menu",staticStyle:{"border-right":"none"},attrs:{"default-active":e.defActive,collapse:e.isCollapse,"unique-opened":!0,"text-color":"#fff",router:""},on:{open:e.handleOpen,close:e.handleClose}},[e._l(e.routesAdminChildren,function(t){return[t.children?n("el-submenu",{key:t.path,attrs:{index:t.path}},[n("template",{slot:"title"},[n("i",{class:t.icon}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])]),e._v(" "),e._l(t.children,function(t){return[t.name?n("el-menu-item",{directives:[{name:"has-dw-role",rawName:"v-has-dw-role",value:t.authority,expression:"itemChild.authority"}],key:t.path,attrs:{index:t.path}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])]):e._e()]})],2):n("el-menu-item",{key:t.path,attrs:{index:t.path}},[n("i",{class:t.icon}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])]})],2),e._v(" "),n("div",{staticClass:"dw-menu-collapse",class:e.isCollapseActive?"mouseEnter":"mouseLeave",on:{click:function(t){e.isCollapse=!e.isCollapse},mouseenter:e.mouseEnterIsCollapse,mouseleave:e.mouseLeaveIsCollapse}},[n("span",{staticStyle:{width:"24px","text-align":"center"}},[n("i",{class:e.isCollapse?"el-icon-s-unfold":"el-icon-s-fold"})])])],1)])},staticRenderFns:[]};var Ia={name:"DwLrLayout",components:{DwFooter:F,DwLrAsideMenu:n("VU/8")(qa,ka,!1,function(e){n("pY13")},"data-v-397099b5",null).exports,DwLrHeader:Sa},data:function(){return{currentHeader:"dw-header"}},mounted:function(){this.loginStatus()},created:function(){},methods:{loginStatus:function(){this.$route.fullPath.indexOf("login")>=0?this.currentHeader="dw-header-login":this.currentHeader="dw-header"}}},Ta={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"dw-layout"}},[t("el-container",{staticStyle:{padding:"0"}},[t("el-header",{staticStyle:{padding:"0"}},[t("dw-lr-header")],1),this._v(" "),t("el-container",{staticClass:"dw-admin-container",staticStyle:{"z-index":"1"}},[t("dw-lr-aside-menu"),this._v(" "),t("el-container",{},[t("el-main",{staticStyle:{padding:"0px"}},[t("el-main",{staticStyle:{padding:"20px"}},[t("router-view")],1),this._v(" "),t("el-footer",{staticStyle:{height:"auto"}},[t("dw-footer")],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Oa=n("VU/8")(Ia,Ta,!1,function(e){n("56mE")},"data-v-3d7b6e92",null).exports,Da={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]};var Ea=n("VU/8")({name:"EmptyRouterView"},Da,!1,function(e){n("vh9U")},"data-v-59dff456",null).exports;s.default.use(M.a);var Pa=[{path:"/v6/lr/dw/survey",icon:"el-icon-s-claim",name:"我的问卷",meta:{title:"问卷设计"},component:na},{path:"/v6/lr/dw/user",icon:"el-icon-user",name:"个人中心",meta:{title:"个人中心"},component:rt},{path:"/v6/lr/dw/admin/user",icon:"el-icon-user",name:"用户管理",meta:{title:"用户管理"},component:rt}],Na=[{path:"",redirect:"dw/survey"},{path:"dw/survey",name:"DwSurveyListV6",meta:{title:"我的问卷"},component:na},{path:"dw/survey/c/attr/:id",name:"DwSurveyAttrSet",meta:{title:"问卷属性"},component:ma},{path:"dw/survey/c/url/:id",name:"DwAnswerUrlV6",meta:{title:"答卷地址"},component:Yo},{path:"dw/survey/c/comp/:id",name:"DwSiteCompV6",meta:{title:"网站组件"},component:fa},{path:"dw/survey/c/share/:id",name:"DwSiteShareV6",component:xa},{path:"dw/survey/c/weixin/:id",name:"DwAnswerWeixin",component:Oe},{path:"dw/survey/d/chart/:id",name:"DwSurveyChartsV6",meta:{title:"统计分析"},component:ua},{path:"dw/survey/d/data/:id",name:"DwSurveyAnswerDataListV6",meta:{title:"原始数据"},component:Vo},{path:"dw/user/pwd",name:"DwUserPwd",component:nt},{path:"dw/user",name:"DwUser",component:Xe},{path:"dw/admin/user",name:"AdminUserList",component:rt}],Ra=[{path:"/",meta:"首页",component:j,children:[{path:"/",redirect:"/v6"},{path:"/dw/survey",name:"DwSurveyList",component:le},{path:"/dw/survey/c/attr/:id",name:"DwSurveyAttr",component:me},{path:"/dw/survey/c/url/:id",name:"DwAnswerUrl",component:be},{path:"/dw/survey/c/comp/:id",name:"DwSiteComp",component:Ae},{path:"/dw/survey/c/share/:id",name:"DwSiteShare",component:ke},{path:"/dw/survey/c/weixin/:id",name:"DwAnswerWeixin",component:Oe},{path:"/dw/survey/d/chart/:id",name:"DwSurveyCharts",component:Be},{path:"/dw/survey/d/data/:id",name:"DwSurveyAnswer",component:He},{path:"/dw/user/pwd",name:"DwUserPwd",component:nt},{path:"/dw/user",name:"DwUser",component:Xe},{path:"/dw/admin/user",name:"AdminUserList",component:rt},{path:"/dw/survey/d/data/v6/:id",name:"DwSurveyAnswerDataListV6",component:Vo},{path:"/dw/survey/c/url/v6/:id",name:"DwAnswerUrlV6",component:Yo}]},{path:"/diaowen/:sid",name:"DwAnswer",component:X},{path:"/no-top",name:"NoTopLayout",component:J,children:[{path:"/no-top/dw-survey/d/data/:id/:answerId",name:"DwSurveyAnswerInfo",component:Ye}]},{path:"/v6",meta:"首页",component:Ea,children:[{path:"/v6",meta:"首页",component:j,children:Na},{path:"/v6/lr/",meta:"首页",component:Oa,children:Na},{path:"/v6/diaowen",name:"NoTopLayout",component:J,children:[{path:"dw-design/survey/:id",name:"DwSurveyDesignContent",meta:{title:"问卷设计"},component:ro},{path:"dw-design/survey1",name:"DwDesign",meta:{title:"问卷设计"},component:Ut},{path:"dw-preview/survey/:id",name:"DwSurveyPreview",meta:{title:"问卷预览"},component:Do},{path:"an/:sid",name:"DwAnswerSurveyV6",meta:{title:"欢迎答卷"},component:Zo},{path:"an/m/:sid",name:"DwAnswerSurveyV6",component:ca},{path:"an/:sid/:answerId",name:"DwAnswerSurveyV6",component:Zo},{path:"an/review/:sid/:answerId",name:"DwSurveyAnswerReview",meta:{title:"原始答卷"},component:No}]}]},{path:"/login",name:"LoginLayout",component:G,children:[{path:"/",name:"Login",component:lt}]}],La=new M.a({routes:Ra});La.beforeEach(function(e,t,n){document.title=void 0!==e.meta.title?e.meta.title+" - 调问网":"调问网",n()});var Fa=La,Qa=n("aLYK"),Ua=(n("z/eQ"),n("uMhA"),n("D/PP"),n("eonX"));s.default.directive("hasDwRole",{inserted:function(e,t){!function(e,t){(function(e){for(var t=u.getAuthority(),n=0;n<t.length;n++)if(e===t[n])return!0;return!1})(t.value)||e.parentNode.removeChild(e)}(e,t)}});n("ao2D"),n("6w6P"),n("yuO/"),n("H1cr");var Ba=n("oPmM"),Ma=n.n(Ba);s.default.config.productionTip=!1,s.default.use(y.a),s.default.use(Qa.a,p.a),s.default.component("icon",Ua.a),s.default.use(Ma.a),new s.default({el:"#app",router:Fa,components:{App:B},template:"<App/>"})},NWAF:function(e,t){},Ncat:function(e,t){},"Np+H":function(e,t){},O6RM:function(e,t){},OEMn:function(e,t){},ORmu:function(e,t){},Qdlr:function(e,t){},R4Iz:function(e,t){},RQbm:function(e,t){},RkCJ:function(e,t){},"Ry/m":function(e,t){},S35E:function(e,t){},SEaj:function(e,t){},Sldd:function(e,t){},SxyH:function(e,t){},Tp1i:function(e,t){},UKxP:function(e,t){},UTC3:function(e,t){},UYPE:function(e,t){},VDb6:function(e,t){},VyFQ:function(e,t){},YAJd:function(e,t){},YNhe:function(e,t){},Yvp6:function(e,t){},"Z+Xa":function(e,t){},ZTgU:function(e,t){},aMUv:function(e,t){},ao2D:function(e,t){},bUYC:function(e,t){},"ctD/":function(e,t){},e8dA:function(e,t){},e9wV:function(e,t){},eWKG:function(e,t){},eZVF:function(e,t){},eblm:function(e,t){},f6Xx:function(e,t){},fF4Y:function(e,t){},fGcr:function(e,t){},gQcA:function(e,t){},gaH1:function(e,t){},gk54:function(e,t){},gmhw:function(e,t){},hxPH:function(e,t){},i8dq:function(e,t){},jDzI:function(e,t){},kHFh:function(e,t){},kYXk:function(e,t){},kqkH:function(e,t){},kuGm:function(e,t){},levg:function(e,t){},mCYP:function(e,t){},mXQ4:function(e,t){},n9Cl:function(e,t){},nCbi:function(e,t){},nIrY:function(e,t){},nkun:function(e,t){},"no+S":function(e,t){},oPmM:function(e,t){},oXSW:function(e,t){},oY4z:function(e,t){},okw5:function(e,t){},pPbJ:function(e,t){},pY13:function(e,t){},q84n:function(e,t){},qz4o:function(e,t){},sAHm:function(e,t){},sFYE:function(e,t){},sFek:function(e,t){},tYYF:function(e,t){},tcTq:function(e,t){},uMhA:function(e,t){},uUGI:function(e,t){},uhve:function(e,t){},uzEK:function(e,t){},vLnb:function(e,t){},vh9U:function(e,t){},wAQK:function(e,t){},wICd:function(e,t){},wVxy:function(e,t){},wvgK:function(e,t){},yEZW:function(e,t){},ysZS:function(e,t){},"yuO/":function(e,t){},"z/eQ":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.0bf28dcf7f0ec4f7fa15.js.map