webpackJsonp([1],{"+AVS":function(e,t){},"+Zdd":function(e,t){},"/Oej":function(e,t){},"0xJ2":function(e,t){},"178K":function(e,t){},"1qSv":function(e,t){},"204z":function(e,t){},"2RYx":function(e,t){},"2Wz4":function(e,t){},"2sPn":function(e,t){},"3kGJ":function(e,t){},"3mwL":function(e,t){},"3q7h":function(e,t){},"580l":function(e,t){},"6uRV":function(e,t){},"6vVf":function(e,t){},"6w6P":function(e,t){},"6xT/":function(e,t){},"7IGW":function(e,t){},"7Otq":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMQAAAAmCAYAAACbKjTiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjE4QkVDOERGRkFFMTFFODk3NDdCRUVFNEFCMjY4RDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjE4QkVDOEVGRkFFMTFFODk3NDdCRUVFNEFCMjY4RDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGMThCRUM4QkZGQUUxMUU4OTc0N0JFRUU0QUIyNjhEOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGMThCRUM4Q0ZGQUUxMUU4OTc0N0JFRUU0QUIyNjhEOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PssYC+sAAAhESURBVHja7F3Nb1tFEB+nSamaopgPtYIL5goXV3BBQrJzAsTB6Q1xIA43OBD7hFohbB/gAlJS9YBACJtCD6BKdSTghOTnf4C4JyQ4YEDlG+KW0pa2iZmtZ+XR6u3He3527bIjjfL8PN7dNzu/+dhdOyk4078AAHeDnkrIXyB/o5X4F+DwEmRPPwGPLc7DqX9uwjbebSKfQb7MRZ96ADx5mlqaR37QIiPAss8CGiCZ/chHkJ8mriG/gvypV7WnWaA55L8tMteQ9xzaEjI3lHsCHJ8gH/eq9jQrgJgEvYm84tXtyQNiSCJtOuhV7skDYkALyC95lXvygBjSc17lnqaZxCqTbfXoXpKz0f59KViaTwHgXx097lXuadoB8SryXQaZz2CwElXXSvQx1KTgz3v2Q3BoAV5f0MedG17lnqaZUnCmv3jrr5kuG9/dw/CA0Hp0CQ4hMGCvrxf96hlLW57ueOr1evl0Oh04ykZtPgODFc1N8QL7iRwhLllqiXeQXza2sg/g+i7A9gU4gdHiuAFeewPpSMqblXkWms/KYSN37gTjjWpQlrkUjbWE0eL1UWy7S/c3SGeuBr8Fg5MQYXOwTX9Few0JQNchzoF9061vbaZPMeYgXi3CYHE1nPeieBHkPrWu8g4ptkIKso1OsE0pOyR3LuI8F2kS5Jha7HVdM74i9fWdpV059qJBrk4yMqXNa3Sm44pGXxsu80Nz5AouYaQBGSxvXziSEo1dcinkXpFYBx5xv0zXG0z3FTY3Ji4IQFy1PMf1CMZhqxGuJuW4SEFVMqrKiO2tUJvyOuM4hm0yRBkZAuIuvV+k8akGHTBvp+srx64LhnFIoLcTDg4lBycSh2pSzwimLLvfQcAsS6YIK3iZccOh/YaiX9nnsoHLPGWajVonHBAFMrYq3SvHbH+VKbNIr2sWMLQICNIrNUJC+wYBrM7aBwJMhz6f10z0CvOEeUP6ICe96aC3qFSn1CaxvFW0hSTmq43XSaaVaaavMum4R30Grmn5HMwm9cgA1ohH8WhpMr4uA1TJ8pkKA4POc4n2jrH3NpRoEIREAp5CpOkZm8wB6KJDJ0IOHkXHYrzrY6hLamFGKmoM5JZg0kGWpTO2uT1HqV52FH3MKiDUECmNLs7kFZmH7TEDLBoAVGKeyObl1lgKxcfXNnh/nga1DWlTTgFXklQmfVSV1Cb2ypLKmhqjQ8/TIw7YaxcaKerMOYAiSthN3SYAbrE0IypJI/1Q+btqqDeAr2I40MmQ8TUNdUSBGXrT8Gx55fmTpC5LG+sJtKcWtgVN9CiLCEL9yzHUYhi60E1LRpwQLukMdNHS8OEIg7jf8v7imAARKOmGK2XJGLtM4U16ndcUvHG8sq6IDjRRIs8MQnpN9bP8dWAwChubaJPazqIBVRKYoypzIpNYT8+zxRL1/lLYB+Zpgk17Az9GGMDbyGcN7++OsabgKU3U6KAWpE1Ki9ZDCvVMjNDcUT7fZZ49T3PQUCJBoIwnC2zDiRlz09BvK4GovkYrZSJ12opbCJPXl3sCRV1aFTJmuaxbjZv6qfWKaalYAOI3SyoTZWdZyP5qeH8PpotWlDSJpzglmrjaGL1ZWITIKTUGv84xQITJJU5i84xWhaqUOh0dY3dymVWXwq2O2yAEIL62yHyE/IJje6/B4CujSdUkUVaK4hTTaSVd4srvMK/cGLHPtMEAeiz96Wo8vywqV0Lqh2DcuhbeHUGxQqlTCV9vjgl8PfV5Jn1SQUSGKxaZnQjtXbS8f2VMz5HV1BMmKrAUJmwHN6tZuQoMq0OmXFY3viaTyYB+2TBgUS0TUvuMm+TydgWNNDOuTkStInfAlZMKE6F5h7w+Sppjkx1XDVGImNdnmLc15aYlGK6Hd1jeX1UKctfxheX7bYpWOQuot2jMORZxgkkZiqgdlNSploDxp0G/MihTp1UwH12x0Sr2k4sCiFkneQ4mrBbQKokZqG1HWhbXawx0AXl0sdl2zGF8RWbULnVE2yDHj5m0J6loljrlE6qrKiwyBkpfAYEmN2IfkcA0yxtzaRiubcu8vxFRSbb1+5MhRggMRPxYhg4MLWbQDU2x2FGiVuAo17wNei8rCxKjLGiUyIml1ejONu/ipmeivRQCS8e1WY4QrRAw8LqhR57axWtJJbtsrPHiushWeAKKGHW6n6e22iwlyzHgdSyRJIDhcY3A8BxczuV4QstRv8sRokSAhroJ9uMtLpG9wVLO72OOXZuRxa0hFiwyUb6/YIs4CzEfLm946CYMjxlETZdc6CQZ/joDBLDJlEe8dbVIw2F8bWZgQQJyNr2NSjVwPxWs0jpzEkIv5/jzkOeuTXiVKc0BccAifChCwzbZAxHa6hqM7CLL5W1UZe0JOk/3XI87COA8xBTXUzz2w6zY5V8QasNw19ulj6pDHeQi14X4m1hh+gqLEuLE6jEwH0s3ee4eRVgZXZvyy0KGxY0lSPC3veh81rZ6X3yF9IjFs4vvOPzh2M99MPg5Sx31+8/DL+Dpf0tsZalJ0VVcL+uOaFOEqDCgihtHQwC7Qw4rpYDXNJY6S2tvpcECEC9aUpkvkX8H+zLbGxQBnjXI7CIg3vdm4YkZZcYUHQgQ8qTwecoMuq7tWwAhUr4MB6MAhG3T4wTyx8g/WOQeQX4S+T2TEAIi5c3A07SSy48d/4V806Gt62Dfqe54lXuadkBMks56lXvygBjSKa9yTx4QAxLr/5e8yj15QAC8hXzaq9vTtJPLjx0fcASOkFH3IMTvMIndyHe9qj3NCiB+soBCrELtgn01SsiIf78lNvG+Rf4c+QPkn72aPc0K/SfAAAQw2tkwmpGbAAAAAElFTkSuQmCC"},"7PL2":function(e,t){},"7cuw":function(e,t){},"7enl":function(e,t){},"8Z74":function(e,t){},ACNE:function(e,t){},AHMe:function(e,t){},B5WO:function(e,t){},BVzi:function(e,t){},CVIr:function(e,t){},DQzE:function(e,t){},DcPy:function(e,t){},Dr96:function(e,t){},DwSS:function(e,t){},"Ew/8":function(e,t){},"F+v3":function(e,t){},F9qX:function(e,t){},Fa0r:function(e,t){},GswC:function(e,t){},H1cr:function(e,t){},HLG5:function(e,t){},HWWs:function(e,t){},IIwT:function(e,t){},IzGw:function(e,t){},JAhv:function(e,t){},JQHi:function(e,t){},JiHB:function(e,t){},"K52+":function(e,t){},LTLN:function(e,t){},LYOq:function(e,t){},Lc1T:function(e,t){},MGUL:function(e,t){},MQAu:function(e,t){},"Mkp/":function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("7+uW"),i={name:"DwNavMenu",data:function(){return{defActive:"/dw/survey"}},watch:{$route:function(e,t){this.setDefActive()}},mounted:function(){this.setDefActive()},methods:{handleSelect:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},setDefActive:function(){var e=this.$route.fullPath;e.indexOf("/dw/survey")>=0?this.defActive="/v6/dw/survey":e.indexOf("/dw/admin/user")>=0?this.defActive="/dw/admin/user":e.indexOf("/dw/user")>=0&&(this.defActive="/dw/user")}}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-menu",{staticClass:"dw-menu-height dw-menu",attrs:{"default-active":this.defActive,mode:"horizontal","background-color":"#34495e","text-color":"#fff","active-text-color":"#409eff",router:""},on:{select:this.handleSelect}},[t("el-menu-item",{attrs:{index:"/v6/dw/survey"}},[this._v("我的问卷")]),this._v(" "),t("el-menu-item",{attrs:{index:"/dw/user"}},[this._v("个人中心")]),this._v(" "),t("el-menu-item",{directives:[{name:"has-dw-role",rawName:"v-has-dw-role",value:"DWSURVEY_SUPER_ADMIN",expression:"'DWSURVEY_SUPER_ADMIN'"}],attrs:{index:"/dw/admin/user"}},[this._v("用户管理")])],1)},staticRenderFns:[]};var o=s("VU/8")(i,r,!1,function(e){s("AHMe")},"data-v-4d625ab2",null).exports,a=s("mvHQ"),u=s.n(a),l={setUserName:function(e){localStorage.setItem("dw_oss_user_name",e)},getUserName:function(){return localStorage.hasOwnProperty("dw_oss_user_name")?localStorage.getItem("dw_oss_user_name"):"none"},setAuthority:function(e){var t="string"==typeof e?[e]:e;localStorage.setItem("dw_oss_authority",u()(t))},getAuthority:function(){var e=[];if(localStorage.hasOwnProperty("dw_oss_authority")){var t=localStorage.getItem("dw_oss_authority");try{t&&(e=JSON.parse(t))}catch(s){e=t}if("string"==typeof e)return[e]}return e}},d=s("//Fk"),c=s.n(d),v=s("mtWM"),p=s.n(v),m=s("zL8q"),y=s.n(m);function f(e){Object(m.Message)({message:e,type:"error",duration:5e3})}function h(){m.MessageBox.confirm("未登录状态，是否重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){window.location.href="/#/login"}).catch(function(){})}function w(){m.MessageBox.confirm("账号没有相关操作权限","系统提示",{confirmButtonText:"确认",showCancelButton:!1,showClose:!1,type:"warning"}).then(function(){window.location.href="/#/"}).catch(function(){})}p.a.defaults.baseURL="http://192.168.3.32:8080",p.a.defaults.timeout=1e4,p.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8";var g=p.a.create({baseURL:"http://192.168.3.32:8080",timeout:1e4});g.interceptors.request.use(function(e){return e},function(e){return console.log("request-error:"+e),c.a.error(e)}),g.interceptors.response.use(function(e){if(console.debug("response"),console.debug(e),200===e.status){var t=e.data;if(t.hasOwnProperty("resultCode"))if(401===t.resultCode)h();else if(403===t.resultCode)w();else if(400===t.resultCode){var s="执行失败";t.hasOwnProperty("resultMsg")&&(s=""+t.resultMsg),function(e){Object(m.Message)({message:e,type:"warning",duration:5e3})}(s)}else if(200!==t.resultCode){var n="状态码："+t.resultCode;t.hasOwnProperty("resultMsg")&&(n=t.resultMsg+"，状态码："+t.resultCode),f(n)}return c.a.resolve(e)}return c.a.reject(e)},function(e){console.log("err"+e);var t=e.message;if(t.includes("Network Error"))t="后端接口连接异常";else if(t.includes("timeout"))t="系统接口请求超时";else if(t.includes("Request failed with status code")){var s=t.substr(t.length-3);"401"===s||"403"===s?(t=null,"401"===s?h():"403"===s&&w()):t="系统接口"+t.substr(t.length-3)+"异常"}return null!=t&&f(t),c.a.reject(e)});var x=g,b={loginIn:"/api/dwsurvey/anon/security/login-pwd.do",logOut:"/api/dwsurvey/anon/security/logout.do",surveyList:"/api/dwsurvey/app/survey/list.do",surveyInfo:"/api/dwsurvey/app/survey/info.do",surveyUpdate:"/api/dwsurvey/app/survey/survey-base-attr.do",surveyCreate:"/api/dwsurvey/app/survey/add.do",surveyUpState:"/api/dwsurvey/app/survey/up-survey-status.do",surveyCopy:"/api/dwsurvey/app/survey/copy.do",surveyDelete:"/api/dwsurvey/app/survey/delete.do",surveyReport:"/api/dwsurvey/app/stats/report.do",surveyAnswerList:"/api/dwsurvey/app/answer/list.do",surveyAnswerInfo:"/api/dwsurvey/app/answer/info.do",surveyAnswerExport:"/api/dwsurvey/app/answer/export-xls.do",surveyAnswerDelete:"/api/dwsurvey/app/answer/delete.do",surveyFooterInfo:"/api/dwsurvey/anon/web/footer-info.do",adminUserList:"/api/dwsurvey/admin/user/list.do",adminUserCreate:"/api/dwsurvey/admin/user/add.do",adminUserUpdate:"/api/dwsurvey/admin/user/edit.do",adminUserDelete:"/api/dwsurvey/admin/user/delete.do",curUserInfo:"/api/dwsurvey/app/user/currentUser.do",curUserPwdUpdate:"/api/dwsurvey/app/user/up-pwd.do"};var q={name:"DwHeader",components:{"dw-nav-menu":o},data:function(){return{userName:"dwsurvey"}},mounted:function(){this.userName=l.getUserName()},methods:{handleCommand:function(e){var t=this;"logout"===e?x({url:b.logOut,method:"post"}).then(function(){t.$router.push("/login")}):"myAccount"===e?this.$router.push("/dw/user"):"updatePwd"===e&&this.$router.push("/dw/user/pwd")}}},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-row",{staticStyle:{"background-color":"#34495e",opacity:"0.85"}},[n("el-col",{attrs:{span:20,offset:2}},[n("div",{staticClass:"dw-header-main"},[n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:4}},[n("a",{attrs:{href:"/#/"}},[n("el-image",{attrs:{src:s("7Otq")}}),e._v(" "),n("span",{staticStyle:{color:"#ffa71d","font-size":"14px",position:"absolute","margin-left":"10px"}},[e._v("OSS")])],1)]),e._v(" "),n("el-col",{attrs:{span:16}},[n("div",{staticStyle:{"padding-left":"60px"}},[n("dw-nav-menu")],1)]),e._v(" "),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[n("div",[n("el-dropdown",{on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[e._v("\n                    "+e._s(e.userName)+" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"myAccount"}},[e._v("我的账号")]),e._v(" "),n("el-dropdown-item",{attrs:{command:"updatePwd"}},[e._v("修改密码")]),e._v(" "),n("el-dropdown-item",{attrs:{command:"logout"}},[e._v("退出登录")])],1)],1)],1)])],1)],1)])],1)],1)])},staticRenderFns:[]};var _=s("VU/8")(q,C,!1,function(e){s("IIwT")},"data-v-e08f3512",null).exports,A={name:"DwHeaderLogin",components:{"dw-nav-menu":o}},S={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this._m(0),this._v(" "),t("div",[t("el-row",{staticStyle:{"background-color":"#34495e",opacity:"0.85"}},[t("el-col",{attrs:{span:20,offset:2}},[t("div",{staticClass:"dw-header-main"},[t("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("el-col",{attrs:{span:4}},[t("a",{attrs:{href:"/#/"}},[t("el-image",{attrs:{src:s("7Otq")}})],1)]),this._v(" "),t("el-col",{attrs:{span:16}},[t("div",{staticStyle:{"padding-left":"60px",color:"white"}},[this._v("DWSurvey OSS 社区版 - Vue")])]),this._v(" "),t("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t("div",[t("div",{staticStyle:{height:"80px","line-height":"80px"}},[t("el-button",{attrs:{type:"primary"}},[this._v("登录")])],1)])])],1)],1)])],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"m-logbg"})])}]};var k=s("VU/8")(A,S,!1,function(e){s("204z")},"data-v-6b2fbc9e",null).exports,T={name:"DwFooter",data:function(){return{footerInfo:{siteName:"调问网",siteUrl:"http://www.diaowen.net",siteIcp:"京ICP备13050030号-3",siteMail:"service@diaowen.net",sitePhone:"18888888888",versionInfo:"DWSurvey OSS V5.0 Vue",versionNumber:"OSS V5.0",versionBuilt:"20211128",years:"2012-2021"}}},mounted:function(){this.queryDWSurveyFooter()},methods:{queryDWSurveyFooter:function(){var e=this;this.axios.get(b.surveyFooterInfo,{}).then(function(t){var s=t.data.data;console.debug(s),e.footerInfo=s})}}},I={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-footer-main"},[s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:""!==e.footerInfo.siteUrl||""!==e.footerInfo.siteName||""!==e.footerInfo.siteIcp,expression:"footerInfo.siteUrl !=='' || footerInfo.siteName !=='' || footerInfo.siteIcp !==''"}]},[s("span",[s("a",{staticStyle:{color:"#333"},attrs:{href:e.footerInfo.siteUrl}},[s("strong",[e._v(e._s(e.footerInfo.siteName))])]),e._v(" ")]),e._v(" "),s("span",[s("a",{staticStyle:{"text-decoration":"none",color:"#333"},attrs:{href:"/"}},[e._v(e._s(e.footerInfo.siteIcp))])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:""!==e.footerInfo.siteMail||""!==e.footerInfo.sitePhone,expression:"footerInfo.siteMail !=='' || footerInfo.sitePhone !==''"}]},[s("span",[e._v(" "+e._s(e.footerInfo.siteMail)+" "+e._s(e.footerInfo.sitePhone))])])]),e._v(" "),s("div",[s("span",[e._v("Powered by "),e._m(0),e._v(" "+e._s(e.footerInfo.versionNumber)+" Vue ")]),e._v(" "),s("span",[e._v(" © "+e._s(e.footerInfo.years)+" "),e._m(1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"www.diaowen.net"}},[t("strong",[this._v("DWSurvey")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"www.diaowen.net"}},[t("strong",[this._v("调问网")])])}]};var O=s("VU/8")(T,I,!1,function(e){s("JAhv")},"data-v-23cea745",null).exports,D={name:"App",components:{"dw-nav-menu":o,"dw-header":_,"dw-header-login":k,"dw-footer":O},data:function(){return{currentHeader:"dw-header"}},mounted:function(){this.loginStatus()},methods:{loginStatus:function(){this.$route.fullPath.indexOf("login")>=0?this.currentHeader="dw-header-login":this.currentHeader="dw-header"}}},E={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var P=s("VU/8")(D,E,!1,function(e){s("Yvp6")},null,null).exports,R=s("/ocq"),N={name:"Layout",components:{"dw-nav-menu":o,"dw-header":_,"dw-header-login":k,"dw-footer":O},data:function(){return{currentHeader:"dw-header"}},mounted:function(){this.loginStatus()},methods:{loginStatus:function(){this.$route.fullPath.indexOf("login")>=0?this.currentHeader="dw-header-login":this.currentHeader="dw-header"}}},L={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"dw-layout"}},[t("el-container",{staticStyle:{padding:"0px"}},[t("el-header",{staticStyle:{padding:"0px"},attrs:{height:"80"}},[t("dw-header")],1),this._v(" "),t("el-container",{staticStyle:{"z-index":"1"}},[t("el-container",[t("el-main",{staticStyle:{padding:"20px 0px"}},[t("router-view")],1),this._v(" "),t("el-footer",[t("dw-footer")],1)],1)],1)],1)],1)},staticRenderFns:[]},F=s("VU/8")(N,L,!1,null,null,null).exports,Q={name:"LoginLayout",components:{"dw-nav-menu":o,"dw-header":_,"dw-header-login":k,"dw-footer":O},data:function(){return{currentHeader:"dw-header",pageH:"600px"}},mounted:function(){this.loginStatus(),this.pageH=window.innerHeight+"px"},methods:{loginStatus:function(){this.$route.fullPath.indexOf("login")>=0?this.currentHeader="dw-header-login":this.currentHeader="dw-header"}}},U={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-layout-body",staticStyle:{height:"100vh"},attrs:{id:"dw-layout"}},[t("el-container",[t("el-container",{staticStyle:{padding:"0px",height:"calc(100vh - 80px)"}},[t("el-header",{staticStyle:{padding:"0px"},attrs:{height:"80"}},[t("dw-header-login")],1),this._v(" "),t("el-container",{staticStyle:{"z-index":"1"}},[t("el-container",[t("el-main",{staticStyle:{padding:"20px 0px"}},[t("router-view")],1)],1)],1)],1),this._v(" "),t("el-footer",{staticClass:"dw-footer-container",attrs:{height:"80"}},[t("dw-footer")],1)],1)],1)},staticRenderFns:[]};var B=s("VU/8")(Q,U,!1,function(e){s("eZVF")},"data-v-402e05d6",null).exports,j={name:"NoTopLayout",components:{"dw-nav-menu":o,"dw-header":_,"dw-header-login":k,"dw-footer":O},data:function(){return{currentHeader:"dw-header"}},mounted:function(){},methods:{}},M={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"dw-no-top-layout"}},[t("el-container",{staticStyle:{padding:"0px"}},[t("el-container",{staticStyle:{"z-index":"1"}},[t("el-container",[t("el-main",{staticStyle:{padding:"0px"}},[t("router-view")],1)],1)],1)],1)],1)},staticRenderFns:[]},$=s("VU/8")(j,M,!1,null,null,null).exports,H={name:"DwAnswer",mounted:function(){this.loadAnswer()},methods:{loadAnswer:function(){var e=this.$route.params.sid;window.location.href="/static/diaowen/answer-p.html?sid="+e}}},V={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("问卷加载中")])},staticRenderFns:[]};var z=s("VU/8")(H,V,!1,function(e){s("UTC3")},"data-v-56813a4f",null).exports;function G(e,t,s,n){var i={pageSize:e,current:t,surveyName:s,surveyState:n};return x({url:b.surveyList,method:"get",params:i})}function Y(e){return x({url:b.surveyCreate,method:"post",data:e})}function J(e,t){var s={fromSurveyId:e,surveyName:t,tag:"2"};return x({url:b.surveyCopy,method:"post",params:s})}function W(e){var t={id:e};return x({url:b.surveyInfo,method:"get",params:t})}function K(e){return x({url:b.surveyDelete,method:"delete",data:e})}function Z(e){return x({url:b.surveyAnswerDelete,method:"delete",data:e})}var X={name:"SurveyList",data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,dialogTitle:"创建问卷",formInline:{surveyName:null,surveyState:null},dialogFormVisible:!1,form:{name:"",id:null},formLabelWidth:"120px"}},mounted:function(){this.queryList(1)},methods:{buttonClickA:function(e){window.location.href=e},handlePush:function(e){this.$router.push(e)},handleCopy:function(e,t){console.log(e,t),this.form.id=t.id,void 0!==t.surveyNameText&&null!==t.surveyNameText?this.form.name=""+t.surveyNameText:this.form.name="复制问卷标题",this.dialogFormVisible=!0,this.dialogTitle="复制问卷"},handleDelete:function(e,t){var s=this;this.$msgbox.confirm("确认删除此问卷吗？","删除警告",{type:"warning",confirmButtonText:"确认删除"}).then(function(){K({id:[t.id]}).then(function(e){console.log(e),200===e.data.resultCode?(s.$message.success("删除成功，即将刷新数据。"),s.queryList(1)):s.$message.error("删除问卷失败")})}).catch(function(){})},onSubmit:function(){console.log("submit!"),this.queryList(1)},handleCurrentChange:function(e){this.queryList(e)},queryList:function(e){var t=this,s=this.formInline,n=s.surveyName,i=s.surveyState;G(this.pageSize,e,n,i).then(function(e){var s=e.data.data;t.tableData=s,t.total=e.data.total,t.currentPage=e.data.current,t.pageSize=e.data.pageSize})},handleDialogConfirm:function(){null===this.form.id?this.createSurvey():this.copySurvey(this.form.id)},createSurvey:function(){var e=this;Y({surveyName:this.form.name}).then(function(t){var s=t.data,n=s.data;200===s.resultCode?(e.dialogFormVisible=!1,e.$confirm("问卷创建成功，点击“继续编辑问卷”进入问卷编辑。","系统提示",{confirmButtonText:"继续编辑问卷"}).then(function(e){e.value;window.location.href="/static/diaowen/design.html?surveyId="+n.id}).catch(function(){e.queryList(1)})):e.$message.error("创建问卷失败")})},copySurvey:function(e){var t=this;J(e,this.form.name).then(function(e){var s=e.data,n=s.data;200===s.resultCode?(t.dialogFormVisible=!1,t.$confirm("问卷复制成功，点击“继续编辑问卷”进入问卷编辑。","系统提示",{confirmButtonText:"继续编辑问卷"}).then(function(e){e.value;window.location.href="/static/diaowen/design.html?surveyId="+n.id}).catch(function(){t.queryList(1)})):t.$message.error("问卷复制失败")})}}},ee={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"dw-table-form",staticStyle:{"padding-left":"60px"}},[s("el-form",{staticClass:"dw-form-inline",attrs:{inline:!0,model:e.formInline,size:"medium"}},[s("el-form-item",{attrs:{label:"问卷标题"}},[s("el-input",{attrs:{placeholder:"请输入查询的问卷标题",clearable:""},model:{value:e.formInline.surveyName,callback:function(t){e.$set(e.formInline,"surveyName",t)},expression:"formInline.surveyName"}})],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"40px"},attrs:{label:"问卷状态"}},[s("el-select",{attrs:{placeholder:"请选择问卷状态",clearable:""},model:{value:e.formInline.surveyState,callback:function(t){e.$set(e.formInline,"surveyState",t)},expression:"formInline.surveyState"}},[s("el-option",{attrs:{label:"设计中",value:"0"}}),e._v(" "),s("el-option",{attrs:{label:"收集中",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"收集结束",value:"2"}})],1)],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"40px"}},[s("el-button",{on:{click:e.onSubmit}},[e._v("重置")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),s("div",{staticClass:"dw-table"},[s("div",{staticClass:"dw-table-title"},[s("el-row",{attrs:{span:24,type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{attrs:{span:4}},[s("h3",[e._v("我的问卷")])]),e._v(" "),s("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.form.id=null,e.form.name=null,e.dialogTitle="创建问卷",e.dialogFormVisible=!0}}},[e._v("新建问卷")])],1)],1)],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{label:"问卷"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{domProps:{innerHTML:e._s(t.row.surveyName)}}),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[null!=t.row.surveyNameText?s("div",{domProps:{textContent:e._s(t.row.surveyNameText)}}):s("div",{domProps:{innerHTML:e._s(t.row.surveyName)}})])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"答卷数",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(null!=t.row.answerNum?t.row.answerNum:0)+" 份")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.surveyState?s("el-tag",[e._v("设计中")]):1===t.row.surveyState?s("el-tag",{attrs:{type:"success"}},[e._v("收集中")]):2===t.row.surveyState?s("el-tag",{attrs:{type:"info"}},[e._v("收集结束")]):s("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":""}},[e._v("未知")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("i",{staticClass:"el-icon-time"}),e._v(" "),s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.createDate))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button-group",[s("el-tooltip",{attrs:{effect:"dark",content:"编辑问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",content:"编辑问卷",icon:"el-icon-edit"},on:{click:function(s){return e.buttonClickA("/static/diaowen/design.html?surveyId="+t.row.id)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"答卷地址",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-share"},on:{click:function(s){return e.handlePush("/dw/survey/c/url/"+t.row.id)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"答卷数据",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-s-data"},on:{click:function(s){return e.handlePush("/dw/survey/d/chart/"+t.row.id)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"预览问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-view"},on:{click:function(s){return e.buttonClickA("/static/diaowen/preview.html?surveyId="+t.row.id)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"复制问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-copy-document"},on:{click:function(s){return e.handleCopy(t.$index,t.row)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"删除问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})],1)],1)]}}])})],1),e._v(" "),s("div",{staticClass:"dw-pagination"},[s("el-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.total,background:"",layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)],1)])],1),e._v(" "),s("div",[s("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{attrs:{model:e.form,"label-position":"top"}},[s("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"问卷标题"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"请输入问卷标题"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogConfirm}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var te=s("VU/8")(X,ee,!1,function(e){s("f6Xx")},"data-v-2a001fa8",null).exports,se={name:"DwSurveyDcsWrapper",props:{id:{type:String,default:""},isAnswerUrl:{type:Boolean,default:!1},isSurveySet:{type:Boolean,default:!1},isSiteShare:{type:Boolean,default:!1},isSiteComp:{type:Boolean,default:!1},isAnswerWx:{type:Boolean,default:!1},isSurveyChart:{type:Boolean,default:!1},isAnswerData:{type:Boolean,default:!1},isSurveyLog:{type:Boolean,default:!1},isAnswerLog:{type:Boolean,default:!1},isAnswerUrlV6:{type:Boolean,default:!1}},data:function(){return{survey:{sid:"",answerUrl:"",answerUrl1:"",answerUrlQR:"",siteCompCodeRoot:"",surveyState:""},prevPath:"/v6/dw"}},mounted:function(){console.debug(Object({NODE_ENV:"production",DW_API_URL:"http://192.168.3.32:8080",DW_WEB_URL:"http://192.168.3.32:8080",DW_RESOURCE_URL:"http://192.168.3.32:8080"})),this.getSurveyInfo()},methods:{buttonClickA:function(e){window.location.href=e},handlePush:function(e){this.$router.push(e)},surveyStateChange:function(){var e,t,s,n=this;console.debug(this.survey.surveyState),(e=this.$route.params.id,t=this.survey.surveyState,s={surveyId:e,surveyState:t},x({url:b.surveyUpState,method:"post",params:s})).then(function(e){200===e.data.resultCode?n.$message.success("问卷状态设置成功"):n.$message.error("问卷状态设置失败")})},getSurveyInfo:function(){var e=this;W(this.$route.params.id).then(function(t){var s=t.data.data;e.survey=s,e.survey.answerUrl=location.origin+"/#/diaowen/"+e.survey.sid,e.survey.answerUrl1=location.origin+"/static/diaowen/answer-p.html?sid="+e.survey.sid,e.survey.answerUrlQR="http://192.168.3.32:8080/api/dwsurvey/anon/response/answerTD.do?surveyId="+e.survey.id,e.survey.siteCompCodeRoot='<div id="dwsurveyWebAnswerCompCode"><div id="dwsurveyWebSiteFixed" style="position: fixed; right: 0px; left: auto; top: 520px; z-index: 99999;"><a target=\'_blank\' id="dwsurveyWebSiteFixedA" href="'+e.survey.answerUrl+'" style="background-color: rgb(24, 144, 255); width: 15px; display: block; padding: 10px 6px 10px 10px; color: white; cursor: pointer; float: right; vertical-align: middle; text-decoration: none; font-size: 12px; box-sizing: content-box; line-height: 20px;">问卷调查</a></div></div>',e.survey.surveyDetail.effective=1===s.surveyDetail.effective,e.survey.surveyDetail.effectiveIp=1===s.surveyDetail.effectiveIp,e.survey.surveyDetail.refresh=1===s.surveyDetail.refresh,e.survey.surveyDetail.rule=1===s.surveyDetail.rule,e.survey.surveyDetail.ynEndNum=1===s.surveyDetail.ynEndNum,e.survey.surveyDetail.ynEndTime=1===s.surveyDetail.ynEndTime,e.survey.answerUrlV6=location.origin+"/#/dw-v6/diaowen/"+e.survey.sid})}}},ne={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"dw-dcs-main"},[s("div",{staticClass:"dw-dcs-main-survey-title"},[s("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[s("el-col",[s("div",{staticClass:"dw-dcs-main-survey-title-content"},[null!=e.survey.surveyNameText?s("div",{domProps:{textContent:e._s(e.survey.surveyNameText)}}):s("div",{domProps:{innerHTML:e._s(e.survey.surveyName)}})])]),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-select",{attrs:{value:e.survey.surveyState,placeholder:"请选择"},on:{change:e.surveyStateChange},model:{value:e.survey.surveyState,callback:function(t){e.$set(e.survey,"surveyState",t)},expression:"survey.surveyState"}},[s("el-option",{key:"0",attrs:{value:0,label:"设计中"}}),e._v(" "),s("el-option",{key:"1",attrs:{value:1,label:"发布收集"}}),e._v(" "),s("el-option",{key:"2",attrs:{value:2,label:"收集结束"}})],1)],1)],1)],1),e._v(" "),s("div",{staticClass:"dw-dcs-main-survey-step"},[s("div",{staticClass:"dw-dcs-main-survey-step-item",staticStyle:{padding:"13px 16px"}},[s("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link dw-link-1",attrs:{to:"/"}},[s("i",{staticClass:"el-icon-edit"}),e._v("问卷设计")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link dw-link-1",class:{"dw-link-primary":e.isAnswerUrl||e.isSurveySet||e.isSiteShare||e.isSiteComp||e.isAnswerWx||e.isAnswerUrlV6},attrs:{to:e.prevPath+"/survey/c/url/"+e.survey.id}},[s("i",{staticClass:"el-icon-link"}),e._v("问卷收集")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link dw-link-1",class:{"dw-link-primary":e.isSurveyChart||e.isAnswerData},attrs:{to:e.prevPath+"/survey/d/chart/"+e.survey.id}},[s("i",{staticClass:"el-icon-s-data"}),e._v("问卷数据")])],1),e._v(" "),s("el-col",{staticStyle:{"text-align":"right"},attrs:{span:15}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handlePush("/dw-v6/diaowen/dw-design/survey/"+e.survey.id)}}},[e._v("问卷设计")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handlePush(e.prevPath+"/survey/c/url/"+e.survey.id)}}},[e._v("答卷地址")])],1)],1)],1),e._v(" "),s("div",{staticClass:"dw-dcs-main-survey-step-item",staticStyle:{"padding-left":"16px"}},[s("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isAnswerUrl||e.isSurveySet||e.isSiteShare||e.isSiteComp||e.isAnswerWx||e.isAnswerUrlV6,expression:"isAnswerUrl || isSurveySet || isSiteShare || isSiteComp || isAnswerWx || isAnswerUrlV6"}]},[s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerUrl},attrs:{to:e.prevPath+"/survey/c/url/"+e.survey.id}},[s("i",{staticClass:"el-icon-link"}),e._v("答卷地址")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerUrlV6},attrs:{to:e.prevPath+"/survey/c/url/"+e.survey.id}},[s("i",{staticClass:"el-icon-link"}),e._v("答卷地址V6")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSurveySet},attrs:{to:e.prevPath+"/survey/c/attr/"+e.survey.id}},[s("i",{staticClass:"el-icon-setting"}),e._v("答卷设置")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSiteComp},attrs:{to:e.prevPath+"/survey/c/comp/"+e.survey.id}},[s("i",{staticClass:"el-icon-discount"}),e._v("网站组件")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerWx},attrs:{to:e.prevPath+"/survey/c/weixin/"+e.survey.id}},[s("i",{staticClass:"el-icon-chat-dot-round"}),e._v("微信收集")])],1)],1),e._v(" "),s("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isSurveyChart||e.isAnswerData,expression:"isSurveyChart || isAnswerData"}]},[s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSurveyChart},attrs:{to:e.prevPath+"/survey/d/chart/"+e.survey.id}},[s("i",{staticClass:"el-icon-discount"}),e._v("默认统计")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerData},attrs:{to:e.prevPath+"/survey/d/data/"+e.survey.id}},[s("i",{staticClass:"el-icon-receiving"}),e._v("原始数据")])],1),e._v(" "),s("el-col",{attrs:{span:3}}),e._v(" "),s("el-col",{attrs:{span:3}})],1)],1),e._v(" "),s("div",{staticClass:"dw-dcs-main-survey-step-item dw-dcs-main-survey-step-item-status"},[s("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{attrs:{span:4}},[s("div",[e._v("状态：\n                  "),0===e.survey.surveyState?s("el-tag",{attrs:{size:"mini"}},[e._v("设计中")]):1===e.survey.surveyState?s("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("收集中")]):2===e.survey.surveyState?s("el-tag",{attrs:{type:"info",size:"mini"}},[e._v("收集结束")]):s("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":"",size:"mini"}},[e._v("未知")])],1)]),e._v(" "),s("el-col",{attrs:{span:4}},[s("div",[e._v("收集数："+e._s(null!=e.survey.answerNum?e.survey.answerNum:0)+" 份")])]),e._v(" "),s("el-col",{staticStyle:{"text-align":"right"},attrs:{span:16}},[e._v("\n                创建时间："+e._s(e.survey.createDate)+"\n              ")])],1)],1),e._v(" "),s("div",{staticClass:"dw-dcs-main-survey-step-main"},[e._t("dw-dcs-main-slot",null,{survey:e.survey})],2)])])])],1)],1)},staticRenderFns:[]};var ie=s("VU/8")(se,ne,!1,function(e){s("LYOq")},"data-v-9945ffae",null).exports,re={name:"DwSurveyAttr",components:{DwSurveyDcsWrapper:ie},data:function(){return{labelPosition:"right",value1:"",survey:{surveyDetail:{effective:!1,effectiveIp:!1}},form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}}},mounted:function(){this.getSurveyInfo()},methods:{getSurveyInfo:function(){var e=this;W(this.$route.params.id).then(function(t){var s=t.data.data;e.survey=s,e.survey.surveyDetail.effective=1===s.surveyDetail.effective,e.survey.surveyDetail.effectiveIp=1===s.surveyDetail.effectiveIp,e.survey.surveyDetail.refresh=1===s.surveyDetail.refresh,e.survey.surveyDetail.rule=3===s.surveyDetail.rule,e.survey.surveyDetail.ynEndNum=1===s.surveyDetail.ynEndNum,e.survey.surveyDetail.endNum=s.surveyDetail.endNum,e.survey.surveyDetail.ynEndTime=1===s.surveyDetail.ynEndTime,e.survey.surveyDetail.ruleCode=s.surveyDetail.ruleCode})},onSubmit:function(){var e=this;console.log("submit!");var t=this.survey.surveyDetail,s={dirId:t.dirId,effective:t.effective?1:0,effectiveIp:t.effectiveIp?1:0,refresh:t.refresh?1:0,rule:t.rule?3:0,ynEndNum:t.ynEndNum?1:0,ynEndTime:t.ynEndTime?1:0,endNum:t.endNum,endTime:t.endTime,ruleCode:t.ruleCode};console.log(s),function(e){return x({url:b.surveyUpdate,method:"put",data:e})}(s).then(function(t){console.log(t);var s=t.data;200===s.resultCode?e.$message({type:"success",message:"保存成功"}):e.$message({type:"error",message:s.resultMsg})})}}},oe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-survey-dcs-wrapper",{attrs:{"is-survey-set":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(){return[s("div",[s("div",{staticClass:"dw-dcs-main-title"},[s("h4",[e._v("问卷属性设置")]),e._v(" "),s("div",{staticClass:"dw-dcs-main-p"},[e._v("配置问卷答卷时的收集规则")])]),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[s("div",{staticStyle:{padding:"0px 30px"}},[s("el-form",{ref:"form",attrs:{"label-position":e.labelPosition,model:e.form}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("h5",[e._v("回答限制")]),e._v(" "),s("div",{staticStyle:{"padding-left":"10px"}},[s("el-form-item",[s("el-checkbox",{model:{value:e.survey.surveyDetail.effective,callback:function(t){e.$set(e.survey.surveyDetail,"effective",t)},expression:"survey.surveyDetail.effective"}},[e._v("每台电脑或手机只能答一次")])],1),e._v(" "),s("el-form-item",[s("el-checkbox",{model:{value:e.survey.surveyDetail.effectiveIp,callback:function(t){e.$set(e.survey.surveyDetail,"effectiveIp",t)},expression:"survey.surveyDetail.effectiveIp"}},[e._v("每个IP只能答一次")])],1),e._v(" "),s("el-form-item",[s("el-checkbox",{model:{value:e.survey.surveyDetail.refresh,callback:function(t){e.$set(e.survey.surveyDetail,"refresh",t)},expression:"survey.surveyDetail.refresh"}},[e._v("有重复回答启用验证码")])],1),e._v(" "),s("el-form-item",[s("el-checkbox",{model:{value:e.survey.surveyDetail.rule,callback:function(t){e.$set(e.survey.surveyDetail,"rule",t)},expression:"survey.surveyDetail.rule"}},[e._v("启用访问密码，设置密码")]),e._v(" "),s("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入内容"},model:{value:e.survey.surveyDetail.ruleCode,callback:function(t){e.$set(e.survey.surveyDetail,"ruleCode",t)},expression:"survey.surveyDetail.ruleCode"}})],1)],1)]),e._v(" "),s("el-col",{attrs:{span:12}},[s("h5",[e._v("何时结束")]),e._v(" "),s("div",{staticStyle:{"padding-left":"10px"}},[s("el-form-item",[s("el-checkbox",{model:{value:e.survey.surveyDetail.ynEndNum,callback:function(t){e.$set(e.survey.surveyDetail,"ynEndNum",t)},expression:"survey.surveyDetail.ynEndNum"}},[e._v("收集到\n                        "),s("el-input-number",{attrs:{min:1,max:1e5,label:"份数","controls-position":"right"},model:{value:e.survey.surveyDetail.endNum,callback:function(t){e.$set(e.survey.surveyDetail,"endNum",t)},expression:"survey.surveyDetail.endNum"}}),e._v("\n                        份时结束")],1)],1),e._v(" "),s("el-form-item",[s("el-checkbox",{model:{value:e.survey.surveyDetail.ynEndTime,callback:function(t){e.$set(e.survey.surveyDetail,"ynEndTime",t)},expression:"survey.surveyDetail.ynEndTime"}},[e._v("时间到\n                        "),s("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.survey.surveyDetail.endTime,callback:function(t){e.$set(e.survey.surveyDetail,"endTime",t)},expression:"survey.surveyDetail.endTime"}}),e._v("\n                        时结束\n                      ")],1)],1)],1)])],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(" 保存修改 ")]),e._v(" "),s("el-button",[e._v("取消")])],1)],1)],1)])])]},proxy:!0}])})],1)},staticRenderFns:[]};var ae=s("VU/8")(re,oe,!1,function(e){s("8Z74")},"data-v-6f342194",null).exports,ue=s("TQvf"),le=s.n(ue),de={name:"DwAnswerUrlMain",components:{Clipboard:le.a},props:{survey:{type:Object,default:function(){}}},methods:{downloadAnswerImg:function(e){console.debug(e),window.location.href=e},copyActiveCode:function(e,t){var s=this;console.debug(this.survey);var n=new le.a(e.target,{text:function(){return t}});n.on("success",function(e){s.$message({type:"success",message:"复制成功"}),n.off("error"),n.off("success"),n.destroy()}),n.on("error",function(e){s.$message({type:"warning",message:"该浏览器不支持自动复制"}),n.off("error"),n.off("success"),n.destroy()}),n.onClick(e)}}},ce={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[e._m(0),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[e._m(1),e._v(" "),s("el-input",{staticStyle:{width:"500px"},attrs:{id:"copyCodeInput",readonly:""},model:{value:e.survey.answerUrl,callback:function(t){e.$set(e.survey,"answerUrl",t)},expression:"survey.answerUrl"}}),e._v(" "),s("el-button-group",[s("el-button",{attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,e.survey.answerUrl)}}},[e._v("复制地址")]),e._v(" "),s("el-link",{attrs:{href:e.survey.answerUrl,underline:!1,target:"_blank"}},[s("el-button",{staticStyle:{"border-bottom-left-radius":"0px","border-top-left-radius":"0px"},attrs:{icon:"el-icon-link"}},[e._v("打开问卷")])],1)],1)],1),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[e._m(2),e._v(" "),s("el-input",{staticStyle:{width:"500px"},attrs:{id:"copyCodeInput",readonly:""},model:{value:e.survey.answerUrl1,callback:function(t){e.$set(e.survey,"answerUrl1",t)},expression:"survey.answerUrl1"}}),e._v(" "),s("el-button-group",[s("el-button",{attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,e.survey.answerUrl1)}}},[e._v("复制地址")]),e._v(" "),s("el-link",{attrs:{href:e.survey.answerUrl1,underline:!1,target:"_blank"}},[s("el-button",{staticStyle:{"border-bottom-left-radius":"0px","border-top-left-radius":"0px"},attrs:{icon:"el-icon-link"}},[e._v("打开问卷")])],1)],1)],1)]),e._v(" "),s("div",[e._m(3),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[s("el-row",{attrs:{type:"flex",justify:"start",align:"middle"}},[s("el-col",{attrs:{span:4}},[s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:e.survey.answerUrlQR}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n              加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.downloadAnswerImg(e.survey.answerUrlQR+"&down=1")}}},[e._v("下载二维码")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-dcs-main-title"},[t("h4",[this._v("答卷地址")]),this._v(" "),t("div",{staticClass:"dw-dcs-main-p"},[this._v("复制下面的问卷链接到QQ，Email等工具中直接发给被用户")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-dcs-main-title"},[t("div",{staticClass:"dw-dcs-main-p"},[this._v("简短地址：此地址只支持现代浏览器")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-dcs-main-title"},[t("div",{staticClass:"dw-dcs-main-p"},[this._v("\n          兼容地址：此地址支持所有浏览器中使用，如IE等。\n        ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-dcs-main-title"},[t("h4",[this._v("二维码地址")]),this._v(" "),t("div",{staticClass:"dw-dcs-main-p"},[this._v("通过手机扫一扫，或下载二维码，即可进行问卷数据收集。")])])}]};var ve={name:"DwAnswerUrl",components:{DwSurveyDcsWrapper:ie,DwAnswerUrlMain:s("VU/8")(de,ce,!1,function(e){s("Fa0r")},"data-v-3c1b10bc",null).exports}},pe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-survey-dcs-wrapper",{attrs:{id:e.id,"is-answer-url":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){var n=t.survey;return[n?s("dw-answer-url-main",{attrs:{survey:n}}):e._e()]}}])})],1)},staticRenderFns:[]},me=s("VU/8")(ve,pe,!1,null,null,null).exports,ye={name:"DwSiteComp",components:{DwSurveyDcsWrapper:ie,Clipboard:le.a},data:function(){return{color1:"#409EFF",color2:"#FFFFFF",value:60,radio:"右边",siteCompCode:'<div id="dwsurveyWebSiteFixed" style="position: fixed; right: 0px; left: auto; top: 520px; z-index: 99999;"><a target=\'_blank\' id="dwsurveyWebSiteFixedA" href="" style="background-color: rgb(24, 144, 255); width: 15px; display: block; padding: 10px 6px 10px 10px; color: white; cursor: pointer; float: right; vertical-align: middle; text-decoration: none; font-size: 12px; box-sizing: content-box; line-height: 20px;">问卷调查</a></div>'}},methods:{copyActiveCode:function(e,t){var s=this,n=document.getElementById("dwsurveyWebAnswerCompCode");this.siteCompCode=n.innerHTML;var i=new le.a(e.target,{text:function(){return s.siteCompCode}});i.on("success",function(e){s.$message({type:"success",message:"复制成功"}),i.off("error"),i.off("success"),i.destroy()}),i.on("error",function(e){s.$message({type:"waning",message:"该浏览器不支持自动复制"}),i.off("error"),i.off("success"),i.destroy()}),i.onClick(e)},handleSlider:function(e){var t=window.innerHeight-10*e;t<0&&(t=0);var s=document.getElementById("dwsurveyWebAnswerCompCode");document.getElementById("dwsurveyWebSiteFixed").style.top=t+"px",console.debug(s.innerHTML),this.siteCompCode=s.innerHTML},handleLRButton:function(e){console.debug(e);var t=document.getElementById("dwsurveyWebAnswerCompCode"),s=document.getElementById("dwsurveyWebSiteFixed");"左边"===e?(s.style.left="0px",s.style.right="auto"):(s.style.left="auto",s.style.right="0px"),console.debug(t.innerHTML),this.siteCompCode=t.innerHTML},handleBgColor:function(e){var t=document.getElementById("dwsurveyWebAnswerCompCode");document.getElementById("dwsurveyWebSiteFixedA").style.backgroundColor=e,console.debug(t.innerHTML),this.siteCompCode=t.innerHTML},handleTextColor:function(e){var t=document.getElementById("dwsurveyWebAnswerCompCode");document.getElementById("dwsurveyWebSiteFixedA").style.color=e,console.debug(t.innerHTML),this.siteCompCode=t.innerHTML}}},fe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-survey-dcs-wrapper",{attrs:{"is-site-comp":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){var n=t.survey;return[s("div",[s("div",{staticClass:"dw-dcs-main-title"},[s("h4",[e._v("通过网站挂件快速收集问卷")]),e._v(" "),s("div",{staticClass:"dw-dcs-main-p"},[e._v("复制右边生成的挂件代码，放入网站Footer页中即可实现全站带有答卷挂件。")])]),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"})]),e._v(" "),s("div",[s("el-row",[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"site-comp-left"},[s("div",{staticClass:"site-comp-left-title"},[e._v("风格设置")]),e._v(" "),s("div",[s("el-row",[s("el-col",{attrs:{span:16}},[s("div",{staticClass:"dw-c-from-item"},[e._v("挂件位置：\n                      "),s("el-radio-group",{attrs:{size:"small"},on:{change:function(t){return e.handleLRButton(t)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[s("el-radio-button",{attrs:{label:"左边"}}),e._v(" "),s("el-radio-button",{attrs:{label:"右边"}})],1)],1),e._v(" "),s("div",{staticClass:"dw-c-from-item dw-c-from-item-color"},[s("span",[e._v("背景颜色：")]),e._v(" "),s("el-color-picker",{on:{"active-change":function(t){return e.handleBgColor(t)}},model:{value:e.color1,callback:function(t){e.color1=t},expression:"color1"}})],1),e._v(" "),s("div",{staticClass:"dw-c-from-item dw-c-from-item-color"},[s("span",[e._v("文字颜色：")]),e._v(" "),s("el-color-picker",{on:{"active-change":function(t){return e.handleTextColor(t)}},model:{value:e.color2,callback:function(t){e.color2=t},expression:"color2"}})],1)]),e._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"dw-c-from-item"},[s("div",[e._v("挂件高度：")]),e._v(" "),s("div",{staticStyle:{"margin-top":"15px"}},[s("el-slider",{attrs:{vertical:"",height:"200px"},on:{input:e.handleSlider},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),s("div",{staticStyle:{"padding-top":"15px"}},[s("el-input-number",{attrs:{min:1,max:100,"controls-position":"right",size:"small"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)])])],1)],1)])]),e._v(" "),s("el-col",{staticStyle:{"text-align":"center",color:"rgb(211, 211, 211)"},attrs:{span:2}},[s("i",{staticClass:"el-icon-right"})]),e._v(" "),s("el-col",{attrs:{span:14}},[s("div",{staticClass:"site-comp-right"},[s("div",[s("el-input",{attrs:{autosize:{minRows:2,maxRows:8},type:"textarea",placeholder:"请输入内容",disabled:""},model:{value:e.siteCompCode,callback:function(t){e.siteCompCode=t},expression:"siteCompCode"}})],1),e._v(" "),s("div",{staticStyle:{"padding-top":"10px"}},[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,e.siteCompCode)}}},[e._v("复制挂件代码")])],1)])])],1),e._v(" "),s("div",{domProps:{innerHTML:e._s(n.siteCompCodeRoot)}})],1)]}}])})],1)},staticRenderFns:[]};var he=s("VU/8")(ye,fe,!1,function(e){s("+Zdd")},"data-v-13096ebc",null).exports,we={name:"DwSiteShare",components:{DwSurveyDcsWrapper:ie,Clipboard:le.a},data:function(){return{code:"http://ent.surveyform.cn/#/diaowen/wdhl2uv6e9x",src:"https://ent.surveyform.cn/api/dwsurvey/anon/response/answerTD.do?surveyId=465d3020-0880-4c37-ab09-cc40869758de"}},methods:{copyActiveCode:function(e,t){var s=this,n=new le.a(e.target,{text:function(){return t}});n.on("success",function(e){s.$message({type:"success",message:"复制成功"}),n.off("error"),n.off("success"),n.destroy()}),n.on("error",function(e){s.$message({type:"waning",message:"该浏览器不支持自动复制"}),n.off("error"),n.off("success"),n.destroy()}),n.onClick(e)}}},ge={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-survey-dcs-wrapper",{attrs:{"is-site-share":"true"}},[t("div",{attrs:{slot:"dw-dcs-main-slot"},slot:"dw-dcs-main-slot"},[t("div",[t("div",{staticClass:"dw-dcs-main-title"},[t("h4",[this._v("分享到社交网络")]),this._v(" "),t("div",{staticClass:"dw-dcs-main-p"},[this._v("赶快分享您的问卷到各大社交网站，让更多关注您的朋友来回答问卷。")])]),this._v(" "),t("div",{staticClass:"dw-dcs-main-content"})])])])],1)},staticRenderFns:[]};var xe=s("VU/8")(we,ge,!1,function(e){s("0xJ2")},"data-v-7a90d161",null).exports,be={name:"DwAnswerWeixin",components:{DwSurveyDcsWrapper:ie,Clipboard:le.a},data:function(){return{code:"http://ent.surveyform.cn/#/diaowen/wdhl2uv6e9x",src:"https://ent.surveyform.cn/api/dwsurvey/anon/response/answerTD.do?surveyId=465d3020-0880-4c37-ab09-cc40869758de"}},methods:{copyActiveCode:function(e,t){var s=this,n=new le.a(e.target,{text:function(){return t}});n.on("success",function(e){s.$message({type:"success",message:"复制成功"}),n.off("error"),n.off("success"),n.destroy()}),n.on("error",function(e){s.$message({type:"waning",message:"该浏览器不支持自动复制"}),n.off("error"),n.off("success"),n.destroy()}),n.onClick(e)}}},qe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-survey-dcs-wrapper",{attrs:{"is-answer-wx":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){var n=t.survey;return[s("div",[s("div",{staticClass:"dw-dcs-main-title"},[s("h4",[e._v("通过微信二维码发送或分享给好友")]),e._v(" "),s("div",{staticClass:"dw-dcs-main-p"},[e._v("通过手机扫一扫，或下载二维码，发送或分享给好友，即可进行问卷数据收集。")])]),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[s("el-row",{attrs:{type:"flex",justify:"start",align:"middle"}},[s("el-col",{attrs:{span:4}},[s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:n.answerUrlQR}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                  加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-download"}},[e._v("下载二维码")]),e._v(" "),s("div",{staticClass:"dw-dcs-main-p",staticStyle:{padding:"10px"}},[e._v("通过手机扫一扫，或下载二维码，即可进行问卷数据收集。")])],1)],1)],1)]),e._v(" "),s("div",[s("div",{staticClass:"dw-dcs-main-title"},[s("h4",[e._v("微信公众号分享")]),e._v(" "),s("div",{staticClass:"dw-dcs-main-p"},[e._v("通过微信公众号，发送或分享给被访者。")])]),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[s("div",{staticStyle:{"background-color":"#F1F1F1",padding:"10px"}},[s("el-row",{attrs:{type:"flex",gutter:"20",justify:"start",align:"middle"}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("1、使用微信扫一扫功能。")]),e._v(" "),s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_collect1.jpg"}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("2、打开问卷后，点击右上角的“分享”按钮。")]),e._v(" "),s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_collect2.jpg"}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("3、选择“发送给朋友”或“分享到朋友圈”")]),e._v(" "),s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_collect3.jpg"}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1)],1)],1)])]),e._v(" "),s("div",[s("div",{staticClass:"dw-dcs-main-title"},[s("h4",[e._v("通过微信公众号")]),e._v(" "),s("div",{staticClass:"dw-dcs-main-p"},[e._v("复制下面的问卷链接到QQ，Email等工具中直接发给被用户")])]),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[s("div",[s("el-input",{staticStyle:{width:"400px"},attrs:{id:"copyCodeInput",readonly:""},model:{value:n.answerUrl,callback:function(t){e.$set(n,"answerUrl",t)},expression:"survey.answerUrl"}}),e._v(" "),s("el-button-group",[s("el-button",{attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,n.answerUrl)}}},[e._v("复制地址")])],1)],1),e._v(" "),s("div",{staticStyle:{padding:"10px","background-color":"#F1F1F1","margin-top":"20px"}},[s("el-row",{attrs:{type:"flex",gutter:"20",justify:"start",align:"top"}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("1、打开公众账号。")]),e._v(" "),s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_b_s3.png"}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("2、将链接放入公众号中确认后推送文章。")]),e._v(" "),s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_b_s4.jpeg"}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1)],1)],1)])])]}}])})],1)},staticRenderFns:[]};var Ce=s("VU/8")(be,qe,!1,function(e){s("ORmu")},"data-v-154202b4",null).exports,_e=s("Qf3D"),Ae=s("XReE"),Se=s("mCPF"),ke=s("tJVo"),Te=s("S+cJ");_e.b([Ae.a,Se.b,Se.a,Te.a,ke.b,Ae.c,Ae.d,Ae.b,Se.c,ke.a]);var Ie={name:"DwsurveyChartsCommon",props:{question:{type:Object,default:function(){return[]}},index:{type:Number,default:0}},data:function(){return{activeName:"bar"}},mounted:function(){console.debug("this.question"),console.debug(this.question);var e=document.getElementById(this.question.id).getElementsByClassName("dwsurveyMain");this.loadChart(e[0],"bar")},methods:{handleClick:function(e,t){console.log(e,t),console.debug(this.activeName),e.$el.style.display="block";var s=e.$el.getElementsByClassName("dwsurveyMain"),n=this.activeName;this.loadChart(s[0],n)},loadChart:function(e,t){var s=_e.a(e),n=this.buildOption(this.question,t);n&&s.setOption(n)},buildOption:function(e,t){for(var s=[],n=[],i=[],r=e.quStatOptions,o=0;o<r.length;o++)s.push(r[o].optionName),n.push(r[o].anCount),i.push({value:r[o].anCount,name:r[o].optionName});console.debug(s);var a=!0;"ORDERQU"===e.quType&&(a=!1);var u=void 0;return"line"===t||"bar"===t?u={xAxis:{nameTextStyle:{},nameGap:20,axisLabel:{rotate:-10,interval:0},type:"category",data:s},yAxis:{type:"value",show:a},series:[{data:n,type:t}]}:"barY"===t?u={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01],show:a},yAxis:{type:"category",data:s},series:[{type:"bar",data:n}]}:"pie"===t&&(u={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"Access From",type:"pie",radius:"50%",data:i,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}),u}}},Oe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{width:"100%"}},[s("div",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[s("span",[e._v(e._s(e.index+1)+"、")]),e._v(" "),s("span",{domProps:{innerHTML:e._s(e.question.quTitle)}}),e._v(" "),s("span",[e._v("【"+e._s(e.question.quTypeName)+"】")])]),e._v(" "),"FILLBLANK"===e.question.quType||"UPLOADFILE"===e.question.quType?s("div",{staticStyle:{padding:"30px"}},[e._v("\n    填写回答："+e._s(e.question.anCount)+" 份\n  ")]):e._e(),e._v(" "),"FILLBLANK"!==e.question.quType&&"UPLOADFILE"!==e.question.quType?s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.question.quStatOptions}},[s("el-table-column",{attrs:{prop:"optionName",label:"题目选项"}}),e._v(" "),s("el-table-column",{attrs:{label:"SCORE"===e.question.quType?"占总分比例":"ORDERQU"===e.question.quType?"排名比例":"MULTIFILLBLANK"===e.question.quType?"填写比例":"频次比例",width:"330"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:e.row.percent}})]}}],null,!1,662113522)}),e._v(" "),"RADIO"===e.question.quType||"CHECKBOX"===e.question.quType?s("el-table-column",{attrs:{label:"频次",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.anCount)+" 次")]}}],null,!1,2232316475)}):e._e(),e._v(" "),"SCORE"===e.question.quType?s("el-table-column",{attrs:{label:"平均分",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("平均 "+e._s(t.row.anCount)+" 分")]}}],null,!1,3397111011)}):e._e(),e._v(" "),"ORDERQU"===e.question.quType?s("el-table-column",{attrs:{label:"排名",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("第 "+e._s(t.row.orderNum)+" 名")]}}],null,!1,1867559684)}):e._e(),e._v(" "),"MULTIFILLBLANK"===e.question.quType?s("el-table-column",{attrs:{label:"填写次数",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.anCount)+" 次")]}}],null,!1,2232316475)}):e._e()],1),e._v(" "),s("div",[s("el-tabs",{staticStyle:{width:"100%"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"柱状图",name:"bar"}},[s("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),s("el-tab-pane",{attrs:{label:"拆线图",name:"line"}},[s("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),s("el-tab-pane",{attrs:{label:"拼状图",name:"pie"}},[s("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),s("el-tab-pane",{attrs:{label:"条形图",name:"barY"}},[s("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})])],1)],1)],1):e._e()])},staticRenderFns:[]};var De={name:"DwSurveyCharts",components:{DwSurveyDcsWrapper:ie,DwSurveyChartsCommon:s("VU/8")(Ie,Oe,!1,function(e){s("BVzi")},"data-v-79144ca0",null).exports},data:function(){return{questions:[],loading:!0}},mounted:function(){this.surveyChartData()},methods:{surveyChartData:function(){var e,t,s=this;(e=this.$route.params.id,t={surveyId:e},x({url:b.surveyReport,method:"get",params:t})).then(function(e){var t,n=e.data.data;s.questions=n.questions,s.questions.length<=0&&(t="问卷还没有任何题目",Object(m.Message)({message:t,type:"info",duration:5e3}),s.loading=!1);for(var i=0;i<s.questions.length;i++){var r=s.questions[i],o=r.anCount,a=void 0;"CHECKBOX"===r.quType?(r.quTypeName="多选题",a=r.quCheckboxs):"RADIO"===r.quType?(r.quTypeName="单选题",a=r.quRadios):"FILLBLANK"===r.quType?r.quTypeName="填空题":"SCORE"===r.quType?(r.quTypeName="评分题",a=r.quScores):"ORDERQU"===r.quType?(r.quTypeName="排序题",a=r.quOrderbys):"MULTIFILLBLANK"===r.quType?(r.quTypeName="多项填空题",a=r.quMultiFillblanks):r.quTypeName=r.quType;var u=[];if("RADIO"===r.quType||"CHECKBOX"===r.quType||"SCORE"===r.quType||"ORDERQU"===r.quType||"MULTIFILLBLANK"===r.quType)for(var l=0;l<a.length;l++){var d=a[l],c=void 0;if("RADIO"===r.quType||"CHECKBOX"===r.quType){var v=d.anCount;0===o&&(o=1),null===v&&(a[l].anCount=0);var p=(v/o*100).toFixed(2);a[l].percent=p,c={optionName:d.optionName,anCount:d.anCount,percent:p}}else if("SCORE"===r.quType){var y=d.avgScore,f=(y/r.paramInt02*100).toFixed(2),h=y.toFixed(2);c={optionName:d.optionName,anCount:h,percent:f}}else if("ORDERQU"===r.quType){var w=((a.length-l)/((1+a.length)*a.length/2)*100).toFixed(2);c={optionName:d.optionName,anCount:a.length-l,orderNum:l+1,percent:w}}else if("MULTIFILLBLANK"===r.quType){var g=d.anCount;0===o&&(o=1),null===g&&(a[l].anCount=0);var x=(g/o*100).toFixed(2);a[l].percent=x,c={optionName:d.optionName,anCount:d.anCount,percent:x}}u.push(c)}s.questions[i].quStatOptions=u}s.loading=!1})}}},Ee={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-survey-dcs-wrapper",{attrs:{id:e.id,"is-survey-chart":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){return t.survey,[s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},e._l(e.questions,function(e,t){return s("dw-survey-charts-common",{key:e.id,attrs:{id:e.id,index:t,question:e}})}),1)]}}])})],1)},staticRenderFns:[]},Pe=s("VU/8")(De,Ee,!1,null,null,null).exports,Re={name:"DwSurveyAnswer",components:{DwSurveyDcsWrapper:ie},data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,dialogFormVisible:!1,expUpQu:0}},mounted:function(){this.queryList(1)},methods:{handleGo:function(e){this.$router.push(e)},handlePush:function(e){this.$router.push(e)},handleDelete:function(e,t){var s=this;console.log(e,t),this.$msgbox.confirm("确认删除此条答卷吗？","删除警告",{type:"warning",confirmButtonText:"确认删除"}).then(function(){Z({id:[t.id]}).then(function(e){console.log(e),200===e.data.resultCode?(s.$message.success("删除成功，即将刷新数据。"),s.queryList(1)):s.$message.error("删除答卷失败")})}).catch(function(){})},handleCurrentChange:function(e){this.queryList(e)},handleExport:function(){this.dialogFormVisible=!0},executeExportData:function(){var e="http://192.168.3.32:8080"+b.surveyAnswerExport+"?surveyId="+this.$route.params.id+"&expUpQu="+this.expUpQu;this.dialogFormVisible=!1,window.location.href=e},queryList:function(e){var t,s,n,i,r=this;(t=this.pageSize,s=e,n=this.$route.params.id,i={pageSize:t,current:s,surveyId:n},x({url:b.surveyAnswerList,method:"get",params:i})).then(function(e){var t=e.data.data;r.tableData=t,r.total=e.data.total,r.currentPage=e.data.current,r.pageSize=e.data.pageSize})}}},Ne={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-survey-dcs-wrapper",{attrs:{id:e.id,"is-answer-data":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){return t.survey,[s("div",{staticClass:"dw-dcs-main-title"},[s("el-row",{attrs:{type:"flex"}},[s("el-col",{attrs:{span:18}},[s("div",{staticStyle:{"font-size":"14px",padding:"10px"}},[s("strong",[e._v("原始数据列表")])])]),e._v(" "),s("el-col",{staticStyle:{"text-align":"right","padding-right":"16px"},attrs:{span:6}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleExport}},[e._v("导出数据")])],1)],1)],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{label:"回答IP"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{domProps:{innerHTML:e._s(t.row.ipAddr)}}),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{domProps:{innerHTML:e._s(t.row.ipAddr)}})])])]}}],null,!0)}),e._v(" "),s("el-table-column",{attrs:{label:"回答的题数"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(null!=t.row.completeItemNum?t.row.completeItemNum:0)+" 题")])]}}],null,!0)}),e._v(" "),s("el-table-column",{attrs:{label:"回答时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("i",{staticClass:"el-icon-time"}),e._v(" "),s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.endAnDate))])]}}],null,!0)}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button-group",[s("el-tooltip",{attrs:{effect:"dark",content:"查看数据",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-view"},on:{click:function(s){return e.handleGo("/no-top/dw-survey/d/data/"+t.row.surveyId+"/"+t.row.id)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"删除数据",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})],1)],1)]}}],null,!0)})],1),e._v(" "),s("div",{staticClass:"dw-pagination"},[s("el-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.total,background:"",layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)]}}])}),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogFormVisible,"append-to-body":"",title:"导出答卷数据",width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("div",{staticStyle:{"line-height":"30px"}},[e._v("是否同时下载上传题的文件")]),e._v(" "),s("div",{staticStyle:{color:"grey","line-height":"30px","font-size":"12px"}},[s("span",[e._v("如果有上传题，选择压缩下载可能比较占用系统资源及时间，请在空闲时间压缩下载")])]),e._v(" "),s("el-switch",{attrs:{"active-text":"同时压缩上传的文件并下载","inactive-text":"仅下载数据Excel","active-value":"1","inactive-value":"0"},model:{value:e.expUpQu,callback:function(t){e.expUpQu=t},expression:"expUpQu"}}),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.executeExportData}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Le=s("VU/8")(Re,Ne,!1,function(e){s("Dr96")},"data-v-686292d0",null).exports,Fe={name:"DwSurveyAnswerInfo",props:{question:{type:Object,default:function(){return[]}},index:{type:Number,default:0}},data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,radio:3,formSize:"medium",rateValue:3.7,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],value:"",dwResourceUrl:""}},mounted:function(){console.debug("http://192.168.3.32:8080"),this.dwResourceUrl="http://192.168.3.32:8080"},methods:{goBack:function(){this.$router.back()},handleInfo:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},handleCurrentChange:function(e){this.queryList(e)}}},Qe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px","label-position":"left"}},[s("div",{staticClass:"dw-qu-item"},[s("div",{staticClass:"dw-qu-item-title"},[s("span",[e._v(e._s(e.index+1)+"、")]),e._v(" "),s("span",{domProps:{innerHTML:e._s(e.question.quTitle)}}),e._v(" "),s("span",[e._v("【"+e._s(e.question.quTypeName)+"】")])]),e._v(" "),s("div",{staticClass:"dw-qu-item-body"},["RADIO"===e.question.quType?s("div",[s("div",[s("el-radio-group",{model:{value:e.question.anRadio.quItemId,callback:function(t){e.$set(e.question.anRadio,"quItemId",t)},expression:"question.anRadio.quItemId"}},e._l(e.question.quRadios,function(t){return s("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.optionName))])}),1)],1),e._v(" "),s("div",[s("span",[e._v(e._s(e.question.anRadio.otherText))])])]):e._e(),e._v(" "),"CHECKBOX"===e.question.quType?s("div",e._l(e.question.quCheckboxs,function(t){return s("el-checkbox",{key:t.id,attrs:{label:t.id,checked:t.answer}},[e._v(e._s(t.optionName))])}),1):e._e(),e._v(" "),"FILLBLANK"===e.question.quType?s("div",[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-input",{attrs:{readonly:""},model:{value:e.question.anFillblank.answer,callback:function(t){e.$set(e.question.anFillblank,"answer",t)},expression:"question.anFillblank.answer"}})],1)],1)],1):e._e(),e._v(" "),"MULTIFILLBLANK"===e.question.quType?s("div",e._l(e.question.quMultiFillblanks,function(t,n){return s("el-form-item",{key:t.id,attrs:{label:n+1+"、"+t.optionName}},[s("el-input",{staticStyle:{width:"360px"},model:{value:t.answer,callback:function(s){e.$set(t,"answer",s)},expression:"item.answer"}})],1)}),1):e._e(),e._v(" "),"SCORE"===e.question.quType?s("div",e._l(e.question.quScores,function(t,n){return s("el-form-item",{key:t.id,attrs:{label:n+1+"、"+t.optionName}},[s("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:t.answer,callback:function(s){e.$set(t,"answer",s)},expression:"item.answer"}})],1)}),1):e._e(),e._v(" "),"ORDERQU"===e.question.quType?s("div",e._l(e.question.quOrderbys,function(t,n){return s("el-form-item",{key:t.id,attrs:{label:n+1+"、"+t.optionName}},[s("el-input",{staticStyle:{width:"360px"},model:{value:t.answer,callback:function(s){e.$set(t,"answer",s)},expression:"item.answer"}})],1)}),1):e._e(),e._v(" "),"UPLOADFILE"===e.question.quType?s("div",e._l(e.question.anUplodFiles,function(t){return s("div",{key:t.id},[s("a",{attrs:{href:""+e.dwResourceUrl+t.filePath,target:"_blank"}},[e._v(e._s(t.fileName))])])}),0):e._e()])])])],1)},staticRenderFns:[]};var Ue={name:"DwSurveyAnswerInfo",components:{DwSurveyDcsWrapper:ie,DwSurveyAnswerQuCommon:s("VU/8")(Fe,Qe,!1,function(e){s("2RYx")},"data-v-47f964f4",null).exports},data:function(){return{survey:{questions:[]},tableData:[],pageSize:10,currentPage:1,total:0,radio:3,formSize:"medium",rateValue:3.7,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],value:""}},mounted:function(){this.querySurveyAnswer(1)},methods:{goBack:function(){this.$router.back()},handleInfo:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},querySurveyAnswer:function(){var e,t,s=this;(e=this.$route.params.answerId,t={answerId:e},x({url:b.surveyAnswerInfo,method:"get",params:t})).then(function(e){var t=e.data.data;s.survey=t;for(var n=0;n<s.survey.questions.length;n++){var i=s.survey.questions[n],r=i.quType,o=void 0;if("CHECKBOX"===r?(i.quTypeName="多选题",o=i.quCheckboxs):"RADIO"===r?(i.quTypeName="单选题",o=i.quRadios):"FILLBLANK"===r?i.quTypeName="填空题":"SCORE"===r?(i.quTypeName="评分题",o=i.quScores):"ORDERQU"===r?(i.quTypeName="排序题",o=i.quOrderbys):"MULTIFILLBLANK"===r?(i.quTypeName="多项填空题",o=i.quMultiFillblanks):i.quTypeName="UPLOADFILE"===r?"文件上传题":r,"CHECKBOX"===r||"SCORE"===r||"ORDERQU"===r||"MULTIFILLBLANK"===r)for(var a=0;a<o.length;a++){var u=o[a];if("CHECKBOX"===r){for(var l=i.anCheckboxs,d=0;d<l.length;d++)if(l[d].quItemId===u.id){u.answer=!0;break}}else if("SCORE"===r){for(var c=i.anScores,v=0;v<c.length;v++)if(c[v].quRowId===u.id&&null!=c[v].answserScore){u.answer=parseInt(c[v].answserScore);break}}else if("ORDERQU"===r){for(var p=i.anOrders,m=0;m<p.length;m++)if(p[m].quRowId===u.id){u.answer=p[m].orderyNum;break}}else if("MULTIFILLBLANK"===r)for(var y=i.anDFillblanks,f=0;f<y.length;f++)if(y[f].quItemId===u.id){u.answer=y[f].answer;break}}}})},handleCurrentChange:function(e){}}},Be={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-page-header",{staticClass:"dw-page-header",attrs:{content:"答卷详情"},on:{back:e.goBack}}),e._v(" "),s("div",{staticClass:"dw-answer-content"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[s("el-col",{attrs:{span:16,push:4}},[s("div",{staticStyle:{background:"white"}},[s("el-descriptions",{attrs:{column:3,border:""}},[s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-location-information"}),e._v(" 答卷IP\n              ")]),e._v("\n              "+e._s(e.survey.surveyAnswer.ipAddr)+"\n            ")],2),e._v(" "),s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-timer"}),e._v("\n                答卷时间\n              ")]),e._v("\n              "+e._s(e.survey.surveyAnswer.endAnDate)+"\n            ")],2),e._v(" "),s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-monitor"}),e._v("\n                答题数\n              ")]),e._v("\n              "+e._s(e.survey.surveyAnswer.completeItemNum)+"\n            ")],2),e._v(" "),s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-price-tag"}),e._v(" 答卷ID\n              ")]),e._v("\n              "+e._s(e.survey.surveyAnswer.id)+"\n            ")],2)],1),e._v(" "),s("div",{staticClass:"dw-answer-title",staticStyle:{"padding-top":"30px","padding-bottom":"0px"}},[e._v("答卷结果信息")]),e._v(" "),s("div",{staticStyle:{padding:"0px 20px 30px 20px"}},e._l(e.survey.questions,function(e,t){return s("dw-survey-answer-qu-common",{key:e.id,attrs:{id:e.id,index:t,question:e}})}),1)],1)])],1)],1)],1)},staticRenderFns:[]};var je=s("VU/8")(Ue,Be,!1,function(e){s("qz4o")},"data-v-eccc95b8",null).exports,Me={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{height:"600px"},attrs:{"default-active":this.defActive,router:""}},[t("el-menu-item",{attrs:{index:"/dw/user"}},[t("i",{staticClass:"el-icon-user"}),this._v(" "),t("span",{attrs:{slot:"title"},slot:"title"},[this._v("我的账号")])]),this._v(" "),t("el-menu-item",{attrs:{index:"/dw/user/pwd"}},[t("i",{staticClass:"el-icon-key"}),this._v(" "),t("span",{attrs:{slot:"title"},slot:"title"},[this._v("修改密码")])])],1)},staticRenderFns:[]};var $e=s("VU/8")({name:"DwUserMenu",data:function(){return{defActive:"/dw/user"}},mounted:function(){this.setDefActive()},methods:{setDefActive:function(){this.$route.fullPath.indexOf("/dw/user/pwd")>=0&&(this.defActive="/dw/user/pwd")}}},Me,!1,function(e){s("6xT/")},"data-v-125c467a",null).exports;var He={name:"DwUser",components:{DwUserMenu:$e},data:function(){return{userInfo:{}}},mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var e=this;x({url:b.curUserInfo,method:"get"}).then(function(t){var s=t.data.data;e.userInfo=s})}}},Ve={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"dw-user-body"},[s("el-row",[s("el-col",{staticStyle:{height:"600px"},attrs:{span:4}},[s("dw-user-menu")],1),e._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticStyle:{padding:"30px"}},[s("el-descriptions",{attrs:{title:"账号信息",column:"1",border:""}},[s("el-descriptions-item",{attrs:{label:"账号"}},[e._v(e._s(e.userInfo.loginName))]),e._v(" "),s("el-descriptions-item",{attrs:{label:"状态"}},[0===e.userInfo.status?s("el-tag",{attrs:{type:"danger"}},[e._v("不可用")]):1===e.userInfo.status?s("el-tag",{attrs:{type:"info"}},[e._v("未激活")]):2===e.userInfo.status?s("el-tag",{attrs:{type:"success"}},[e._v("激活")]):s("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":""}},[e._v("未知")])],1),e._v(" "),s("el-descriptions-item",{attrs:{label:"创建时间"}},[e._v(e._s(e.userInfo.createTime))]),e._v(" "),s("el-descriptions-item",{attrs:{label:"登录时间"}},[e._v(e._s(e.userInfo.lastLoginTime))])],1)],1)])],1)],1)])],1)],1)},staticRenderFns:[]};var ze=s("VU/8")(He,Ve,!1,function(e){s("Ew/8")},"data-v-f5e9c078",null).exports,Ge={name:"DwUserPwd",components:{DwUserMenu:$e},data:function(){var e=this;return{ruleForm:{pass:"",checkPass:"",oldPass:""},rules:{pass:[{required:!0,message:"请输入新登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"},{validator:function(t,s,n){""===s?n(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),n())},trigger:"blur"}],checkPass:[{required:!0,message:"请再次输入新登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"},{validator:function(t,s,n){""===s?n(new Error("请再次输入密码")):s!==e.ruleForm.pass?n(new Error("两次输入密码不一致!")):n()},trigger:"blur"}],oldPass:[{required:!0,message:"请输入原登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}]}}},mounted:function(){},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var s,n,i;(s=t.ruleForm.oldPass,n=t.ruleForm.pass,i={curpwd:s,pwd:n},x({url:b.curUserPwdUpdate,method:"post",params:i})).then(function(e){200===e.data.resultCode?t.$message.success("密码修改成功"):t.$message.error("密码修改失败")})})},resetForm:function(e){this.$refs[e].resetFields()}}},Ye={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"dw-user-body"},[s("el-row",[s("el-col",{staticStyle:{height:"600px"},attrs:{span:4}},[s("dw-user-menu")],1),e._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticStyle:{padding:"30px",width:"400px"}},[s("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"status-icon":"","label-width":"100px","label-position":"top"}},[s("el-form-item",{attrs:{label:"原密码",prop:"oldPass"}},[s("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.ruleForm.oldPass,callback:function(t){e.$set(e.ruleForm,"oldPass",t)},expression:"ruleForm.oldPass"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"pass"}},[s("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[s("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),e._v(" "),s("el-form-item",{staticStyle:{"padding-top":"20px"}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交修改")]),e._v(" "),s("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])],1)],1)])],1)],1)},staticRenderFns:[]};var Je=s("VU/8")(Ge,Ye,!1,function(e){s("nSwW")},"data-v-6575f2df",null).exports;var We={name:"AdminUserList",data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,formInline:{loginName:null,status:null},dialogTitle:"创建用户",dialogFormVisible:!1,userForm:{id:null,loginName:"",pwd:"",status:2},userFormRules:{loginName:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}],pwd:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}],status:[{required:!0,message:"请选择账号状态",trigger:"change"}]},formLabelWidth:"120px"}},mounted:function(){this.queryList(1)},methods:{buttonClickA:function(e){window.location.href=e},handlePush:function(e){this.$router.push(e)},onSubmit:function(){console.log("submit!"),this.queryList(1)},handleCurrentChange:function(e){this.queryList(e)},openCreateUser:function(){this.dialogTitle="创建用户",this.dialogFormVisible=!0,this.userFormRules.pwd=[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}],this.userForm.id=null},queryList:function(e){var t=this,s=this.formInline,n=s.status,i=s.loginName;(function(e,t,s,n){var i={pageSize:e,current:t,status:s,loginName:n};return x({url:b.adminUserList,method:"get",params:i})})(this.pageSize,e,n,i).then(function(e){var s=e.data.data;t.tableData=s,t.total=e.data.total,t.currentPage=e.data.current,t.pageSize=e.data.pageSize})},handleEdit:function(e,t){this.dialogTitle="编辑用户",this.dialogFormVisible=!0,this.userFormRules.pwd={required:!1},this.userForm.loginName=t.loginName,this.userForm.status=t.status,this.userForm.id=t.id,console.log(e,t)},handleDelete:function(e,t){var s=this;console.log(e,t),this.$msgbox.confirm("确认删除此用户吗？","删除警告",{type:"warning",confirmButtonText:"确认删除"}).then(function(){(function(e){return x({url:b.adminUserDelete,method:"delete",data:e})})({id:[t.id]}).then(function(e){200===e.data.resultCode?(s.$message.success("删除成功，即将刷新数据。"),s.queryList(1)):s.$message.error("添加用户失败")})}).catch(function(){})},handleSaveUser:function(){var e=this;this.$refs.userForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;var s=e.userForm,n=s.id,i=s.loginName,r=s.pwd,o=s.status;null===n?function(e){return x({url:b.adminUserCreate,method:"post",data:e})}({loginName:i,pwd:r,status:o}).then(function(t){200===t.data.resultCode?(e.$message.success("添加成功，即将刷新数据。"),e.queryList(1),e.dialogFormVisible=!1):e.$message.error("添加用户失败")}):function(e){return x({url:b.adminUserUpdate,method:"put",data:e})}({id:n,loginName:i,pwd:r,status:o}).then(function(t){200===t.data.resultCode?(e.$message.success("修改成功，即将刷新数据。"),e.queryList(1),e.dialogFormVisible=!1):e.$message.error("添加用户失败")})})}}},Ke={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"dw-table-form",staticStyle:{"padding-left":"60px"}},[s("el-form",{staticClass:"dw-form-inline",attrs:{inline:!0,model:e.formInline,size:"medium"}},[s("el-form-item",{attrs:{label:"登录账号"}},[s("el-input",{attrs:{placeholder:"请输入查询的账号关键字",clearable:""},model:{value:e.formInline.loginName,callback:function(t){e.$set(e.formInline,"loginName",t)},expression:"formInline.loginName"}})],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"40px"},attrs:{label:"账号状态"}},[s("el-select",{attrs:{placeholder:"请选择账号状态",clearable:""},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},[s("el-option",{attrs:{label:"不可用",value:"0"}}),e._v(" "),s("el-option",{attrs:{label:"未激活",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"激活",value:"2"}})],1)],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"40px"}},[s("el-button",{on:{click:e.onSubmit}},[e._v("重置")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),s("div",{staticClass:"dw-table"},[s("div",{staticClass:"dw-table-title"},[s("el-row",{attrs:{span:24,type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{attrs:{span:4}},[s("h3",[e._v("用户管理")])]),e._v(" "),s("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[s("el-button",{directives:[{name:"has-dw-role",rawName:"v-has-dw-role",value:"DWSURVEY_SUPER_ADMIN",expression:"'DWSURVEY_SUPER_ADMIN'"}],attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.openCreateUser()}}},[e._v("添加用户")])],1)],1)],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{label:"登录名"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{domProps:{innerHTML:e._s(t.row.loginName)}}),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{domProps:{innerHTML:e._s(t.row.loginName)}})])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?s("el-tag",{attrs:{type:"danger"}},[e._v("不可用")]):1===t.row.status?s("el-tag",{attrs:{type:"info"}},[e._v("未激活")]):2===t.row.status?s("el-tag",{attrs:{type:"success"}},[e._v("激活")]):s("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":""}},[e._v("未知")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"登录时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("i",{staticClass:"el-icon-time"}),e._v(" "),s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.lastLoginTime))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button-group",[s("el-tooltip",{attrs:{effect:"dark",content:"编辑问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",content:"编辑",icon:"el-icon-edit"},on:{click:function(s){return e.handleEdit(t.$index,t.row)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"删除问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})],1)],1)]}}])})],1),e._v(" "),s("div",{staticClass:"dw-pagination"},[s("el-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.total,background:"",layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)],1)])],1),e._v(" "),s("div",[s("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.userFormRules,"status-icon":"","label-position":"top"}},[s("el-form-item",{staticStyle:{"margin-top":"0px"},attrs:{"label-width":e.formLabelWidth,label:"设置账号",prop:"loginName"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"请设置登录账号","show-word-limit":""},model:{value:e.userForm.loginName,callback:function(t){e.$set(e.userForm,"loginName",t)},expression:"userForm.loginName"}})],1),e._v(" "),s("el-form-item",{staticClass:"dw-dialog-form-item",attrs:{"label-width":e.formLabelWidth,label:"账号状态",prop:"status"}},[s("el-radio-group",{model:{value:e.userForm.status,callback:function(t){e.$set(e.userForm,"status",t)},expression:"userForm.status"}},[s("el-radio",{attrs:{label:0}},[e._v("不可用")]),e._v(" "),s("el-radio",{attrs:{label:1}},[e._v("未激活")]),e._v(" "),s("el-radio",{attrs:{label:2}},[e._v("激活")])],1)],1),e._v(" "),s("el-form-item",{staticClass:"dw-dialog-form-item",attrs:{"label-width":e.formLabelWidth,label:"设置密码",prop:"pwd"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"新建时必须设置密码，修改时不设置代表不修改。","show-password":""},model:{value:e.userForm.pwd,callback:function(t){e.$set(e.userForm,"pwd",t)},expression:"userForm.pwd"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSaveUser()}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var Ze=s("VU/8")(We,Ke,!1,function(e){s("rsp2")},"data-v-0c9ea0c2",null).exports,Xe={name:"Login",data:function(){return{ruleForm:{email:"",pass:""},rules:{email:[{required:!0,message:"请输入登录账号",trigger:"blur"}],pass:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}]}}},mounted:function(){this.pageH=window.height},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var s,n,i;(s=t.ruleForm.email,n=t.ruleForm.pass,i={userName:s,password:n,type:"account"},x({url:b.loginIn,method:"post",params:i})).then(function(e){var s=e.data;console.log("login-begin"),console.log(s),"ok"===s.status?(l.setAuthority(s.currentAuthority),l.setUserName(t.ruleForm.email),t.$router.push("/v6")):s.hasOwnProperty("httpResult")&&null!=s.httpResult&&s.httpResult.hasOwnProperty("resultMsg")?f(s.httpResult.resultMsg):f("登录失败，请确认！")})})},resetForm:function(e){this.$refs[e].resetFields()}}},et={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"loginPage"}},[s("el-row",{attrs:{gutter:0}},[s("el-col",{attrs:{span:10,offset:7}},[s("div",{staticClass:"loginFormContent"},[s("div",{staticStyle:{"text-align":"center"}},[s("h3",[e._v("欢迎登录")]),e._v(" "),s("div",[s("el-tag",{attrs:{type:"success"}},[e._v("调问")]),e._v(" "),s("el-tag",{attrs:{type:"warning"}},[e._v("专业")]),e._v(" "),s("el-tag",[e._v("开源")]),e._v(" "),s("el-tag",{attrs:{type:"success"}},[e._v("实用的")]),e._v(" "),s("el-tag",{attrs:{type:"warning"}},[e._v("调查问卷系统")])],1)]),e._v(" "),s("div",[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"status-icon":"","label-position":"top","label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[s("el-form-item",{attrs:{label:"用户名",prop:"email"}},[s("el-input",{attrs:{autocomplete:"on"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"pass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off","show-password":""},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),s("el-form-item",[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary","native-type":"submit"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")])],1)],1)],1)])])],1)],1)},staticRenderFns:[]};var tt=s("VU/8")(Xe,et,!1,function(e){s("yC3Y")},"data-v-45ad9bc1",null).exports,st=s("w/TU"),nt=s.n(st),it={name:"QuRedio",props:{quNum:{type:String,default:""}},data:function(){return{radio:3}},methods:{clickText:function(e){this.$emit("show-text-editor",e)}}},rt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-content"},[s("div",{staticClass:"quContent"},[s("div",{staticClass:"quTitle"},[e._v(e._s(e.quNum)+"、题标题")]),e._v(" "),s("div",{staticClass:"quBody"},[s("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[s("el-radio",{attrs:{label:3}},[e._v("备选项")]),e._v(" "),s("el-radio",{attrs:{label:6}},[e._v("备选项")]),e._v(" "),s("el-radio",{attrs:{label:9}},[e._v("备选项")])],1)],1)])])},staticRenderFns:[]};var ot=s("VU/8")(it,rt,!1,function(e){s("kqkH")},"data-v-434fa445",null).exports,at={name:"QuOptions",props:{domId:{type:String,default:""},oldContent:{type:String,default:""}},data:function(){return{active:"",content:this.oldContent}},methods:{mouseleave:function(){this.active=""},mouseover:function(){this.active="background-color: #FDF9CD;"},clickText:function(e){this.$emit("show-text-editor",e)},text2Div:function(e){console.debug("text2Divcontent"),console.debug(e),this.content=e}}},ut={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"quOptionContent",style:e.active,attrs:{id:""+e.domId},on:{click:function(t){return t.stopPropagation(),e.clickText(""+e.domId)},mouseover:e.mouseover,mouseleave:e.mouseleave}},[e._v(e._s(e.content))])},staticRenderFns:[]};var lt=s("VU/8")(at,ut,!1,function(e){s("ctD/")},"data-v-4a66c880",null).exports,dt={name:"DwCheckbox",components:{QuOptions:lt},props:{domId:{type:String,default:""},label:{type:String,default:""}},methods:{clickText:function(e){this.$emit("show-text-editor",e)}}},ct={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dwCheckboxBox"},[t("input",{attrs:{type:"checkbox"}}),this._v(" "),t("qu-options",{attrs:{"dom-id":this.domId,"old-content":this.label},on:{"show-text-editor":this.clickText}})],1)},staticRenderFns:[]};var vt={name:"QuCheckbox",components:{DwCheckbox:s("VU/8")(dt,ct,!1,function(e){s("mCYP")},"data-v-0a0a20c2",null).exports,QuOptions:lt},props:{quNum:{type:String,default:""},child:{type:Array,default:function(){return[]}}},data:function(){return{checkAll:!1,checkedCities:["上海","北京"],cities:this.child,isIndeterminate:!0,active:""}},methods:{mouseleave:function(){this.active=""},mouseover:function(){this.active="background-color: #FDF9CD;"},clickText:function(e){this.$emit("show-text-editor",e)},stop:function(){}}},pt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-content"},[s("div",{staticClass:"quContent",on:{click:function(t){return t.stopPropagation(),e.stop.apply(null,arguments)}}},[s("div",{staticClass:"quTitle",style:e.active,attrs:{id:"Qu"+e.quNum},on:{click:function(t){return t.stopPropagation(),e.clickText("Qu"+e.quNum)},mouseover:e.mouseover,mouseleave:e.mouseleave}},[e._v(e._s(e.quNum)+"、题标题")]),e._v(" "),s("div",{staticClass:"quBody"},e._l(e.cities,function(t){return s("dw-checkbox",{key:t.name,attrs:{label:t.name,"dom-id":t.id},on:{"show-text-editor":e.clickText}})}),1)])])},staticRenderFns:[]};var mt=s("VU/8")(vt,pt,!1,function(e){s("Tp1i")},"data-v-f0dd9104",null).exports,yt={name:"QuRate",props:{quNum:{type:Number,default:0}},data:function(){return{value:3,active:""}},methods:{mouseleave:function(){this.active=""},mouseover:function(){this.active="background-color: #FDF9CD;"},clickText:function(e){this.$emit("show-text-editor",e)}}},ft={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-content"},[s("div",{staticClass:"quContent"},[s("div",{staticClass:"quTitle",style:e.active,attrs:{id:"Qu"+e.quNum},on:{click:function(t){return t.stopPropagation(),e.clickText("Qu"+e.quNum)},mouseover:e.mouseover,mouseleave:e.mouseleave}},[e._v(e._s(e.quNum)+"、题标题")]),e._v(" "),s("div",{staticClass:"quBody"},[s("el-rate",{attrs:{"show-text":""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)])])},staticRenderFns:[]};var ht=s("VU/8")(yt,ft,!1,function(e){s("UKxP")},"data-v-fee7c628",null).exports,wt={name:"QuSelect",props:{quNum:{type:String,default:""}},data:function(){return{options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],value:""}},methods:{clickText:function(e){this.$emit("show-text-editor",e)}}},gt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-content"},[s("div",{staticClass:"quContent"},[s("div",{staticClass:"quTitle"},[e._v(e._s(e.quNum)+"、题标题")]),e._v(" "),s("div",{staticClass:"quBody"},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)])])},staticRenderFns:[]};var xt=s("VU/8")(wt,gt,!1,function(e){s("7IGW")},"data-v-6c7f0f5e",null).exports,bt=s("7t+N"),qt=s.n(bt),Ct=["上海","北京","广州","深圳"],_t={name:"DwTextEditor",props:{quNum:{type:String,default:""}},data:function(){return{checkAll:!1,checkedCities:["上海","北京"],cities:Ct,isIndeterminate:!0,textEditorVisible:"",domId:""}},methods:{showEditor:function(e){var t=qt()("#"+e),s=t.offset();console.debug("dwoffset"),console.debug(s),qt()("#dwCommonEditRoot").show(),qt()("#dwCommonEditRoot").offset({top:s.top,left:s.left}),qt()("#dwCommonEditRoot").width(t.width()+30),qt()("#dwCommonEditRoot").height(t.outerHeight()),qt()("#dwCommonEditRoot .dwEditor").focus(),this.domId=e},hideEditor:function(){console.debug("this.curDomId"),qt()("#dwCommonEditRoot").hide()},getText:function(){return qt()("#dwCommonEditRoot").text()},keydown:function(){this.$emit("set-edit-text"),this.showEditor(this.domId)}}},At={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"editorContent",style:this.textEditorVisible,attrs:{id:"dwCommonEditRoot"}},[t("div",{staticClass:"dwEditor",attrs:{contenteditable:"true"},on:{keydown:this.keydown}})])},staticRenderFns:[]};var St=s("VU/8")(_t,At,!1,function(e){s("Sldd")},"data-v-7ce1efaa",null).exports,kt={name:"QuInput",props:{quNum:{type:String,default:""}},data:function(){return{input:"322"}},methods:{clickText:function(e){this.$emit("show-text-editor",e)}}},Tt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-content"},[s("div",{staticClass:"quContent"},[s("div",{staticClass:"quTitle"},[e._v(e._s(e.quNum)+"、题标题")]),e._v(" "),s("div",{staticClass:"quBody"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)])])},staticRenderFns:[]};var It=s("VU/8")(kt,Tt,!1,function(e){s("UYPE")},"data-v-3726a4a1",null).exports,Ot={name:"DwDesign",components:{DwTextEditor:St,QuRate:ht,QuCheckbox:mt,draggable:nt.a,QuRedio:ot,QuSelect:xt,QuInput:It},data:function(){return{textEditorVisible:"display: none",drag:!1,myArray:[{people:"cn",id:1,name:"www.itxst.com"},{people:"cn",id:2,name:"www.baidu.com"},{people:"cn",id:3,name:"www.taobao.com"},{people:"us",id:4,name:"www.google.com"},{people:"us",id:5,name:"www.google.com"},{people:"us",id:6,name:"www.google.com"},{people:"us",id:7,name:"www.google.com"},{people:"us",id:8,name:"www.google.com"},{people:"us",id:9,name:"www.google.com"},{people:"us",id:10,name:"www.google.com"},{people:"us",id:11,name:"www.google.com"},{people:"us",id:12,name:"www.google.com"},{people:"us",id:13,name:"www.google.com"}],arr1:[{id:1,name:"www.itxst.com",quType:"radio"},{id:2,name:"www.jd.com",quType:"checkbox",child:[{id:21,name:"北京"},{id:22,name:"上海"},{id:23,name:"武汉"},{id:24,name:"深圳"}]},{id:3,name:"www.jd.com",quType:"input"},{id:4,name:"www.jd.com",quType:"rate"},{id:5,name:"www.jd.com",quType:"select"}],arr2:[{id:4,name:"www.yahoo.com"}],curDomId:"",curDataIndex:[],headerQuToolbarStyle:""}},mounted:function(){window.addEventListener("scroll",this.onScroll)},methods:{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1},showEditor:function(e){console.debug("design-editor:"+e),this.curDomId=e,this.$refs.dwTextEditor.showEditor(e)},domClick:function(){this.setEditText(),this.$refs.dwTextEditor.hideEditor()},setEditText:function(){var e=this;if(this.curDataIndex.length>0){var t=this.curDataIndex;console.debug("curIndex"),console.debug(t),this.arr1[t[0]].child[t[1]].name=this.$refs.dwTextEditor.getText()}else{this.arr1.forEach(function(t,s){"checkbox"===t.quType&&t.child.forEach(function(t,n){console.debug("this.curDomId"),console.debug(t.id),console.debug(e.curDomId),t.id===e.curDomId&&(console.debug("wweeww"),t.name=e.$refs.dwTextEditor.getText(),e.curDataIndex=[s,n])})})}},onScroll:function(e){console.debug("position"),console.debug(e);var t=document.documentElement.scrollTop||document.body.scrollTop;console.log(t);if(t>=60)this.headerQuToolbarStyle="top:0px;";else{var s=60-t;this.headerQuToolbarStyle="top:"+s+"px;"}}}},Dt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-design-container"},[s("el-container",[s("el-header",{staticClass:"header"},[s("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"header-content-left"},[s("div",{staticClass:"logo"},[s("a",{attrs:{href:"#"}},[s("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQzRDRFQ0Y5QjVFODExRUJCRENGOUE2Q0FGMTA3RTJEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQzRDRFQ0ZBQjVFODExRUJCRENGOUE2Q0FGMTA3RTJEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDNENEVDRjdCNUU4MTFFQkJEQ0Y5QTZDQUYxMDdFMkQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDNENEVDRjhCNUU4MTFFQkJEQ0Y5QTZDQUYxMDdFMkQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6GJisjAAAFMklEQVR42uzdTYhVZRjA8XNrSAqTIq0EqYSCCoQWgeFCHcJsEbVo1UARkbYIChdFbloFWosWQVAWhFBDmyJa1FhR46YPC0KkhCgzN9OXJH2JhdyeM3Mnq3veMJp5z3lnfj94mCLo3nPu/O97z51z7u31+/0qh9749I88NzbHd336jo8NbUuR2zMxOrM9CfX2/BRzIuboYL6KORxzMOZAzCcxv3dpmzavnL//90gFf3fuYJYP/n3dP/778ZgPYybr3mL2xZxcqDvjDL8P/Ednx6yPeTjm3ZipmKdiNsyutgKBU1bE3DNYUT6LeSDmPIHAsMtjHos5EvN4zEUCgebjmG0xh2J2xCwVCAw7J+ahwUuvO0o8RhEIOdRvxO6O2RNzmUCg2aaY/TFjAoFmy2JeiNkVs0Qg0GxLzN6q4+90CYQ2rY15L+ZKgUCz1YOV5BqBQLMLY96OWSMQaHZ+zGsxqwQCzVYNVpIVAoFmV8S8GnOWQKDZdTGPCgTS7o+5RSDQrD6x8bmYSwUCzep3tp6pWjwLWCB0XX2C4+0CgbT6gH2ZQKDZxTHbBQJp91UtnPkrEEoxe/muQCDh7irzRwoJhJIsHUQiEEjYWmX8u4hAKE19MuN6gUDabQKBtFtjzhQINKu/mmGtQCBts0AgbaNAIO3aKsNluQKhVPWpJ1cLBNLWCATSrhIIpK0WCKRdIhBIWy4QSLtAIJC2RCCQNu9fLz2SeYN6C+wBGtqeidGFtT2LnRUE/u0Zo9/v2wtzaM+UfZDb5pVWEPASC7om20F6b7zsHdUf88tiBQHaWUFmn4gL3EeL5q3PG98p7/GZGJ3fx8cKAgIBgYBAQCAgEBAICAQEAgIBBAICAYGAQEAgIBAQCAgEBAICAQQCAgGBgEBAICAQEAgIBAQCCAQEAgIBgYBAQCAgEBAICAQEAjTq9ft5vhq7Nz79o9jvSe+PLeBfgvE//7HIx2c+HxsrCAgEBAICgZxG2jjgpbsHvHaBFQRO/xkj19u8YAUBgYCD9Ll/LTde9o5aJH9J99hYQaCDK8hs7CU+wS6i3wePjxUEBAICAYHAIjpIX/BKf8sUKwgIBAQCAgGBgEBAICAQEAgIxC4AgYBAQCAgEBAICAQEAgIBgQACAYGAQEAgIBAQCAgEBAICAYEAAgGBgEBAICAQEAgIBAQCAgEEAqch9/ek9+zyTvP4WEGggytIf8zOxgoCAgEvseb66G+87B3115eIpW8LVhAoawWZfSIucB/1bE+x22MFYVH72UssSDshEEg7KhBI+14gkHZEIJB2WCCQ9qlAIO2AQKDZr1YQSPso5jeBQLPJHDciEEr1hkCgWf0HwvcFAs1eijkpEGj2Yq4bEgil+Txmr0Cg2dNVxgu7BEJJ6gukns15gwKhJHUcxwQCw+pTS3bmvlGBUIonYr4RCAz7OmZHGzcsEEqwPeZHgcCwN2N2t3XjAqHLfojZWrX4gXYCoavqKO6qMlx3LhBKVL9r9Urbd0IgdFF9KvuDXbgjAqFrDsXcXGW4nFYglOa7mJsGPyuBwCn1O1abYg526U4JhC74Nub6mP1du2MCoW1fxmyM+biLd04gtOmDmHVde1klELqgvrZjQzVzImJnjXicyKw+6fDemOdLuLMCIae3YrZULZ8+4iUWXTMVc2fMDSXFYQVhvtWXyT4Z80jV0vUcAqGLfhkchO/s+kG4QMjpi5hdgzm2EDZIIPxf9QdJv1zNfBzoZNXixU0CoQuOVzNfXlPH8HrMvirTB0m34Q8BBgDCrqxH8SRKpAAAAABJRU5ErkJggg==",alt:"logo",height:"200"}}),e._v(" "),s("h1",[e._v("调问-全新问卷编辑器")])])])])]),e._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticStyle:{"text-align":"right"}})])],1)],1),e._v(" "),s("el-main",{staticStyle:{padding:"0px"}},[s("div",[s("div",[s("div",[s("div",{style:e.headerQuToolbarStyle,attrs:{id:"tools_wrap"}},[s("el-tabs",{attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"常用题型"}},[s("div",[s("el-row",[s("el-col",{attrs:{span:20}},[s("el-row",[s("draggable",{attrs:{group:{name:"people",pull:"clone",put:!1},animation:"300","drag-class":"drag-class","ghost-class":"ghost-class","chosen-class":"chosen-class"},on:{start:e.onStart,end:e.onEnd},model:{value:e.arr1,callback:function(t){e.arr1=t},expression:"arr1"}},[s("transition-group",e._l(e.arr1,function(t){return s("el-col",{key:t.id,staticClass:"item",attrs:{span:1}},[s("div",{staticClass:"grid-content"},[e._v("Q"+e._s(t.id))])])}),1)],1)],1)],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("div",[e._v(e._s(e.drag?"拖拽中":"拖拽停止"))])])])],1)],1)]),e._v(" "),s("el-tab-pane",{attrs:{label:"矩阵扩展"}},[e._v("矩阵扩展")]),e._v(" "),s("el-tab-pane",{attrs:{label:"常用题库"}},[e._v("常用题库")])],1)],1),e._v(" "),s("div",{staticStyle:{"margin-top":"137px"}},[s("div",{on:{click:e.domClick}},[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content"},[e._v("L")])]),e._v(" "),s("el-col",{attrs:{span:16}},[s("div",{staticClass:"grid-content design-body"},[s("div",{},[e._v("问卷标题")]),e._v(" "),s("draggable",{attrs:{group:"people",animation:"300","drag-class":"drag-class","ghost-class":"ghost-class","chosen-class":"chosen-class"},on:{start:e.onStart,end:e.onEnd},model:{value:e.arr2,callback:function(t){e.arr2=t},expression:"arr2"}},[s("transition-group",e._l(e.arr2,function(t){return s("div",{key:t.id,staticClass:"item"},["radio"===t.quType?[s("qu-redio",{attrs:{"qu-num":t.id}})]:e._e(),e._v(" "),"checkbox"===t.quType?[s("qu-checkbox",{attrs:{child:t.child,"qu-num":t.id},on:{"show-text-editor":e.showEditor}})]:e._e(),e._v(" "),"input"===t.quType?[s("qu-input",{attrs:{"qu-num":t.id}})]:e._e(),e._v(" "),"rate"===t.quType?[s("qu-rate",{attrs:{"qu-num":t.id},on:{"show-text-editor":e.showEditor}})]:e._e(),e._v(" "),"select"===t.quType?[s("qu-select",{attrs:{"qu-num":t.id}})]:e._e()],2)}),0)],1)],1)]),e._v(" "),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content"},[e._v("R")])])],1)],1)])])])]),e._v(" "),s("dw-text-editor",{ref:"dwTextEditor",on:{"set-edit-text":e.setEditText}})],1),e._v(" "),s("el-footer",[e._v("Footer")])],1)],1)},staticRenderFns:[]};var Et=s("VU/8")(Ot,Dt,!1,function(e){s("no+S")},"data-v-a7a7ed6e",null).exports;function Pt(){return x({url:"/api/dwsurvey/app/dw-design-survey/toolbar-qus.do",method:"get"})}function Rt(e){return x({url:"/api/dwsurvey/app/dw-design-survey/save-survey-json.do",method:"post",data:e})}var Nt=s("8YIr"),Lt=s.n(Nt),Ft=(s("nCbi"),s("RtFS")),Qt={name:"DwEditor",components:{Editor:Ft.a,Toolbar:Ft.b},props:{centerDialogVisible:{type:Boolean,default:!1},value:{type:String,default:""}},data:function(){return{editor:null,html:null,toolbarConfig:{},editorConfig:{placeholder:"请输入内容..."},mode:"default"}},mounted:function(){setTimeout(function(){},1500)},beforeDestroy:function(){var e=this.editor;null!=e&&e.destroy()},methods:{onCreated:function(e){this.editor=Lt()(e)},upEditHtml:function(e){this.html=e},confirm:function(){this.html="<p>模拟 Ajax 异步设置内容 HTML</p>"},editDialogClose:function(){this.closeDialogCommon()},editConfirm:function(){var e={dwText:this.editor.getText(),dwHtml:this.editor.getHtml()};this.$emit("upHtmlValue",e)},closeDialogCommon:function(){this.$emit("upVisible",!1)}}},Ut={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{visible:e.centerDialogVisible,"append-to-body":!0,"destroy-on-close":!0,"show-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,title:"高级编辑器",width:"70%","custom-class":"edit-dialog-root"},on:{"update:visible":function(t){e.centerDialogVisible=t},close:e.closeDialogCommon}},[s("div",{staticStyle:{border:"1px solid #ccc"}},[s("Toolbar",{staticStyle:{"border-bottom":"1px solid #ccc"},attrs:{editor:e.editor,"default-config":e.toolbarConfig,mode:e.mode}}),e._v(" "),s("Editor",{staticStyle:{height:"300px","overflow-y":"hidden"},attrs:{"default-config":e.editorConfig,"auto-focus":!1,mode:e.mode},on:{onCreated:e.onCreated},model:{value:e.html,callback:function(t){e.html=t},expression:"html"}})],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.editDialogClose}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.editConfirm}},[e._v("确 定")])],1)])},staticRenderFns:[]};var Bt={name:"DwTextEditLabel",components:{DwEditor:s("VU/8")(Qt,Ut,!1,function(e){s("ZTgU")},"data-v-a2dbd1f6",null).exports},model:{prop:"value",event:"update-input"},props:{value:{type:Object,default:function(){}},itemClick:{type:Boolean,default:!1},btnSize:{type:String,default:"15px"}},data:function(){return{hover:!1,editorText:this.value.dwHtml,centerDialogVisible:!1}},watch:{value:function(e,t){console.log("firstName changed from "+t+" to "+e),this.value.hasOwnProperty("isRefreshValue")&&this.value.isRefreshValue&&(this.editorText=this.value.dwHtml,this.$refs.curEdit.innerHTML=this.editorText,this.value.isRefreshValue=!1),this.value.hasOwnProperty("isNew")&&this.value.isNew&&(this.editClick(),this.editFocus(),this.value.isNew=!1)}},methods:{upVisible:function(e){this.centerDialogVisible=e,this.$refs.curEdit.focus()},upHtmlValue:function(e){this.editorText=e.dwHtml,this.centerDialogVisible=!1,this.$emit("upValue",e),this.$refs.curEdit.focus()},editClick:function(){this.itemClick||this.$emit("upItemClick",!0)},inputEdit:function(e){var t={dwText:e.target.innerText,dwHtml:e.target.innerHTML};this.$emit("upValue",t)},mouseleave:function(){this.hover=!1},mouseover:function(){this.hover=!0},focusout:function(){this.hover=!1},addToolbar:function(){this.centerDialogVisible=!0,this.$refs.curDwEditor.upEditHtml(this.value.dwHtml)},upEditorText:function(e){this.editorText=this.value.dwHtml,this.$refs.curEdit.innerHTML=this.editorText},editFocus:function(){this.$refs.curEdit.focus(),document.execCommand("selectAll",!1,null),document.getSelection().collapseToEnd()}}},jt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dwEditorRoot dw-width-100bf",on:{input:e.inputEdit,mouseover:e.mouseover,mouseleave:e.mouseleave}},[s("div",{staticClass:"dw-flex-start"},[s("div",{staticClass:"dw-flex-item-auto"},[s("div",{ref:"curEdit",staticClass:"dw-input-default dw-qu-option-text dw-border-blue editor-content-view",class:[e.itemClick?"dw-input-focus":"dwEditRoot",e.hover?"dw-input-hover":"dwEditRoot"],attrs:{id:"curEdit",placeholder:e.value.dwPlaceholder,contenteditable:"plaintext-only"},domProps:{innerHTML:e._s(e.editorText)},on:{click:e.editClick}})]),e._v(" "),s("div",{staticClass:"dw-edit-toolbar"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.itemClick,expression:"itemClick"}],staticClass:"dw-qu-option-text dw-btn-blue-1 dw-cursor-pointer",staticStyle:{"margin-left":"-1px!important"},on:{click:e.addToolbar}},[s("i",{staticClass:"fa fa-align-left"})])])]),e._v(" "),s("div",[s("DwEditor",{ref:"curDwEditor",attrs:{"center-dialog-visible":e.centerDialogVisible},on:{upVisible:e.upVisible,upHtmlValue:e.upHtmlValue}})],1)])},staticRenderFns:[]};var Mt=s("VU/8")(Bt,jt,!1,function(e){s("ttGi")},"data-v-303af8f2",null).exports,$t={name:"DwTextEditLabelCommon",components:{DwTextEditLabel:Mt},model:{prop:"value",event:"update-input"},props:{value:{type:Object,default:function(){}},survey:{type:Object,default:function(){}}},data:function(){return{itemHover:!1,itemClick:!1,itemIndex:0}},methods:{clickItem:function(){0===this.itemIndex&&(this.itemIndex=this.survey.curEditObj.push({itemClick:!0})-1),this.survey.curEditObj[this.itemIndex].itemClick=!0;for(var e=this.survey.curEditObj,t=0;t<e.length;t++)t!==this.itemIndex&&(this.survey.curEditObj[t].itemClick=!1)},upItemClick:function(e){0===this.itemIndex&&(this.itemIndex=this.survey.curEditObj.push({itemClick:!0})-1),this.survey.curEditObj[this.itemIndex].itemClick=!0},mouseleaveItem:function(){this.itemHover=!1},mouseoverItem:function(){this.itemHover=!0},addOptionBefore:function(){},upValue:function(e){console.debug("html",e),this.$emit("update-input",e)},upEditorText:function(e){},editFocus:function(){this.$refs.curEditLabel.editFocus()}}},Ht={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{on:{click:function(t){return t.stopPropagation(),e.clickItem.apply(null,arguments)},mouseover:e.mouseoverItem,mouseleave:e.mouseleaveItem}},[s("dw-text-edit-label",{ref:"curEditLabel",attrs:{"item-click":e.survey.curEditObj[e.itemIndex].itemClick},on:{upItemClick:e.upItemClick,upValue:e.upValue},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},staticRenderFns:[]};var Vt=s("VU/8")($t,Ht,!1,function(e){s("ZwDe")},"data-v-a0649da8",null).exports;function zt(e,t,s){var n=e.questions[t].quType;if("RADIO"===n){var i=e.questions[t].quRadios;i.push(s),e.questions[t].quRadios=i}else if("CHECKBOX"===n){var r=e.questions[t].quCheckboxs;r.push(s),e.questions[t].quCheckboxs=r}else if("SCORE"===n){var o=e.questions[t].quScores;o.push(s),e.questions[t].quScores=o}else if("ORDERQU"===n){var a=e.questions[t].quOrderbys;a.push(s),e.questions[t].quOrderbys=a}else if("MULTIFILLBLANK"===n){var u=e.questions[t].quMultiFillblanks;u.push(s),e.questions[t].quMultiFillblanks=u}return e}function Gt(e){e.quTitleObj.isRefreshValue=!0,e.quNoteObj.isRefreshValue=!0;var t=e.quType;return"RADIO"===t?e.quRadios.forEach(function(e,t){return e.optionTitleObj.isRefreshValue=!0,e}):"CHECKBOX"===t?e.quCheckboxs.forEach(function(e,t){return e.optionTitleObj.isRefreshValue=!0,e}):"SCORE"===t?e.quScores.forEach(function(e,t){return e.optionTitleObj.isRefreshValue=!0,e}):"ORDERQU"===t&&e.quOrderbys.forEach(function(e,t){return e.optionTitleObj.isRefreshValue=!0,e}),e}function Yt(e){var t=e.questions;return t.forEach(function(e,t){return Gt(e)}),e.questions=t,e}function Jt(e,t,s){Wt(e,t,null,s)}function Wt(e,t,s,n){0===t&&(t=e.curEditObj.push({itemClick:!0})-1),e.curEditObj[t].itemClick=!0,null!==s&&(e.questions[s].itemIndex=t),n(e,t)}function Kt(e,t,s){for(var n=e.curEditObj,i=0;i<n.length;i++)e.curEditObj[i].itemClick=!1;if(null!==t)for(var r=0;r<t.length;r++)e.curEditObj[t[r]].itemClick=!0;s(e)}var Zt=s("kFye"),Xt={name:"DwPopoverMoreOptions",model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},popoverTitle:{type:String,default:"批量增加选项"},textPlaceholder:{type:String,default:"请输入需要批量新增加的选项内容，每行一个。"},addOrEdit:{type:String,default:"add"}},data:function(){return{itemIndex:0,moreOptionText:""}},methods:{showPopoverLoad:function(){"edit"===this.addOrEdit&&(this.moreOptionText=function(e,t){var s=e.questions[t].quType,n=[];"RADIO"===s?n=e.questions[t].quRadios:"CHECKBOX"===s&&(n=e.questions[t].quCheckboxs);var i="";return n.forEach(function(e,t){i+=e.optionTitleObj.dwText+"\r\n"}),i}(this.survey,this.index))},clickShowPopoverEvent:function(){var e=this;this.$emit("click-item");var t=this.survey.questions[this.index].itemIndex;Jt(this.survey,this.itemIndex,function(t,s){e.survey=t,e.itemIndex=s}),this.upAllItemClick([this.itemIndex,t])},cancelAddOptionEvent:function(){this.upAllItemClick(null)},upAllItemClick:function(e){var t=this;Kt(this.survey,e,function(e){t.survey=e})},addMoreOptionEvent:function(){var e,t,s,n,i=this;if(this.moreOptionText.length>0){var r=this.moreOptionText.split(/\r\n|[\r\n]/);if(void 0!==r&&r.length>0){"edit"===this.addOrEdit&&(e=this.survey,t=this.index,s=function(e){i.survey=e},"RADIO"===(n=e.questions[t].quType)?e.questions[t].quRadios=[]:"CHECKBOX"===n?e.questions[t].quCheckboxs=[]:"SCORE"===n&&(e.questions[t].quOrderbys=[]),s(e));for(var o=0;o<r.length;o++){var a={id:null,optionTitleObj:{dwHtml:r[o],dwText:r[o],dwPlaceholder:"请输入内容"},itemClick:!1};a.dwId=Object(Zt.a)(),this.dwAddQuItem(a)}this.survey.curEditObj[this.itemIndex].itemClick=!1,this.moreOptionText=""}}},dwAddQuItem:function(e){var t=zt(this.survey,this.index,e);this.$emit("update-survey",t)}}},es={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-popover",{attrs:{value:e.survey.curEditObj[e.itemIndex].itemClick,placement:"bottom-start",width:"400",trigger:"manual","popper-class":"dw-popover-more-options"},on:{show:e.showPopoverLoad}},[s("div",[s("div",{staticStyle:{"font-size":"14px","padding-bottom":"5px"}},[e._v(e._s(e.popoverTitle))]),e._v(" "),s("el-input",{attrs:{placeholder:e.textPlaceholder,type:"textarea",rows:"10"},model:{value:e.moreOptionText,callback:function(t){e.moreOptionText=t},expression:"moreOptionText"}}),e._v(" "),s("div",{staticStyle:{"text-align":"right"}},[s("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"text",size:"small"},on:{click:e.cancelAddOptionEvent}},[e._v("取消")]),e._v(" "),s("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"primary",size:"small"},on:{click:e.addMoreOptionEvent}},[e._v("确认")])],1)],1),e._v(" "),s("div",{attrs:{slot:"reference"},on:{click:function(t){return t.stopPropagation(),e.clickShowPopoverEvent.apply(null,arguments)}},slot:"reference"},[e._t("default")],2)])},staticRenderFns:[]};var ts=s("VU/8")(Xt,es,!1,function(e){s("iQQW"),s("+AVS")},"data-v-569e52b3",null).exports,ss={name:"DwInputProps",model:{prop:"inputProp",event:"update-input-prop"},props:{index:{type:Number,default:0},inputProp:{type:Object,default:function(){}}},data:function(){return{checkType:[{value:"NO",label:"无验证"},{value:"EMAIL",label:"Email"},{value:"NUM",label:"数字"},{value:"DIGITS",label:"整数"},{value:"TEL_PHONE",label:"手机或电话"},{value:"TIME",label:"时间"},{value:"DATE",label:"日期"},{value:"DATETIME",label:"日期时间"},{value:"ZIPCODE",label:"邮政编码"},{value:"TEL",label:"电话号码"},{value:"PHONE",label:"手机号码"},{value:"IDENT_CODE",label:"身份证号"},{value:"URL",label:"网址"},{value:"UNSTRCN",label:"禁止中文"},{value:"STRCN",label:"仅许中文"}]}},methods:{changeCheckType:function(){var e=this.inputProp.commonAttr.checkType,t=this.inputProp.dateTimeAttr.dateFormat;"TIME"===e&&5!==t&&6!==t?this.inputProp.dateTimeAttr.dateFormat=5:"DATE"===e&&1!==t&&2!==t&&3!==t?this.inputProp.dateTimeAttr.dateFormat=3:"DATETIME"===e&&(this.inputProp.dateTimeAttr.dateFormat=4)},changeDateAttrs:function(e){if(console.debug("val",e),e){var t=e.map(function(e,t){if("more"===e||"range"===e)return e}),s=e.map(function(e,t){if("more"!==e&&"range"!==e)return e});t.length>0&&s.push(t[t.length-1]),this.inputProp.dateTimeAttr.attrs=s}console.debug("inputProp.dateTimeAttr.attrs",this.inputProp.dateTimeAttr.attrs)}}},ns={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-form",{ref:"form",attrs:{"label-width":"80px",size:"mini"}},[s("el-form-item",{attrs:{label:"校验规则"}},[s("el-select",{attrs:{placeholder:"请选择数据校验规则"},on:{change:e.changeCheckType},model:{value:e.inputProp.commonAttr.checkType,callback:function(t){e.$set(e.inputProp.commonAttr,"checkType",t)},expression:"inputProp.commonAttr.checkType"}},e._l(e.checkType,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),s("el-select",{directives:[{name:"show",rawName:"v-show",value:"TIME"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'TIME'"}],staticStyle:{width:"290px"},attrs:{placeholder:"日期格式"},model:{value:e.inputProp.dateTimeAttr.dateFormat,callback:function(t){e.$set(e.inputProp.dateTimeAttr,"dateFormat",t)},expression:"inputProp.dateTimeAttr.dateFormat"}},[s("el-option",{attrs:{value:5,label:"时分秒（HH:mm:ss）"}}),e._v(" "),s("el-option",{attrs:{value:6,label:"时分（HH:mm）"}}),e._v(" "),s("el-option",{attrs:{value:7,label:"时分下拉控件（HH:mm）"}})],1),e._v(" "),s("el-select",{directives:[{name:"show",rawName:"v-show",value:"DATE"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'DATE'"}],staticStyle:{width:"290px"},attrs:{placeholder:"日期格式"},model:{value:e.inputProp.dateTimeAttr.dateFormat,callback:function(t){e.$set(e.inputProp.dateTimeAttr,"dateFormat",t)},expression:"inputProp.dateTimeAttr.dateFormat"}},[s("el-option",{attrs:{value:3,label:"年月日（YYYY-MM-DD）"}}),e._v(" "),s("el-option",{attrs:{value:2,label:"年月（YYYY-MM）"}}),e._v(" "),s("el-option",{attrs:{value:1,label:"年（YYYY）"}})],1),e._v(" "),s("el-select",{directives:[{name:"show",rawName:"v-show",value:"DATETIME"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'DATETIME'"}],staticStyle:{width:"290px"},attrs:{placeholder:"日期格式"},model:{value:e.inputProp.dateTimeAttr.dateFormat,callback:function(t){e.$set(e.inputProp.dateTimeAttr,"dateFormat",t)},expression:"inputProp.dateTimeAttr.dateFormat"}},[s("el-option",{attrs:{value:4,label:"年月日时分秒（YYYY-MM-DD HH:mm:ss）"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"输入提示"}},[s("el-input",{model:{value:e.inputProp.commonAttr.placeholder,callback:function(t){e.$set(e.inputProp.commonAttr,"placeholder",t)},expression:"inputProp.commonAttr.placeholder"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"默认内容"}},[s("el-input",{model:{value:e.inputProp.commonAttr.defaultValue,callback:function(t){e.$set(e.inputProp.commonAttr,"defaultValue",t)},expression:"inputProp.commonAttr.defaultValue"}})],1),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"NO"===e.inputProp.commonAttr.checkType||"UNSTRCN"===e.inputProp.commonAttr.checkType||"STRCN"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'NO' || inputProp.commonAttr.checkType === 'UNSTRCN' || inputProp.commonAttr.checkType === 'STRCN'"}],attrs:{label:"显示行数"}},[s("el-input-number",{attrs:{min:1},model:{value:e.inputProp.commonAttr.inputRow,callback:function(t){e.$set(e.inputProp.commonAttr,"inputRow",t)},expression:"inputProp.commonAttr.inputRow"}}),e._v(" 行\n  ")],1),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"TIME"===e.inputProp.commonAttr.checkType||"DATE"===e.inputProp.commonAttr.checkType||"DATETIME"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'TIME' || inputProp.commonAttr.checkType === 'DATE' || inputProp.commonAttr.checkType === 'DATETIME'"}],attrs:{label:"属性配置"}},[s("el-checkbox-group",{on:{change:e.changeDateAttrs},model:{value:e.inputProp.dateTimeAttr.attrs,callback:function(t){e.$set(e.inputProp.dateTimeAttr,"attrs",t)},expression:"inputProp.dateTimeAttr.attrs"}},[s("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:"DATE"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'DATE'"}],attrs:{label:"more"}},[e._v("可选择多个日期")]),e._v(" "),s("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:1!==e.inputProp.dateTimeAttr.dateFormat,expression:"inputProp.dateTimeAttr.dateFormat!==1"}],attrs:{label:"range"}},[e._v("使用范围选择器")])],1)],1),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"TIME"===e.inputProp.commonAttr.checkType&&7===e.inputProp.dateTimeAttr.dateFormat||"TIME"===e.inputProp.commonAttr.checkType&&7!==e.inputProp.dateTimeAttr.dateFormat&&!e.inputProp.dateTimeAttr.attrs.includes("range"),expression:"(inputProp.commonAttr.checkType === 'TIME' && inputProp.dateTimeAttr.dateFormat===7) || (inputProp.commonAttr.checkType === 'TIME' && inputProp.dateTimeAttr.dateFormat!==7 && !inputProp.dateTimeAttr.attrs.includes('range'))"}],attrs:{label:"时间限制"}},[s("el-time-picker",{directives:[{name:"show",rawName:"v-show",value:7===e.inputProp.dateTimeAttr.dateFormat||7!==e.inputProp.dateTimeAttr.dateFormat&&!e.inputProp.dateTimeAttr.attrs.includes("range"),expression:"inputProp.dateTimeAttr.dateFormat===7 || (inputProp.dateTimeAttr.dateFormat!==7 && !inputProp.dateTimeAttr.attrs.includes('range'))"}],staticStyle:{"margin-right":"10px",width:"300px"},attrs:{format:"HH:mm","value-format":"HH:mm","is-range":""},model:{value:e.inputProp.dateTimeAttr.timeRange.range,callback:function(t){e.$set(e.inputProp.dateTimeAttr.timeRange,"range",t)},expression:"inputProp.dateTimeAttr.timeRange.range"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:7===e.inputProp.dateTimeAttr.dateFormat,expression:"inputProp.dateTimeAttr.dateFormat === 7"}]},[e._v("步长 "),s("el-time-picker",{staticStyle:{width:"100px"},attrs:{format:"HH:mm","value-format":"HH:mm"},model:{value:e.inputProp.dateTimeAttr.timeRange.step,callback:function(t){e.$set(e.inputProp.dateTimeAttr.timeRange,"step",t)},expression:"inputProp.dateTimeAttr.timeRange.step"}})],1)],1),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"NUM"===e.inputProp.commonAttr.checkType||"DIGITS"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'NUM' || inputProp.commonAttr.checkType === 'DIGITS'"}],attrs:{label:"数据范围"}},[s("span",[e._v("\n      最小值 "),s("el-input-number",{staticStyle:{"margin-right":"10px"},model:{value:e.inputProp.numAttr.min,callback:function(t){e.$set(e.inputProp.numAttr,"min",t)},expression:"inputProp.numAttr.min"}}),e._v("\n      最大值 "),s("el-input-number",{model:{value:e.inputProp.numAttr.max,callback:function(t){e.$set(e.inputProp.numAttr,"max",t)},expression:"inputProp.numAttr.max"}})],1)]),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"NUM"===e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType === 'NUM'"}],attrs:{label:"保留精度"}},[s("el-input-number",{model:{value:e.inputProp.numAttr.precision,callback:function(t){e.$set(e.inputProp.numAttr,"precision",t)},expression:"inputProp.numAttr.precision"}}),e._v(" 位\n  ")],1),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"NUM"!==e.inputProp.commonAttr.checkType&&"DIGITS"!==e.inputProp.commonAttr.checkType&&"TIME"!==e.inputProp.commonAttr.checkType&&"DATE"!==e.inputProp.commonAttr.checkType&&"DATETIME"!==e.inputProp.commonAttr.checkType,expression:"inputProp.commonAttr.checkType !== 'NUM' && inputProp.commonAttr.checkType !== 'DIGITS' && inputProp.commonAttr.checkType !== 'TIME' && inputProp.commonAttr.checkType !== 'DATE' && inputProp.commonAttr.checkType !== 'DATETIME'"}],attrs:{label:"数据范围"}},[e._v("\n    最少字数 "),s("el-input-number",{staticStyle:{"margin-right":"10px"},model:{value:e.inputProp.commonAttr.minlength,callback:function(t){e.$set(e.inputProp.commonAttr,"minlength",t)},expression:"inputProp.commonAttr.minlength"}}),e._v("\n    最大字数 "),s("el-input-number",{model:{value:e.inputProp.commonAttr.maxlength,callback:function(t){e.$set(e.inputProp.commonAttr,"maxlength",t)},expression:"inputProp.commonAttr.maxlength"}})],1)],1)},staticRenderFns:[]};var is={name:"DwPopoverQuAttrs",components:{DwInputProps:s("VU/8")(ss,ns,!1,function(e){s("HWWs")},"data-v-3dd34348",null).exports},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},popoverTitle:{type:String,default:"题目属性"}},data:function(){return{itemIndex:0,checked:!0,tempForm:{selectOptionIndex:0}}},methods:{clickShowPopoverEvent:function(){var e=this;this.$emit("click-item");var t=this.survey.questions[this.index].itemIndex;Jt(this.survey,this.itemIndex,function(t,s){e.survey=t,e.itemIndex=s}),this.upAllItemClick([this.itemIndex,t])},cancelAddOptionEvent:function(){this.upAllItemClick(null)},upAllItemClick:function(e){var t=this;Kt(this.survey,e,function(e){t.survey=e})}}},rs={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-popover",{attrs:{value:e.survey.curEditObj[e.itemIndex].itemClick,placement:"right-start",width:"600",trigger:"manual","popper-class":"dw-qu-set-popper"}},[s("div",[s("div",{staticStyle:{"font-size":"14px","padding-bottom":"5px"}},[s("div",{staticClass:"dw-qu-item"},[s("div",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.popoverTitle))]),e._v(" "),s("div",{staticClass:"dw-display-flex-right"})])]),e._v(" "),s("div",{staticStyle:{padding:"5px"}},[s("div",{staticStyle:{"min-height":"50px"}},[s("el-form",{ref:"form",attrs:{"label-width":"80px",size:"mini"}},[s("el-form-item",{attrs:{label:"是否必答"}},[s("el-radio-group",{model:{value:e.survey.questions[e.index].isRequired,callback:function(t){e.$set(e.survey.questions[e.index],"isRequired",t)},expression:"survey.questions[index].isRequired"}},[s("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),s("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),"RADIO"===e.survey.questions[e.index].quType||"CHECKBOX"===e.survey.questions[e.index].quType?[s("el-form-item",{attrs:{label:"显示风格"}},[s("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择显示风格"},model:{value:e.survey.questions[e.index].hv,callback:function(t){e.$set(e.survey.questions[e.index],"hv",t)},expression:"survey.questions[index].hv"}},[s("el-option",{attrs:{value:1,label:"横向"}}),e._v(" "),s("el-option",{attrs:{value:2,label:"竖向"}}),e._v(" "),s("el-option",{attrs:{value:4,label:"下拉"}})],1),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:1===e.survey.questions[e.index].hv,expression:"survey.questions[index].hv === 1"}]},[e._v("每行显示列数 "),s("el-input-number",{staticStyle:{"margin-right":"10px"},model:{value:e.survey.questions[e.index].cellCount,callback:function(t){e.$set(e.survey.questions[e.index],"cellCount",t)},expression:"survey.questions[index].cellCount"}})],1)],1),e._v(" "),"CHECKBOX"===e.survey.questions[e.index].quType?s("el-form-item",{attrs:{label:"选择个数"}},[e._v("\n              最少 "),s("el-input-number",{staticStyle:{"margin-right":"10px"},model:{value:e.survey.questions[e.index].minLimit,callback:function(t){e.$set(e.survey.questions[e.index],"minLimit",t)},expression:"survey.questions[index].minLimit"}}),e._v("\n              最多 "),s("el-input-number",{model:{value:e.survey.questions[e.index].maxLimit,callback:function(t){e.$set(e.survey.questions[e.index],"maxLimit",t)},expression:"survey.questions[index].maxLimit"}})],1):e._e()]:"FILLBLANK"===e.survey.questions[e.index].quType?[s("dw-input-props",{model:{value:e.survey.questions[e.index].quAttr.inputAttr,callback:function(t){e.$set(e.survey.questions[e.index].quAttr,"inputAttr",t)},expression:"survey.questions[index].quAttr.inputAttr"}})]:"SCORE"===e.survey.questions[e.index].quType?[s("el-form-item",{attrs:{label:"分值区间"}},[e._v("\n              从 "),s("el-input-number",{staticStyle:{"margin-right":"10px"},model:{value:e.survey.questions[e.index].paramInt01,callback:function(t){e.$set(e.survey.questions[e.index],"paramInt01",t)},expression:"survey.questions[index].paramInt01"}}),e._v("\n              到 "),s("el-input-number",{model:{value:e.survey.questions[e.index].paramInt02,callback:function(t){e.$set(e.survey.questions[e.index],"paramInt02",t)},expression:"survey.questions[index].paramInt02"}})],1)]:"MULTIFILLBLANK"===e.survey.questions[e.index].quType?[s("el-form-item",{attrs:{label:"最少回答"}},[s("el-input-number",{staticStyle:{"margin-right":"10px"},model:{value:e.survey.questions[e.index].paramInt01,callback:function(t){e.$set(e.survey.questions[e.index],"paramInt01",t)},expression:"survey.questions[index].paramInt01"}}),e._v(" 项\n            ")],1),e._v(" "),s("div",{staticStyle:{border:"1px solid #eee","border-radius":"4px"}},[s("div",{staticStyle:{background:"#f1f1f1",padding:"8px 0"}},[s("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"选项属性"}},[e._v("\n                  配置选项 "),s("el-select",{attrs:{placeholder:"请选择选项"},model:{value:e.tempForm.selectOptionIndex,callback:function(t){e.$set(e.tempForm,"selectOptionIndex",t)},expression:"tempForm.selectOptionIndex"}},e._l(e.survey.questions[e.index].quMultiFillblanks,function(e,t){return s("el-option",{key:"quMFbk"+t,attrs:{label:e.optionTitleObj.dwText,value:t}})}),1),e._v(" 的属性规则如下\n                ")],1)],1),e._v(" "),s("div",{staticStyle:{"padding-top":"8px","padding-right":"8px"}},[s("el-form-item",{attrs:{label:"是否必填"}},[s("el-radio-group",{model:{value:e.survey.questions[e.index].quMultiFillblanks[e.tempForm.selectOptionIndex].isRequired,callback:function(t){e.$set(e.survey.questions[e.index].quMultiFillblanks[e.tempForm.selectOptionIndex],"isRequired",t)},expression:"survey.questions[index].quMultiFillblanks[tempForm.selectOptionIndex].isRequired"}},[s("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),s("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),s("dw-input-props",{model:{value:e.survey.questions[e.index].quMultiFillblanks[e.tempForm.selectOptionIndex].inputAttr,callback:function(t){e.$set(e.survey.questions[e.index].quMultiFillblanks[e.tempForm.selectOptionIndex],"inputAttr",t)},expression:"survey.questions[index].quMultiFillblanks[tempForm.selectOptionIndex].inputAttr"}})],1)])]:"UPLOADFILE"===e.survey.questions[e.index].quType?[s("el-form-item",{attrs:{label:"文件类型"}},[s("el-select",{staticStyle:{width:"290px"},attrs:{placeholder:"请选择文件类型"},model:{value:e.survey.questions[e.index].fileAccept,callback:function(t){e.$set(e.survey.questions[e.index],"fileAccept",t)},expression:"survey.questions[index].fileAccept"}},[s("el-option",{attrs:{value:0,label:"不限"}}),e._v(" "),s("el-option",{attrs:{value:1,label:"图片(.jpg,.jpeg,.png,.gif,.bmp)"}}),e._v(" "),s("el-option",{attrs:{value:2,label:"文档(.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx)"}}),e._v(" "),s("el-option",{attrs:{value:100,label:"自定义"}})],1),e._v(" "),s("el-input",{directives:[{name:"show",rawName:"v-show",value:100===e.survey.questions[e.index].fileAccept,expression:"survey.questions[index].fileAccept === 100"}],staticStyle:{width:"160px"},model:{value:e.survey.questions[e.index].customFileAccept,callback:function(t){e.$set(e.survey.questions[e.index],"customFileAccept",t)},expression:"survey.questions[index].customFileAccept"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"文件参数"}},[e._v("\n              上传附件数 "),s("el-input-number",{staticStyle:{"margin-right":"15px"},model:{value:e.survey.questions[e.index].fileLimit,callback:function(t){e.$set(e.survey.questions[e.index],"fileLimit",t)},expression:"survey.questions[index].fileLimit"}}),e._v("\n              单个文件最大支持 "),s("el-input-number",{model:{value:e.survey.questions[e.index].fileSize,callback:function(t){e.$set(e.survey.questions[e.index],"fileSize",t)},expression:"survey.questions[index].fileSize"}}),e._v(" M\n              "),s("div",{staticStyle:{color:"#c0c4cc","font-size":"12px"}},[e._v(" (空或0表示限制)")])],1)]:e._e()],2)],1)])]),e._v(" "),s("div",{attrs:{slot:"reference"},on:{click:function(t){return t.stopPropagation(),e.clickShowPopoverEvent.apply(null,arguments)}},slot:"reference"},[e._t("default")],2)])},staticRenderFns:[]};var os=s("VU/8")(is,rs,!1,function(e){s("dZOR"),s("vsL9")},"data-v-077c56c2",null).exports;function as(e,t){var s=0;return null!==e&&e.forEach(function(e,n){e.logicType===t&&s++}),s}function us(e){var t=e.questions;null!==t&&t.forEach(function(e,t){})}function ls(e){var t=JSON.parse(e);return t.questions=[],t}var ds={name:"DwQuLogicShowGo",components:{QuInput:It},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},popoverTitle:{type:String,default:"批量增加选项"},textPlaceholder:{type:String,default:"请输入需要批量新增加的选项内容，每行一个。"},addOrEdit:{type:String,default:"add"},logicType:{type:String,default:""}},data:function(){return{itemIndex:0,activeName:"first"}},computed:{logicNum:function(){return as(this.survey.questions[this.index].questionLogics,this.logicType)},options:function(){return e=this.survey.questions[this.index],"RADIO"===(t=e.quType)?e.quRadios:"CHECKBOX"===t?e.quCheckboxs:"ORDERQU"===t?e.quOrderbys:"MULTIFILLBLANK"===t?e.quMultiFillblanks:"SCORE"===t?e.quScores:void 0;var e,t},questions:function(){return function(e,t){var s=[];if(null!==e){var n=1;e.forEach(function(e,i){"PAGETAG"!==e.quType&&"PARAGRAPH"!==e.quType&&(e.quNum=n++,i>t&&s.push(e))})}return s}(this.survey.questions,this.index)}},methods:{addQuLogic:function(){var e={ckQuId:"",cgQuItemId:null,skQuId:null,logicType:this.logicType,geLe:"",scoreNum:0,error:!1};this.survey.questions[this.index].questionLogics.push(e)},deleteQuLogic:function(e){this.survey.questions[this.index].questionLogics.splice(e,1)}}},cs={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{padding:"0 10px"}},[s("div",[e.logicNum>0?s("div",[e._l(e.survey.questions[e.index].questionLogics,function(t,n){return s("div",{key:"logic_"+n},[t.logicType===e.logicType?s("div",[t.error?s("div",[s("div",{staticStyle:{color:"red","font-size":"12px"}},[e._v("请确认每个配置项都有合适的值")])]):e._e(),e._v(" "),s("div",{staticClass:"dw-design-logic-item"},["FILLBLANK"===e.survey.questions[e.index].quType||"UPLOADFILE"===e.survey.questions[e.index].quType?[s("span",[e._v("如果本题被回答，")])]:[s("span",[e._v("如果本题选项")]),e._v(" "),s("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"请选择本题选项",size:"mini",multiple:""},model:{value:t.cgQuItemId,callback:function(s){e.$set(t,"cgQuItemId",s)},expression:"item.cgQuItemId"}},e._l(e.options,function(e,t){return s("el-option",{key:"quOption_"+t,attrs:{value:e.optionTitleObj.dwText,label:e.optionTitleObj.dwText}})}),1),e._v(" "),"ORDERQU"===e.survey.questions[e.index].quType?s("span",[e._v("排名\n                "),s("el-select",{staticStyle:{width:"70px"},attrs:{placeholder:"请选择关系",size:"mini"},model:{value:t.geLe,callback:function(s){e.$set(t,"geLe",s)},expression:"item.geLe"}},[s("el-option",{attrs:{value:"1",label:"大于"}}),e._v(" "),s("el-option",{attrs:{value:"2",label:"小于"}})],1),e._v(" "),s("el-input-number",{staticStyle:{width:"60px"},attrs:{controls:!1,size:"mini"},model:{value:t.scoreNum,callback:function(s){e.$set(t,"scoreNum",s)},expression:"item.scoreNum"}}),e._v("\n                名，\n              ")],1):"SCORE"===e.survey.questions[e.index].quType?s("span",[e._v("得分\n                "),s("el-select",{staticStyle:{width:"70px"},attrs:{placeholder:"请选择关系",size:"mini"},model:{value:t.geLe,callback:function(s){e.$set(t,"geLe",s)},expression:"item.geLe"}},[s("el-option",{attrs:{value:"1",label:"大于"}}),e._v(" "),s("el-option",{attrs:{value:"2",label:"小于"}})],1),e._v(" "),s("el-input-number",{staticStyle:{width:"60px"},attrs:{controls:!1,size:"mini"},model:{value:t.scoreNum,callback:function(s){e.$set(t,"scoreNum",s)},expression:"item.scoreNum"}}),e._v("\n                分，\n              ")],1):"MULTIFILLBLANK"===e.survey.questions[e.index].quType?s("span",[e._v("被回答，")]):s("span",[e._v("被选项，")])],e._v(" "),"1"===t.logicType?s("span",[e._v("则跳转")]):"2"===t.logicType?s("span",[e._v("则显示")]):e._e(),e._v(" "),s("el-select",{staticStyle:{width:"130px"},attrs:{multiple:"2"===e.logicType,placeholder:"请选择题目",size:"mini"},model:{value:t.skQuId,callback:function(s){e.$set(t,"skQuId",s)},expression:"item.skQuId"}},e._l(e.questions,function(e,t){return s("el-option",{key:"question_"+t,attrs:{value:"Q"+e.quNum+"、"+e.quTitleObj.dwText,label:"Q"+e.quNum+"、"+e.quTitleObj.dwText}})}),1),e._v(" "),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.deleteQuLogic(n)}}})],2)]):e._e()])}),e._v(" "),s("div",{staticStyle:{"margin-top":"10px"}},[s("el-button",{attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-plus"},on:{click:e.addQuLogic}},[e._v("新增逻辑")])],1)],2):s("div",[s("el-empty",{attrs:{"image-size":30,description:"暂无相关逻辑数据"}},[s("el-button",{attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-plus"},on:{click:e.addQuLogic}},[e._v("新增逻辑")])],1)],1)])])},staticRenderFns:[]};var vs={name:"DwPopoverQuLogics",components:{DwQuLogicShowGo:s("VU/8")(ds,cs,!1,function(e){s("w+jQ")},"data-v-3514c83f",null).exports},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},popoverTitle:{type:String,default:"批量增加选项"},textPlaceholder:{type:String,default:"请输入需要批量新增加的选项内容，每行一个。"},addOrEdit:{type:String,default:"add"}},data:function(){return{itemIndex:0,activeName:"logicShowTab"}},computed:{logicNum1:function(){return as(this.survey.questions[this.index].questionLogics,"1")},logicNum2:function(){return as(this.survey.questions[this.index].questionLogics,"2")},popoverValue:function(){return!this.checkQuLogic(!this.survey.curEditObj[this.itemIndex].itemClick)||this.survey.curEditObj[this.itemIndex].itemClick}},methods:{showPopoverLoad:function(){var e=!1,t=!1;this.survey.questions[this.index].questionLogics.forEach(function(s,n){"1"===s.logicType&&(e=!0),"2"===s.logicType&&(t=!0)}),t?this.activeName="logicShowTab":e&&(this.activeName="logicGoTab")},clickShowPopoverEvent:function(){var e=this;this.$emit("click-item");var t=this.survey.questions[this.index].itemIndex;Jt(this.survey,this.itemIndex,function(t,s){e.survey=t,e.itemIndex=s}),this.upAllItemClick([this.itemIndex,t])},upAllItemClick:function(e){var t=this;Kt(this.survey,e,function(e){t.survey=e})},beforeLeave:function(e,t){return this.checkQuLogic(!0)},checkQuLogic:function(e){var t=!0;if(this.survey.questions[this.index].questionLogics.length>0){var s=this.survey.questions[this.index].quType;this.survey.questions[this.index].questionLogics.forEach(function(n,i){var r=!1;"FILLBLANK"===s||"UPLOADFILE"===s?(null===n.skQuId||n.skQuId.length<=0)&&(r=!0):(null===n.cgQuItemId||null===n.skQuId||n.cgQuItemId.length<=0||n.skQuId.length<=0)&&(r=!0),r?e&&(n.error=!0,t=!1):n.error=!1}),t||(e&&this.$message({message:"提醒，如果增加了逻辑配置项，请确认每个配置项都有合适的值！",customClass:"dw-msg-waring",iconClass:"el-icon-info"}),this.clickShowPopoverEvent())}return t}}},ps={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-popover",{attrs:{value:e.popoverValue,placement:"right-start",width:"700",trigger:"manual","popper-class":"dw-qu-set-popper"},on:{show:e.showPopoverLoad}},[s("div",[s("div",[s("el-tabs",{attrs:{"before-leave":e.beforeLeave},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"显示逻辑",name:"logicShowTab"}},[s("span",{attrs:{slot:"label"},slot:"label"},[e._v("显示逻辑 "),s("el-badge",{staticClass:"mark",attrs:{value:e.logicNum2,hidden:e.logicNum2<=0}})],1),e._v(" "),s("dw-qu-logic-show-go",{attrs:{index:e.index,"logic-type":"2"},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1),e._v(" "),s("el-tab-pane",{attrs:{label:"跳转逻辑",name:"logicGoTab"}},[s("span",{attrs:{slot:"label"},slot:"label"},[e._v("跳转逻辑 "),s("el-badge",{staticClass:"mark",attrs:{value:e.logicNum1,hidden:e.logicNum1<=0}})],1),e._v(" "),s("dw-qu-logic-show-go",{attrs:{index:e.index,"logic-type":"1"},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)],1)],1)]),e._v(" "),s("div",{attrs:{slot:"reference"},on:{click:function(t){return t.stopPropagation(),e.clickShowPopoverEvent.apply(null,arguments)}},slot:"reference"},[e._t("default")],2)])},staticRenderFns:[]};function ms(e,t,s){(function(e){return x({url:"/api/dwsurvey/app/dw-design-survey/survey-json-by-survey-id.do",method:"get",params:e})})(e).then(function(e){console.debug("surveyJsonBySurveyId",e);var n=e.data;if(200===n.resultCode){var i=n.data;null!==i&&i.hasOwnProperty("surveyJsonText")&&null!==i.surveyJsonText&&""!==i.surveyJsonText?t(hs(JSON.parse(i.surveyJsonText))):s()}})}function ys(e,t){ms(e,t,function(){!function(e,t){(function(e){return x({url:"/api/dwsurvey/app/design/survey-design/surveyAll.do",method:"post",params:e})})(e).then(function(e){console.debug("querySurveyAll",e);var s=e.data;if(200===s.resultCode){console.debug("httpResult.data",s.data);var n=hs(s.data);console.debug("parseResultData",n),t(n)}})}(e,t)})}var fs={pageSize:function(e){var t=1;return e.questions.forEach(function(e,s){"PAGETAG"===e.quType&&t++}),t},quInPageNum:function(e,t){var s=0;return e.questions.forEach(function(e,n){"PAGETAG"===e.quType&&n<=t&&s++}),s}};function hs(e){return null!==e&&(e.hasOwnProperty("surveyNameObj")||(e.surveyNameObj={dwHtml:e.surveyName,dwText:e.surveyNameText,dwPlaceholder:"请输入问卷标题"}),function(e){var t=e.surveyDetail;if(null!==t){var s=null!==t.surveyNoteText?t.surveyNoteText:"";e.surveyDetail.hasOwnProperty("surveyNodeObj")||(e.surveyDetail.surveyNodeObj={dwHtml:t.surveyNote,dwText:s,dwPlaceholder:"请输入问卷介绍"})}e.surveyDetail.effective_model=1===e.surveyDetail.effective,e.surveyDetail.effectiveIp_model=1===e.surveyDetail.effectiveIp,e.surveyDetail.refresh_model=1===e.surveyDetail.refresh,e.surveyDetail.rule_model=3===e.surveyDetail.rule,e.surveyDetail.ynEndNum_model=1===e.surveyDetail.ynEndNum,e.surveyDetail.endNum_model=e.surveyDetail.endNum,e.surveyDetail.ynEndTime_model=1===e.surveyDetail.ynEndTime,e.surveyDetail.hasOwnProperty("dwId")||(e.surveyDetail.dwId=Object(Zt.a)());e.hasOwnProperty("surveyAttrs")||(e.surveyAttrs={anBroAttr:{enabled:!1,anNum:1},anIpAttr:{enabled:!1,anNum:1},anRefreshAttr:{randomCode:!0},anPwdAttr:{enabled:!1,anPwdCode:null},anEndNumAttr:{enabled:!1,endNum:null},anEndTimeAttr:{enabled:!1,endTime:null}})}(e),ws(e.questions,!0),e.surveyTest="",e.curEditObj=[{itemClick:!1}],e.tempDataType="none",e.hasOwnProperty("dwId")||(e.dwId=Object(Zt.a)()),e.showSurvey=!0),e}function ws(e,t){return null!==e&&e.length>0&&e.forEach(function(e,s){!function(e,t){var s=null!==e.quName?e.quName:e.quTitle;e.hasOwnProperty("quTitleObj")||(e.quTitleObj={dwHtml:e.quTitle,dwText:s,dwPlaceholder:"请输入题目标题"});var n=e.quNote;e.hasOwnProperty("quNoteObj")||(e.quNoteObj={dwHtml:n,dwText:n,dwPlaceholder:"请输入题目备注"});null===e.questionLogics&&(e.questionLogics=[]);t&&!e.hasOwnProperty("dwId")&&(e.dwId=Object(Zt.a)());var i=e.quType;"RADIO"===i?function(e){e.quTypeName="单选题",0===e.cellCount&&(e.cellCount=2);bs(e,e.quRadios)}(e):"CHECKBOX"===i?function(e){e.quTypeName="多选题",0===e.cellCount&&(e.cellCount=2);bs(e,e.quCheckboxs)}(e):"ORDERQU"===i?function(e){e.quTypeName="排序题",bs(e,e.quOrderbys)}(e):"MULTIFILLBLANK"===i?function(e){e.quTypeName="多项填空题",bs(e,e.quMultiFillblanks)}(e):"SCORE"===i?function(e){e.quTypeName="评分题",bs(e,e.quScores)}(e):"FILLBLANK"===i?function(e){e.quTypeName="填空题",e.hasOwnProperty("placeholder")||(e.placeholder="请输入");e.hasOwnProperty("step")||(e.step="00:05")}(e):"UPLOADFILE"===i?function(e){e.quTypeName="上传题",e.hasOwnProperty("placeholder")||(e.placeholder="请输入");e.hasOwnProperty("step")||(e.step="00:05")}(e):"PAGETAG"===i?e.quTypeName="分页组件":"PARAGRAPH"===i&&(e.quTypeName="分段组件");e.hasOwnProperty("validateObj")||(e.validateObj={errorText:"",isOk:!0});gs(e)}(e,t)}),e}function gs(e){var t=xs();return e.hasOwnProperty("quAttr")?(e.quAttr.hasOwnProperty("isRequired")||(e.quAttr.isRequired=!0),e.quAttr.hasOwnProperty("inputAttr")||(e.quAttr.inputAttr=t)):e.quAttr={isRequired:!0,inputAttr:t},e}function xs(e){return{commonAttr:{checkType:null,placeholder:"",defaultValue:"",inputRow:1,minlength:0,maxlength:123},dateTimeAttr:{timeRange:{range:null,step:null},dateFormat:null,attrs:[]},numAttr:{min:null,max:null}}}function bs(e,t){null!==t&&t.length>0&&t.forEach(function(t,s){var n=null!==t.optionTitle?t.optionTitle:t.optionName,i=null!==t.optionName?t.optionName:n;t.hasOwnProperty("optionTitleObj")||(t.optionTitleObj={dwHtml:i,dwText:n,dwPlaceholder:"请输入选项内容"}),t.hasOwnProperty("dateAttrs")||(t.dateAttrs=[]),t.hasOwnProperty("checked")||(t.checked=!1),t.hasOwnProperty("orderIndex")||(t.orderIndex=0),e.hasOwnProperty("dwId")&&!t.hasOwnProperty("dwId")&&(t.dwId=Object(Zt.a)());var r={commonAttr:{checkType:null,placeholder:"",defaultValue:"",inputRow:1,minlength:0,maxlength:123},dateTimeAttr:{timeRange:{range:null,step:null},dateFormat:null,attrs:[]},numAttr:{min:null,max:null}};t.hasOwnProperty("inputAttr")||(t.inputAttr=r)})}function qs(e){e.dwId=Object(Zt.a)();var t=e.quType;"RADIO"===t?Cs(e,e.quRadios):"CHECKBOX"===t?Cs(e,e.quCheckboxs):"ORDERQU"===t?Cs(e,e.quOrderbys):"MULTIFILLBLANK"===t?Cs(e,e.quMultiFillblanks):"SCORE"===t&&Cs(e,e.quScores)}function Cs(e,t){null!==t&&t.length>0&&t.forEach(function(e,t){e.dwId=Object(Zt.a)()})}var _s={name:"DwDesignQuestionCommon",components:{DwPopoverQuLogics:s("VU/8")(vs,ps,!1,function(e){s("/Oej"),s("F+v3")},"data-v-58743276",null).exports,DwPopoverQuAttrs:os,DwPopoverMoreOptions:ts,DwTextEditLabelCommon:Vt,DwTextEditLabel:Mt},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},options:{type:Object,default:function(){return{themeColor:"red"}}},survey:{type:Object,default:function(){}}},data:function(){return{hover:!1,itemHover:!1,quTitle:"text",itemIndex:0,moreOptionText:"",openDelay:300}},computed:{quNum:function(){var e=this,t=0;return this.survey.questions.forEach(function(s,n){"PAGETAG"!==s.quType&&"PARAGRAPH"!==s.quType&&n<=e.index&&t++}),t}},watch:{survey:function(e,t){console.log("firstName changed from "+t+" to "+e)}},methods:{mouseleave:function(){this.hover=!1},mouseover:function(){this.hover=!0},mouseleaveItem:function(){this.itemHover=!1},mouseoverItem:function(){this.itemHover=!0},clickItem:function(){var e=this;Wt(this.survey,this.itemIndex,this.index,function(t,s){e.survey=t,e.itemIndex=s})},dwAddQuItemEvent:function(){var e=this,t={id:null,optionTitleObj:{dwHtml:"",dwText:"",dwPlaceholder:"请输入内容",isRefreshValue:!0},itemClick:!0};t.dwId=Object(Zt.a)();var s=zt(this.survey,this.index,t);this.$emit("update-survey",s),Kt(this.survey,null,function(t){e.survey=t})},deleteQu:function(){var e=this;this.$confirm("确认删除？").then(function(t){e.survey.questions.splice(e.index,1),e.survey=Yt(e.survey),e.survey.isRefreshAllQu=!0}).catch(function(e){})},copyQu:function(){var e=this.survey.questions[this.index],t=Gt(JSON.parse(u()(e)));qs(t),this.survey.questions.splice(this.index+1,0,t),this.survey=Yt(this.survey),this.survey.isRefreshAllQu=!0},upQu:function(){var e=Gt(JSON.parse(u()(this.survey.questions[this.index]))),t=Gt(JSON.parse(u()(this.survey.questions[this.index-1])));this.survey.questions.splice(this.index-1,1,e),this.survey.questions.splice(this.index,1,t)},downQu:function(){var e=Gt(JSON.parse(u()(this.survey.questions[this.index]))),t=Gt(JSON.parse(u()(this.survey.questions[this.index+1])));this.survey.questions.splice(this.index+1,1,e),this.survey.questions.splice(this.index,1,t)}}},As={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"dw-question-root dw-padding-tb-5",on:{mouseover:e.mouseover,mouseleave:e.mouseleave}},[s("div",{staticClass:"dw-question-top dw-height-20px",staticStyle:{display:"none"}},[s("div",{},[s("div",{staticClass:"dw-margin-left-right-10",staticStyle:{"font-size":"14px"}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hover||e.survey.curEditObj[e.itemIndex].itemClick,expression:"hover || survey.curEditObj[itemIndex].itemClick"}],staticClass:"dw-display-flex-right"},[s("el-tooltip",{staticClass:"item",attrs:{"open-delay":e.openDelay,effect:"dark",content:"复制本题",placement:"top"}},[s("div",{staticClass:"dw-question-toolbar dw-margin-right-10"},[s("i",{staticClass:"dwMoveSortQu dw-cursor-pointer dw-event-icon dw-event-color fa fa-copy",attrs:{"aria-hidden":"true"}})])]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{"open-delay":e.openDelay,effect:"dark",content:"向上移",placement:"top"}},[s("div",{staticClass:"dw-question-toolbar dw-margin-right-5"},[s("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-list-ul",attrs:{"aria-hidden":"true"}})])]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{"open-delay":e.openDelay,effect:"dark",content:"向下移",placement:"top"}},[s("div",{staticClass:"dw-question-toolbar dw-margin-right-10"},[s("i",{staticClass:"dwMoveSortQu dw-cursor-pointer dw-event-icon dw-event-color fa el-icon-bottom",attrs:{"aria-hidden":"true"}})])])],1)])]),e._v(" "),s("div",{staticClass:"dw-question-body"},[s("div",{staticClass:"dw-question-body-left dw-text-align-center dw-padding-top-2"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.hover||e.survey.curEditObj[e.itemIndex].itemClick,expression:"hover || survey.curEditObj[itemIndex].itemClick"}]},[s("el-tooltip",{staticClass:"item",attrs:{"open-delay":e.openDelay,effect:"dark",content:"移动本题",placement:"left"}},[s("div",{staticClass:"dw-question-toolbar dw-margin-bottom-10"},[s("i",{staticClass:"dwMoveSortQu dw-cursor-pointer dw-event-color fa fa-arrows",attrs:{"aria-hidden":"true"}})])]),e._v(" "),"PARAGRAPH"!==e.survey.questions[e.index].quType&&"PAGETAG"!==e.survey.questions[e.index].quType?[s("el-tooltip",{staticClass:"item",attrs:{"open-delay":e.openDelay,effect:"dark",content:"题目设置",placement:"left"}},[s("dw-popover-qu-attrs",{attrs:{index:e.index,"add-or-edit":"add"},on:{"click-item":e.clickItem},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}},[s("div",{staticClass:"dw-question-toolbar dw-margin-bottom-10"},[s("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-cog",attrs:{"aria-hidden":"true"}})])])],1),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{"open-delay":e.openDelay,effect:"dark",content:"题目逻辑",placement:"left"}},[s("dw-popover-qu-logics",{attrs:{index:e.index,"add-or-edit":"add"},on:{"click-item":e.clickItem},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}},[s("el-badge",{staticClass:"dw-el-badge-logic-set",attrs:{hidden:e.survey.questions[e.index].questionLogics.length<=0,value:e.survey.questions[e.index].questionLogics.length}},[s("div",{staticClass:"dw-question-toolbar dw-margin-bottom-10"},[s("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-code-fork",attrs:{"aria-hidden":"true"}})])])],1)],1)]:e._e(),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{"open-delay":e.openDelay,effect:"dark",content:"删除本题",placement:"left"}},[s("div",{staticClass:"dw-question-toolbar dw-margin-bottom-10",on:{click:e.deleteQu}},[s("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-trash-alt",attrs:{"aria-hidden":"true"}})])])],2)]),e._v(" "),s("div",{staticClass:"dw-question-body-center"},[s("div",{staticClass:"dw-question-body-center-body dw-color-333"},[s("div",{staticClass:"dw-qu-content"},["PAGETAG"!==e.survey.questions[e.index].quType?s("div",{staticClass:"dw-qu-title-body dw-display-flex dw-width-100bf"},["PARAGRAPH"!==e.survey.questions[e.index].quType?s("div",{staticClass:"dw-qu-num"},[e._v(e._s(e.quNum)+"、")]):e._e(),e._v(" "),s("div",{staticClass:"dw-flex-item-auto",class:"PARAGRAPH"!==e.survey.questions[e.index].quType?"":"dw-qu-paragraph"},[s("dw-text-edit-label-common",{ref:"dwQuTitle",attrs:{survey:e.survey},model:{value:e.survey.questions[e.index].quTitleObj,callback:function(t){e.$set(e.survey.questions[e.index],"quTitleObj",t)},expression:"survey.questions[index].quTitleObj"}})],1),e._v(" "),s("div",{staticClass:"dw-qu-type-name dw-padding-left-10"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.hover,expression:"hover"}],staticClass:"dw-font-12 dw-color-grey-10"},[e._v(e._s(e.survey.questions[e.index].quTypeName))])])]):e._e(),e._v(" "),s("div",{staticStyle:{"font-size":"12px",color:"grey","margin-bottom":"5px"}},[s("dw-text-edit-label-common",{ref:"dwQuNote",attrs:{survey:e.survey},model:{value:e.survey.questions[e.index].quNoteObj,callback:function(t){e.$set(e.survey.questions[e.index],"quNoteObj",t)},expression:"survey.questions[index].quNoteObj"}})],1),e._v(" "),s("div",{staticClass:"dw-qu-content-body"},[s("div",{staticClass:"dw-qu-content-body-content"},[e._t("editQuContent")],2),e._v(" "),s("div",{staticClass:"dw-question-body-bottom dw-padding-top-10 dw-height-20px"},["PARAGRAPH"!==e.survey.questions[e.index].quType&&"PAGETAG"!==e.survey.questions[e.index].quType?s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.hover||e.survey.curEditObj[e.itemIndex].itemClick,expression:"hover || survey.curEditObj[itemIndex].itemClick"}]},["FILLBLANK"!==e.survey.questions[e.index].quType&&"UPLOADFILE"!==e.survey.questions[e.index].quType?s("div",{staticClass:"dw-display-flex-left"},[4===e.survey.questions[e.index].hv?[s("el-tooltip",{staticClass:"item dw-margin-right-10",attrs:{"open-delay":e.openDelay,effect:"dark",content:"修改选项",placement:"left"}},[s("dw-popover-more-options",{attrs:{index:e.index,"add-or-edit":"edit","popover-title":"修改题目选项","text-placeholder":"请输入修改的内容"},on:{"click-item":e.clickItem},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}},[s("div",{staticClass:"dw-question-toolbar"},[s("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-pencil",attrs:{"aria-hidden":"true"}})])])],1)]:[s("el-tooltip",{staticClass:"item dw-margin-right-10",attrs:{"open-delay":e.openDelay,effect:"dark",content:"单项添加选项",placement:"left"}},[s("div",{staticClass:"dw-question-toolbar",on:{click:function(t){return t.stopPropagation(),e.dwAddQuItemEvent.apply(null,arguments)}}},[s("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-plus",attrs:{"aria-hidden":"true"}})])])],e._v(" "),[s("el-tooltip",{staticClass:"item dw-margin-right-10",attrs:{disabled:e.survey.curEditObj[e.itemIndex].itemClick,"open-delay":e.openDelay,effect:"dark",content:"批量添加选项",placement:"right"}},[s("dw-popover-more-options",{attrs:{index:e.index,"add-or-edit":"add"},on:{"click-item":e.clickItem},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}},[s("div",{staticClass:"dw-question-toolbar"},[s("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-list-ul",attrs:{"aria-hidden":"true"}})])])],1)]],2):e._e()])]):e._e()])])])])]),e._v(" "),s("div",{staticClass:"dw-question-body-right dw-text-align-center dw-padding-top-2"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.hover||e.survey.curEditObj[e.itemIndex].itemClick,expression:"hover || survey.curEditObj[itemIndex].itemClick"}]},[s("div",{staticClass:"dw-question-toolbar dw-margin-bottom-10",on:{click:function(t){return t.stopPropagation(),e.copyQu.apply(null,arguments)}}},[s("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-clipboard",attrs:{"aria-hidden":"true"}})]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.index>0,expression:"index>0"}],staticClass:"dw-question-toolbar dw-margin-bottom-10",on:{click:function(t){return t.stopPropagation(),e.upQu.apply(null,arguments)}}},[s("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-arrow-up",attrs:{"aria-hidden":"true"}})]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.index+1<e.survey.questions.length,expression:"(index+1)<survey.questions.length"}],staticClass:"dw-question-toolbar dw-margin-bottom-10",on:{click:function(t){return t.stopPropagation(),e.downQu.apply(null,arguments)}}},[s("i",{staticClass:"dw-cursor-pointer dw-event-color fa fa-arrow-down",attrs:{"aria-hidden":"true"}})])])])])])])},staticRenderFns:[]};var Ss=s("VU/8")(_s,As,!1,function(e){s("178K"),s("nS1t")},"data-v-59b05910",null).exports,ks={name:"DwQuOptionCommon2Item",components:{DwTextEditLabel:Mt},model:{prop:"options",event:"update-options"},props:{quIndex:{type:Number,default:0},optionIndex:{type:Number,default:0},options:{type:Array,default:function(){return[]}},option:{type:Object,default:function(){}},survey:{type:Object,default:function(){}},quType:{type:String,default:""},value:{type:Object,default:function(){}}},data:function(){return{itemHover:!1,itemClick:!1,itemIndex:0,inputText:""}},watch:{options:function(e,t){}},mounted:function(){this.options[this.optionIndex].itemClick&&(this.upItemClick(),this.editFocus(),this.options[this.optionIndex].itemClick=!1)},methods:{clickItem:function(){this.upItemClick(),this.upAllItemClick()},upItemClick:function(){0===this.itemIndex&&(this.itemIndex=this.survey.curEditObj.push({itemClick:!0})-1),this.survey.curEditObj[this.itemIndex].itemClick=!0},upAllItemClick:function(){for(var e=this.survey.curEditObj,t=0;t<e.length;t++)t!==this.itemIndex&&(this.survey.curEditObj[t].itemClick=!1)},mouseleaveItem:function(){this.itemHover=!1},mouseoverItem:function(){this.itemHover=!0},addOptionBefore:function(){var e={id:null,optionTitleObj:{dwHtml:"",dwText:"",dwPlaceholder:"请输入内容"},itemClick:!1};e.dwId=Object(Zt.a)(),this.options.splice(this.optionIndex+1,0,e),this.$emit("update-options",this.options),this.$emit("refresh-options",this.optionIndex+1)},upValue:function(e){this.options[this.optionIndex].optionTitleObj=e,this.$emit("update-options",this.options)},dragClick:function(e){this.$refs.dwEditLabel.upEditorText(this.options[this.optionIndex].optionTitleObj.dwHtml),console.debug("this.optionIndex",this.optionIndex),console.debug("focusIndex",e),null!==e&&this.optionIndex===e&&(this.upItemClick(),this.editFocus())},editFocus:function(){this.$refs.dwEditLabel.editFocus()},deleteOption:function(){console.debug("delete"),this.options.splice(this.optionIndex,1),this.$emit("refresh-options",null)}}},Ts={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-qu-item",on:{click:function(t){return t.stopPropagation(),e.clickItem.apply(null,arguments)},mouseover:e.mouseoverItem,mouseleave:e.mouseleaveItem}},[s("div",{staticClass:"dw-qu-item-body"},[s("div",{staticClass:"dw-qu-item-el-checkbox-radio"},["RADIO"===e.quType?s("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon far fa-circle"}):e._e(),e._v(" "),"CHECKBOX"===e.quType?s("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon far fa-square"}):e._e(),e._v(" "),s("dw-text-edit-label",{ref:"dwEditLabel",attrs:{"item-click":e.survey.curEditObj[e.itemIndex].itemClick},on:{upItemClick:e.upItemClick,upValue:e.upValue},model:{value:e.options[e.optionIndex].optionTitleObj,callback:function(t){e.$set(e.options[e.optionIndex],"optionTitleObj",t)},expression:"options[optionIndex].optionTitleObj"}})],1),e._v(" "),"MULTIFILLBLANK"===e.quType?[e.options[e.optionIndex].answerInputRow>1?s("el-input",{attrs:{placeholder:e.options[e.optionIndex].placeholder,autosize:{minRows:e.options[e.optionIndex].answerInputRow},type:"textarea"},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}}):s("el-input",{attrs:{placeholder:e.options[e.optionIndex].placeholder},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}})]:e._e(),e._v(" "),"SCORE"===e.quType?s("el-rate",{attrs:{max:e.survey.questions[e.quIndex].paramInt02}}):e._e()],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.curEditObj[e.itemIndex].itemClick,expression:"survey.curEditObj[itemIndex].itemClick"}],staticClass:"dw-qu-item-toolbar dw-display-flex-right"},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"排序选项",placement:"top"}},[s("div",{staticClass:"dw-question-toolbar dw-margin-right-10"},[s("i",{staticClass:"dwMoveSortQuOption dw-cursor-pointer dw-event-color el-icon-rank",attrs:{"aria-hidden":"true"}})])]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"在后添加选项",placement:"top"}},[s("div",{staticClass:"dw-question-toolbar dw-margin-right-10",on:{click:function(t){return t.stopPropagation(),e.addOptionBefore.apply(null,arguments)}}},[s("i",{staticClass:"dw-cursor-pointer dw-event-color el-icon-circle-plus-outline",attrs:{"aria-hidden":"true"}})])]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除当前选项",placement:"top"}},[s("div",{staticClass:"dw-question-toolbar dw-margin-right-10",on:{click:function(t){return t.stopPropagation(),e.deleteOption.apply(null,arguments)}}},[s("i",{staticClass:"dw-cursor-pointer dw-event-color el-icon-remove-outline",attrs:{"aria-hidden":"true"}})])])],1)])},staticRenderFns:[]};var Is=s("VU/8")(ks,Ts,!1,function(e){s("NY6L")},"data-v-39bf6ecd",null).exports,Os={name:"DwQuOptionCommon2",components:{DwQuOptionCommon2Item:Is,draggable:nt.a},model:{prop:"options",event:"update-options"},props:{index:{type:Number,default:0},options:{type:Array,default:function(){return[]}},survey:{type:Object,default:function(){}},quType:{type:String,default:""}},data:function(){return{dragOptions:this.options,drag:!1}},watch:{options:function(e,t){this.refreshData()}},methods:{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1,this.refreshOptions(null)},upAllItemClick:function(){for(var e=this.survey.curEditObj,t=0;t<e.length;t++)t!==this.itemIndex&&(this.survey.curEditObj[t].itemClick=!1)},refreshOptions:function(e){var t=this;this.$emit("update-options",this.dragOptions),this.upAllItemClick(),this.$nextTick(function(){for(var s=t.$refs.quCommonItem,n=0;n<s.length;n++)s[n].dragClick(e)})},refreshData:function(){this.dragOptions=this.options}}},Ds={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("draggable",{attrs:{"force-fallback":!0,group:{name:"qu-option",pull:!1,put:!1},handle:".dwMoveSortQuOption",animation:"300","drag-class":"dwDragClass","ghost-class":"dwGhostClass","chosen-class":"dwChosenClass"},on:{start:e.onStart,end:e.onEnd},model:{value:e.dragOptions,callback:function(t){e.dragOptions=t},expression:"dragOptions"}},[s("transition-group",e._l(e.dragOptions,function(t,n){return s("div",{key:"quOption-"+n},[s("dw-qu-option-common2-item",{ref:"quCommonItem",refInFor:!0,attrs:{survey:e.survey,"qu-index":e.index,"option-index":n,"qu-type":e.quType},on:{"refresh-options":e.refreshOptions},model:{value:e.dragOptions,callback:function(t){e.dragOptions=t},expression:"dragOptions"}})],1)}),0)],1)],1)},staticRenderFns:[]};var Es=s("VU/8")(Os,Ds,!1,function(e){s("pjAq")},"data-v-0f755f93",null).exports,Ps={name:"DwQuOptionCommon1Item",components:{DwTextEditLabel:Mt},model:{prop:"options",event:"update-options"},props:{optionIndex:{type:Number,default:0},options:{type:Array,default:function(){return[]}},survey:{type:Object,default:function(){}},quType:{type:String,default:""},value:{type:Object,default:function(){}}},data:function(){return{itemHover:!1,itemClick:!1,itemIndex:0}},watch:{options:function(e,t){}},mounted:function(){this.options[this.optionIndex].itemClick&&(this.upItemClick(),this.editFocus(),this.options[this.optionIndex].itemClick=!1)},methods:{clickItem:function(){this.upItemClick(),this.upAllItemClick()},upItemClick:function(){0===this.itemIndex&&(this.itemIndex=this.survey.curEditObj.push({itemClick:!0})-1),this.survey.curEditObj[this.itemIndex].itemClick=!0},upAllItemClick:function(){for(var e=this.survey.curEditObj,t=0;t<e.length;t++)t!==this.itemIndex&&(this.survey.curEditObj[t].itemClick=!1)},mouseleaveItem:function(){this.itemHover=!1},mouseoverItem:function(){this.itemHover=!0},addOptionBefore:function(){this.options.splice(this.optionIndex+1,0,{id:null,optionTitleObj:{dwHtml:"",dwText:"",dwPlaceholder:"请输入内容"},itemClick:!1}),this.$emit("update-options",this.options),this.$emit("refresh-options",this.optionIndex+1)},upValue:function(e){this.options[this.optionIndex].optionTitleObj=e,this.$emit("update-options",this.options)},dragClick:function(e){this.$refs.dwEditLabel.upEditorText(this.options[this.optionIndex].optionTitleObj.dwHtml),null!==e&&this.optionIndex===e&&(this.upItemClick(),this.editFocus())},editFocus:function(){this.$refs.dwEditLabel.editFocus()},deleteOption:function(){this.options.splice(this.optionIndex,1),this.$emit("refresh-options",null)}}},Rs={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-qu-item",on:{click:function(t){return t.stopPropagation(),e.clickItem.apply(null,arguments)},mouseover:e.mouseoverItem,mouseleave:e.mouseleaveItem}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.curEditObj[e.itemIndex].itemClick,expression:"survey.curEditObj[itemIndex].itemClick"}],staticClass:"dw-qu-item-toolbar"},[s("div",{staticClass:"dw-display-grid"},[e._m(0),e._v(" "),s("div",{staticClass:"dw-question-toolbar",on:{click:function(t){return t.stopPropagation(),e.addOptionBefore.apply(null,arguments)}}},[s("i",{staticClass:"dw-cursor-pointer dw-event-color el-icon-circle-plus-outline",attrs:{"aria-hidden":"true"}})]),e._v(" "),s("div",{staticClass:"dw-question-toolbar",on:{click:function(t){return t.stopPropagation(),e.deleteOption.apply(null,arguments)}}},[s("i",{staticClass:"dw-cursor-pointer dw-event-color el-icon-remove-outline",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),s("div",{staticClass:"dw-qu-item-body"},[s("div",{staticClass:"dw-qu-item-el-checkbox-radio"},[s("i",{directives:[{name:"show",rawName:"v-show",value:"RADIO"===e.quType,expression:"quType==='RADIO'"}],staticClass:"dw-qu-item-el-checkbox-radio-icon far fa-circle"}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:"CHECKBOX"===e.quType,expression:"quType==='CHECKBOX'"}],staticClass:"dw-qu-item-el-checkbox-radio-icon far fa-square"}),e._v(" "),s("dw-text-edit-label",{ref:"dwEditLabel",attrs:{"item-click":e.survey.curEditObj[e.itemIndex].itemClick},on:{upItemClick:e.upItemClick,upValue:e.upValue},model:{value:e.options[e.optionIndex].optionTitleObj,callback:function(t){e.$set(e.options[e.optionIndex],"optionTitleObj",t)},expression:"options[optionIndex].optionTitleObj"}})],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-question-toolbar"},[t("i",{staticClass:"dwMoveSortQuOption dw-cursor-pointer dw-event-color el-icon-rank",attrs:{"aria-hidden":"true"}})])}]};var Ns=s("VU/8")(Ps,Rs,!1,function(e){s("MQAu")},"data-v-4c4a1d1c",null).exports,Ls={name:"DwQuOptionCommon1",components:{DwQuOptionCommon1Item:Ns,draggable:nt.a},model:{prop:"options",event:"update-options"},props:{index:{type:Number,default:0},options:{type:Array,default:function(){return[]}},survey:{type:Object,default:function(){}},quType:{type:String,default:""}},data:function(){return{dragOptions:this.options,drag:!1}},watch:{options:function(e,t){console.debug("index",this.index),this.refreshData()}},methods:{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1,this.refreshOptions(null)},upAllItemClick:function(){for(var e=this.survey.curEditObj,t=0;t<e.length;t++)t!==this.itemIndex&&(this.survey.curEditObj[t].itemClick=!1)},refreshOptions:function(e){var t=this;this.$emit("update-options",this.dragOptions),this.upAllItemClick(),this.$nextTick(function(){for(var s=t.$refs.quCommonItem,n=0;n<s.length;n++)s[n].dragClick(e)})},refreshData:function(){this.dragOptions=this.options}}},Fs={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("draggable",{attrs:{"force-fallback":!0,group:{name:"option",pull:!1,put:!1},handle:".dwMoveSortQuOption",animation:"300","drag-class":"dwDragClass","ghost-class":"dwGhostClass","chosen-class":"dwChosenClass"},on:{start:e.onStart,end:e.onEnd},model:{value:e.dragOptions,callback:function(t){e.dragOptions=t},expression:"dragOptions"}},[s("transition-group",{staticClass:"dw-grid",style:"grid-template-columns: repeat("+e.survey.questions[e.index].cellCount+", minmax(auto,1fr));"},e._l(e.dragOptions,function(t,n){return s("div",{key:"quOption-"+n,staticStyle:{width:"100%"}},[s("dw-qu-option-common1-item",{ref:"quCommonItem",refInFor:!0,attrs:{survey:e.survey,"qu-index":e.index,"option-index":n,"qu-type":e.quType},on:{"refresh-options":e.refreshOptions},model:{value:e.dragOptions,callback:function(t){e.dragOptions=t},expression:"dragOptions"}})],1)}),0)],1)],1)])},staticRenderFns:[]};var Qs=s("VU/8")(Ls,Fs,!1,function(e){s("YJxA")},"data-v-bcef0aee",null).exports,Us={name:"DwQuOptionCommon4",components:{draggable:nt.a},model:{prop:"options",event:"update-options"},props:{index:{type:Number,default:0},options:{type:Array,default:function(){return[]}},survey:{type:Object,default:function(){}},quType:{type:String,default:""}},data:function(){return{value:null}},methods:{}},Bs={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-select",{attrs:{multiple:"CHECKBOX"===e.quType,placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e,t){return s("el-option",{key:"fa_"+t,attrs:{label:e.optionTitleObj.dwHtml,value:e.optionTitleObj.dwHtml}})}),1)],1)},staticRenderFns:[]};var js=s("VU/8")(Us,Bs,!1,function(e){s("3mwL")},"data-v-7f5d1d1a",null).exports,Ms={name:"DwQuRadioOptions",components:{DwQuOptionCommon4:js,DwQuOptionCommon2:Es,DwQuOptionCommon1:Qs},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{}},methods:{updateOptions:function(e){this.survey.questions[this.index].quRadios=e}}},$s={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[1===e.survey.questions[e.index].hv?s("dw-qu-option-common1",{attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quRadios,callback:function(t){e.$set(e.survey.questions[e.index],"quRadios",t)},expression:"survey.questions[index].quRadios"}}):e._e(),e._v(" "),2===e.survey.questions[e.index].hv?s("dw-qu-option-common2",{attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quRadios,callback:function(t){e.$set(e.survey.questions[e.index],"quRadios",t)},expression:"survey.questions[index].quRadios"}}):e._e(),e._v(" "),4===e.survey.questions[e.index].hv?s("dw-qu-option-common4",{attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quRadios,callback:function(t){e.$set(e.survey.questions[e.index],"quRadios",t)},expression:"survey.questions[index].quRadios"}}):e._e()],1)},staticRenderFns:[]};var Hs=s("VU/8")(Ms,$s,!1,function(e){s("aMUv")},"data-v-ddb03886",null).exports,Vs={name:"DwDesignQuestionBottomType1",model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},methods:{dwAddQuItem:function(){this.survey.questions[this.index].quTitle="wooooooo",this.survey.surveyNode="更新问卷副标题备注",this.$emit("update-question",this.survey)}}},zs={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-display-flex-left"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加选项",placement:"left"}},[t("div",{staticClass:"dw-question-toolbar dw-margin-right-10",on:{click:this.dwAddQuItem}},[t("i",{staticClass:"dwMoveSortQu dw-cursor-pointer dw-event-color fa fa-plus",attrs:{"aria-hidden":"true"}})])]),this._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"批量添加选项",placement:"right"}},[t("div",{staticClass:"dw-question-toolbar dw-margin-right-10"},[t("i",{staticClass:"dwMoveSortQu dw-cursor-pointer dw-event-color fa fa-list-ul",attrs:{"aria-hidden":"true"}})])])],1)},staticRenderFns:[]};var Gs={name:"DwDesignQuRadio",components:{DwDesignQuestionBottomType1:s("VU/8")(Vs,zs,!1,function(e){s("2sPn")},"data-v-385d9a70",null).exports,DwQuRadioOptions:Hs,DwQuOptionCommon1:Es,DwDesignQuestionCommon:Ss},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}}},Ys={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-radio-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var Js=s("VU/8")(Gs,Ys,!1,function(e){s("NWAF")},"data-v-1d7427b0",null).exports,Ws={name:"DwQuCheckboxOptions",components:{DwQuOptionCommon4:js,DwQuOptionCommon1:Qs,DwQuOptionCommon2:Es},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}}},Ks={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[1===e.survey.questions[e.index].hv?s("dw-qu-option-common1",{ref:"dwCommon1",attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quCheckboxs,callback:function(t){e.$set(e.survey.questions[e.index],"quCheckboxs",t)},expression:"survey.questions[index].quCheckboxs"}}):e._e(),e._v(" "),2===e.survey.questions[e.index].hv?s("dw-qu-option-common2",{ref:"dwCommon2",attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quCheckboxs,callback:function(t){e.$set(e.survey.questions[e.index],"quCheckboxs",t)},expression:"survey.questions[index].quCheckboxs"}}):e._e(),e._v(" "),4===e.survey.questions[e.index].hv?s("dw-qu-option-common4",{ref:"dwCommon4",attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quCheckboxs,callback:function(t){e.$set(e.survey.questions[e.index],"quCheckboxs",t)},expression:"survey.questions[index].quCheckboxs"}}):e._e()],1)},staticRenderFns:[]};var Zs={name:"DwDesignQuCheckbox",components:{DwQuCheckboxOptions:s("VU/8")(Ws,Ks,!1,function(e){s("gaH1")},"data-v-3c22d4ad",null).exports,DwDesignQuestionCommon:Ss},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}}},Xs={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-checkbox-options",{ref:"dwQuestion",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var en=s("VU/8")(Zs,Xs,!1,function(e){s("eblm")},"data-v-88160d36",null).exports,tn={name:"DwDesignQuFbk",components:{DwDesignQuestionCommon:Ss},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{inputText:""}}},sn={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-qu-item",staticStyle:{padding:"10px 0"}},[e.survey.questions[e.index].answerInputRow>1?s("el-input",{attrs:{placeholder:e.survey.questions[e.index].placeholder,autosize:{minRows:e.survey.questions[e.index].answerInputRow},type:"textarea"},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}}):s("el-input",{attrs:{placeholder:e.survey.questions[e.index].placeholder},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}})],1)},staticRenderFns:[]};var nn=s("VU/8")(tn,sn,!1,function(e){s("Ry/m")},"data-v-649e2b49",null).exports,rn={name:"DwQuOrderbyOptions",components:{DwQuOptionCommon1:Es,DwQuOptionCommon2Item:Ns,DwQuOptionCommon2:Qs},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{}},methods:{}},on={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-qu-option-common1",{attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quOrderbys,callback:function(t){e.$set(e.survey.questions[e.index],"quOrderbys",t)},expression:"survey.questions[index].quOrderbys"}})],1)},staticRenderFns:[]};var an={name:"DwDesignQuOderby",components:{DwQuOrderbyOptions:s("VU/8")(rn,on,!1,function(e){s("6vVf")},"data-v-42f5a3b1",null).exports,DwQuOptionCommon1:Es,DwDesignQuestionCommon:Ss},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}}},un={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-orderby-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var ln=s("VU/8")(an,un,!1,function(e){s("HLG5")},"data-v-23b4fdaf",null).exports,dn={name:"DwQuMFbkOptions",components:{DwQuOptionCommon1:Es},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{}},methods:{}},cn={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-qu-option-common1",{attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quMultiFillblanks,callback:function(t){e.$set(e.survey.questions[e.index],"quMultiFillblanks",t)},expression:"survey.questions[index].quMultiFillblanks"}})],1)},staticRenderFns:[]};var vn={name:"DwDesignQuMFbk",components:{DwQuMFbkOptions:s("VU/8")(dn,cn,!1,function(e){s("sFek")},"data-v-53722894",null).exports,DwDesignQuestionCommon:Ss},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}}},pn={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-m-fbk-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var mn=s("VU/8")(vn,pn,!1,function(e){s("7PL2")},"data-v-c0331208",null).exports,yn={name:"DwDesignQuUpload",components:{DwDesignQuestionCommon:Ss},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{fileList:[]}},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")}}},fn={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{padding:"10px"}},[s("el-upload",{staticClass:"upload-demo",attrs:{"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,limit:3,"on-exceed":e.handleExceed,"file-list":e.fileList,action:"https://jsonplaceholder.typicode.com/posts/",multiple:""}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)},staticRenderFns:[]};var hn=s("VU/8")(yn,fn,!1,function(e){s("okw5")},"data-v-4963abb4",null).exports,wn={name:"DwQuScoreOptions",components:{DwQuOptionCommon1:Es},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{}},methods:{}},gn={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-qu-option-common1",{attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quScores,callback:function(t){e.$set(e.survey.questions[e.index],"quScores",t)},expression:"survey.questions[index].quScores"}})],1)},staticRenderFns:[]};var xn=s("VU/8")(wn,gn,!1,function(e){s("nIrY")},"data-v-3ba03e14",null).exports,bn={name:"DwDesignQuScore",components:{DwQuScoreOptions:xn,DwQuMFbkOptions:xn,DwDesignQuestionCommon:Ss},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}}},qn={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-score-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var Cn=s("VU/8")(bn,qn,!1,function(e){s("F9qX")},"data-v-7eb38276",null).exports,_n={name:"DwDesignQuPage",components:{DwDesignQuestionCommon:Ss},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{inputText:""}},computed:{pageSize:function(){return fs.pageSize(this.survey)},pageNum:function(){return fs.quInPageNum(this.survey,this.index)}}},An={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{padding:"10px","border-top":"5px solid #efefef"}},[t("div",{staticStyle:{"text-align":"right",color:"grey","font-size":"13px"}},[this._v("下一页("+this._s(this.pageNum)+"/"+this._s(this.pageSize)+")")])])},staticRenderFns:[]};var Sn=s("VU/8")(_n,An,!1,function(e){s("uhve")},"data-v-5a1da102",null).exports,kn={name:"DwDesignQuParagraph",components:{DwDesignQuestionCommon:Ss},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{inputText:""}}},Tn={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{"font-size":"12px"}},[t("div",{staticStyle:{color:"#c6c6c7"}},[t("el-icon",{staticClass:"el-icon-warning-outline"}),this._v(" 请在上方输入段落的标题或备注")],1)])},staticRenderFns:[]};var In={name:"DwDesignQuestion",components:{DwDesignQuParagraph:s("VU/8")(kn,Tn,!1,function(e){s("6uRV")},"data-v-4a0660ac",null).exports,DwDesignQuPage:Sn,DwQuRadioOptions:Hs,DwDesignQuestionCommon:Ss,DwDesignQuScore:Cn,DwDesignQuUpload:hn,DwDesignQuMFbk:mn,DwDesignQuOderby:ln,DwDesignQuFbk:nn,DwDesignQuCheckbox:en,DwDesignQuRadio:Js},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},item:{type:Object,default:function(){}},survey:{type:Object,default:function(){}}}},On={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-design-question-common",{ref:"dwDesignQuestionCommon",attrs:{index:e.index},scopedSlots:e._u([{key:"editQuContent",fn:function(){return["RADIO"===e.item.quType?s("div",[s("dw-design-qu-radio",{ref:"dwQuRadio",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"CHECKBOX"===e.item.quType?s("div",[s("dw-design-qu-checkbox",{ref:"dwQuCheckbox",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"FILLBLANK"===e.item.quType?s("div",[s("dw-design-qu-fbk",{ref:"dwQuFbk",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"SCORE"===e.item.quType?s("div",[s("dw-design-qu-score",{ref:"dwQuScore",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"ORDERQU"===e.item.quType?s("div",[s("dw-design-qu-oderby",{ref:"dwQuOderby",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"MULTIFILLBLANK"===e.item.quType?s("div",[s("dw-design-qu-m-fbk",{ref:"dwQuMfbk",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"UPLOADFILE"===e.item.quType?s("div",[s("dw-design-qu-upload",{ref:"dwQuUpload",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"PAGETAG"===e.item.quType?s("div",[s("dw-design-qu-page",{ref:"dwQuPage",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"PARAGRAPH"===e.item.quType?s("div",[s("dw-design-qu-paragraph",{ref:"dwQuUpload",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e()]},proxy:!0}]),model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)},staticRenderFns:[]};var Dn=s("VU/8")(In,On,!1,function(e){s("ACNE")},"data-v-01fc4494",null).exports,En={name:"DwDesignHeader",data:function(){return{switchValue:"上下",defActive:"/v6/diaowen/design/survey/"+this.$route.params.id}},methods:{handleSelect:function(e,t){console.log(e,t)}}},Pn={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"header-content-left"},[s("div",{staticClass:"logo"},[s("a",{attrs:{href:"#"}},[s("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQzRDRFQ0Y5QjVFODExRUJCRENGOUE2Q0FGMTA3RTJEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQzRDRFQ0ZBQjVFODExRUJCRENGOUE2Q0FGMTA3RTJEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDNENEVDRjdCNUU4MTFFQkJEQ0Y5QTZDQUYxMDdFMkQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDNENEVDRjhCNUU4MTFFQkJEQ0Y5QTZDQUYxMDdFMkQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6GJisjAAAFMklEQVR42uzdTYhVZRjA8XNrSAqTIq0EqYSCCoQWgeFCHcJsEbVo1UARkbYIChdFbloFWosWQVAWhFBDmyJa1FhR46YPC0KkhCgzN9OXJH2JhdyeM3Mnq3veMJp5z3lnfj94mCLo3nPu/O97z51z7u31+/0qh9749I88NzbHd336jo8NbUuR2zMxOrM9CfX2/BRzIuboYL6KORxzMOZAzCcxv3dpmzavnL//90gFf3fuYJYP/n3dP/778ZgPYybr3mL2xZxcqDvjDL8P/Ednx6yPeTjm3ZipmKdiNsyutgKBU1bE3DNYUT6LeSDmPIHAsMtjHos5EvN4zEUCgebjmG0xh2J2xCwVCAw7J+ahwUuvO0o8RhEIOdRvxO6O2RNzmUCg2aaY/TFjAoFmy2JeiNkVs0Qg0GxLzN6q4+90CYQ2rY15L+ZKgUCz1YOV5BqBQLMLY96OWSMQaHZ+zGsxqwQCzVYNVpIVAoFmV8S8GnOWQKDZdTGPCgTS7o+5RSDQrD6x8bmYSwUCzep3tp6pWjwLWCB0XX2C4+0CgbT6gH2ZQKDZxTHbBQJp91UtnPkrEEoxe/muQCDh7irzRwoJhJIsHUQiEEjYWmX8u4hAKE19MuN6gUDabQKBtFtjzhQINKu/mmGtQCBts0AgbaNAIO3aKsNluQKhVPWpJ1cLBNLWCATSrhIIpK0WCKRdIhBIWy4QSLtAIJC2RCCQNu9fLz2SeYN6C+wBGtqeidGFtT2LnRUE/u0Zo9/v2wtzaM+UfZDb5pVWEPASC7om20F6b7zsHdUf88tiBQHaWUFmn4gL3EeL5q3PG98p7/GZGJ3fx8cKAgIBgYBAQCAgEBAICAQEAgIBBAICAYGAQEAgIBAQCAgEBAICAQQCAgGBgEBAICAQEAgIBAQCCAQEAgIBgYBAQCAgEBAICAQEAjTq9ft5vhq7Nz79o9jvSe+PLeBfgvE//7HIx2c+HxsrCAgEBAICgZxG2jjgpbsHvHaBFQRO/xkj19u8YAUBgYCD9Ll/LTde9o5aJH9J99hYQaCDK8hs7CU+wS6i3wePjxUEBAICAYHAIjpIX/BKf8sUKwgIBAQCAgGBgEBAICAQEAgIxC4AgYBAQCAgEBAICAQEAgIBgQACAYGAQEAgIBAQCAgEBAICAYEAAgGBgEBAICAQEAgIBAQCAgEEAqch9/ek9+zyTvP4WEGggytIf8zOxgoCAgEvseb66G+87B3115eIpW8LVhAoawWZfSIucB/1bE+x22MFYVH72UssSDshEEg7KhBI+14gkHZEIJB2WCCQ9qlAIO2AQKDZr1YQSPso5jeBQLPJHDciEEr1hkCgWf0HwvcFAs1eijkpEGj2Yq4bEgil+Txmr0Cg2dNVxgu7BEJJ6gukns15gwKhJHUcxwQCw+pTS3bmvlGBUIonYr4RCAz7OmZHGzcsEEqwPeZHgcCwN2N2t3XjAqHLfojZWrX4gXYCoavqKO6qMlx3LhBKVL9r9Urbd0IgdFF9KvuDXbgjAqFrDsXcXGW4nFYglOa7mJsGPyuBwCn1O1abYg526U4JhC74Nub6mP1du2MCoW1fxmyM+biLd04gtOmDmHVde1klELqgvrZjQzVzImJnjXicyKw+6fDemOdLuLMCIae3YrZULZ8+4iUWXTMVc2fMDSXFYQVhvtWXyT4Z80jV0vUcAqGLfhkchO/s+kG4QMjpi5hdgzm2EDZIIPxf9QdJv1zNfBzoZNXixU0CoQuOVzNfXlPH8HrMvirTB0m34Q8BBgDCrqxH8SRKpAAAAABJRU5ErkJggg==",alt:"logo",height:"32"}}),e._v(" "),s("h1",[e._v("调问网-全新问卷编辑器")])])])])]),e._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticStyle:{"text-align":"right"}},[s("el-menu",{staticClass:"dw-design-survey-menu dw-menu-height",attrs:{"default-active":e.defActive,router:"",mode:"horizontal"},on:{select:e.handleSelect}},[s("el-menu-item",{attrs:{index:"/v6/dw/survey"}},[e._v("我的问卷")]),e._v(" "),s("el-menu-item",{attrs:{index:"/v6/dw/survey/d/chart/"+e.$route.params.id}},[e._v("统计")]),e._v(" "),s("el-menu-item",{attrs:{index:"/v6/dw/survey/c/url/"+e.$route.params.id}},[e._v("收集")]),e._v(" "),s("el-menu-item",{attrs:{index:"/v6/diaowen/design/survey/"+e.$route.params.id}},[e._v("设计")])],1)],1)])],1)},staticRenderFns:[]};var Rn=s("VU/8")(En,Pn,!1,function(e){s("ODBu")},"data-v-ce25b1ba",null).exports,Nn={name:"DwHtmlLabelCommon",components:{},props:{value:{type:Object,default:function(){}},itemClick:{type:Boolean,default:!1},btnSize:{type:String,default:"15px"},quNum:{type:Number,default:null},isRequired:{type:Boolean,default:!1}},data:function(){return{hover:!1,editorText:this.value.dwHtml,centerDialogVisible:!1,requiredTag:'<span style="color: #f56c6c;font-weight: bold;">*&nbsp;</span>'}},methods:{}},Ln={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dwEditorRoot dw-width-100bf"},[s("div",[s("div",{ref:"curEdit",staticClass:"dwEditRoot dw-input-default",domProps:{innerHTML:e._s((void 0!==e.isRequired&&e.isRequired?e.requiredTag:"")+(void 0!==e.quNum&&null!==e.quNum?e.quNum+"、":"")+e.value.dwHtml)}})])])},staticRenderFns:[]};var Fn=s("VU/8")(Nn,Ln,!1,function(e){s("yTS3")},"data-v-ee1778f6",null).exports;function Qn(e,t){if(e.dwEsSurveyAnswer=t,null!=t&&t.hasOwnProperty("anQuestions")){var s=e.questions,n=t.anQuestions;null!==n&&n.length>0&&n.forEach(function(e,t){var n=e.quDwId;s.forEach(function(t,s){var i=t.dwId;n===i&&(!function(e,t){var s=e.quType;console.debug("parseAnQuAnswer2SurveyQu",s),"RADIO"===s?function(e,t){var s=e.quRadios;if(t.hasOwnProperty("anRadio")){var n=t.anRadio;if(null!=n&&n.hasOwnProperty("optionDwId")){var i=n.optionDwId;void 0!==i&&null!==i&&s.map(function(e,t){i===e.dwId&&(e.checked=!0)})}}}(e,t):"CHECKBOX"===s?function(e,t){var s=e.quCheckboxs;if(t.hasOwnProperty("anCheckboxs")){var n=t.anCheckboxs;null!==n&&n.length>0&&n.forEach(function(e,t){if(e.hasOwnProperty("optionDwId")){var n=e.optionDwId;s.forEach(function(e,t){e.dwId===n&&(e.checked=!0)})}})}}(e,t):"ORDERQU"===s?function(e,t){var s=e.quOrderbys;if(t.hasOwnProperty("anOrders")){var n=t.anOrders;null!==n&&n.length>0&&n.forEach(function(e,t){if(e.hasOwnProperty("optionDwId")){var n=e.optionDwId;s.forEach(function(t,s){t.dwId===n&&(t.checked=!0,t.orderIndex=e.orderNum)})}})}}(e,t):"MULTIFILLBLANK"===s?function(e,t){var s=e.quMultiFillblanks;if(t.hasOwnProperty("anMFbks")){var n=t.anMFbks;null!==n&&n.length>0&&n.forEach(function(e,t){if(e.hasOwnProperty("optionDwId")){var n=e.optionDwId;s.forEach(function(t,s){t.dwId===n&&(t.inputText=e.answer)})}})}}(e,t):"SCORE"===s?function(e,t){var s=e.quScores;if(t.hasOwnProperty("anScores")){var n=t.anScores;null!==n&&n.length>0&&n.forEach(function(e,t){if(e.hasOwnProperty("optionDwId")){var n=e.optionDwId;s.forEach(function(t,s){t.dwId===n&&(t.checked=!0,null!==e.answerScore&&e.answerScore>=0&&(t.answerScore=parseInt(e.answerScore)))})}})}}(e,t):"FILLBLANK"===s&&function(e,t){if(t.hasOwnProperty("anFbk")){var s=t.anFbk;null!==s&&(e.answer=s.answer)}}(e,t)}(t,e),console.debug("surveyQuId",i))})})}console.debug("parseAnswerData survey",e)}function Un(e){var t=e.questions;if(null!==t&&t.length>0){var s=1;t.forEach(function(e,t){var n=e.quType,i=e.quAttr;if("FILLBLANK"===n){var r=i.inputAttr,o=r.commonAttr,a=o.checkType;"TIME"===a&&r.dateTimeAttr.attrs.includes("range")&&(e.answer={startTime:null,endTime:null});var u=o.placeholder,l="请输入";null!==u&&""!==u||("EMAIL"===a?l="请输入邮箱":"NUM"===a?l="请输入数字":"DIGITS"===a?l="请输入整数":"TEL_PHONE"===a?l="请选择电话或手机":"TIME"===a?l="请选择时间":"DATE"===a?l="请选择日期":"DATETIME"===a?l="请选择日期时间":"ZIPCODE"===a?l="请输入邮政编码":"TEL"===a?l="请输入电话号码":"PHONE"===a?l="请输入手机号码":"IDENTCODE"===a?l="请输入身份证号":"URL"===a?l="请输入网址":"UNSTRCN"===a?l="请输入非中文":"STRCN"===a&&(l="请输入中文")),o.placeholder=l;var d=o.defaultValue;null!==d&&""!==d&&(e.answer=d)}e.showQu=!0,e.pageIndex=s,"PAGETAG"===e.quType&&s++})}e.pageAttr={pageSize:fs.pageSize(e),curPage:1},e.answerProgress={totalAnQu:0,completeAnQu:0,percentage:0}}function Bn(e,t){e.questions.forEach(function(e,s){e.showQu=e.pageIndex===t}),e.pageAttr.curPage=t}function jn(e){var t=e.dwId,s=Object(Zt.a)(),n={answerCommon:{surveyId:e.id,surveyDwId:t,answerDwId:s,anUser:{userId:null,userName:null},anTime:{bgAnDate:null,endAnDate:null,totalTime:0},anIp:{ip:null,city:null,addr:null},anState:{anQuNum:0,isEff:1,handleState:0},isDelete:0},anQuestions:[]},i=e.questions;return void 0!==i&&(console.debug("questions",i),n.anQuestions=i.map(function(e,t){return console.debug("item",e),Mn(e)})),n}function Mn(e){var t=e.quType,s={quDwId:e.dwId,quType:t};return"RADIO"===t?function(e,t){e.quRadios.map(function(e,s){e.hasOwnProperty("checked")&&e.checked&&(t.anRadio={optionDwId:e.dwId,otherText:null})})}(e,s):"CHECKBOX"===t?function(e,t){var s=e.quCheckboxs;t.anCheckboxs=[],s.map(function(e,s){e.hasOwnProperty("checked")&&e.checked&&t.anCheckboxs.push({optionDwId:e.dwId,otherText:null})})}(e,s):"ORDERQU"===t?function(e,t){console.debug("getQuOrderByAnswerData question",e),console.debug("anQuestion",t);var s=e.quOrderbys;t.anOrders=[],s.forEach(function(e,s){e.hasOwnProperty("checked")&&e.checked&&e.orderIndex>0&&t.anOrders.push({optionDwId:e.dwId,orderNum:e.orderIndex})})}(e,s):"MULTIFILLBLANK"===t?function(e,t){var s=e.quMultiFillblanks;t.anMFbks=[],s.map(function(e,s){e.hasOwnProperty("inputText")&&""!==e.inputText&&t.anMFbks.push({optionDwId:e.dwId,answer:e.inputText})})}(e,s):"SCORE"===t?function(e,t){var s=e.quScores;t.anScores=[],s.map(function(e,s){e.hasOwnProperty("checked")&&e.checked&&e.hasOwnProperty("answerScore")&&t.anScores.push({optionDwId:e.dwId,answerScore:e.answerScore})})}(e,s):"FILLBLANK"===t?function(e,t){t.anFbk={answer:e.answer},console.debug("anFillblank",t.anFbk.answer)}(e,s):"UPLOADFILE"===t&&function(e,t){if(t.anUploadFiles=[],e.hasOwnProperty("upFileList")){var s=e.upFileList;console.debug("quUpFileList",s),s.forEach(function(e,s){if(e.hasOwnProperty("response")&&e.response.hasOwnProperty("data")){var n=e.response.data;n.forEach(function(e){var s={filePath:e.location,fileName:e.filename};t.anUploadFiles.push(s)})}}),console.debug("anQuestion.anUploadFiles",t.anUplodFiles)}}(e,s),e.anQuestion=s,s}function $n(e){var t=!0;return function(e){null!==e&&e.length>0&&e.forEach(function(e,t){Hn(e)})}(e),e.forEach(function(e,s){if(!e.validateObj.isOk)return t=!1,!1}),t}function Hn(e){if(null!==e){var t=e.quType;e.showQu&&(e.validateObj={errorText:"此题必答",isOk:!0,isAnswerOk:!1},"PAGETAG"!==t&&"PARAGRAPH"!==t&&("RADIO"===t?function(e){var t=0;Mn(e),e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anRadio")&&(t=e.anQuestion.anRadio.length);e.hasOwnProperty("isRequired")&&1===e.isRequired&&t<=0&&(e.validateObj.errorText="此题必答",e.validateObj.isOk=!1)}(e):"CHECKBOX"===t?function(e){var t=e.validateObj,s=0;e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anCheckboxs")&&(s=e.anQuestion.anCheckboxs.length);e.hasOwnProperty("isRequired")&&1===e.isRequired&&s<=0&&(t.errorText="此题必答",t.isOk=!1);if(t.isOk){if(e.hasOwnProperty("minLimit")){var n=e.minLimit;null!=n&&n>0&&s<n&&(t.errorText="至少需要选择"+n+"个选项",t.isOk=!1)}if(e.hasOwnProperty("maxLimit"))e.maxLimit}e.validateObj=t}(e):"ORDERQU"===t?function(e){var t=e.quOrderbys,s=e.validateObj,n=0;e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anOrders")&&(n=e.anQuestion.anOrders.length);e.hasOwnProperty("isRequired")&&1===e.isRequired&&n<t.length&&(s.errorText="此题必答",s.isOk=!1);e.validateObj=s}(e):"MULTIFILLBLANK"===t?function(e){var t=e.quMultiFillblanks,s=e.validateObj,n=0;e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anMFbks")&&(n=e.anQuestion.anMFbks.length);e.hasOwnProperty("isRequired")&&1===e.isRequired&&n<t.length&&(s.errorText="此题必答",s.isOk=!1);e.validateObj=s}(e):"SCORE"===t?function(e){var t=e.quScores,s=e.validateObj,n=0;e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anScores")&&(n=e.anQuestion.anScores.length);console.debug("quScores.answerSize",n),console.debug("quScores.length",t.length),console.debug("question.anQuestion",e.anQuestion),e.hasOwnProperty("isRequired")&&1===e.isRequired&&n<t.length&&(s.errorText="此题必答",s.isOk=!1);e.validateObj=s}(e):"FILLBLANK"===t?function(e){var t=e.validateObj,s=null;e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anFbk")&&(s=e.anQuestion.anFbk.answer);e.hasOwnProperty("isRequired")&&1===e.isRequired&&(null===s||void 0===s||s.length<=0)&&(t.errorText="此题必答",t.isOk=!1);var n=[];null!==s&&void 0!==s||(s="");if(e.hasOwnProperty("quAttr")){var i=e.quAttr;if(i.hasOwnProperty("isRequired")&&i.isRequired&&s.length<=0&&n.push("此题必答"),i.hasOwnProperty("inputAttr")){var r=i.inputAttr;if(r.hasOwnProperty("commonAttr")){var o=r.commonAttr;if(o.hasOwnProperty("checkType")){var a=o.checkType;if(null!==a){var u=function(e,t,s){var n={isOK:!0,msg:""};if((null===t||void 0===t||t.length<=0)&&(n.isOK=!1,n.msg="输入值不能为空"),"NO"===e)t.length<=0&&(n.isOK=!1,n.msg="输入值不能为空");else if("EMAIL"===e)/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)||(n.isOK=!1,n.msg="请输入值邮箱地址");else if("UNSTRCN"===e)/^[\u3220-\uFA29]+$/.test(t)&&(n.isOK=!1,n.msg="请输入非中文字符");else if("STRCN"===e)/^[\u3220-\uFA29]+$/.test(t)||(n.isOK=!1,n.msg="请输入中文字符");else if("NUM"===e)/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)||(n.isOK=!1,n.msg="请输入数字");else if("DIGITS"===e)/^\d+$/.test(t)||(n.isOK=!1,n.msg="请输入整数");else if("TEL"===e)/^\d{3,4}-{1}\d{7,9}-?\d{1,6}$/.test(t)||/^(400{1}-?[0-9]{3}-?[0-9]{4})|(800{1}-?[0-9]{3}-?[0-9]{4})$/.test(t)||(n.isOK=!1,n.msg="请输入电话号");else if("PHONE"===e)11===t.length&&/^(((13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[0-9]{1})|(18[0-9]{1})|(19[0-9]{1}))+\d{8})$/.test(t)||(n.isOK=!1,n.msg="请输入手机号");else if("TEL_PHONE"===e)/^(400{1}-?[0-9]{3}-?[0-9]{4})|(800{1}-?[0-9]{3}-?[0-9]{4})$/.test(t)||/^\d{3,4}-{1}\d{7,9}-?\d{1,6}$/.test(t)||/^(((13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[0-9]{1})|(18[0-9]{1})|(19[0-9]{1}))+\d{8})$/.test(t)||(n.isOK=!1,n.msg="请输入电话或手机号");else if("DATE"===e){var i=new RegExp(/^[1-9]\d{3}$/),r=new RegExp(/^[1-9]\d{3}-(0[1-9]|1[0-2])$/),o=new RegExp(/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/),a=new RegExp(/^(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/),u=new RegExp(/^(20|21|22|23|[0-1]\d):[0-5]\d$/),l=new RegExp(/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])\s+(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/);i.test(t)||o.test(t)||r.test(t)||a.test(t)||l.test(t)||u.test(t)||(n.isOK=!1,n.msg="请输入日期，如2014-01-01")}else"IDENT_CODE"===e?(!/^\d{15}|(\d{17}(\d|x|X))$/.test(t)||15!==t.length&&18!==t.length)&&(n.isOK=!1,n.msg="请输入身份证号"):"ZIPCODE"===e?/^[0-9]{6}$/.test(t)||(n.isOK=!1,n.msg="请输入邮政编号"):"URL"===e?/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)||(n.isOK=!1,n.msg="请输入网址URL"):"CUSTOM"===e&&(new RegExp(s).test(t)||(n.isOK=!1,n.msg="不符合校验规则"));return n}(a,s,null);"DATE"===a&&(u.isOK=!0),u.isOK||n.push(u.msg)}if("NO"===a||"EMAIL"===a||"URL"===a||"UNSTRCN"===a||"STRCN"===a){var l=s.length;if(o.hasOwnProperty("minlength")){var d=o.minlength;l<d&&n.push("最少输入"+d+"字")}if(o.hasOwnProperty("maxlength")){var c=o.maxlength;l>c&&n.push("最多输入"+c+"字")}}}}n.length>0&&(t.errorText=n.join("，"),t.isOk=!1)}}e.validateObj=t}(e):"UPLOADFILE"===t&&function(e){var t=e.validateObj,s=0;e.hasOwnProperty("anQuestion")&&e.anQuestion.hasOwnProperty("anUploadFiles")&&(s=e.anQuestion.anUploadFiles.length);e.hasOwnProperty("isRequired")&&1===e.isRequired&&s<=0&&(t.errorText="此题必答",t.isOk=!1);e.validateObj=t}(e)),e.validateObj.isOk&&(e.validateObj.isAnswerOk=!0))}return e}var Vn={name:"DwAnswerQuestionCommon",components:{DwHtmlLabelCommon:Fn,DwPopoverQuAttrs:os,DwPopoverMoreOptions:ts,DwTextEditLabelCommon:Vt,DwTextEditLabel:Mt},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},options:{type:Object,default:function(){return{themeColor:"red"}}},survey:{type:Object,default:function(){}}},data:function(){return{hover:!1,itemHover:!1,quTitle:"text",itemIndex:0,moreOptionText:"",openDelay:300}},computed:{quNum:function(){var e=this;if(this.survey.hasOwnProperty("surveyStyle")){var t=this.survey.surveyStyle;if(null!=t&&t.hasOwnProperty("showQuNum")&&t.showQuNum){var s=0;return this.survey.questions.forEach(function(t,n){"PAGETAG"!==t.quType&&"PARAGRAPH"!==t.quType&&n<=e.index&&s++}),s}}return null}},watch:{survey:function(e,t){console.log("firstName changed from "+t+" to "+e)}},methods:{nextPage:function(e){$n(this.survey.questions)&&Bn(this.survey,e)},mouseleave:function(){this.hover=!1},mouseover:function(){this.hover=!0},mouseleaveItem:function(){this.itemHover=!1},mouseoverItem:function(){this.itemHover=!0},clickItem:function(){var e=this;Wt(this.survey,this.itemIndex,this.index,function(t,s){e.survey=t,e.itemIndex=s})},dwAddQuItemEvent:function(){var e=this,t=zt(this.survey,this.index,{id:null,optionTitleObj:{dwHtml:"",dwText:"",dwPlaceholder:"请输入内容",isRefreshValue:!0},itemClick:!0});this.$emit("update-survey",t),Kt(this.survey,null,function(t){e.survey=t})},deleteQu:function(){var e=this;this.$confirm("确认删除？").then(function(t){e.survey.questions.splice(e.index,1)}).catch(function(e){})},copyQu:function(){var e=this.survey.questions[this.index],t=Gt(JSON.parse(u()(e)));this.survey.questions.splice(this.index+1,0,t)},upQu:function(){var e=Gt(JSON.parse(u()(this.survey.questions[this.index]))),t=Gt(JSON.parse(u()(this.survey.questions[this.index-1])));this.survey.questions.splice(this.index-1,1,e),this.survey.questions.splice(this.index,1,t)},downQu:function(){var e=Gt(JSON.parse(u()(this.survey.questions[this.index]))),t=Gt(JSON.parse(u()(this.survey.questions[this.index+1])));this.survey.questions.splice(this.index+1,1,e),this.survey.questions.splice(this.index,1,t)}}},zn={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"dw-question-root",on:{mouseover:e.mouseover,mouseleave:e.mouseleave}},[s("div",{staticClass:"dw-question-body"},[s("div",{staticClass:"dw-question-body-center"},[s("div",{staticClass:"dw-question-body-center-body dw-color-333"},[s("div",{staticClass:"dw-qu-content"},[s("div",{staticClass:"dw-qu-title-body dw-display-flex dw-width-100bf",staticStyle:{"align-items":"baseline","flex-wrap":"wrap"}},["PAGETAG"!==e.survey.questions[e.index].quType?[s("div",{staticClass:"dw-display-flex",staticStyle:{"align-items":"baseline"}},[s("div",{staticClass:"dw-display-flex",staticStyle:{"align-items":"baseline","flex-wrap":"wrap"}},[s("div",{staticClass:"dw-qu-title",class:"PARAGRAPH"!==e.survey.questions[e.index].quType?"":"dw-qu-paragraph"},[s("dw-html-label-common",{ref:"dwQuTitle",attrs:{survey:e.survey,"qu-num":e.quNum,"is-required":1===e.survey.questions[e.index].isRequired},model:{value:e.survey.questions[e.index].quTitleObj,callback:function(t){e.$set(e.survey.questions[e.index],"quTitleObj",t)},expression:"survey.questions[index].quTitleObj"}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.hasOwnProperty("surveyStyle")&&e.survey.surveyStyle.hasOwnProperty("showQuTypeName")&&e.survey.surveyStyle.showQuTypeName,expression:"survey.hasOwnProperty('surveyStyle') && survey.surveyStyle.hasOwnProperty('showQuTypeName') && survey.surveyStyle.showQuTypeName"}],staticClass:"dw-qu-type-name"},[s("div",{staticClass:"dw-font-12 dw-color-grey-10"},[e._v("【"+e._s(e.survey.questions[e.index].quTypeName)+"】")])])])])]:[s("div",{staticClass:"dw-width-100bf"},[e.survey.hasOwnProperty("pageAttr")&&e.survey.pageAttr.hasOwnProperty("curPage")?[s("el-button",{staticClass:"dw-answer-button-style1",attrs:{type:"primary"},on:{click:function(t){return e.nextPage(e.survey.pageAttr.curPage+1)}}},[e._v("下一页（"+e._s(e.survey.pageAttr.curPage)+"/"+e._s(e.survey.pageAttr.pageSize)+"）")])]:e._e()],2)]],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.survey.questions[e.index].quNoteObj.dwHtml&&""!==e.survey.questions[e.index].quNoteObj.dwHtml,expression:"survey.questions[index].quNoteObj.dwHtml !==null && survey.questions[index].quNoteObj.dwHtml !=='' "}],staticStyle:{"font-size":"12px",color:"grey","margin-bottom":"5px"}},[s("dw-html-label-common",{ref:"dwQuNote",attrs:{survey:e.survey},model:{value:e.survey.questions[e.index].quNoteObj,callback:function(t){e.$set(e.survey.questions[e.index],"quNoteObj",t)},expression:"survey.questions[index].quNoteObj"}})],1),e._v(" "),s("div",{staticClass:"dw-qu-content-body",staticStyle:{"padding-top":"5px"}},[s("div",{staticClass:"dw-qu-content-body-content"},[e._t("editQuContent")],2),e._v(" "),s("div",{staticClass:"dw-question-body-bottom"},[s("div",[s("transition",{attrs:{"enter-active-class":"animate__animated animate__flipInX","leave-active-class":"animate__animated animate__flipOutX"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.survey.questions[e.index].validateObj.isOk,expression:"!survey.questions[index].validateObj.isOk"}],staticClass:"dw-answer-question-error"},[s("i",{staticClass:"fa-solid fa-circle-exclamation"}),e._v("\n                      "+e._s(e.survey.questions[e.index].validateObj.errorText)+"\n                    ")])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.dwDebug,expression:"survey.dwDebug"}]},[e._v(e._s(e.survey.questions[e.index].validateObj))])],1)])])])])]),e._v(" "),s("div",{staticClass:"dw-question-body-right dw-text-align-center dw-padding-top-2"})])])])},staticRenderFns:[]};var Gn=s("VU/8")(Vn,zn,!1,function(e){s("ps2d"),s("zcA3")},"data-v-5f6c2ded",null).exports;function Yn(e,t){var s=e+"_"+t;return console.debug("storageKey",s),s}function Jn(e,t){localStorage.setItem(e,u()(t))}function Wn(e){return localStorage.getItem(e)}function Kn(e){e.hasOwnProperty("answerProgress")||Zn(e,function(e){return Hn(e),e.validateObj.isOk=!0,e.validateObj.isAnswerOk})}function Zn(e,t){var s={totalAnQu:0,completeAnQu:0,percentage:0};e.questions.forEach(function(e,n){if(e.hasOwnProperty("quAttr")){var i=e.quAttr;i.hasOwnProperty("isRequired")&&i.isRequired&&(s.totalAnQu=s.totalAnQu+1,t(e)&&(s.completeAnQu=s.completeAnQu+1))}}),s.totalAnQu>0&&(s.percentage=(s.completeAnQu/s.totalAnQu*100).toFixed(2)),e.answerProgress.totalAnQu=s.totalAnQu,e.answerProgress.completeAnQu=s.completeAnQu,e.answerProgress.percentage=s.percentage}var Xn="survey_init",ei="survey_answer_history",ti="survey_answer_history_action",si={saveSurvey2LocalStorage:function(e){if(null!==e){var t=e.sid,s=ri(e);this.saveSurvey2LocalStorageByParams(t,s,e)}},saveSurvey2LocalStorageByParams:function(e,t,s){var n=Yn(e,""+Xn+ii(t));Jn(n,s),console.debug("storageKey",n)},getSurveyByLocalStorage:function(e,t){var s=Yn(e,""+Xn+ii(t));console.debug("storageKey",s);var n=Wn(s),i=JSON.parse(n);return console.debug("surveyJsonObj",i),i}},ni={saveSurveyAnswer2LocalStorage:function(e){if(null!==e){var t=e.sid,s=ri(e);this.saveSurveyAnswer2LocalStorageByParams(t,s,e)}},saveSurveyAnswer2LocalStorageByParams:function(e,t,s){!function(e){Zn(e,function(e){return e.validateObj.isAnswerOk})}(s);var n=parseInt(this.getSurveyAnswerActionNum(e,t))+1,i=this.getSurveyAnswerTextByLocalStorage(e,t);if(u()(s)!==i){var r=Yn(e,""+ei+ii(t)+"_"+n);Jn(r,s),this.saveSurveyAnswerActionNum(e,t,n),console.debug("storageKey",r),n>=100&&this.deleteAnswerHistoryLtNum(e,t,n-100)}},getSurveyAnswerTextByLocalStorage:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;void 0!==s&&null!==s||(s=this.getSurveyAnswerActionNum(e,t));var n=Yn(e,""+ei+ii(t)+"_"+s);console.debug("storageKey",n);var i=Wn(n);return console.debug("surveyJsonText",i),i},getSurveyAnswerObjByLocalStorage:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=JSON.parse(this.getSurveyAnswerTextByLocalStorage(e,t,s));return console.debug("surveyJsonObj",n),n},saveSurveyAnswerActionNum:function(e,t,s){return Jn(Yn(e,""+ti+ii(t)),{num:s,dateTime:(new Date).getTime()})},getSurveyAnswerActionNum:function(e,t){var s=this.getSurveyAnswerAction(e,t);return null!==s&&s.hasOwnProperty("num")?s.num:0},getSurveyAnswerActionTime:function(e){if(null!==e){var t=e.sid,s=ri(e);return this.getSurveyAnswerActionTimeBySid(t,s)}return 0},getSurveyAnswerActionTimeBySid:function(e,t){var s=this.getSurveyAnswerAction(e,t);return null!==s&&s.hasOwnProperty("dateTime")?s.dateTime:0},getSurveyAnswerAction:function(e,t){var s=Yn(e,""+ti+ii(t));if(localStorage.hasOwnProperty(s)){var n=Wn(s);if(null!==n)return JSON.parse(n)}return null},deleteAnswerHistoryLtNum:function(e,t,s){for(var n=1;n<s;n++){var i=Yn(e,""+ei+ii(t)+"_"+n);localStorage.removeItem(i)}},clearAnswerHistory:function(e,t){for(var s=Yn(e,""+ti+ii(t)),n=Yn(e,""+ei+ii(t)),i=localStorage.length,r=[],o=0;o<i;o++){var a=localStorage.key(o);null!=a&&(a.indexOf(s)>=0||a.indexOf(n)>=0)&&r.push(a)}for(var u=0;u<r.length;u++)localStorage.removeItem(r[u])}};function ii(e){return void 0===e||null===e?"":"_"+e}function ri(e){return e.hasOwnProperty("dwEsSurveyAnswer")&&e.dwEsSurveyAnswer.hasOwnProperty("esId")?e.dwEsSurveyAnswer.esId:null}function oi(e){return e.$notify({title:"提示",message:"当前为只读状态，不可答题",type:"warning"}),!1}var ai={name:"DwQuOptionCommon2Item",components:{DwHtmlLabelCommon:Fn},model:{prop:"survey",event:"update-survey"},props:{quIndex:{type:Number,default:0},optionIndex:{type:Number,default:0},options:{type:Array,default:function(){return[]}},option:{type:Object,default:function(){}},survey:{type:Object,default:function(){}},quType:{type:String,default:""},value:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}},data:function(){return{itemHover:!1,itemClick:!1,itemIndex:0,inputText:"",themeColor:this.survey.surveyStyle.themeColor,rateColors:[this.survey.surveyStyle.themeColor,this.survey.surveyStyle.themeColor,this.survey.surveyStyle.themeColor],minLimit:0,maxLimit:0}},computed:{isAnswer:function(){var e=this.survey.questions[this.quIndex];if("MULTIFILLBLANK"===e.quType){var t=e.quMultiFillblanks[this.optionIndex].inputText;return null!==t&&void 0!==t&&""!==t}return!1}},watch:{options:function(e,t){}},mounted:function(){var e=this.survey.questions[this.quIndex];"CHECKBOX"===e.quType&&(this.minLimit=e.minLimit,this.maxLimit=e.maxLimit)},methods:{clickItem:function(){if(this.survey.readonly)return oi(this);var e=this.quType;console.debug("quType",e),"RADIO"===e?(this.survey.questions[this.quIndex].quRadios[this.optionIndex].checked=!0,this.resetOtherRadio()):"CHECKBOX"===e?this.survey.questions[this.quIndex].quCheckboxs[this.optionIndex].checked=!this.survey.questions[this.quIndex].quCheckboxs[this.optionIndex].checked:"SCORE"===e&&(this.survey.questions[this.quIndex].quScores[this.optionIndex].checked=!0),this.onBlur()},resetOtherRadio:function(){var e=this;this.survey.questions[this.quIndex].quRadios.forEach(function(t,s){s!==e.optionIndex&&(t.checked=!1)})},onBlur:function(){Mn(this.survey.questions[this.quIndex]),Hn(this.survey.questions[this.quIndex]),ni.saveSurveyAnswer2LocalStorage(this.survey)}}},ui={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-qu-item",on:{click:function(t){return t.stopPropagation(),e.clickItem.apply(null,arguments)}}},[s("div",{staticClass:"dw-qu-item-body"},["RADIO"===e.quType?[s("div",{staticClass:"dw-qu-item-el-checkbox-radio",class:e.survey.questions[e.quIndex].quRadios[e.optionIndex].checked?"dw-item-checked":""},[e.survey.questions[e.quIndex].quRadios[e.optionIndex].checked?s("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-radio-icon fa-solid fa-circle-dot animate__animated animate__tada dw-checked"}):s("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-radio-icon fa-regular fa-circle"}),e._v(" "),s("div",{staticClass:"dw-qu-item-option-title"},[s("dw-html-label-common",{ref:"dwEditLabel",attrs:{value:e.options[e.optionIndex].optionTitleObj}})],1),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.survey.dwDebug,expression:"survey.dwDebug"}]},[e._v(e._s(e.survey.questions[e.quIndex].quRadios[e.optionIndex].checked)+" ")])])]:"CHECKBOX"===e.quType?[s("div",{staticClass:"dw-qu-item-el-checkbox-radio",class:e.survey.questions[e.quIndex].quCheckboxs[e.optionIndex].checked?"dw-item-checked":""},[e.survey.questions[e.quIndex].quCheckboxs[e.optionIndex].checked?s("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-checkbox-icon fa-solid fa-square-check animate__animated animate__tada dw-checked"}):e._e(),e._v(" "),e.survey.questions[e.quIndex].quCheckboxs[e.optionIndex].checked?e._e():s("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-checkbox-icon fa-regular fa-square"}),e._v(" "),s("div",{staticClass:"dw-qu-item-option-title"},[s("dw-html-label-common",{ref:"dwEditLabel",attrs:{value:e.options[e.optionIndex].optionTitleObj}})],1),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.survey.dwDebug,expression:"survey.dwDebug"}]},[e._v(e._s(e.survey.questions[e.quIndex].quCheckboxs[e.optionIndex].checked))])])]:[s("div",{staticStyle:{"margin-bottom":"5px"}},[s("div",{staticClass:"dw-qu-item-option-title"},[s("dw-html-label-common",{ref:"dwEditLabel",attrs:{value:e.options[e.optionIndex].optionTitleObj}})],1),e._v(" "),"MULTIFILLBLANK"===e.quType?[e.options[e.optionIndex].answerInputRow>1?s("el-input",{class:e.isAnswer?"dw-input-active":"",attrs:{placeholder:e.options[e.optionIndex].placeholder,autosize:{minRows:e.options[e.optionIndex].answerInputRow},disabled:e.survey.readonly,type:"textarea"},on:{blur:e.onBlur,input:e.onBlur},model:{value:e.survey.questions[e.quIndex].quMultiFillblanks[e.optionIndex].inputText,callback:function(t){e.$set(e.survey.questions[e.quIndex].quMultiFillblanks[e.optionIndex],"inputText",t)},expression:"survey.questions[quIndex].quMultiFillblanks[optionIndex].inputText"}}):s("el-input",{class:e.isAnswer?"dw-input-active":"",attrs:{placeholder:e.options[e.optionIndex].placeholder,disabled:e.survey.readonly},on:{blur:e.onBlur,input:e.onBlur},model:{value:e.survey.questions[e.quIndex].quMultiFillblanks[e.optionIndex].inputText,callback:function(t){e.$set(e.survey.questions[e.quIndex].quMultiFillblanks[e.optionIndex],"inputText",t)},expression:"survey.questions[quIndex].quMultiFillblanks[optionIndex].inputText"}})]:e._e(),e._v(" "),"SCORE"===e.quType?s("el-rate",{attrs:{max:e.survey.questions[e.quIndex].paramInt02,colors:[e.survey.surveyStyle.pageThemeColor,e.survey.surveyStyle.pageThemeColor,e.survey.surveyStyle.pageThemeColor],disabled:e.survey.readonly},on:{change:e.clickItem},model:{value:e.survey.questions[e.quIndex].quScores[e.optionIndex].answerScore,callback:function(t){e.$set(e.survey.questions[e.quIndex].quScores[e.optionIndex],"answerScore",t)},expression:"survey.questions[quIndex].quScores[optionIndex].answerScore"}}):e._e()],2)]],2),e._v(" "),s("div",{staticClass:"dw-qu-item-toolbar dw-display-flex-right"})])},staticRenderFns:[]};var li={name:"DwQuOptionCommon2",components:{DwQuOptionCommon2Item:s("VU/8")(ai,ui,!1,function(e){s("Re9C")},"data-v-d95df3ac",null).exports,draggable:nt.a},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},options:{type:Array,default:function(){return[]}},survey:{type:Object,default:function(){}},quType:{type:String,default:""},answer:{type:Object,default:function(){}}},data:function(){return{dragOptions:this.options,drag:!1}},watch:{options:function(e,t){this.refreshData()}},methods:{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1,this.refreshOptions(null)},upAllItemClick:function(){for(var e=this.survey.curEditObj,t=0;t<e.length;t++)t!==this.itemIndex&&(this.survey.curEditObj[t].itemClick=!1)},refreshOptions:function(e){var t=this;this.$emit("update-options",this.dragOptions),this.upAllItemClick(),this.$nextTick(function(){for(var s=t.$refs.quCommonItem,n=0;n<s.length;n++)s[n].dragClick(e)})},refreshData:function(){this.dragOptions=this.options}}},di={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.options,function(t,n){return s("div",{key:"quOption2-"+e.index+"-"+n},[s("dw-qu-option-common2-item",{ref:"quCommonItem",refInFor:!0,attrs:{options:e.options,"qu-index":e.index,"option-index":n,"qu-type":e.quType},on:{"refresh-options":e.refreshOptions},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)}),0)},staticRenderFns:[]};var ci=s("VU/8")(li,di,!1,function(e){s("SLB9")},"data-v-d0bde27e",null).exports,vi={name:"DwQuOptionCommon1Item",components:{DwHtmlLabelCommon:Fn},model:{prop:"survey",event:"update-survey"},props:{quIndex:{type:Number,default:0},optionIndex:{type:Number,default:0},options:{type:Array,default:function(){return[]}},option:{type:Object,default:function(){}},survey:{type:Object,default:function(){}},quType:{type:String,default:""},value:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}},data:function(){return{itemHover:!1,itemClick:!1,itemIndex:0,inputText:"",themeColor:this.survey.surveyStyle.themeColor,rateColors:[this.survey.surveyStyle.themeColor,this.survey.surveyStyle.themeColor,this.survey.surveyStyle.themeColor]}},mounted:function(){this.options[this.optionIndex].itemClick&&(this.upItemClick(),this.editFocus(),this.options[this.optionIndex].itemClick=!1)},methods:{clickItem:function(){if(this.survey.readonly)return oi(this);var e=this.quType;console.debug("quType",e),"RADIO"===e?(this.survey.questions[this.quIndex].quRadios[this.optionIndex].checked=!0,this.resetOtherRadio()):"CHECKBOX"===e&&(this.survey.questions[this.quIndex].quCheckboxs[this.optionIndex].checked=!this.survey.questions[this.quIndex].quCheckboxs[this.optionIndex].checked),Mn(this.survey.questions[this.quIndex]),Hn(this.survey.questions[this.quIndex]),ni.saveSurveyAnswer2LocalStorage(this.survey)},resetOtherRadio:function(){var e=this;this.survey.questions[this.quIndex].quRadios.forEach(function(t,s){s!==e.optionIndex&&(t.checked=!1)})}}},pi={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-qu-item",on:{click:function(t){return t.stopPropagation(),e.clickItem.apply(null,arguments)}}},[e._m(0),e._v(" "),s("div",{staticClass:"dw-qu-item-body"},["RADIO"===e.quType?[s("div",{staticClass:"dw-qu-item-el-checkbox-radio",class:e.survey.questions[e.quIndex].quRadios[e.optionIndex].checked?"dw-item-checked":""},[e.survey.questions[e.quIndex].quRadios[e.optionIndex].checked?s("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-radio-icon fa-solid fa-circle-dot animate__animated animate__tada dw-checked"}):s("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-radio-icon fa-regular fa-circle"}),e._v(" "),s("div",{staticClass:"dw-qu-item-option-title"},[s("dw-html-label-common",{ref:"dwEditLabel",attrs:{value:e.options[e.optionIndex].optionTitleObj}})],1),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.survey.dwDebug,expression:"survey.dwDebug"}]},[e._v(e._s(e.survey.questions[e.quIndex].quRadios[e.optionIndex].checked))])])]:"CHECKBOX"===e.quType?[s("div",{staticClass:"dw-qu-item-el-checkbox-radio",class:e.survey.questions[e.quIndex].quCheckboxs[e.optionIndex].checked?"dw-item-checked":""},[e.survey.questions[e.quIndex].quCheckboxs[e.optionIndex].checked?s("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-checkbox-icon fa-solid fa-square-check animate__animated animate__tada dw-checked",staticStyle:{"font-size":"22px"}}):s("i",{staticClass:"dw-qu-item-el-checkbox-radio-icon dw-checkbox-icon fa-regular fa-square",staticStyle:{"font-size":"22px"}}),e._v(" "),s("div",{staticClass:"dw-qu-item-option-title"},[s("dw-html-label-common",{ref:"dwEditLabel",attrs:{value:e.options[e.optionIndex].optionTitleObj}})],1),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.survey.dwDebug,expression:"survey.dwDebug"}]},[e._v(e._s(e.survey.questions[e.quIndex].quCheckboxs[e.optionIndex].checked))])])]:[s("dw-html-label-common",{ref:"dwEditLabel",attrs:{value:e.options[e.optionIndex].optionTitleObj}})]],2)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-qu-item-toolbar"},[t("div",{staticClass:"dw-display-grid"})])}]};var mi={name:"DwQuOptionCommon1",components:{DwQuOptionCommon1Item:s("VU/8")(vi,pi,!1,function(e){s("PH9Y")},"data-v-65b4dc9e",null).exports,draggable:nt.a},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},options:{type:Array,default:function(){return[]}},survey:{type:Object,default:function(){}},quType:{type:String,default:""},answer:{type:Object,default:function(){}}},data:function(){return{dragOptions:this.options,drag:!1}},methods:{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1,this.refreshOptions(null)},upAllItemClick:function(){for(var e=this.survey.curEditObj,t=0;t<e.length;t++)t!==this.itemIndex&&(this.survey.curEditObj[t].itemClick=!1)},refreshOptions:function(e){var t=this;this.$emit("update-options",this.dragOptions),this.upAllItemClick(),this.$nextTick(function(){for(var s=t.$refs.quCommonItem,n=0;n<s.length;n++)s[n].dragClick(e)})}}},yi={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("div",{staticClass:"dw-grid",style:"grid-template-columns: repeat("+e.survey.questions[e.index].cellCount+", minmax(auto,1fr));"},e._l(e.options,function(t,n){return s("div",{key:"quOption1-"+e.index+"-"+n,staticStyle:{width:"100%"}},[s("dw-qu-option-common1-item",{ref:"quCommonItem",refInFor:!0,attrs:{options:e.options,"qu-index":e.index,"option-index":n,"qu-type":e.quType},on:{"refresh-options":e.refreshOptions},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)}),0)])])},staticRenderFns:[]};var fi=s("VU/8")(mi,yi,!1,function(e){s("LTLN")},"data-v-0891ffce",null).exports,hi={name:"DwQuOptionCommon4",components:{draggable:nt.a},model:{prop:"options",event:"update-options"},props:{index:{type:Number,default:0},options:{type:Array,default:function(){return[]}},survey:{type:Object,default:function(){}},quType:{type:String,default:""}},data:function(){return{value:null,minLimit:0,maxLimit:0}},mounted:function(){var e=this,t=this.survey.questions[this.index];"RADIO"===t.quType&&this.survey.questions[this.index].quRadios.forEach(function(t){t.checked&&(e.value=t.optionTitleObj.dwHtml)});"CHECKBOX"===t.quType&&(this.minLimit=t.minLimit,this.maxLimit=t.maxLimit,this.survey.questions[this.index].quCheckboxs.forEach(function(t){t.checked&&e.value.push(t.optionTitleObj.dwHtml)}))},methods:{onChange:function(e){console.debug("onChange",e),console.debug("onChange Value",this.value),this.resetOptionChecked();var t=this.survey.questions[this.index].quType;if("RADIO"===t){var s=this.survey.questions[this.index].quRadios;this.checkQuOptions(s,[e])}else if("CHECKBOX"===t){var n=this.survey.questions[this.index].quCheckboxs;this.checkQuOptions(n,e)}Mn(this.survey.questions[this.index]),Hn(this.survey.questions[this.index]),ni.saveSurveyAnswer2LocalStorage(this.survey)},checkQuOptions:function(e,t){e.forEach(function(e){t.forEach(function(t){if(e.optionTitleObj.dwHtml===t)return e.checked=!0,!1})})},resetOptionChecked:function(){var e=this.survey.questions[this.index].quType;if("RADIO"===e)this.survey.questions[this.index].quRadios.forEach(function(e){e.checked=!1});else if("CHECKBOX"===e){this.survey.questions[this.index].quCheckboxs.forEach(function(e){e.checked=!1})}}}},wi={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticStyle:{"margin-bottom":"5px"}},[s("el-select",{attrs:{disabled:e.survey.readonly,multiple:"CHECKBOX"===e.quType,"multiple-limit":e.maxLimit,"popper-class":"dw-answer-custom-theme",placeholder:"请选择"},on:{change:e.onChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e,t){return s("el-option",{key:"fa_"+t,attrs:{label:e.optionTitleObj.dwHtml,value:e.optionTitleObj.dwHtml}})}),1)],1)])},staticRenderFns:[]};var gi=s("VU/8")(hi,wi,!1,function(e){s("ovsz")},"data-v-1321f1c0",null).exports,xi={name:"DwQuRadioOptions",components:{DwQuOptionCommon4:gi,DwQuOptionCommon2:ci,DwQuOptionCommon1:fi},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{}},methods:{updateOptions:function(e){this.survey.questions[this.index].quRadios=e}}},bi={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[1===e.survey.questions[e.index].hv?s("dw-qu-option-common1",{attrs:{options:e.survey.questions[e.index].quRadios,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}}):e._e(),e._v(" "),2===e.survey.questions[e.index].hv?s("dw-qu-option-common2",{attrs:{options:e.survey.questions[e.index].quRadios,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}}):e._e(),e._v(" "),4===e.survey.questions[e.index].hv?s("dw-qu-option-common4",{attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quRadios,callback:function(t){e.$set(e.survey.questions[e.index],"quRadios",t)},expression:"survey.questions[index].quRadios"}}):e._e()],1)},staticRenderFns:[]};var qi={name:"DwAnswerQuRadio",components:{DwQuRadioOptions:s("VU/8")(xi,bi,!1,function(e){s("RQbm")},"data-v-557a281a",null).exports,DwQuOptionCommon1:ci},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}}},Ci={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-radio-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var _i=s("VU/8")(qi,Ci,!1,function(e){s("CVIr")},"data-v-6b6cf25a",null).exports,Ai={name:"DwQuCheckboxOptions",components:{DwQuOptionCommon4:gi,DwQuOptionCommon1:fi,DwQuOptionCommon2:ci},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}}},Si={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[1===e.survey.questions[e.index].hv?s("dw-qu-option-common1",{ref:"dwCommon1",attrs:{options:e.survey.questions[e.index].quCheckboxs,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}}):e._e(),e._v(" "),2===e.survey.questions[e.index].hv?s("dw-qu-option-common2",{ref:"dwCommon2",attrs:{options:e.survey.questions[e.index].quCheckboxs,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}}):e._e(),e._v(" "),4===e.survey.questions[e.index].hv?s("dw-qu-option-common4",{ref:"dwCommon4",attrs:{survey:e.survey,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey.questions[e.index].quCheckboxs,callback:function(t){e.$set(e.survey.questions[e.index],"quCheckboxs",t)},expression:"survey.questions[index].quCheckboxs"}}):e._e()],1)},staticRenderFns:[]};var ki={name:"DwAnswerQuCheckbox",components:{DwQuCheckboxOptions:s("VU/8")(Ai,Si,!1,function(e){s("7cuw")},"data-v-6857275f",null).exports},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}}},Ti={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-checkbox-options",{ref:"dwQuestion",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var Ii=s("VU/8")(ki,Ti,!1,function(e){s("oXSW")},"data-v-73d16e22",null).exports,Oi={name:"DwAnswerQuFbk",components:{},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}},data:function(){return{inputText:""}},computed:{isAnswer:function(){if(this.survey.questions[this.index].hasOwnProperty("answer")){var e=this.survey.questions[this.index].answer;return null!==e&&void 0!==e&&""!==e}return!1}},mounted:function(){console.debug("this.survey.questions[this.index].answerA",this.survey.questions[this.index].answer);try{this.survey.questions[this.index].hasOwnProperty("answer")&&void 0!==this.survey.questions[this.index].answer&&(this.survey.questions[this.index].answer=JSON.parse(this.survey.questions[this.index].answer))}catch(e){console.debug("e",e)}console.debug("this.survey.questions[this.index].answer",this.survey.questions[this.index].answer)},methods:{onBlur:function(e){Mn(this.survey.questions[this.index]),Hn(this.survey.questions[this.index]),ni.saveSurveyAnswer2LocalStorage(this.survey)}}},Di={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-qu-item",staticStyle:{padding:"0","margin-bottom":"5px"}},[e.survey.questions[e.index].quAttr.inputAttr.commonAttr.inputRow>1?s("el-input",{class:e.isAnswer?"dw-input-active":"",attrs:{placeholder:e.survey.questions[e.index].quAttr.inputAttr.commonAttr.placeholder,autosize:{minRows:e.survey.questions[e.index].quAttr.inputAttr.commonAttr.inputRow},type:"textarea"},on:{blur:e.onBlur,input:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}}):"TIME"===e.survey.questions[e.index].quAttr.inputAttr.commonAttr.checkType?[7===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?[s("div",[e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.attrs.includes("range")?[s("div",[null!=e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.step&&null!==e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range?[s("div",[s("el-time-select",{attrs:{"picker-options":{start:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range[0],step:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.step,end:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range[1],format:5===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"起始时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer.startTime,callback:function(t){e.$set(e.survey.questions[e.index].answer,"startTime",t)},expression:"survey.questions[index].answer.startTime"}})],1),e._v(" "),s("div",[s("el-time-select",{attrs:{"picker-options":{start:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range[0],step:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.step,end:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range[1],minTime:e.survey.questions[e.index].answer.startTime,format:5===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"结束时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer.endTime,callback:function(t){e.$set(e.survey.questions[e.index].answer,"endTime",t)},expression:"survey.questions[index].answer.endTime"}})],1)]:e._e(),e._v(" "),null===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.step&&null!==e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range?[s("div",[s("el-time-select",{attrs:{"picker-options":{start:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range[0],end:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range[1],format:5===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"起始时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer.startTime,callback:function(t){e.$set(e.survey.questions[e.index].answer,"startTime",t)},expression:"survey.questions[index].answer.startTime"}})],1),e._v(" "),s("div",[s("el-time-select",{attrs:{"picker-options":{start:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range[0],end:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range[1],minTime:e.survey.questions[e.index].answer.startTime,format:5===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"结束时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer.endTime,callback:function(t){e.$set(e.survey.questions[e.index].answer,"endTime",t)},expression:"survey.questions[index].answer.endTime"}})],1)]:null!==e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.step&&null===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range?[s("div",[s("el-time-select",{attrs:{"picker-options":{step:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.step,format:5===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"起始时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer.startTime,callback:function(t){e.$set(e.survey.questions[e.index].answer,"startTime",t)},expression:"survey.questions[index].answer.startTime"}})],1),e._v(" "),s("div",[s("el-time-select",{attrs:{"picker-options":{step:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.step,minTime:e.survey.questions[e.index].answer.startTime,format:5===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"结束时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer.endTime,callback:function(t){e.$set(e.survey.questions[e.index].answer,"endTime",t)},expression:"survey.questions[index].answer.endTime"}})],1)]:e._e()],2)]:[s("div",[null!=e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.step&&null!==e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range?[s("div",[s("el-time-select",{attrs:{"picker-options":{start:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range[0],step:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.step,end:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range[1],format:5===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"请选择时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})],1)]:e._e(),e._v(" "),null===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.step&&null!==e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range?[s("div",[s("el-time-select",{attrs:{"picker-options":{start:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range[0],end:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range[1],format:5===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"请选择时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})],1)]:null!==e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.step&&null===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range?[s("div",[s("el-time-select",{attrs:{"picker-options":{step:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.step,format:5===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"请选择时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})],1)]:[s("div",[s("el-time-select",{attrs:{"picker-options":{format:5===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm"},disabled:e.survey.readonly,placeholder:"请选择时间","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})],1)]],2)]],2)]:[e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.attrs.includes("range")?[s("el-time-picker",{staticClass:"dw-answer-custom-theme",class:e.isAnswer?"dw-input-active":"",attrs:{format:5===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm",disabled:e.survey.readonly,"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},on:{blur:e.onBlur,input:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})]:[null!==e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range?[s("el-time-picker",{class:e.isAnswer?"dw-input-active":"",attrs:{"picker-options":{selectableRange:null!==e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range?e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range[0]+" - "+e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.timeRange.range[1]:null},format:5===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm",placeholder:e.survey.questions[e.index].quAttr.inputAttr.commonAttr.placeholder,disabled:e.survey.readonly,"popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur,input:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})]:[s("el-time-picker",{class:e.isAnswer?"dw-input-active":"",attrs:{format:5===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?"HH:mm:ss":"HH:mm",placeholder:e.survey.questions[e.index].quAttr.inputAttr.commonAttr.placeholder,disabled:e.survey.readonly,"popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur,input:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})]]]]:"DATE"===e.survey.questions[e.index].quAttr.inputAttr.commonAttr.checkType?[e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.attrs.includes("range")?[3===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?[s("el-date-picker",{attrs:{disabled:e.survey.readonly,type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})]:2===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?[s("el-date-picker",{attrs:{disabled:e.survey.readonly,type:"monthrange","start-placeholder":"开始月份","end-placeholder":"结束月份","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})]:1===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?[s("el-date-picker",{attrs:{disabled:e.survey.readonly,type:"date",placeholder:"选择日期","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})]:e._e()]:[3===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?[s("el-date-picker",{attrs:{type:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.attrs.includes("more")?"dates":"date",disabled:e.survey.readonly,placeholder:"选择日期","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})]:2===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?[s("el-date-picker",{attrs:{type:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.attrs.includes("more")?"months":"month",disabled:e.survey.readonly,placeholder:"选择月","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})]:1===e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.dateFormat?[s("el-date-picker",{attrs:{type:e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.attrs.includes("more")?"years":"year",disabled:e.survey.readonly,placeholder:"选择年","popper-popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})]:e._e()]]:"DATETIME"===e.survey.questions[e.index].quAttr.inputAttr.commonAttr.checkType?[e.survey.questions[e.index].quAttr.inputAttr.dateTimeAttr.attrs.includes("range")?[s("el-date-picker",{attrs:{disabled:e.survey.readonly,type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})]:[s("el-date-picker",{attrs:{disabled:e.survey.readonly,type:"datetime",placeholder:"选择日期","popper-class":"dw-answer-custom-theme"},on:{blur:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})]]:"NUM"===e.survey.questions[e.index].quAttr.inputAttr.commonAttr.checkType?[s("el-input-number",{attrs:{precision:e.survey.questions[e.index].quAttr.inputAttr.numAttr.precision,min:e.survey.questions[e.index].quAttr.inputAttr.numAttr.min,max:e.survey.questions[e.index].quAttr.inputAttr.numAttr.max,disabled:e.survey.readonly,label:"描述文字"},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})]:"DIGITS"===e.survey.questions[e.index].quAttr.inputAttr.commonAttr.checkType?[s("el-input-number",{attrs:{min:e.survey.questions[e.index].quAttr.inputAttr.numAttr.min,max:e.survey.questions[e.index].quAttr.inputAttr.numAttr.max,step:1,disabled:e.survey.readonly,"step-strictly":"",label:"描述文字"},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})]:[s("el-input",{class:e.isAnswer?"dw-input-active":"",attrs:{minlength:e.survey.questions[e.index].quAttr.inputAttr.commonAttr.minlength,maxlength:e.survey.questions[e.index].quAttr.inputAttr.commonAttr.maxlength,placeholder:e.survey.questions[e.index].quAttr.inputAttr.commonAttr.placeholder,disabled:e.survey.readonly,"show-word-limit":""},on:{blur:e.onBlur,input:e.onBlur},model:{value:e.survey.questions[e.index].answer,callback:function(t){e.$set(e.survey.questions[e.index],"answer",t)},expression:"survey.questions[index].answer"}})]],2)},staticRenderFns:[]};var Ei=s("VU/8")(Oi,Di,!1,function(e){s("DcPy"),s("3kGJ")},"data-v-e4fabc98",null).exports,Pi={name:"DwQuScoreOptions",components:{DwQuOptionCommon2:ci},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{}},methods:{}},Ri={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-qu-option-common2",{attrs:{options:e.survey.questions[e.index].quScores,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)},staticRenderFns:[]};var Ni=s("VU/8")(Pi,Ri,!1,function(e){s("O6RM")},"data-v-7b337356",null).exports,Li={name:"DwAnswerQuScore",components:{DwQuScoreOptions:Ni,DwQuMFbkOptions:Ni},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}}},Fi={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-score-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var Qi=s("VU/8")(Li,Fi,!1,function(e){s("7enl")},"data-v-622e504b",null).exports,Ui={name:"DwQuOrderOptions",components:{DwHtmlLabelCommon:Fn,DwTextEditLabel:Mt,DwQuOptionCommon2Item:Is,DwQuOptionCommon2:ci,draggable:nt.a},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{dataNum:0,themeColor:this.survey.surveyStyle.themeColor}},mounted:function(){var e=this;this.survey.questions[this.index].quOrderbys.forEach(function(t,s){e.dataNum<t.orderIndex&&(e.dataNum=t.orderIndex)})},methods:{onStart:function(){this.drag=!0},onEnd:function(e){this.drag=!1},clickItem:function(e){if(this.survey.readonly)return oi(this);e.checked=!e.checked;var t=this.survey.questions[this.index].quOrderbys.length;if(e.hasOwnProperty("orderIndex")&&e.orderIndex>0){var s=e.orderIndex;this.survey.questions[this.index].quOrderbys.forEach(function(e,t){s<e.orderIndex&&(e.orderIndex=e.orderIndex-1)}),e.orderIndex=0;var n=this.dataNum-1;n>=0&&(this.dataNum=n)}else{var i=this.dataNum+1;i<=t&&(e.orderIndex=i,this.dataNum=i)}this.survey.questions[this.index].quOrderbys.sort(function(e,s){var n=0===e.orderIndex?t+1:e.orderIndex,i=0===s.orderIndex?t+1:s.orderIndex;return n<i?-1:n>i?1:0}),Mn(this.survey.questions[this.index]),Hn(this.survey.questions[this.index])}}},Bi={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-qu-order-group"},[s("transition-group",{attrs:{name:"flip-list"}},e._l(e.survey.questions[e.index].quOrderbys,function(t,n){return s("div",{key:"modelComponents"===e.survey.tempDataType?"orderBy-"+n:t.dwId,staticClass:"dw-qu-order-group-item dwMoveSortQuOption"},[s("div",{staticClass:"dw-qu-item",on:{click:function(s){return e.clickItem(t)}}},[s("div",{staticClass:"dw-qu-item-body"},[s("div",{staticClass:"dw-qu-item-body-order-option",class:t.checked?"dw-item-checked":""},[t.orderIndex>0?s("i",{staticClass:"fa dw-qu-order-num dw-num-order animate__animated animate__tada",style:"background: "+e.themeColor+";border-color: "+e.themeColor},[e._v(e._s(t.orderIndex))]):s("i",{staticClass:"fa dw-qu-order-num dw-num-empty"},[e._v(" "+e._s(t.orderIndex)+" ")]),e._v(" "),s("div",{staticClass:"dw-qu-item-option-title"},[s("dw-html-label-common",{ref:"dwEditLabel",refInFor:!0,attrs:{value:t.optionTitleObj}})],1)])])])])}),0)],1)},staticRenderFns:[]};var ji={name:"DwAnswerQuOrder",components:{DwQuOrderOptions:s("VU/8")(Ui,Bi,!1,function(e){s("fm5u")},"data-v-32e89980",null).exports,DwQuOptionCommon1:ci},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}}},Mi={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-order-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var $i=s("VU/8")(ji,Mi,!1,function(e){s("R4Iz")},"data-v-3b9446a9",null).exports,Hi={name:"DwQuMFbkOptions",components:{DwQuOptionCommon2:ci},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}},data:function(){return{}},methods:{}},Vi={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-qu-option-common2",{attrs:{options:e.survey.questions[e.index].quMultiFillblanks,index:e.index,"qu-type":e.survey.questions[e.index].quType},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)},staticRenderFns:[]};var zi={name:"DwAnswerQuMFbk",components:{DwQuMFbkOptions:s("VU/8")(Hi,Vi,!1,function(e){s("Ncat")},"data-v-1d05062a",null).exports},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}}},Gi={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("dw-qu-m-fbk-options",{attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})},staticRenderFns:[]};var Yi=s("VU/8")(zi,Gi,!1,function(e){s("q84n")},"data-v-4de84427",null).exports,Ji={name:"DwAnswerQuUpload",components:{},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}},data:function(){return{upFileList:[],fileList:[],limit:0,accept:"",listType:"text",uploadAction:"/api/dwsurvey/up/up-file-wb.do",fileSize:10}},mounted:function(){var e=this.survey.questions[this.index];if(e.hasOwnProperty("fileLimit")&&null!==e.fileLimit&&(this.limit=e.fileLimit),e.hasOwnProperty("fileAccept")&&null!==e.fileAccept){var t=e.fileAccept;0===t&&(this.accept=""),1===t&&(this.accept=".jpg,.jpeg,.png,.gif,.bmp"),2===t&&(this.accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx"),100===t&&(this.accept=e.customFileAccept)}e.hasOwnProperty("fileSize")&&null!==e.fileSize&&(this.fileSize=e.fileSize)},methods:{handleRemove:function(e,t){console.log(e,t),this.upFileList=t,this.updateUpFileAnswer()},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 "+this.limit+" 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){},beforeAvatarUpload:function(e){if(null!==this.fileSize&&this.fileSize>0){var t=e.size/1024/1024<this.fileSize;return t||this.$message.warning("上传文件大小不能超过 "+this.fileSize+"MB!"),e.checkSize=!1,t}return!0},handleSuccess:function(e,t,s){console.debug("response",e),console.debug("file",t),console.debug("fileList",s),this.upFileList=s,this.updateUpFileAnswer()},updateUpFileAnswer:function(){console.debug(this.upFileList),this.survey.questions[this.index].upFileList=this.upFileList,Mn(this.survey.questions[this.index]),Hn(this.survey.questions[this.index])}}},Wi={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-upload",{staticClass:"upload-demo",attrs:{"before-remove":e.beforeRemove,"before-upload":e.beforeAvatarUpload,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"on-success":e.handleSuccess,limit:e.limit,accept:e.accept,"file-list":e.fileList,"list-type":e.listType,action:e.uploadAction,multiple:""}},[s("el-button",{attrs:{size:"small",type:"primary",plain:""}},[e._v("点击上传")]),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[s("div",{staticClass:"dw-answer-question-remind",staticStyle:{"line-height":"20px"}},[""!==e.accept&&e.fileSize>0&&e.limit>0?[e._v("\n          请上传"),s("span",{staticClass:"span-high"},[e._v(e._s(e.accept))]),e._v("类型文件，单个文件大小不超过"),s("span",{staticClass:"span-high"},[e._v(e._s(e.fileSize)+"M")]),e._v("，最多只能上传"),s("span",{staticClass:"span-high"},[e._v(e._s(e.limit)+"个")]),e._v("文件\n        ")]:e._e(),e._v(" "),""===e.accept&&e.fileSize>0&&e.limit>0?[e._v("\n          单个文件大小不超过"),s("span",{staticClass:"span-high"},[e._v(e._s(e.fileSize)+"M")]),e._v("，最多只能上传"),s("span",{staticClass:"span-high"},[e._v(e._s(e.limit)+"个")]),e._v("文件\n        ")]:e._e(),e._v(" "),""===e.accept&&e.fileSize<=0&&e.limit>0?[e._v("\n          最多只能上传"),s("span",{staticClass:"span-high"},[e._v(e._s(e.limit)+"个")]),e._v("文件\n        ")]:e._e()],2)])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.dwDebug,expression:"survey.dwDebug"}]},[s("div",[e._v(e._s(e.upFileList))])])],1)},staticRenderFns:[]};var Ki={name:"DwAnswerQuestion",components:{DwAnswerQuUpload:s("VU/8")(Ji,Wi,!1,function(e){s("dduY")},"data-v-b694fbdc",null).exports,DwAnswerQuMFbk:Yi,DwAnswerQuOrder:$i,DwAnswerQuScore:Qi,DwAnswerQuFbk:Ei,DwAnswerQuCheckbox:Ii,DwAnswerQuRadio:_i,DwAnswerQuestionCommon:Gn},model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},item:{type:Object,default:function(){}},survey:{type:Object,default:function(){}},answer:{type:Object,default:function(){}}}},Zi={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-collapse-transition",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.item.showQu,expression:"item.showQu"}]},[s("dw-answer-question-common",{ref:"dwDesignQuestionCommon",attrs:{index:e.index},scopedSlots:e._u([{key:"editQuContent",fn:function(){return["RADIO"===e.item.quType?s("div",[s("dw-answer-qu-radio",{ref:"dwQuRadio",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"CHECKBOX"===e.item.quType?s("div",[s("dw-answer-qu-checkbox",{ref:"dwQuCheckbox",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"FILLBLANK"===e.item.quType?s("div",[s("dw-answer-qu-fbk",{ref:"dwQuFbk",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"SCORE"===e.item.quType?s("div",[s("dw-answer-qu-score",{ref:"dwQuScore",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"ORDERQU"===e.item.quType?s("div",[s("dw-answer-qu-order",{ref:"dwQuOrder",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"MULTIFILLBLANK"===e.item.quType?s("div",[s("dw-answer-qu-m-fbk",{ref:"dwQuMfbk",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e(),e._v(" "),"UPLOADFILE"===e.item.quType?s("div",[s("dw-answer-qu-upload",{ref:"dwQuUpload",attrs:{index:e.index},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e()]},proxy:!0}]),model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],1)},staticRenderFns:[]};var Xi=s("VU/8")(Ki,Zi,!1,function(e){s("gZtq")},"data-v-562b3121",null).exports,er={name:"DwDesignQuestionModelCommon",components:{DwAnswerQuestion:Xi,DwDesignQuestion:Dn},props:{item:{type:Object,default:function(){}}},data:function(){return{survey:{surveyNameObj:{dwHtml:"survey.surveyName",dwText:"survey.surveyNameText",dwPlaceholder:"请输入问卷标题"},questions:[this.item],surveyTest:"",curEditObj:[{itemClick:!1}],surveyStyle:{themeColor:"red"},tempDataType:"modelComponents"},index:0}}},tr={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._t("default"),e._v(" "),null!==e.item.dwsurveyfont?[e._t("quModelTagDwsurveyfont"),e._v(" "),s("div",{staticClass:"cloneQuRoot"},[s("div",[s("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])]:["RADIO"===e.item.quType?s("div",[4===e.item.hv?s("div",[e._t("quModelTagXialati"),e._v(" "),s("div",{staticClass:"cloneQuRoot"},[s("div",[s("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):s("div",[e._t("quModelTagDanxuan"),e._v(" "),s("div",{staticClass:"cloneQuRoot"},[s("div",[s("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2)]):e._e(),e._v(" "),"CHECKBOX"===e.item.quType?s("div",[e._t("quModelTagDuoxuan"),e._v(" "),s("div",{staticClass:"cloneQuRoot"},[s("div",[s("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):e._e(),e._v(" "),"FILLBLANK"===e.item.quType?s("div",[e.item.answerInputRow>1?s("div",[e._t("quModelTagDuoxiangwenben"),e._v(" "),s("div",{staticClass:"cloneQuRoot"},[s("div",[s("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):s("div",[e._t("quModelTagTiankong"),e._v(" "),s("div",{staticClass:"cloneQuRoot"},[s("div",[s("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2)]):e._e(),e._v(" "),"SCORE"===e.item.quType?s("div",[e._t("quModelTagPingfen"),e._v(" "),s("div",{staticClass:"cloneQuRoot"},[s("div",[s("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):e._e(),e._v(" "),"ORDERQU"===e.item.quType?s("div",[e._t("quModelTagPaixu"),e._v(" "),s("div",{staticClass:"cloneQuRoot"},[s("div",[s("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):e._e(),e._v(" "),"MULTIFILLBLANK"===e.item.quType?s("div",[e._t("quModelTagDuoxiangtiankong"),e._v(" "),s("div",{staticClass:"cloneQuRoot"},[s("div",[s("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):e._e(),e._v(" "),"UPLOADFILE"===e.item.quType?s("div",[e._t("quModelTagShangchuan"),e._v(" "),s("div",{staticClass:"cloneQuRoot"},[s("div",[s("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):e._e(),e._v(" "),"PAGETAG"===e.item.quType?s("div",[e._t("quModelTagFenye"),e._v(" "),s("div",{staticClass:"cloneQuRoot"},[s("div",[s("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):e._e(),e._v(" "),"PARAGRAPH"===e.item.quType?s("div",[e._t("quModelTagFenduan"),e._v(" "),s("div",{staticClass:"cloneQuRoot"},[s("div",[s("dw-answer-question",{attrs:{index:e.index,item:e.item},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],2):e._e()]],2)},staticRenderFns:[]};var sr=s("VU/8")(er,tr,!1,function(e){s("hutW")},"data-v-4599ebe0",null).exports,nr={name:"DwDesignToolbarQuestion",components:{DwDesignQuestionModelCommon:sr,DwAnswerQuestion:Xi,DwDesignQuestion:Dn},props:{item:{type:Object,default:function(){}}},data:function(){return{}}},ir={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-design-question-model-common",{attrs:{item:e.item},scopedSlots:e._u([{key:"quModelTagDwsurveyfont",fn:function(){return[s("div",{staticClass:"toolbar-item-content"},[s("div",{staticClass:"dwToolbar_icon dwsurveyfont",class:e.item.dwsurveyfont})])]},proxy:!0},{key:"quModelTagXialati",fn:function(){return[s("div",{staticClass:"toolbar-item-content"},[s("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-xialati"})])]},proxy:!0},{key:"quModelTagDanxuan",fn:function(){return[s("div",{staticClass:"toolbar-item-content"},[s("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-danxuan"})])]},proxy:!0},{key:"quModelTagDuoxuan",fn:function(){return[s("div",{staticClass:"toolbar-item-content"},[s("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-duoxuan"})])]},proxy:!0},{key:"quModelTagDuoxiangwenben",fn:function(){return[s("div",{staticClass:"toolbar-item-content"},[s("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-duoxiangwenben"})])]},proxy:!0},{key:"quModelTagTiankong",fn:function(){return[s("div",{staticClass:"toolbar-item-content"},[s("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-tiankong"})])]},proxy:!0},{key:"quModelTagPingfen",fn:function(){return[s("div",{staticClass:"toolbar-item-content"},[s("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-pingfen"})])]},proxy:!0},{key:"quModelTagPaixu",fn:function(){return[s("div",{staticClass:"toolbar-item-content"},[s("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-paixu"})])]},proxy:!0},{key:"quModelTagDuoxiangtiankong",fn:function(){return[s("div",{staticClass:"toolbar-item-content"},[s("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-duoxiangtiankong"})])]},proxy:!0},{key:"quModelTagShangchuan",fn:function(){return[s("div",{staticClass:"toolbar-item-content"},[s("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-shangchuan"})])]},proxy:!0},{key:"quModelTagFenye",fn:function(){return[s("div",{staticClass:"toolbar-item-content"},[s("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-fenye"})])]},proxy:!0},{key:"quModelTagFenduan",fn:function(){return[s("div",{staticClass:"toolbar-item-content"},[s("div",{staticClass:"dwToolbar_icon dwsurveyfont icon-dwsurvey-fenduan"})])]},proxy:!0}])})],1)},staticRenderFns:[]};var rr={name:"DwDesignToolbar",components:{DwAnswerQuestion:Xi,DwDesignToolbarQuestion:s("VU/8")(nr,ir,!1,function(e){s("SYBE")},"data-v-b5a6bc40",null).exports,DwDesignQuestion:Dn,draggable:nt.a},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{questions:[],questions1:[],tabs:[],drag:!1,loading:!0}},mounted:function(){this.loadDesignSurveyData()},methods:{onStart:function(){this.drag=!0,this.$emit("start-drag")},onEnd:function(){this.$emit("end-drag"),this.drag=!1},loadDesignSurveyData:function(){var e=this;Pt().then(function(t){console.debug("questionComps-response"),console.debug(t);var s=t.data;if(s.hasOwnProperty("resultCode")&&200===s.resultCode){var n=s.data;n.map(function(e,t){e.tabQus.map(function(e,t){var s;e.questions=(null!==(s=ws(e.questions,!1))&&s.length>0&&s.map(function(e,t){e.isRequired=1,e.showQu=!0,gs(e)}),s)})}),e.tabs=n,e.loading=!1}})},saveSurvey:function(){this.saveSurveyFun(null)},previewSurvey:function(){var e=this;this.saveSurveyFun(function(){var t=e.$route.params.id;e.$router.push("/dw-v6/diaowen/dw-preview/survey/"+t)})},saveSurveyFun:function(e){var t=this,s=this.survey.id,n=this.survey.sid;us(this.survey),console.debug("save this.survey",this.survey);var i=u()(this.survey),r={surveyId:s,sid:n,surveyJsonText:i,surveyJsonSimple:u()(ls(i))};console.debug("surveyJson data",r),Rt(r).then(function(s){console.debug("dwSaveSurveyJson-response",s);var n=s.data;n.hasOwnProperty("resultCode")&&200===n.resultCode?(t.$message.success("保存成功！"),null!=e&&e()):t.$message.success("保存失败！")})}}},or={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.tabs.length>0?s("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"border-card"}},[s("el-tab-pane",{staticStyle:{padding:"0px"},attrs:{label:"常用题型"}},[s("div",{staticClass:"toolbars-contents"},[s("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{attrs:{span:18}},[s("div",{staticClass:"toolbars-contents-body"},e._l(e.tabs[0].tabQus,function(t,n){return s("div",{key:"toolbar"+n,staticClass:"tools_item"},[s("div",{staticClass:"toolbars"},[s("draggable",{staticClass:"toolbars-draggable",attrs:{group:{name:"questionGroup",pull:"clone",put:!1},sort:!1,"force-fallback":!0,animation:"300","drag-class":"dragClass","ghost-class":"ghostClass","chosen-class":"chosenClass"},on:{start:e.onStart,end:e.onEnd},model:{value:t.questions,callback:function(s){e.$set(t,"questions",s)},expression:"item.questions"}},[s("transition-group",{staticClass:"toolbars-draggable-group"},e._l(t.questions,function(e,t){return s("div",{key:"base"+t,staticClass:"toolbar-item"},[s("dw-design-toolbar-question",{attrs:{item:e}})],1)}),0)],1)],1),e._v(" "),s("div",[s("div",{staticClass:"toolbars-text"},[e._v(e._s(t.tabQuName))])])])}),0)]),e._v(" "),s("el-col",{attrs:{span:6}},[s("div",{staticStyle:{"text-align":"right","padding-right":"10px"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.previewSurvey}},[s("i",{staticClass:"fa fa-paper-plane"}),e._v(" 发布")]),e._v(" "),s("el-button",{attrs:{plain:""},on:{click:e.saveSurvey}},[s("i",{staticClass:"fa-solid fa-floppy-disk"}),e._v(" 保存")]),e._v(" "),s("el-button",{attrs:{plain:""},on:{click:e.previewSurvey}},[s("i",{staticClass:"fa-solid fa-eye"}),e._v(" 预览")])],1)])],1)],1)])],1):e._e()},staticRenderFns:[]};var ar=s("VU/8")(rr,or,!1,function(e){s("DQzE")},"data-v-6128b194",null).exports,ur={name:"DwDesignContainerBodyCenter",components:{DwDesignQuestionCommon:Ss,DwFooter:O,DwDesignToolbar:ar,DwDesignHeader:Rn,DwTextEditLabelCommon:Vt,DwDesignQuRadio:Js,DwTextEditLabel:Mt,DwDesignQuestion:Dn,draggable:nt.a},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{drag:!1}},methods:{onAdd:function(e){console.debug("onAdd attrs",e),this.documentClick();var t=e.newIndex;this.refreshData(t),this.survey.questions[t].quTitleObj.isNew=!0,qs(this.survey.questions[t])},onStart:function(){this.drag=!0,this.$emit("start-drag-container")},onEnd:function(e){this.$emit("end-drag"),console.debug("attrs",e),this.drag=!1;var t=e.newIndex,s=e.oldIndex;t>s?this.refreshData(s):this.refreshData(t),this.documentClick()},documentClick:function(){for(var e=this.survey.curEditObj,t=0;t<e.length;t++)this.survey.curEditObj[t].itemClick=!1},refreshQuData:function(e){var t=this;this.$nextTick(function(){for(var s=t.$refs.designQuestion,n=0;n<s.length;n++)s[n].refreshQuData(e)})},refreshData:function(e){var t=this;this.survey.questions.forEach(function(s,n){n>=e&&t.survey.questions.splice(n,1,Gt(JSON.parse(u()(s))))})}}},lr={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-container-body-center"},[s("div",{staticStyle:{"min-height":"600px"}},[s("div",{staticStyle:{"text-align":"center",padding:"20px"}},[s("dw-text-edit-label-common",{attrs:{survey:e.survey},model:{value:e.survey.surveyNameObj,callback:function(t){e.$set(e.survey,"surveyNameObj",t)},expression:"survey.surveyNameObj"}})],1),e._v(" "),s("div",{staticStyle:{padding:"0px 40px"}},[s("dw-text-edit-label-common",{attrs:{survey:e.survey},model:{value:e.survey.surveyDetail.surveyNodeObj,callback:function(t){e.$set(e.survey.surveyDetail,"surveyNodeObj",t)},expression:"survey.surveyDetail.surveyNodeObj"}})],1),e._v(" "),s("div",[s("div",[s("draggable",{staticClass:"dwDraggable",attrs:{"force-fallback":!0,group:{name:"questionGroup",pull:!1,put:!0},handle:".dwMoveSortQu",animation:"300","drag-class":"dwDragClass","ghost-class":"dwGhostClass","chosen-class":"dwChosenClass"},on:{add:e.onAdd,start:e.onStart,end:e.onEnd},model:{value:e.survey.questions,callback:function(t){e.$set(e.survey,"questions",t)},expression:"survey.questions"}},[s("transition-group",e._l(e.survey.questions,function(t,n){return s("div",{key:t.hasOwnProperty("dwId")?t.dwId:"Qu_"+n},[s("dw-design-question",{ref:"designQuestion",refInFor:!0,attrs:{index:n,item:t},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)}),0)],1)],1)])])])},staticRenderFns:[]};var dr=s("VU/8")(ur,lr,!1,function(e){s("hKPv")},"data-v-0f27aa4b",null).exports,cr={name:"DwDesignCatalogQuItem",model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},computed:{quNum:function(){var e=this,t=0;return this.survey.questions.forEach(function(s,n){"PAGETAG"!==s.quType&&"PARAGRAPH"!==s.quType&&n<=e.index&&t++}),t},pageSize:function(){var e=1;return this.survey.questions.forEach(function(t,s){"PAGETAG"===t.quType&&e++}),e},pageNum:function(){var e=this,t=0;return this.survey.questions.forEach(function(s,n){"PAGETAG"===s.quType&&n<=e.index&&t++}),t}}},vr={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",["PARAGRAPH"===e.survey.questions[e.index].quType||"PAGETAG"===e.survey.questions[e.index].quType?["PAGETAG"===e.survey.questions[e.index].quType?s("div",[s("div",{staticClass:"qu-catalogue-item qu-catalogue-page"},[e._v("分页：下一页("+e._s(e.pageNum)+"/"+e._s(e.pageSize)+")")])]):e._e(),e._v(" "),"PARAGRAPH"===e.survey.questions[e.index].quType?s("div",[s("div",{staticClass:"qu-catalogue-item qu-catalogue-paragraph"},[e._v("分段："+e._s(e.survey.questions[e.index].quTitleObj.dwText))])]):e._e()]:[s("div",{staticClass:"qu-catalogue-item qu-catalogue-other"},[e._v("Q"+e._s(e.quNum)+"、"+e._s(e.survey.questions[e.index].quTitleObj.dwText))])]],2)},staticRenderFns:[]};var pr=s("VU/8")(cr,vr,!1,function(e){s("bpMo")},"data-v-6a04cfb1",null).exports,mr={name:"DwDesignSurveyAttrs",model:{prop:"survey",event:"update-survey"},props:{index:{type:Number,default:0},survey:{type:Object,default:function(){}}},data:function(){return{labelPosition:"right"}},methods:{}},yr={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-form",{ref:"form",attrs:{size:"mini"}},[s("div",[s("div",{staticClass:"dw-title-attr"},[e._v("回答限制")]),e._v(" "),s("div",{staticStyle:{"padding-left":"10px"}},[s("el-form-item",[s("div",[s("el-checkbox",{model:{value:e.survey.surveyAttrs.anBroAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anBroAttr,"enabled",t)},expression:"survey.surveyAttrs.anBroAttr.enabled"}},[e._v("启用浏览器终端回答限制")])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyAttrs.anBroAttr.enabled,expression:"survey.surveyAttrs.anBroAttr.enabled"}],staticStyle:{"font-size":"12px"}},[e._v("\n            每个浏览器可回答次数"),s("el-input-number",{staticStyle:{width:"130px"},attrs:{min:1,max:1e5,size:"mini"},model:{value:e.survey.surveyAttrs.anBroAttr.anNum,callback:function(t){e.$set(e.survey.surveyAttrs.anBroAttr,"anNum",t)},expression:"survey.surveyAttrs.anBroAttr.anNum"}}),e._v(" 次\n          ")],1)]),e._v(" "),s("el-form-item",[s("div",[s("el-checkbox",{model:{value:e.survey.surveyAttrs.anIpAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anIpAttr,"enabled",t)},expression:"survey.surveyAttrs.anIpAttr.enabled"}},[e._v("启用IP回答限制")])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyAttrs.anIpAttr.enabled,expression:"survey.surveyAttrs.anIpAttr.enabled"}],staticStyle:{"font-size":"12px"}},[e._v("\n            每个IP可回答次数"),s("el-input-number",{staticStyle:{width:"130px"},attrs:{min:1,max:1e5,size:"mini"},model:{value:e.survey.surveyAttrs.anIpAttr.anNum,callback:function(t){e.$set(e.survey.surveyAttrs.anIpAttr,"anNum",t)},expression:"survey.surveyAttrs.anIpAttr.anNum"}}),e._v(" 次\n          ")],1)]),e._v(" "),s("el-checkbox",{model:{value:e.survey.surveyAttrs.anRefreshAttr.randomCode,callback:function(t){e.$set(e.survey.surveyAttrs.anRefreshAttr,"randomCode",t)},expression:"survey.surveyAttrs.anRefreshAttr.randomCode"}},[e._v("重复回答启用验证码")]),e._v(" "),s("el-form-item",[s("div",[s("el-checkbox",{model:{value:e.survey.surveyAttrs.anPwdAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anPwdAttr,"enabled",t)},expression:"survey.surveyAttrs.anPwdAttr.enabled"}},[e._v("启用通过密码答卷")])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyAttrs.anPwdAttr.enabled,expression:"survey.surveyAttrs.anPwdAttr.enabled"}]},[s("el-input",{staticStyle:{width:"160px"},attrs:{size:"mini",placeholder:"请输入密码"},model:{value:e.survey.surveyAttrs.anPwdAttr.anPwdCode,callback:function(t){e.$set(e.survey.surveyAttrs.anPwdAttr,"anPwdCode",t)},expression:"survey.surveyAttrs.anPwdAttr.anPwdCode"}})],1)])],1)]),e._v(" "),s("div",{staticStyle:{"margin-top":"20px"}},[s("div",{staticClass:"dw-title-attr"},[e._v("何时结束")]),e._v(" "),s("div",{staticStyle:{"padding-left":"10px"}},[s("el-form-item",[s("div",[s("el-checkbox",{model:{value:e.survey.surveyAttrs.anEndNumAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anEndNumAttr,"enabled",t)},expression:"survey.surveyAttrs.anEndNumAttr.enabled"}},[e._v("指定结束份数")])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyAttrs.anEndNumAttr.enabled,expression:"survey.surveyAttrs.anEndNumAttr.enabled"}]},[s("el-input-number",{staticStyle:{width:"160px"},attrs:{min:1,max:1e5,size:"mini"},model:{value:e.survey.surveyAttrs.anEndNumAttr.endNum,callback:function(t){e.$set(e.survey.surveyAttrs.anEndNumAttr,"endNum",t)},expression:"survey.surveyAttrs.anEndNumAttr.endNum"}})],1)]),e._v(" "),s("el-form-item",[s("div",[s("el-checkbox",{model:{value:e.survey.surveyAttrs.anEndTimeAttr.enabled,callback:function(t){e.$set(e.survey.surveyAttrs.anEndTimeAttr,"enabled",t)},expression:"survey.surveyAttrs.anEndTimeAttr.enabled"}},[e._v("指定结束时间")])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyAttrs.anEndTimeAttr.enabled,expression:"survey.surveyAttrs.anEndTimeAttr.enabled"}]},[s("el-date-picker",{staticStyle:{width:"160px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.survey.surveyAttrs.anEndTimeAttr.endTime,callback:function(t){e.$set(e.survey.surveyAttrs.anEndTimeAttr,"endTime",t)},expression:"survey.surveyAttrs.anEndTimeAttr.endTime"}})],1)])],1)])])],1)},staticRenderFns:[]};var fr={name:"DwDesignContainerBodyLeft",components:{DwDesignSurveyAttrs:s("VU/8")(mr,yr,!1,function(e){s("pPbJ")},"data-v-4522c63c",null).exports,DwDesignCatalogQuItem:pr,draggable:nt.a},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{contentStyle:"",drag:!1}},mounted:function(){window.addEventListener("scroll",this.onScroll)},methods:{onAdd:function(e){console.debug("onAdd attrs",e);var t=e.newIndex;this.refreshData(t),this.survey.questions[t].quTitleObj.isNew=!0},onStart:function(){this.drag=!0},onEnd:function(e){this.drag=!1;var t=e.newIndex,s=e.oldIndex;t>s?this.refreshData(s):this.refreshData(t)},onScroll:function(){var e=document.documentElement.scrollTop||document.body.scrollTop;if(e>=60){var t=window.innerHeight-217-20;this.contentStyle="height:"+t+"px;"}else{var s=60-e,n=window.innerHeight-(217+s)-20;this.contentStyle="height:"+n+"px;"}},refreshData:function(e){var t=this;this.survey.questions.forEach(function(s,n){n>=e&&t.survey.questions.splice(n,1,Gt(JSON.parse(u()(s))))})}}},hr={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-tabs",{attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"大纲"}},[s("div",{staticStyle:{"overflow-y":"scroll"},style:e.contentStyle},[s("div",{staticClass:"dw_left_ul"},[s("div",{staticStyle:{"padding-bottom":"5px"}},[s("el-alert",{attrs:{title:"拖动目录可修改题目排序",type:"info","show-icon":""}})],1),e._v(" "),s("draggable",{attrs:{"force-fallback":!0,group:{name:"questionGroup",pull:!1,put:!1},animation:"300","drag-class":"dwDragClass","ghost-class":"dwGhostClass","chosen-class":"dwChosenClass"},on:{onAdd:e.onAdd,start:e.onStart,end:e.onEnd},model:{value:e.survey.questions,callback:function(t){e.$set(e.survey,"questions",t)},expression:"survey.questions"}},[s("transition-group",e._l(e.survey.questions,function(t,n){return s("div",{key:"surveyQu"+n},[s("dw-design-catalog-qu-item",{attrs:{index:n},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)}),0)],1)],1)])]),e._v(" "),s("el-tab-pane",{attrs:{label:"问卷"}},[s("div",{staticStyle:{"padding-bottom":"5px"}},[s("el-alert",{attrs:{title:"可以配置整个问卷的基本属性",type:"info","show-icon":""}})],1),e._v(" "),s("dw-design-survey-attrs",{model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)],1)],1)},staticRenderFns:[]};var wr=s("VU/8")(fr,hr,!1,function(e){s("SiX5")},"data-v-444fcfe6",null).exports;var gr={name:"DwDesignQuBankQuestion",components:{DwDesignQuestionModelCommon:sr,DwAnswerQuestion:Xi,DwDesignQuestion:Dn},props:{item:{type:Object,default:function(){}}},data:function(){return{}}},xr={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-design-question-model-common",{attrs:{item:this.item}},[t("div",{staticClass:"dw-list-group-item-content qu-bank-question-content"},[t("div",{staticClass:"dw-list-group-item-in"},[this._v(" "+this._s(this.item.quName)+" "),t("span",{staticClass:"dw-list-group-item-in-type"},[this._v("["+this._s(this.item.quTypeName)+"]")])])])])],1)},staticRenderFns:[]};var br={name:"DwDesignQuBanks",components:{DwDesignQuBankQuestion:s("VU/8")(gr,xr,!1,function(e){s("kYXk")},"data-v-a9e08812",null).exports,draggable:nt.a},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{activeName:0,quBanks:[]}},mounted:function(){this.loadQuBanks()},methods:{loadQuBanks:function(){var e=this;x({url:"/api/dwsurvey/app/dw-design-survey/bank-qus.do",method:"get"}).then(function(t){console.debug("bankQuestions-response"),console.debug(t);var s=t.data;if(s.hasOwnProperty("resultCode")&&200===s.resultCode){var n=s.data;n.map(function(e,t){e.questions=ws(e.questions,!1)}),e.quBanks=n,e.loading=!1}})},onStart:function(){this.drag=!0,this.$emit("start-drag-right")},onEnd:function(){this.$emit("end-drag"),this.drag=!1}}},qr={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.quBanks,function(t,n){return s("el-collapse-item",{key:"quBank_"+n,attrs:{title:t.tabQuName,name:n}},[s("div",{staticStyle:{"padding-bottom":"5px"}},[s("el-alert",{attrs:{title:"点击或拖动可加入到问卷中",type:"info","show-icon":""}})],1),e._v(" "),[s("div",{staticClass:"quBanks"},[s("draggable",{staticClass:"toolbars-draggable",attrs:{group:{name:"questionGroup",pull:"clone",put:!1},sort:!1,"force-fallback":!0,animation:"300","drag-class":"dragClass","ghost-class":"ghostClass","chosen-class":"chosenClass"},on:{start:e.onStart,end:e.onEnd},model:{value:t.questions,callback:function(s){e.$set(t,"questions",s)},expression:"item.questions"}},[s("transition-group",{staticClass:"dw-list-group dw-grid"},e._l(t.questions,function(e,t){return s("div",{key:"quBankQu_"+t,staticClass:"dw-list-group-item"},[s("dw-design-qu-bank-question",{attrs:{item:e}})],1)}),0)],1)],1)]],2)}),1)],1)},staticRenderFns:[]};var Cr={name:"DwDesignContainerBodyRight",components:{DwDesignQuBanks:s("VU/8")(br,qr,!1,function(e){s("tYYF")},"data-v-0c8f1627",null).exports},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},methods:{onStartRight:function(){this.drag=!0,this.$emit("start-drag-right")},onEnd:function(){this.$emit("end-drag"),this.drag=!1}}},_r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-tabs",{attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"题库"}},[s("dw-design-qu-banks",{on:{"start-drag-right":e.onStartRight,"end-drag":e.onEnd},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)],1)],1)},staticRenderFns:[]};var Ar={name:"DwDesignTopBottomLayout",components:{DwFooter:O,DwDesignContainerBodyRight:s("VU/8")(Cr,_r,!1,function(e){s("YAJd")},"data-v-61197388",null).exports,DwDesignContainerBodyLeft:wr,DwDesignContainerBodyCenter:dr,DwDesignToolbar:ar,DwDesignHeader:Rn,DwTextEditLabelCommon:Vt,DwDesignQuRadio:Js,DwTextEditLabel:Mt,DwDesignQuestion:Dn,draggable:nt.a},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{surveyId:"",drag:!1,headerQuToolbarStyle:{top:60,index:200},containerLRStyle:{top:0,index:100},lrContentHeight:"",containerBodyStyle:"",questions:[],radio:"1",hover:!1}},mounted:function(){this.loadDesignSurveyData(),window.addEventListener("scroll",this.onScroll)},methods:{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1,this.resetStyleIndex()},resetStyleIndex:function(){this.headerQuToolbarStyle.index=200,this.containerLRStyle.index=100},onStartToolbar:function(){this.onStart(),this.resetStyleIndex()},onStartDragContainer:function(){this.onStart(),this.headerQuToolbarStyle.index=20,this.containerLRStyle.index=10},onStartRight:function(){this.onStart(),this.headerQuToolbarStyle.index=100,this.containerLRStyle.index=200},loadDesignSurveyData:function(){var e=this;Pt().then(function(t){console.debug("response"),console.debug(t);var s=t.data;200===s.resultCode&&(e.questions=s.data)});this.$route.params.id;this.centerMarginTop()},centerMarginTop:function(){var e=157;return window.innerHeight>1280&&(e=160),this.containerBodyStyle="margin-top:"+e+"px;",e},onScroll:function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,s=this.centerMarginTop();if(t>=60){var n=t-60,i=window.innerHeight-s-10;console.debug("lrHeight",i),this.headerQuToolbarStyle.top="0px",this.containerLRStyle.top=n+"px",this.lrContentHeight=i}else{var r=60-t;console.debug("window.innerHeight",window.innerHeight);var o=window.innerHeight-(s+r)-10;this.headerQuToolbarStyle.top=r+"px",this.containerLRStyle.top="0px",this.lrContentHeight=o}},documentClick:function(){for(var e=this.survey.curEditObj,t=0;t<e.length;t++)this.survey.curEditObj[t].itemClick=!1}}},Sr={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-design-container",on:{click:e.documentClick}},[s("el-container",[s("el-header",{staticClass:"header"},[s("dw-design-header",{model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1),e._v(" "),s("el-main",{staticStyle:{padding:"0"}},[null!=e.survey?s("div",[s("div",{ref:"toolsWrap",style:"top:"+e.headerQuToolbarStyle.top+";z-index: "+e.headerQuToolbarStyle.index+";",attrs:{id:"tools_wrap"}},[s("dw-design-toolbar",{on:{"start-drag":e.onStartToolbar,"end-drag":e.onEnd},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1),e._v(" "),s("div",{staticStyle:{"margin-top":"157px","margin-bottom":"0"},style:e.containerBodyStyle},[s("div",{staticClass:"dw-container-body"},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"dw-container-body-center-left dw-container-body-lr",style:"top:"+e.containerLRStyle.top+";z-index: "+e.containerLRStyle.index+";"},[s("dw-design-container-body-left",{model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)]),e._v(" "),s("el-col",{attrs:{span:16}},[s("dw-design-container-body-center",{ref:"designContainerBody",on:{"start-drag-container":e.onStartDragContainer,"end-drag":e.onEnd},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"dw-container-body-center-right dw-container-body-lr",style:"top:"+e.containerLRStyle.top+";z-index: "+e.containerLRStyle.index+";"},[s("dw-design-container-body-right",{on:{"start-drag-right":e.onStartRight,"end-drag":e.onEnd},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])],1)],1)])]):e._e(),e._v(" "),s("div",{},[s("dw-footer")],1)])],1)],1)},staticRenderFns:[]};var kr=s("VU/8")(Ar,Sr,!1,function(e){s("K52+")},"data-v-4290ffb5",null).exports,Tr={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var Ir={name:"DwDesignSurveyCore",components:{DwDesignLeftRightLayout:s("VU/8")({name:"DwDesignLeftRightLayout"},Tr,!1,function(e){s("Z+Xa")},"data-v-063ca560",null).exports,DwDesignTopBottomLayout:kr,DwTextEditLabelCommon:Vt,DwDesignQuRadio:Js,DwTextEditLabel:Mt,DwDesignQuestion:Dn,draggable:nt.a},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{surveyId:"",drag:!1,headerQuToolbarStyle:"",containerLRStyle:"",questions:[],radio:"1",hover:!1}},mounted:function(){this.loadDesignSurveyData(),window.addEventListener("scroll",this.onScroll)},methods:{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1},loadDesignSurveyData:function(){var e=this;Pt().then(function(t){console.debug("response"),console.debug(t);var s=t.data;200===s.resultCode&&(e.questions=s.data)})},onScroll:function(e){var t=document.documentElement.scrollTop||document.body.scrollTop;if(t>=60){this.headerQuToolbarStyle="top:0px;";var s=t-60;this.containerLRStyle="top:"+s+"px;"}else{var n=60-t;this.headerQuToolbarStyle="top:"+n+"px;",this.containerLRStyle="top:0px;"}},documentClick:function(){for(var e=this.survey.curEditObj,t=0;t<e.length;t++)this.survey.curEditObj[t].itemClick=!1}}},Or={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-design-top-bottom-layout",{model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)},staticRenderFns:[]};var Dr={name:"DwDesignSurveyMain",components:{DwDesignSurveyCore:s("VU/8")(Ir,Or,!1,function(e){s("MGUL")},"data-v-4d214a6c",null).exports},data:function(){return{survey:null,surveyJsonText:null}},mounted:function(){this.loadSurvey()},methods:{loadSurvey:function(){var e=this;ys({surveyId:this.$route.params.id},function(t){console.debug("design survey",t),e.survey=t})}}},Er={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-design-survey-core",{model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)},staticRenderFns:[]};var Pr=s("VU/8")(Dr,Er,!1,function(e){s("wjvJ")},"data-v-00c779af",null).exports,Rr={name:"DwSurveyDesignContent",components:{DwDesignSurveyMain:Pr}},Nr={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-design-survey-main")],1)},staticRenderFns:[]};var Lr=s("VU/8")(Rr,Nr,!1,function(e){s("o1+u")},"data-v-3081d7ea",null).exports;var Fr={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n  答卷成功\n")])},staticRenderFns:[]};var Qr=s("VU/8")({name:"DwAnswerMessageBody"},Fr,!1,function(e){s("GswC")},"data-v-116c0dac",null).exports,Ur=s("d7EF"),Br=s.n(Ur),jr={rgbToHex:function(e){if(void 0!==e&&null!==e){var t=e.replace("rgb","").replace("(","").replace(")","").split(",");return"#"+parseInt(t[0]).toString(16)+parseInt(t[1]).toString(16)+parseInt(t[2]).toString(16)}return null},hexToRgb:function(e){if(void 0!==e&&null!==e){var t=e.replace("#","");if(t.length%3)return"hex格式不正确！";var s=t.length/3,n=6/t.length;return"rgb("+Math.pow(parseInt("0x"+t.substring(0,s)),n)+", "+Math.pow(parseInt("0x"+t.substring(s,2*s)),n)+", "+Math.pow(parseInt("0x"+t.substring(2*s)),n)+")"}return null},rgbToHsl:function(e,t,s){e/=255,t/=255,s/=255;var n=Math.max(e,t,s),i=Math.min(e,t,s),r=(n+i)/2,o=(n+i)/2,a=(n+i)/2;if(n===i)r=o=0;else{var u=n-i;switch(o=a>.5?u/(2-n-i):u/(n+i),n){case e:r=(t-s)/u+(t<s?6:0);break;case t:r=(s-e)/u+2;break;case s:r=(e-t)/u+4}r/=6}return[r,o,a]},generateSimilarColor:function(e,t,s,n){var i=e.match(/\d+/g).map(Number),r=Br()(i,3),o=r[0],a=r[1],u=r[2],l=this.rgbToHsl(o,a,u),d=Br()(l,3);return function(e,t,s,i,r){return s+=r,s*=100,!n&&s>100&&(s=98),"hsl("+360*e+", "+100*(t+=i)+"%, "+s+"%)"}(d[0],d[1],d[2],t,s)},isWhiteColor:function(e){var t=[e.red,e.green,e.blue].map(function(e){return e/255});console.debug("rgb",t);return t.every(function(e){return e>.95})},hslToRgb:function(e,t,s){function n(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+6*(t-e)*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e}var i=s<.5?s*(1+t):s+t-s*t,r=2*s-i,o=n(r,i,e+1/3),a=n(r,i,e),u=n(r,i,e-1/3);return[Math.round(255*o),Math.round(255*a),Math.round(255*u)]}};function Mr(e){if(e.hasOwnProperty("surveyStyle")){var t=e.surveyStyle;if(t.hasOwnProperty("pageTopImg")){var s=t.pageTopImg;if(s.hasOwnProperty("src")){var n=s.src;void 0!==n&&null!==n&&(e.surveyStyle.pageTopImg.httpSrc="http://192.168.3.32:8080"+n)}}if(t.hasOwnProperty("pageBgImg")){var i=t.pageBgImg;if(i.hasOwnProperty("src")){var r=i.src;void 0!==r&&null!==r&&(i.enabled?(e.surveyStyle.pageBgImg.httpSrc="http://192.168.3.32:8080"+r,document.documentElement.style.setProperty("--dw-answer-page-bg-image","url("+e.surveyStyle.pageBgImg.httpSrc+")")):document.documentElement.style.setProperty("--dw-answer-page-bg-image","none"))}}if(t.hasOwnProperty("logoImg")){var o=t.logoImg;if(o.hasOwnProperty("src")){var a=o.src;void 0!==a&&null!==a&&(e.surveyStyle.logoImg.httpSrc="http://192.168.3.32:8080"+a)}}}}function $r(e){if(e.hasOwnProperty("surveyStyle")){var t=e.surveyStyle,s=t.pageThemeColor,n=t.pageBgColor,i=t.logoBgColor,r=jr.generateSimilarColor(s,-.1,.1);document.documentElement.style.setProperty("--dw-answer-page-bg-color",n),document.documentElement.style.setProperty("--dw-answer-primary-color",s),document.documentElement.style.setProperty("--dw-answer-primary-color-1",r),document.documentElement.style.setProperty("--dw-answer-logo-bg-color",i),console.debug("surveyStyle",t)}}var Hr={dwUpSurveyStyleMain:function(e){null!==e&&(Mr(e),$r(e))},dwUpImgSrcVar:Mr,dwUpAnswerStyleVar:$r},Vr={name:"DwAnswerSurveyBody",components:{DwAnswerMessageBody:Qr,DwHtmlLabelCommon:Fn,DwAnswerQuestion:Xi,DwFooter:O,DwDesignQuestion:Dn,DwTextEditLabelCommon:Vt},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{fullscreenLoading:!1,answer:{},isReAnswer:!1,anPwd:""}},mounted:function(){Hr.dwUpSurveyStyleMain(this.survey)},methods:{backReAnswer:function(){this.survey.answerMsg.showAnswerMsg=!1,this.survey.answerMsg.answerMsgInfo=null,this.answer={},this.survey.questions=si.getSurveyByLocalStorage(this.survey.sid,this.survey.dwEsSurveyAnswer.esId).questions,this.survey.pageAttr.curPage=1},configCheckAnswerPwdButton:function(){var e=this;this.fullscreenLoading=!0,setTimeout(function(){e.checkAnPwd()},200)},checkAnPwd:function(){var e=this;(function(e){return x({url:"/api/dwsurvey/none/v6/dw-answer-survey/check-answer-pwd.do",method:"get",params:e})})({sid:this.survey.sid,anPwd:this.anPwd}).then(function(t){var s=t.data;s.hasOwnProperty("resultCode")&&200===s.resultCode?(e.$message.success("验证通过，请开始答卷"),e.survey.answerMsg.showAnswerMsg=!1,e.survey.answerMsg.showAnswerPwd=!1):e.$message.warning("密码错误！"),e.fullscreenLoading=!1})},submitAnswer:function(){var e=this,t=this.survey.sid,s=ri(this.survey),n=jn(this.survey);if(n.anPwd=this.anPwd,this.answer=n,console.debug("answer",n),$n(this.survey.questions)){var i=u()(n),r={surveyId:n.answerCommon.surveyId,sid:t,jsonVersion:6,answerJson:i};this.fullscreenLoading=!0,function(e){return x({url:"/api/dwsurvey/none/v6/dw-answer-survey/save-survey-answer.do",method:"post",data:e})}(r).then(function(n){var i=n.data;if(i.hasOwnProperty("resultCode")&&200===i.resultCode){var r=i.data;if(r.hasOwnProperty("anCheckIsPass")&&r.hasOwnProperty("anCheckResultCode")&&r.hasOwnProperty("indexResponseId")){var o=r.anCheckIsPass,a=r.anCheckResultCode,u=r.indexResponseId;if(o&&201===a&&null!==u)e.survey.answerMsg.showAnswerMsg=!0,e.survey.answerMsg.answerMsgInfo="答卷提交成功，感谢您的支持!",ni.clearAnswerHistory(t,s);else if(r.hasOwnProperty("anCheckResultMsg")){var l=r.anCheckResultMsg;e.survey.answerMsg.showAnswerMsg=!0,e.survey.answerMsg.answerMsgInfo=l,e.survey.answerMsg.answerCheckResult=r}else e.$message.warning("数据未保存，请确认！"),e.isReAnswer=!0}}else e.$message.error("保存失败！"),e.survey.answerMsg.showAnswerMsg=!0,e.survey.answerMsg.answerMsgInfo="答卷保存失败，请重试!",e.isReAnswer=!0;e.fullscreenLoading=!1}),console.debug("submit-answer")}else this.$message.warning("请根据提示完成表单！")}}},zr={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[null!==e.survey&&e.survey.hasOwnProperty("answerMsg")?s("div",[s("div",[e.survey.hasOwnProperty("answerMsg")&&!e.survey.answerMsg.showAnswerMsg?s("div",[s("div",{staticClass:"dw-container-body-center",staticStyle:{"padding-bottom":"30px"}},[s("div",[s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyStyle.pageTopImg.enabled&&e.survey.surveyStyle.pageTopImg.hasOwnProperty("httpSrc")&&null!==e.survey.surveyStyle.pageTopImg.httpSrc,expression:"survey.surveyStyle.pageTopImg.enabled && survey.surveyStyle.pageTopImg.hasOwnProperty('httpSrc') && survey.surveyStyle.pageTopImg.httpSrc!==null"}]},[s("div",{staticStyle:{position:"relative"}},[s("el-image",{staticStyle:{width:"100%",height:"200px",display:"block"},attrs:{src:e.survey.surveyStyle.pageTopImg.httpSrc,fit:"cover"}}),e._v(" "),e.survey.surveyStyle.logoImg.enabled&&e.survey.surveyStyle.logoImg.hasOwnProperty("httpSrc")&&null!==e.survey.surveyStyle.logoImg.httpSrc?["pageTopImgLeft"===e.survey.surveyStyle.logoImg.position?s("div",{staticStyle:{position:"absolute",left:"10px",top:"10px"}},[s("el-image",{staticStyle:{height:"40px",display:"block"},attrs:{src:e.survey.surveyStyle.logoImg.httpSrc,fit:"cover"}})],1):e._e(),e._v(" "),"pageTopImgRight"===e.survey.surveyStyle.logoImg.position?s("div",{staticStyle:{position:"absolute",right:"10px",top:"10px"}},[s("el-image",{staticStyle:{height:"40px",display:"block"},attrs:{src:e.survey.surveyStyle.logoImg.httpSrc,fit:"cover"}})],1):e._e()]:e._e()],2)]),e._v(" "),e.survey.surveyStyle.logoImg.enabled&&e.survey.surveyStyle.logoImg.hasOwnProperty("httpSrc")&&null!==e.survey.surveyStyle.logoImg.httpSrc?s("div",["topLogoLeft"===e.survey.surveyStyle.logoImg.position?s("div",{staticClass:"dw-display-flex-left dw-answer-logo-bg-color"},[s("div",{staticStyle:{padding:"10px"}},[s("el-image",{staticStyle:{height:"40px",display:"block"},attrs:{src:e.survey.surveyStyle.logoImg.httpSrc,fit:"cover"}})],1)]):e._e(),e._v(" "),"topLogoCenter"===e.survey.surveyStyle.logoImg.position?s("div",{staticClass:"dw-display-flex-center dw-answer-logo-bg-color"},[s("div",{staticStyle:{padding:"10px"}},[s("el-image",{staticStyle:{height:"40px",display:"block"},attrs:{src:e.survey.surveyStyle.logoImg.httpSrc,fit:"cover"}})],1)]):e._e(),e._v(" "),"topLogoRight"===e.survey.surveyStyle.logoImg.position?s("div",{staticClass:"dw-display-flex-right dw-answer-logo-bg-color"},[s("div",{staticStyle:{padding:"10px"}},[s("el-image",{staticStyle:{height:"40px",display:"block"},attrs:{src:e.survey.surveyStyle.logoImg.httpSrc,fit:"cover"}})],1)]):e._e()]):e._e(),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.hasOwnProperty("surveyStyle")&&e.survey.surveyStyle.hasOwnProperty("showPageHeader")&&e.survey.surveyStyle.showPageHeader,expression:"survey.hasOwnProperty('surveyStyle') && survey.surveyStyle.hasOwnProperty('showPageHeader') && survey.surveyStyle.showPageHeader"}],staticStyle:{padding:"20px 20px 0 20px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.hasOwnProperty("surveyStyle")&&e.survey.surveyStyle.hasOwnProperty("showSurveyTitle")&&e.survey.surveyStyle.showSurveyTitle,expression:"survey.hasOwnProperty('surveyStyle') && survey.surveyStyle.hasOwnProperty('showSurveyTitle') && survey.surveyStyle.showSurveyTitle"}],staticStyle:{"text-align":"center","font-weight":"bold"}},[s("dw-html-label-common",{attrs:{survey:e.survey},model:{value:e.survey.surveyNameObj,callback:function(t){e.$set(e.survey,"surveyNameObj",t)},expression:"survey.surveyNameObj"}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.hasOwnProperty("surveyStyle")&&e.survey.surveyStyle.hasOwnProperty("showSurveyNote")&&e.survey.surveyStyle.showSurveyNote,expression:"survey.hasOwnProperty('surveyStyle') && survey.surveyStyle.hasOwnProperty('showSurveyNote') && survey.surveyStyle.showSurveyNote"}],staticStyle:{"font-size":"13px",color:"#7b7b7b","text-indent":"2em","line-height":"20px","padding-top":"15px"}},[void 0!==e.survey.surveyDetail?s("dw-html-label-common",{attrs:{survey:e.survey},model:{value:e.survey.surveyDetail.surveyNodeObj,callback:function(t){e.$set(e.survey.surveyDetail,"surveyNodeObj",t)},expression:"survey.surveyDetail.surveyNodeObj"}}):e._e()],1)]),e._v(" "),s("div",{staticClass:"dw-survey-answer-body",staticStyle:{"padding-top":"15px"}},[s("div",[s("div",[s("transition-group",e._l(e.survey.questions,function(t,n){return s("div",{key:"surveyQu"+n},[s("dw-answer-question",{ref:"designQuestion",refInFor:!0,attrs:{index:n,item:t},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)}),0)],1)]),e._v(" "),!e.survey.readonly&&e.survey.pageAttr.curPage>=e.survey.pageAttr.pageSize?s("div",{staticClass:"dw-width-100bf",staticStyle:{"text-align":"left"}},[e.survey.answerMsg.noSurveyJson?e._e():s("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"dw-answer-button-style1",attrs:{type:"primary"},on:{click:e.submitAnswer}},[e._v("提交答卷")])],1):e._e()])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.dwDebug,expression:"survey.dwDebug"}],staticClass:"dw-debug"},[e._v(e._s(e.answer))])])])]):s("div",[s("div",{staticStyle:{padding:"50px 20px","text-align":"center",background:"white"}},[s("div",{staticStyle:{"padding-bottom":"20px"}},[e.survey.answerMsg.noSurveyJson?e._e():s("div",{staticStyle:{"text-align":"center","font-weight":"bold"}},[s("dw-html-label-common",{attrs:{survey:e.survey},model:{value:e.survey.surveyNameObj,callback:function(t){e.$set(e.survey,"surveyNameObj",t)},expression:"survey.surveyNameObj"}})],1)]),e._v(" "),e.survey.answerMsg.hasOwnProperty("showAnswerPwd")&&e.survey.answerMsg.showAnswerPwd?s("div",{staticStyle:{"text-align":"left"}},[s("el-form",{attrs:{"label-position":"top"}},[s("el-form-item",{attrs:{label:"此问卷需要答卷密码，请输入答卷密码"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"请输入答卷密码",clearable:""},model:{value:e.anPwd,callback:function(t){e.anPwd=t},expression:"anPwd"}}),e._v(" "),s("div",{staticStyle:{color:"red"}},[e._v(e._s(e.survey.answerMsg.answerPwdError))])],1)],1),e._v(" "),s("div",{staticClass:"dw-width-100bf",staticStyle:{"text-align":"left"}},[s("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"dw-answer-button-style1",attrs:{type:"primary"},on:{click:e.configCheckAnswerPwdButton}},[e._v("开始答卷")])],1)],1):e._e(),e._v(" "),s("div",[e.survey.answerMsg.hasOwnProperty("answerCheckResult")&&e.survey.answerMsg.answerCheckResult.hasOwnProperty("anCheckResultCode")&&e.survey.answerMsg.answerCheckResult.anCheckResultCode>=400?[s("div",{staticStyle:{color:"red","font-size":"13px"}},[e._v(" "+e._s(e.survey.answerMsg.answerCheckResult.anCheckResultMsg))])]:[s("div",{staticStyle:{color:"dodgerblue","font-size":"13px"}},[e._v(" "+e._s(e.survey.answerMsg.answerMsgInfo))])],e._v(" "),e.isReAnswer?s("div",{staticStyle:{"padding-top":"15px"}},[s("el-button",{on:{click:e.backReAnswer}},[e._v("重新填写")])],1):e._e()],2)])])])]):e._e()])},staticRenderFns:[]};var Gr=s("VU/8")(Vr,zr,!1,function(e){s("1qSv")},"data-v-3dfb617c",null).exports,Yr={name:"DwFooterSm",data:function(){return{footerInfo:{siteName:"调问网",siteUrl:"http://www.diaowen.net",siteIcp:"京ICP备13050030号-3",siteMail:"service@diaowen.net",sitePhone:"18888888888",versionInfo:"DWSurvey OSS V5.0 Vue",versionNumber:"OSS V5.0",versionBuilt:"20211128",years:"2012-2021"}}},mounted:function(){this.queryDWSurveyFooter()},methods:{queryDWSurveyFooter:function(){var e=this;this.axios.get(b.surveyFooterInfo,{}).then(function(t){var s=t.data.data;console.debug(s),e.footerInfo=s})}}},Jr={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-footer-main"},[t("div",[t("span",[this._v("Powered by "),this._m(0),this._v(" "+this._s(this.footerInfo.versionNumber)+" Vue ")])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"www.diaowen.net"}},[t("strong",[this._v("DWSurvey")])])}]};var Wr={name:"DwAnswerDefaultLayout",components:{DwFooterSm:s("VU/8")(Yr,Jr,!1,function(e){s("uUGI")},"data-v-06da80a6",null).exports,DwFooter:O,DwAnswerSurveyBody:Gr,DwDesignContainerBodyCenter:dr},model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}},extProps:{type:Object,default:function(){}}},data:function(){return{surveyId:"",drag:!1,headerQuToolbarStyle:"",containerLRStyle:"",lrContentHeight:"",containerBodyStyle:"",questions:[],radio:"1",hover:!1,answerSurvey:{questions:[]},anBodySpan:{xs:{span:24,offset:0},sm:{span:24,offset:0},md:{span:20,offset:2},lg:{span:16,offset:4},xl:{span:12,offset:6}},anBodyStyle:{},customColor:"#025bb7",dwElProgressStyle:"position: fixed;z-index:10000;"}},mounted:function(){if(null!==this.extProps&&void 0!==this.extProps){var e=this.extProps;if(console.debug("extProps",e),e.hasOwnProperty("anBodySpan")){var t=e.anBodySpan;t.hasOwnProperty("xs")&&(this.anBodySpan.xs=t.xs),t.hasOwnProperty("sm")&&(this.anBodySpan.sm=t.sm),t.hasOwnProperty("md")&&(this.anBodySpan.md=t.md),t.hasOwnProperty("lg")&&(this.anBodySpan.lg=t.lg),t.hasOwnProperty("xl")&&(this.anBodySpan.xl=t.xl)}e.hasOwnProperty("anBodyStyle")&&(this.anBodyStyle=e.anBodyStyle),e.hasOwnProperty("isPreview")&&e.isPreview&&(this.dwElProgressStyle="")}},beforeCreate:function(){},beforeDestroy:function(){},methods:{}},Kr={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-answer-container",style:e.anBodyStyle},[s("el-row",[s("el-col",{attrs:{xs:e.anBodySpan.xs,sm:e.anBodySpan.sm,md:e.anBodySpan.md,lg:e.anBodySpan.lg,xl:e.anBodySpan.xl}},[s("el-container",[null!=e.survey&&e.survey.hasOwnProperty("showSurvey")&&e.survey.showSurvey?s("el-main",{staticStyle:{padding:"10px"}},[s("div",[s("div",[s("div",{staticClass:"dw-container-body"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.hasOwnProperty("surveyStyle")&&e.survey.surveyStyle.hasOwnProperty("showProgressbar")&&e.survey.surveyStyle.showProgressbar,expression:"survey.hasOwnProperty('surveyStyle') && survey.surveyStyle.hasOwnProperty('showProgressbar') && survey.surveyStyle.showProgressbar"}],staticClass:"dw-survey-answer-progress",style:e.dwElProgressStyle},[s("el-progress",{attrs:{"show-text":!1,"stroke-width":3,percentage:e.survey.hasOwnProperty("answerProgress")?parseFloat(e.survey.answerProgress.percentage):0,color:e.survey.surveyStyle.progressColor,"define-back-color":"#dcdfe6"}})],1),e._v(" "),s("dw-answer-survey-body",{ref:"designContainerBody",model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])]),e._v(" "),s("div",{},[s("dw-footer-sm")],1)]):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var Zr=s("VU/8")(Wr,Kr,!1,function(e){s("wZ0C"),s("SvO/")},"data-v-4d923e45",null).exports;function Xr(e,t,s){(function(e){return x({url:"/api/dwsurvey/none/v6/dw-answer-survey/survey-json-by-survey-id.do",method:"get",params:e})})(e).then(function(e){console.debug("surveyJsonBySurveyId",e);var n=e.data;if(200===n.resultCode){var i=n.data;if(i.hasOwnProperty("answerCheckResult")&&i.hasOwnProperty("surveyJson")){var r=i.answerCheckResult,o=i.surveyJson;null!==o&&o.hasOwnProperty("surveyJsonText")&&null!==o.surveyJsonText&&""!==o.surveyJsonText?t(hs(JSON.parse(o.surveyJsonText)),r):s(r)}}})}var eo={name:"DwAnswerSurveyMain",components:{DwAnswerDefaultLayout:Zr,DwAnswerSurveyBody:Gr},props:{extProps:{type:Object,default:function(){}},answerProps:{type:Object,default:function(){}}},data:function(){return{uuidList:[],survey:null,loading:!0,answerData:null,answerCheckResult:null}},mounted:function(){this.loadSurvey()},methods:{loadSurvey:function(){var e=this,t=m.Loading.service({fullscreen:!0,spinner:"fa-solid fa-spinner fa-spin-pulse",background:"#00000091",customClass:"dw-loading",text:"问卷数据加载中"});console.debug("sidProps",this.answerProps);var s={sid:this.answerProps.sid,answerId:this.answerProps.answerId,anPwd:this.answerProps.anPwd};console.debug("loadSurvey params 1",s),this.$route.query.hasOwnProperty("anPwd")&&(s.anPwd=this.$route.query.anPwd),console.debug("loadSurvey params",s),Xr(s,function(s,n){s.surveyStyle.themeColor="#025bb7",s.dwDebug=!1,null!=e.extProps&&e.extProps.hasOwnProperty("readonly")&&(s.readonly=e.extProps.readonly),e.answerCheckResult=n,n.hasOwnProperty("anCheckIsPass")&&n.hasOwnProperty("anCheckResultMsg")&&!n.anCheckIsPass&&403!==n.anCheckResultCode?(s.answerMsg={showAnswerMsg:!0,answerMsgInfo:n.anCheckResultMsg,noSurveyJson:!1,answerCheckResult:n},e.survey=s):(Un(s),e.loadAnswerData(s)),e.$nextTick(function(){t.close()})},function(s){if(s.hasOwnProperty("anCheckIsPass")&&s.hasOwnProperty("anCheckResultMsg")&&!s.anCheckIsPass){var n={showAnswerMsg:!0,answerMsgInfo:s.anCheckResultMsg,noSurveyJson:!0,answerCheckResult:s};e.survey={answerMsg:n},s.anCheckResultCode>=500&&e.$message.error(s.anCheckResultMsg)}e.$nextTick(function(){t.close()})})},loadAnswerData:function(e){var t,s=this;if(this.answerProps.hasOwnProperty("answerId")&&null!==this.answerProps.answerId&&void 0!==this.answerProps.answerId){var n=this.answerProps.answerId;(t={answerId:n},x({url:"/api/dwsurvey/none/v6/dw-answer-survey/get-survey-answer.do",method:"get",params:t})).then(function(t){console.debug("loadAnswer response",t);var n=t.data;200===n.resultCode?s.answerData=n.data:s.$message.warning("未找到对应的答卷记录！"),s.answerData2Survey(e)})}else this.answerData2Survey(e)},answerData2Survey:function(e){null!=this.answerData&&Qn(e,this.answerData),console.debug("db survey",e),e.answerMsg={showAnswerMsg:!1,answerMsgInfo:null,noSurveyJson:!1},this.setSurveyData(e),console.debug("this survey",e)},setSurveyData:function(e){var t=this;if(this.answerProps.hasOwnProperty("answerId")&&null!==this.answerProps.answerId&&void 0!==this.answerProps.answerId){if(e.hasOwnProperty("dwEsSurveyAnswer")&&null!==e.dwEsSurveyAnswer){var s=e.dwEsSurveyAnswer;if((void 0===this.extProps||this.extProps.hasOwnProperty("readonly")&&!this.extProps.readonly)&&s.hasOwnProperty("answerCommon")&&s.answerCommon.hasOwnProperty("anTime")&&s.answerCommon.anTime.hasOwnProperty("endAnDate")){var n=s.answerCommon.anTime.endAnDate;if(null!==n){var i=new Date(n).getTime(),r=ni.getSurveyAnswerActionTime(e);console.debug("endAnDateTime",i),console.debug("localLastActionDateTime",r),r>i?this.$confirm("检测到当前加载的答卷数据在本地有过修改，是否使用本地最新修改。","提示",{confirmButtonText:"是，使用本地最新数据",cancelButtonText:"否，使用原始提交数据",type:"warning"}).then(function(){t.localStorage2Survey(e)}).catch(function(){t.survey=e}):this.survey=e}else this.survey=e}else this.survey=e}}else this.localStorage2Survey(e);Kn(e),si.saveSurvey2LocalStorage(this.survey),this.checkAnswerPwd()},localStorage2Survey:function(e){var t=this.getLocalStorage(e);null!==t?this.survey=t:(Bn(e,1),this.survey=e)},getLocalStorage:function(e){var t=e.sid,s=ri(e),n=ni.getSurveyAnswerObjByLocalStorage(t,s);if(null!==n&&(e.hasOwnProperty("dwVersion")&&n.hasOwnProperty("dwVersion")))return e.dwVersion===n.dwVersion?n:(Qn(e,jn(n)),Bn(e,1),e);return null},checkAnswerPwd:function(){var e=this.survey;null!=e&&e.hasOwnProperty("surveyAttrs")&&e.surveyAttrs.hasOwnProperty("anPwdAttr")&&e.surveyAttrs.anPwdAttr.hasOwnProperty("enabled")&&e.surveyAttrs.anPwdAttr.enabled&&!this.answerCheckResult.anCheckIsPass&&(this.survey.answerMsg.showAnswerMsg=!0,this.survey.answerMsg.showAnswerPwd=!0,this.survey.answerMsg.answerPwdError="请输入正确密码")}}},to={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-answer-default-layout",{attrs:{"ext-props":e.extProps},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)},staticRenderFns:[]};var so=s("VU/8")(eo,to,!1,function(e){s("YCYl"),s("qjs6")},"data-v-7a560b72",null).exports,no={name:"DwAnswerSurvey",components:{DwAnswerSurveyMain:so},props:{extProps:{type:Object,default:function(){}},answerProps:{type:Object,default:function(){return{sid:null,answerId:null,anPwd:null}}}},data:function(){return{}},mounted:function(){null===this.answerProps||!this.answerProps.hasOwnProperty("sid")||this.answerProps.sid},methods:{red:function(e){document.documentElement.style.setProperty("--dw-answer-primary-color",e)}}},io={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-answer-custom-theme"},[s("div",{staticClass:"custom-element",staticStyle:{display:"none"}},[s("p",[e._v(" 使用CSS变量的样式 This text has a custom color!")]),e._v(" "),e._m(0),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.red("red")}}},[e._v("按钮")])],1),e._v(" "),s("el-row",[void 0!==e.answerProps.sid&&null!==e.answerProps.sid?s("el-col",[s("dw-answer-survey-main",{attrs:{"answer-props":e.answerProps,"ext-props":e.extProps}})],1):e._e()],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"original-color"}),this._v(" "),t("div",{staticClass:"near-color1"})])}]};var ro=s("VU/8")(no,io,!1,function(e){s("580l"),s("spoi"),s("X9ig")},"data-v-751605fe",null).exports,oo={name:"DwSurveyStyleDesignAside",model:{prop:"survey",event:"update-survey"},props:{survey:{type:Object,default:function(){}}},data:function(){return{options:[{value:"topLogoLeft",label:"顶部LOGO行居左"},{value:"topLogoCenter",label:"顶部LOGO行居中"},{value:"topLogoRight",label:"顶部LOGO行居右"},{value:"pageTopImgLeft",label:"在页眉图片左上角"},{value:"pageTopImgRight",label:"在页眉图片右上角"}],color:"rgba(19, 206, 102, 0.8)",imageUrl:"https://fuss10.elemecdn.com/1/34/19aa98b1fcb2781c4fba33d850549jpeg.jpeg"}},mounted:function(){this.upImgSrc()},methods:{handleSuccessTopImg:function(e,t){this.handleSuccess(e,t,"pageTopImg")},handleSuccessBgImg:function(e,t){this.handleSuccess(e,t,"pageBgImg")},handleSuccessLogoImg:function(e,t){this.handleSuccess(e,t,"logoImg")},handleSuccess:function(e,t,s){if(e.hasOwnProperty("resultCode")&&200===e.resultCode){var n=e.data;"pageTopImg"===s?this.survey.surveyStyle.pageTopImg.src=n[0].location:"pageBgImg"===s?this.survey.surveyStyle.pageBgImg.src=n[0].location:"logoImg"===s&&(this.survey.surveyStyle.logoImg.src=n[0].location),this.upImgSrc()}else this.$message.error("上传失败")},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,s=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&s},upImgSrc:function(){Hr.dwUpImgSrcVar(this.survey)},upAnswerStyle:function(){Hr.dwUpAnswerStyleVar(this.survey)},upThemeColor:function(){var e=this.survey;if(null!==e&&e.hasOwnProperty("surveyStyle")){var t=e.surveyStyle.pageThemeColor;console.debug("pageThemeColor",t);var s=jr.generateSimilarColor(t,-.2,.3,!1);this.survey.surveyStyle.pageBgColor=s,jr.isWhiteColor(s)&&(this.survey.surveyStyle.pageBgColor="#dfdfe0"),console.debug("this.survey.pageBgColor",s),this.survey.surveyStyle.progressColor=jr.generateSimilarColor(t,.1,-.2,!1);var n=jr.generateSimilarColor(t,-.2,.5,!0);this.survey.surveyStyle.logoBgColor=n;var i=jr.hslToRgb(n);console.debug("logoBgColorRgb",i,i.red),jr.isWhiteColor(i)&&(this.survey.surveyStyle.pageBgColor="#efefef"),this.upAnswerStyle(),console.debug("this.survey.surveyStyle.logoBgColor",this.survey.surveyStyle.logoBgColor)}}}},ao={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return null!=e.survey&&e.survey.hasOwnProperty("surveyStyle")?s("div",[s("div",[s("div",{staticStyle:{padding:"40px 10px 10px 10px"}},[e._m(0),e._v(" "),s("div",{staticStyle:{padding:"5px 0"}},[s("el-alert",{attrs:{title:"配置完成点击确认发布才会生效",type:"info","show-icon":""}})],1),e._v(" "),s("div",[s("el-form",{ref:"form",attrs:{size:"small"}},[s("div",[s("div",{staticClass:"dw-title-attr"},[e._v("图片属性")]),e._v(" "),s("div",{staticStyle:{"padding-left":"10px"}},[s("el-form-item",[s("div",[s("el-checkbox",{model:{value:e.survey.surveyStyle.pageTopImg.enabled,callback:function(t){e.$set(e.survey.surveyStyle.pageTopImg,"enabled",t)},expression:"survey.surveyStyle.pageTopImg.enabled"}},[e._v("页眉图")])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyStyle.pageTopImg.enabled,expression:"survey.surveyStyle.pageTopImg.enabled"}],staticStyle:{"font-size":"12px"}},[s("el-row",{staticStyle:{height:"40px"},attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:10}},[s("el-image",{staticClass:"dw-style-el-image",attrs:{src:e.survey.surveyStyle.pageTopImg.httpSrc,fit:"cover"}},[s("div",{staticClass:"el-image__error",attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"fa-regular fa-image",staticStyle:{"margin-right":"6px"}}),e._v("请上传图片")])])],1),e._v(" "),s("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:14}},[s("el-upload",{attrs:{"on-success":e.handleSuccessTopImg,"show-file-list":!1,action:"/api/dwsurvey/up/up-file.do"}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1)],1)]),e._v(" "),s("el-form-item",[s("div",[s("el-checkbox",{on:{change:e.upImgSrc},model:{value:e.survey.surveyStyle.pageBgImg.enabled,callback:function(t){e.$set(e.survey.surveyStyle.pageBgImg,"enabled",t)},expression:"survey.surveyStyle.pageBgImg.enabled"}},[e._v("背景图")])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyStyle.pageBgImg.enabled,expression:"survey.surveyStyle.pageBgImg.enabled"}],staticStyle:{"font-size":"12px"}},[s("el-row",{staticStyle:{height:"40px"},attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:10}},[s("el-image",{staticClass:"dw-style-el-image",attrs:{src:e.survey.surveyStyle.pageBgImg.httpSrc,fit:"cover"}},[s("div",{staticClass:"el-image__error",attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"fa-regular fa-image",staticStyle:{"margin-right":"6px"}}),e._v("请上传图片")])])],1),e._v(" "),s("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:14}},[s("el-upload",{attrs:{"on-success":e.handleSuccessBgImg,"show-file-list":!1,action:"/api/dwsurvey/up/up-file.do"}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1)],1)]),e._v(" "),s("el-form-item",[s("div",[s("el-checkbox",{model:{value:e.survey.surveyStyle.logoImg.enabled,callback:function(t){e.$set(e.survey.surveyStyle.logoImg,"enabled",t)},expression:"survey.surveyStyle.logoImg.enabled"}},[e._v("LOGO图")])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.survey.surveyStyle.logoImg.enabled,expression:"survey.surveyStyle.logoImg.enabled"}],staticStyle:{"font-size":"12px"}},[s("el-row",{staticStyle:{height:"40px"},attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:10}},[s("el-image",{staticClass:"dw-style-el-image",attrs:{src:e.survey.surveyStyle.logoImg.httpSrc,fit:"fill"}},[s("div",{staticClass:"el-image__error",attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"fa-regular fa-image",staticStyle:{"margin-right":"6px"}}),e._v("请上传图片")])])],1),e._v(" "),s("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:14}},[s("el-upload",{attrs:{"on-success":e.handleSuccessLogoImg,"show-file-list":!1,action:"/api/dwsurvey/up/up-file.do"}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1),e._v(" "),s("div",{staticStyle:{"padding-top":"5px"}},[s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:24}},[s("span",{staticStyle:{"font-size":"14px","font-weight":"500",color:"#606266"}},[e._v("显示位置")]),e._v(" "),s("el-select",{staticStyle:{width:"144px"},attrs:{placeholder:"请选择"},model:{value:e.survey.surveyStyle.logoImg.position,callback:function(t){e.$set(e.survey.surveyStyle.logoImg,"position",t)},expression:"survey.surveyStyle.logoImg.position"}},e._l(e.options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1)])],1)]),e._v(" "),s("div",{staticStyle:{"margin-top":"20px"}},[s("div",{staticClass:"dw-title-attr"},[e._v("颜色属性")]),e._v(" "),s("div",{staticStyle:{"padding-left":"10px"}},[s("el-form-item",[s("div",{staticStyle:{"font-size":"12px"}},[s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:14}},[s("div",{staticStyle:{"font-size":"14px","font-weight":"500",color:"#606266"}},[e._v("主题色"),s("span",{staticStyle:{"font-size":"12px","font-weight":"normal",color:"#969696"}},[e._v("（表单控件）")])])]),e._v(" "),s("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:10}},[s("el-color-picker",{staticStyle:{display:"block"},attrs:{"show-alpha":"",size:"medium"},on:{change:e.upThemeColor},model:{value:e.survey.surveyStyle.pageThemeColor,callback:function(t){e.$set(e.survey.surveyStyle,"pageThemeColor",t)},expression:"survey.surveyStyle.pageThemeColor"}})],1)],1)],1)]),e._v(" "),s("el-form-item",[s("div",{staticStyle:{"font-size":"12px"}},[s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:14}},[s("div",{staticStyle:{"font-size":"14px","font-weight":"500",color:"#606266"}},[e._v("背景色"),s("span",{staticStyle:{"font-size":"12px","font-weight":"normal",color:"#969696"}},[e._v("（背景图优先）")])])]),e._v(" "),s("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:10}},[s("el-color-picker",{staticStyle:{display:"block"},attrs:{"show-alpha":"",size:"medium"},on:{change:e.upAnswerStyle},model:{value:e.survey.surveyStyle.pageBgColor,callback:function(t){e.$set(e.survey.surveyStyle,"pageBgColor",t)},expression:"survey.surveyStyle.pageBgColor"}})],1)],1)],1)]),e._v(" "),s("el-form-item",[s("div",{staticStyle:{"font-size":"12px"}},[s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:14}},[s("div",{staticStyle:{"font-size":"14px","font-weight":"500",color:"#606266"}},[e._v("LOGO行背景色")])]),e._v(" "),s("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:10}},[s("el-color-picker",{staticStyle:{display:"block"},attrs:{"show-alpha":"",size:"medium"},on:{change:e.upAnswerStyle},model:{value:e.survey.surveyStyle.logoBgColor,callback:function(t){e.$set(e.survey.surveyStyle,"logoBgColor",t)},expression:"survey.surveyStyle.logoBgColor"}})],1)],1)],1)]),e._v(" "),s("el-form-item",[s("div",{staticStyle:{"font-size":"12px"}},[s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:14}},[s("div",{staticStyle:{"font-size":"14px","font-weight":"500",color:"#606266"}},[e._v("进度条色"),s("span",{staticStyle:{"font-size":"12px","font-weight":"normal",color:"#969696"}},[e._v("（优先级高）")])])]),e._v(" "),s("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:10}},[s("el-color-picker",{staticStyle:{display:"block"},attrs:{"show-alpha":"",size:"medium"},on:{change:e.upAnswerStyle},model:{value:e.survey.surveyStyle.progressColor,callback:function(t){e.$set(e.survey.surveyStyle,"progressColor",t)},expression:"survey.surveyStyle.progressColor"}})],1)],1)],1)])],1)]),e._v(" "),s("div",{staticStyle:{"margin-top":"20px"}},[s("div",{staticClass:"dw-title-attr"},[e._v("显示配置")]),e._v(" "),s("div",{staticStyle:{"padding-left":"10px"}},[s("el-form-item",[s("div",{staticStyle:{"font-size":"12px"}},[s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("div",[s("el-checkbox",{model:{value:e.survey.surveyStyle.showQuNum,callback:function(t){e.$set(e.survey.surveyStyle,"showQuNum",t)},expression:"survey.surveyStyle.showQuNum"}},[e._v("显示题号")])],1)]),e._v(" "),s("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:12}},[s("div",[s("el-checkbox",{model:{value:e.survey.surveyStyle.showProgressbar,callback:function(t){e.$set(e.survey.surveyStyle,"showProgressbar",t)},expression:"survey.surveyStyle.showProgressbar"}},[e._v("显示进度")])],1)])],1)],1)]),e._v(" "),s("el-form-item",[s("div",{staticStyle:{"font-size":"12px"}},[s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("div",[s("el-checkbox",{model:{value:e.survey.surveyStyle.showPageHeader,callback:function(t){e.$set(e.survey.surveyStyle,"showPageHeader",t)},expression:"survey.surveyStyle.showPageHeader"}},[e._v("显示表头")])],1)]),e._v(" "),s("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:12}},[s("div",[s("el-checkbox",{model:{value:e.survey.surveyStyle.showQuTypeName,callback:function(t){e.$set(e.survey.surveyStyle,"showQuTypeName",t)},expression:"survey.surveyStyle.showQuTypeName"}},[e._v("显示题型")])],1)])],1)],1)]),e._v(" "),s("el-form-item",[s("div",{staticStyle:{"font-size":"12px"}},[s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("div",[s("el-checkbox",{model:{value:e.survey.surveyStyle.showSurveyTitle,callback:function(t){e.$set(e.survey.surveyStyle,"showSurveyTitle",t)},expression:"survey.surveyStyle.showSurveyTitle"}},[e._v("显示问卷标题")])],1)]),e._v(" "),s("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:12}},[s("div",[s("el-checkbox",{model:{value:e.survey.surveyStyle.showSurveyNote,callback:function(t){e.$set(e.survey.surveyStyle,"showSurveyNote",t)},expression:"survey.surveyStyle.showSurveyNote"}},[e._v("显示问卷说明")])],1)])],1)],1)])],1)])])],1)])])]):e._e()},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{"font-size":"14px","font-weight":"bold","text-align":"left",padding:"10px 0"}},[t("i",{staticClass:"fa-solid fa-palette",staticStyle:{color:"#7d55f7"}}),this._v(" 问卷样式配置\n      ")])}]};var uo={name:"DwPreviewSurveyMain",components:{DwSurveyStyleDesignAside:s("VU/8")(oo,ao,!1,function(e){s("JiHB")},"data-v-6571e0ba",null).exports,DwAnswerDefaultLayout:Zr,DwAnswerSurvey:ro,DwAnswerSurveyMain:so},data:function(){return{survey:null,drawer:!1,direction:"ltl",activeName:"first",previewTypeClass:"dw-preview-pc",padPhoneAnBodySpan:{xs:{span:24,offset:0},sm:{span:24,offset:0},md:{span:24,offset:0},lg:{span:24,offset:0},xl:{span:24,offset:0}},answerProps:{sid:null,answerId:null,anPwd:null}}},mounted:function(){this.answerProps.sid=this.$route.params.id,this.loadSurvey()},methods:{loadSurvey:function(){var e=this;ys({surveyId:this.$route.params.id},function(t){console.debug("design survey",t),t.hasOwnProperty("surveyStyle")||(t.surveyStyle={pageTopImg:{enabled:!1,src:null,httpSrc:null},pageBgImg:{enabled:!1,src:null,httpSrc:null},logoImg:{enabled:!1,src:null,httpSrc:null,position:"topLogoRight"},pageBgColor:"#cb79e7",pageThemeColor:"#900abd",pageThemeColor1:"#d49fe8",logoBgColor:"#900abd",progressColor:"#490061",showQuNum:!0,showProgressbar:!0,showPageHeader:!0,showQuTypeName:!0,showSurveyTitle:!0,showSurveyNote:!0}),t.dwDebug=!1,t.answerMsg={showAnswerMsg:!1,answerMsgInfo:null,noSurveyJson:!1},Un(t),Kn(t),e.survey=t})},handleClick:function(e,t){console.log(e,t)},previewTabClick:function(e){this.previewTypeClass=e},designSurvey:function(){var e=this.$route.params.id;this.$router.push("/dw-v6/diaowen/dw-design/survey/"+e)},devSurvey:function(){var e=this,t=this.$route.params.id;(function(e){return x({url:"/api/dwsurvey/app/dw-design-survey/dev-survey.do",method:"post",params:e})})({surveyId:t}).then(function(s){console.debug("response"),console.debug(s),200===s.data.resultCode?e.$router.push("/v6/dw/survey/c/url/"+t):e.$message.error("发布失败，请重试或联系管理员！")})},saveSurvey:function(){this.saveSurveyFun(null)},saveSurveyFun:function(e){var t=this,s=this.survey.id,n=this.survey.sid;us(this.survey),console.debug("save this.survey",this.survey);var i=u()(this.survey),r={surveyId:s,sid:n,surveyJsonText:i,surveyJsonSimple:u()(ls(i))};console.debug("surveyJson data",r),Rt(r).then(function(s){console.debug("dwSaveSurveyJson-response",s);var n=s.data;n.hasOwnProperty("resultCode")&&200===n.resultCode?(t.$message.success("保存成功！"),null!=e&&e()):t.$message.success("保存失败！")})},backSurveyList:function(){this.$router.push("/v6")}}},lo={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-preview-container"},[s("div",{staticClass:"dw-preview-header"},[e._m(0),e._v(" "),s("div",{staticClass:"dw-preview-header-center"},[s("label",[s("i",{staticClass:"dw-icon-button fas fa-desktop",class:"dw-preview-pc"===e.previewTypeClass?"active":"",on:{click:function(t){return e.previewTabClick("dw-preview-pc")}}})]),e._v(" "),s("label",[s("i",{staticClass:"dw-icon-button fas fa-tablet-alt",class:"dw-preview-pad"===e.previewTypeClass?"active":"",on:{click:function(t){return e.previewTabClick("dw-preview-pad")}}})]),e._v(" "),s("label",[s("i",{staticClass:"dw-icon-button fas fa-mobile-alt",class:"dw-preview-phone"===e.previewTypeClass?"active":"",on:{click:function(t){return e.previewTabClick("dw-preview-phone")}}})])]),e._v(" "),s("div",{staticClass:"dw-preview-header-right"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.devSurvey}},[e._v("确认发布")]),e._v(" "),s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:e.saveSurvey}},[e._v("保存修改")]),e._v(" "),s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:e.designSurvey}},[e._v("返回编辑")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:e.backSurveyList}},[e._v("返回列表")])],1)]),e._v(" "),s("el-container",{staticStyle:{height:"calc(100vh)"}},[s("el-aside",{staticStyle:{width:"300px","border-right":"1px solid rgb(230 228 228)"}},[null!==e.survey?s("div",{staticClass:"dw-preview-left-aside"},[s("dw-survey-style-design-aside",{model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1):e._e()]),e._v(" "),s("el-container",{staticStyle:{flex:"auto"}},[s("div",{staticStyle:{width:"100%"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"dw-preview-pc"===e.previewTypeClass,expression:"previewTypeClass === 'dw-preview-pc'"}],staticClass:"dw-preview-main"},[s("div",{staticClass:"dw-preview-answer-survey-container"},[s("div",{staticClass:"dw-preview-pc"},[s("div",{staticClass:"dw-preview-body"},[s("div",[s("div",{staticClass:"dw-answer-custom-theme"},[s("dw-answer-default-layout",{attrs:{"ext-props":{isPreview:!0}},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])])])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"dw-preview-pad"===e.previewTypeClass,expression:"previewTypeClass === 'dw-preview-pad'"}],staticClass:"dw-preview-main"},[s("div",{staticClass:"dw-preview-answer-survey-container"},[s("div",{staticClass:"dw-preview-pad"},[s("div",{staticClass:"dw-preview-body"},[s("div",[s("div",{staticClass:"dw-answer-custom-theme"},[s("dw-answer-default-layout",{attrs:{"ext-props":{anBodySpan:e.padPhoneAnBodySpan,anBodyStyle:{minHeight:"630px",height:"auto"},isPreview:!0}},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])])])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"dw-preview-phone"===e.previewTypeClass,expression:"previewTypeClass === 'dw-preview-phone'"}],staticClass:"dw-preview-main"},[s("div",{staticClass:"dw-preview-answer-survey-container"},[s("div",{staticClass:"dw-preview-phone"},[s("div",{staticClass:"dw-preview-body"},[s("div",[s("div",{staticClass:"dw-answer-custom-theme"},[s("dw-answer-default-layout",{attrs:{"ext-props":{anBodySpan:e.padPhoneAnBodySpan,anBodyStyle:{minHeight:"861px",height:"auto"},isPreview:!0}},model:{value:e.survey,callback:function(t){e.survey=t},expression:"survey"}})],1)])])])])])])])],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-preview-header-left"},[t("label",[t("i",{staticClass:"dw-icon-button fa-regular fa-eye active",staticStyle:{color:"#7249ee"}}),this._v("问卷预览")])])}]};var co={name:"DwSurveyDesignContent",components:{DwPreviewSurveyMain:s("VU/8")(uo,lo,!1,function(e){s("Mkp/"),s("IzGw")},"data-v-f8f01d54",null).exports,DwDesignSurveyMain:Pr}},vo={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-preview-survey-main")],1)},staticRenderFns:[]};var po=s("VU/8")(co,vo,!1,function(e){s("JQHi")},"data-v-7278a29a",null).exports;var mo={name:"DwSurveyAnswerReview",components:{DwAnswerSurvey:ro,DwAnswerSurveyMain:so},props:{dwEsSurveyAnswer:{type:Object,default:function(){}}},data:function(){return{thDwEsSurveyAnswer:null,padPhoneAnBodySpan:{xs:{span:24,offset:0},sm:{span:24,offset:0},md:{span:24,offset:0},lg:{span:24,offset:0},xl:{span:24,offset:0}},answerProps:{sid:null,answerId:null,anPwd:""}}},mounted:function(){this.$route.params.hasOwnProperty("sid")&&this.$route.params.hasOwnProperty("answerId")?(this.answerProps.sid=this.$route.params.sid,this.answerProps.answerId=this.$route.params.answerId):null!==this.dwEsSurveyAnswer&&(this.answerProps.sid=this.dwEsSurveyAnswer.answerCommon.surveyId,this.answerProps.answerId=this.dwEsSurveyAnswer.esId)},methods:{}},yo={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"answerReviewRoot"},[s("el-row",[s("el-col",[s("div",{staticStyle:{"background-color":"#dfdfe0"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.dwEsSurveyAnswer,expression:"dwEsSurveyAnswer!==null"}],staticStyle:{padding:"10px"}},[s("el-descriptions",{attrs:{column:2,title:"答卷基本信息",border:""}},[s("template",{slot:"extra"}),e._v(" "),s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-key"}),e._v("  ID")]),e._v("\n              "+e._s(e.dwEsSurveyAnswer.esId)+"\n            ")],2),e._v(" "),s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-user"}),e._v("  用户")]),e._v("\n              "+e._s(e.dwEsSurveyAnswer.answerCommon.anUser.userName)+"\n            ")],2),e._v(" "),s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-date"}),e._v("  时间")]),e._v("\n              "+e._s(e.dwEsSurveyAnswer.answerCommon.anTime.endAnDate)+"\n            ")],2),e._v(" "),s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-place"}),e._v("  IP\n              ")]),e._v("\n              "+e._s(e.dwEsSurveyAnswer.answerCommon.anIp.ip)+"\n            ")],2),e._v(" "),s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-office-building"}),e._v("  IP地址\n              ")]),e._v("\n              "+e._s(e.dwEsSurveyAnswer.answerCommon.anIp.addr)+"\n            ")],2)],2)],1),e._v(" "),s("div",{staticStyle:{"margin-top":"0"}},[s("dw-answer-survey",{attrs:{"answer-props":e.answerProps,"ext-props":{anBodySpan:e.padPhoneAnBodySpan,anBodyStyle:{minHeight:"630px",height:"auto"},isPreview:!0,readonly:!0}}})],1)])])],1)],1)},staticRenderFns:[]};var fo=s("VU/8")(mo,yo,!1,function(e){s("n9Cl")},"data-v-176d987e",null).exports,ho={name:"DwSurveyAnswerInfoDialog",components:{DwSurveyAnswerReview:fo},data:function(){return{dialogFormVisible:!1,row:null}},methods:{openDialog:function(e){this.dialogFormVisible=!0,this.row=e,console.debug("row",e)}}},wo={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{staticClass:"dialogRoot",attrs:{visible:e.dialogFormVisible,"append-to-body":"",title:"答卷数据",width:"60%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("div",{staticStyle:{padding:"0 20px"},attrs:{slot:"default"},slot:"default"},[null!==e.row?s("div",{staticStyle:{height:"600px",overflow:"scroll"}},[s("dw-survey-answer-review",{attrs:{"dw-es-survey-answer":e.row}})],1):e._e()]),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("关 闭")])],1)])],1)},staticRenderFns:[]};var go={name:"DwSurveyAnswerDataList",components:{DwSurveyAnswerInfoDialog:s("VU/8")(ho,wo,!1,function(e){s("Lc1T")},"data-v-67876ee1",null).exports},data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,dialogFormVisible:!1,expUpQu:0,formInline:{ip:null,city:null,anTime:null}}},mounted:function(){this.queryList(1)},methods:{secondsToHms:function(e){var t=Math.floor(e/3600),s=Math.floor(e%3600/60),n=e%60;return t>0?(t<10?"0"+t:t)+" 时 "+(s<10?"0"+s:s)+" 分 "+(n<10?"0"+n:n)+" 秒":s>0?(s<10?"0"+s:s)+" 分 "+(n<10?"0"+n:n)+" 秒":(n<10?"0"+n:n)+" 秒"},handleGo:function(e){this.$router.push(e)},handlePush:function(e){this.$router.push(e)},handleDelete:function(e,t){var s=this;console.log(e,t),this.$msgbox.confirm("确认删除此条答卷吗？","删除警告",{type:"warning",confirmButtonText:"确认删除"}).then(function(){Z({id:[t.id]}).then(function(e){console.log(e),200===e.data.resultCode?(s.$message.success("删除成功，即将刷新数据。"),s.queryList(1)):s.$message.error("删除答卷失败")})}).catch(function(){})},handleCurrentChange:function(e){this.queryList(e)},handleExport:function(){this.dialogFormVisible=!0},executeExportData:function(){var e="http://192.168.3.32:8080"+API.surveyAnswerExport+"?surveyId="+this.$route.params.id+"&expUpQu="+this.expUpQu;this.dialogFormVisible=!1,window.location.href=e},queryList:function(e){var t=this;this.currentPage=e;(e-1)*this.pageSize>=1e4&&(this.$message({message:"提示：一次查询只展示前1万条数据，如果要查看更多可以修改查询条件，请缩小查询范围！",type:"warning",duration:1e4}),this.currentPage=1e4/this.pageSize-1),console.debug("anTime:",this.formInline.anTime),console.debug("anIp:",this.formInline.ip),console.debug("anCity:",this.formInline.city);var s={bgAnDate:null,endAnDate:null},n=this.formInline.anTime;null!==n&&(s.bgAnDate=n[0],s.endAnDate=n[1]),function(e){return x({url:"/api/dwsurvey/app/v6/dw-answer-data-survey/list.do",method:"get",params:e})}({surveyId:this.$route.params.id,pageNo:this.currentPage,bgAnDate:s.bgAnDate,endAnDate:s.endAnDate,ip:this.formInline.ip,city:this.formInline.city}).then(function(e){var s=e.data;t.pageSize=s.pageSize,t.currentPage=s.pageNo,t.total=s.totalItems,t.tableData=s.result,console.debug("dwSurveyAnswerListV6",e)})},resetSearch:function(){this.formInline={ip:null,city:null,anTime:null},this.queryList(1)},answerView:function(e){this.$refs.dwAnswerInfoDialog.openDialog(e)}}},xo={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"dw-dcs-main-title"},[s("div",{staticStyle:{padding:"5px 10px"}},[s("el-row",{attrs:{type:"flex"}},[s("el-col",{attrs:{span:18}},[s("div",{staticStyle:{"font-size":"14px"}},[s("strong",[e._v("原始数据列表")])])]),e._v(" "),s("el-col",{staticStyle:{"text-align":"right","padding-right":"16px"},attrs:{span:6}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleExport}},[e._v("导出数据")])],1)],1)],1),e._v(" "),s("div",{staticStyle:{padding:"5px 10px"}},[s("el-form",{staticClass:"dw-form-inline",attrs:{inline:!0,model:e.formInline,"label-width":"50px",size:"medium"}},[s("el-form-item",{attrs:{label:"时间"}},[s("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.formInline.anTime,callback:function(t){e.$set(e.formInline,"anTime",t)},expression:"formInline.anTime"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"IP"}},[s("el-input",{attrs:{placeholder:"请输入查询的问卷标题",clearable:""},model:{value:e.formInline.ip,callback:function(t){e.$set(e.formInline,"ip",t)},expression:"formInline.ip"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"城市"}},[s("el-input",{attrs:{placeholder:"请输入查询的问卷标题",clearable:""},model:{value:e.formInline.city,callback:function(t){e.$set(e.formInline,"city",t)},expression:"formInline.city"}})],1),e._v(" "),s("el-form-item",[s("el-button",{staticStyle:{"margin-left":"20px"},on:{click:e.resetSearch}},[e._v("重置")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.queryList(1)}}},[e._v("查询")])],1)],1)],1)]),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[s("el-table-column",{attrs:{type:"selection",width:"45"}}),e._v(" "),s("el-table-column",{attrs:{label:"序号",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[e._v(e._s(e.pageSize*(e.currentPage-1)+t.$index+1))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"答卷IP",prop:"answerCommon.anIp.ip"}}),e._v(" "),s("el-table-column",{attrs:{label:"答卷地区",prop:"answerCommon.anIp.city"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[e._v(e._s(null!=t.row.answerCommon.anIp.city?t.row.answerCommon.anIp.city:"-"))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"回答时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[e._v(e._s(t.row.answerCommon.anTime.endAnDate))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"回答用时"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[e._v(e._s(null!=t.row.answerCommon.anTime.totalTime?e.secondsToHms(Math.floor(t.row.answerCommon.anTime.totalTime/1e3)):0))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"回答题数"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[e._v(e._s(null!=t.row.answerCommon.anState.anQuNum?t.row.answerCommon.anState.anQuNum:0)+" 题")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button-group",[s("el-tooltip",{attrs:{effect:"dark",content:"查看数据",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-view"},on:{click:function(s){return e.answerView(t.row)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"删除数据",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})],1)],1)]}}])})],1),e._v(" "),s("div",{staticClass:"dw-pagination"},[s("el-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.total,background:"",layout:"total, prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogFormVisible,"append-to-body":"",title:"导出答卷数据",width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("div",{staticStyle:{"line-height":"30px"}},[e._v("是否同时下载上传题的文件")]),e._v(" "),s("div",{staticStyle:{color:"grey","line-height":"30px","font-size":"12px"}},[s("span",[e._v("如果有上传题，选择压缩下载可能比较占用系统资源及时间，请在空闲时间压缩下载")])]),e._v(" "),s("el-switch",{attrs:{"active-text":"同时压缩上传的文件并下载","inactive-text":"仅下载数据Excel","active-value":"1","inactive-value":"0"},model:{value:e.expUpQu,callback:function(t){e.expUpQu=t},expression:"expUpQu"}}),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.executeExportData}},[e._v("确 定")])],1)],1),e._v(" "),s("dw-survey-answer-info-dialog",{ref:"dwAnswerInfoDialog",on:{"refresh-data":function(t){return e.queryList(null)}}})],1)},staticRenderFns:[]};var bo={name:"DwSurveyAnswerDataListV6",components:{DwSurveyAnswerDataList:s("VU/8")(go,xo,!1,function(e){s("3q7h")},"data-v-10a5b6e0",null).exports,DwSurveyDcsWrapper:ie},data:function(){return{}},mounted:function(){},methods:{}},qo={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-survey-dcs-wrapper",{attrs:{"is-answer-data":!0},scopedSlots:this._u([{key:"dw-dcs-main-slot",fn:function(e){return e.survey,[t("div",[t("dw-survey-answer-data-list")],1)]}}])})],1)},staticRenderFns:[]};var Co=s("VU/8")(bo,qo,!1,function(e){s("B5WO")},"data-v-1435309f",null).exports,_o={name:"DwAnswerUrlV6",components:{DwSurveyDcsWrapper:ie,Clipboard:le.a},props:{survey:{type:Object,default:function(){}}},methods:{downloadAnswerImg:function(e){console.debug(e),window.location.href=e},copyActiveCode:function(e,t){var s=this;console.debug(this.survey);var n=new le.a(e.target,{text:function(){return t}});n.on("success",function(e){s.$message({type:"success",message:"复制成功"}),n.off("error"),n.off("success"),n.destroy()}),n.on("error",function(e){s.$message({type:"warning",message:"该浏览器不支持自动复制"}),n.off("error"),n.off("success"),n.destroy()}),n.onClick(e)}}},Ao={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-survey-dcs-wrapper",{attrs:{"is-answer-url-v6":!0},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){var n=t.survey;return[s("div",[s("div",[s("div",{staticClass:"dw-dcs-main-title"},[s("h4",[e._v("答卷地址")]),e._v(" "),s("div",{staticClass:"dw-dcs-main-p"},[e._v("复制下面的问卷链接到QQ，Email等工具中直接发给被用户")])]),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[s("div",{staticClass:"dw-dcs-main-title"},[s("div",{staticClass:"dw-dcs-main-p"},[e._v("V6新版答卷地址")])]),e._v(" "),s("el-input",{staticStyle:{width:"500px"},attrs:{id:"copyCodeInput",readonly:""},model:{value:n.answerUrlV6,callback:function(t){e.$set(n,"answerUrlV6",t)},expression:"survey.answerUrlV6"}}),e._v(" "),s("el-button-group",[s("el-button",{attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,n.answerUrlV6)}}},[e._v("复制地址")]),e._v(" "),s("el-link",{attrs:{href:n.answerUrlV6,underline:!1,target:"_blank"}},[s("el-button",{staticStyle:{"border-bottom-left-radius":"0px","border-top-left-radius":"0px"},attrs:{icon:"el-icon-link"}},[e._v("打开问卷")])],1)],1)],1)]),e._v(" "),s("div",[s("div",{staticClass:"dw-dcs-main-title"},[s("h4",[e._v("二维码地址")]),e._v(" "),s("div",{staticClass:"dw-dcs-main-p"},[e._v("通过手机扫一扫，或下载二维码，即可进行问卷数据收集。")])]),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[s("el-row",{attrs:{type:"flex",justify:"start",align:"middle"}},[s("el-col",{attrs:{span:4}},[s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:n.answerUrlQR}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.downloadAnswerImg(n.answerUrlQR+"&down=1")}}},[e._v("下载二维码")])],1)],1)],1)])])]}}])})],1)},staticRenderFns:[]};var So=s("VU/8")(_o,Ao,!1,function(e){s("dEsM")},"data-v-528fc9f4",null).exports,ko={name:"DwAnswerSurveyV6",components:{DwAnswerSurvey:ro,DwAnswerSurveyMain:so},data:function(){return{answerProps:{sid:null,answerId:null,anPwd:""}}},mounted:function(){console.debug("first sid",this.$route.params.sid),console.debug("first answerId",this.$route.params.answerId),this.answerProps.sid=this.$route.params.sid,this.answerProps.answerId=this.$route.params.answerId}},To={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-row",[t("el-col",[t("dw-answer-survey",{attrs:{"answer-props":this.answerProps}})],1)],1)},staticRenderFns:[]};var Io=s("VU/8")(ko,To,!1,function(e){s("jn0U")},"data-v-b698c920",null).exports,Oo={name:"DwSurveyListV6",data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,dialogTitle:"创建问卷",formInline:{surveyName:null,surveyState:null},dialogFormVisible:!1,form:{name:"",id:null},formLabelWidth:"120px"}},mounted:function(){this.queryList(1)},methods:{buttonClickA:function(e){window.location.href=e},handlePush:function(e){this.$router.push(e)},handleCopy:function(e,t){console.log(e,t),this.form.id=t.id,void 0!==t.surveyNameText&&null!==t.surveyNameText?this.form.name=""+t.surveyNameText:this.form.name="复制问卷标题",this.dialogFormVisible=!0,this.dialogTitle="复制问卷"},handleDelete:function(e,t){var s=this;this.$msgbox.confirm("确认删除此问卷吗？","删除警告",{type:"warning",confirmButtonText:"确认删除"}).then(function(){K({id:[t.id]}).then(function(e){console.log(e),200===e.data.resultCode?(s.$message.success("删除成功，即将刷新数据。"),s.queryList(1)):s.$message.error("删除问卷失败")})}).catch(function(){})},onSubmit:function(){console.log("submit!"),this.queryList(1)},handleCurrentChange:function(e){this.queryList(e)},queryList:function(e){var t=this,s=this.formInline,n=s.surveyName,i=s.surveyState;G(this.pageSize,e,n,i).then(function(e){var s=e.data.data;t.tableData=s,t.total=e.data.total,t.currentPage=e.data.current,t.pageSize=e.data.pageSize})},handleDialogConfirm:function(){null===this.form.id?this.createSurvey():this.copySurvey(this.form.id)},createSurvey:function(){var e=this;Y({surveyName:this.form.name}).then(function(t){var s=t.data,n=s.data;200===s.resultCode?(e.dialogFormVisible=!1,e.$confirm("问卷创建成功，点击“继续编辑问卷”进入问卷编辑。","系统提示",{confirmButtonText:"继续编辑问卷"}).then(function(t){t.value;e.$router.push("/dw-v6/diaowen/dw-design/survey/"+n.id)}).catch(function(){e.queryList(1)})):e.$message.error("创建问卷失败")})},copySurvey:function(e){var t=this;J(e,this.form.name).then(function(e){var s=e.data,n=s.data;200===s.resultCode?(t.dialogFormVisible=!1,t.$confirm("问卷复制成功，点击“继续编辑问卷”进入问卷编辑。","系统提示",{confirmButtonText:"继续编辑问卷"}).then(function(e){e.value;t.$router.push("/dw-v6/diaowen/dw-design/survey/"+n.id)}).catch(function(){t.queryList(1)})):t.$message.error("问卷复制失败")})}}},Do={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"dw-table-form",staticStyle:{"padding-left":"60px"}},[s("el-form",{staticClass:"dw-form-inline",attrs:{inline:!0,model:e.formInline,size:"medium"}},[s("el-form-item",{attrs:{label:"问卷标题"}},[s("el-input",{attrs:{placeholder:"请输入查询的问卷标题",clearable:""},model:{value:e.formInline.surveyName,callback:function(t){e.$set(e.formInline,"surveyName",t)},expression:"formInline.surveyName"}})],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"40px"},attrs:{label:"问卷状态"}},[s("el-select",{attrs:{placeholder:"请选择问卷状态",clearable:""},model:{value:e.formInline.surveyState,callback:function(t){e.$set(e.formInline,"surveyState",t)},expression:"formInline.surveyState"}},[s("el-option",{attrs:{label:"设计中",value:"0"}}),e._v(" "),s("el-option",{attrs:{label:"收集中",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"收集结束",value:"2"}})],1)],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"40px"}},[s("el-button",{on:{click:e.onSubmit}},[e._v("重置")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),s("div",{staticClass:"dw-table"},[s("div",{staticClass:"dw-table-title"},[s("el-row",{attrs:{span:24,type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{attrs:{span:4}},[s("h3",[e._v("我的问卷")])]),e._v(" "),s("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.form.id=null,e.form.name=null,e.dialogTitle="创建问卷",e.dialogFormVisible=!0}}},[e._v("新建问卷")])],1)],1)],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{label:"问卷"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{domProps:{innerHTML:e._s(t.row.surveyName)}}),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[null!=t.row.surveyNameText?s("div",{domProps:{textContent:e._s(t.row.surveyNameText)}}):s("div",{domProps:{innerHTML:e._s(t.row.surveyName)}})])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"答卷数",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(null!=t.row.answerNum?t.row.answerNum:0)+" 份")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.surveyState?s("el-tag",[e._v("设计中")]):1===t.row.surveyState?s("el-tag",{attrs:{type:"success"}},[e._v("收集中")]):2===t.row.surveyState?s("el-tag",{attrs:{type:"info"}},[e._v("收集结束")]):s("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":""}},[e._v("未知")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("i",{staticClass:"el-icon-time"}),e._v(" "),s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.createDate))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button-group",[s("el-tooltip",{attrs:{effect:"dark",content:"编辑问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",content:"编辑问卷",icon:"el-icon-edit"},on:{click:function(s){return e.handlePush("/dw-v6/diaowen/dw-design/survey/"+t.row.id)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"答卷地址",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-share"},on:{click:function(s){return e.handlePush("/v6/dw/survey/c/url/"+t.row.id)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"答卷数据",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-s-data"},on:{click:function(s){return e.handlePush("/v6/dw/survey/d/chart/"+t.row.id)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"预览问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-view"},on:{click:function(s){return e.handlePush("/dw-v6/diaowen/dw-preview/survey/"+t.row.id)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"复制问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-copy-document"},on:{click:function(s){return e.handleCopy(t.$index,t.row)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"删除问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})],1)],1)]}}])})],1),e._v(" "),s("div",{staticClass:"dw-pagination"},[s("el-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.total,background:"",layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)],1)])],1),e._v(" "),s("div",[s("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{attrs:{model:e.form,"label-position":"top"}},[s("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"问卷标题"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"请输入问卷标题"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogConfirm}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var Eo=s("VU/8")(Oo,Do,!1,function(e){s("TnL9")},"data-v-50a1ebe0",null).exports;_e.b([Ae.a,Se.b,Se.a,Te.a,ke.b,Ae.c,Ae.d,Ae.b,Se.c,ke.a]);var Po={name:"DwSurveyChartsCommon",props:{question:{type:Object,default:function(){return[]}},index:{type:Number,default:0}},data:function(){return{activeName:"bar"}},mounted:function(){console.debug("this.question"),console.debug(this.question);var e=this.$refs.dwsChart_bar;e&&this.loadChart(e,"bar")},methods:{handleClick:function(e,t){console.log(e,t),console.debug(this.activeName),e.$el.style.display="block";var s=e.$el.getElementsByClassName("dwsurveyMain"),n=this.activeName;this.loadChart(s[0],n)},loadChart:function(e,t){var s=_e.a(e),n=this.buildOption(this.question,t);n&&s.setOption(n)},buildOption:function(e,t){for(var s=[],n=[],i=[],r=e.quStatOptions,o=0;o<r.length;o++)s.push(r[o].optionName),n.push(r[o].anCount),i.push({value:r[o].anCount,name:r[o].optionName});console.debug(s);var a=!0;"ORDERQU"===e.quType&&(a=!1);var u=void 0;return"line"===t||"bar"===t?u={xAxis:{nameTextStyle:{},nameGap:20,axisLabel:{rotate:-10,interval:0},type:"category",data:s},yAxis:{type:"value",show:a},series:[{data:n,type:t}]}:"barY"===t?u={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01],show:a},yAxis:{type:"category",data:s},series:[{type:"bar",data:n}]}:"pie"===t&&(u={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"Access From",type:"pie",radius:"50%",data:i,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}),u}}},Ro={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{width:"100%"}},[s("div",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[s("span",[e._v(e._s(e.index+1)+"、")]),e._v(" "),s("span",{domProps:{innerHTML:e._s(e.question.quTitle)}}),e._v(" "),s("span",[e._v("【"+e._s(e.question.quTypeName)+"】")])]),e._v(" "),"FILLBLANK"===e.question.quType||"UPLOADFILE"===e.question.quType?s("div",{staticStyle:{padding:"30px"}},[e._v("\n    填写回答："+e._s(e.question.anCount)+" 份\n  ")]):e._e(),e._v(" "),"FILLBLANK"!==e.question.quType&&"UPLOADFILE"!==e.question.quType?s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.question.quStatOptions}},[s("el-table-column",{attrs:{prop:"optionName",label:"题目选项"}}),e._v(" "),s("el-table-column",{attrs:{label:"SCORE"===e.question.quType?"占总分比例":"ORDERQU"===e.question.quType?"排名占总名次比":"MULTIFILLBLANK"===e.question.quType?"填写比例":"频次比例",width:"330"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:parseFloat(e.row.percent)}})]}}],null,!1,4151990742)}),e._v(" "),"RADIO"===e.question.quType||"CHECKBOX"===e.question.quType?s("el-table-column",{attrs:{label:"频次",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.anCount)+" 次")]}}],null,!1,2232316475)}):e._e(),e._v(" "),"SCORE"===e.question.quType?s("el-table-column",{attrs:{label:"平均分",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("平均 "+e._s(t.row.anCount)+" 分")]}}],null,!1,3397111011)}):e._e(),e._v(" "),"ORDERQU"===e.question.quType?s("el-table-column",{attrs:{label:"名次平均值",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.avgOrder)+" 名")]}}],null,!1,2431138661)}):e._e(),e._v(" "),"MULTIFILLBLANK"===e.question.quType?s("el-table-column",{attrs:{label:"填写次数",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.anCount)+" 次")]}}],null,!1,2232316475)}):e._e()],1),e._v(" "),s("div",[s("el-tabs",{staticStyle:{width:"100%"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"柱状图",name:"bar"}},[s("div",{ref:"dwsChart_bar",staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),s("el-tab-pane",{attrs:{label:"拆线图",name:"line"}},[s("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),s("el-tab-pane",{attrs:{label:"拼状图",name:"pie"}},[s("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),s("el-tab-pane",{attrs:{label:"条形图",name:"barY"}},[s("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})])],1)],1)],1):e._e()])},staticRenderFns:[]};var No={name:"DwSurveyAnswerCharts",components:{DwSurveyChartsCommon:s("VU/8")(Po,Ro,!1,function(e){s("2Wz4")},"data-v-0fec1b38",null).exports},data:function(){return{survey:null,surveyAggStats:null,questions:[],loading:!0}},mounted:function(){this.surveyState()},methods:{surveyState:function(){var e=this,t={surveyId:this.$route.params.id};ys(t,function(s){console.debug("design survey",s),e.survey=s,function(e){return x({url:"/api/dwsurvey/app/v6/dw-answer-data-survey/survey-stats.do",method:"get",params:e})}(t).then(function(t){console.debug("response",t);var s=t.data;e.surveyAggStats=s.data;var n=e.surveyAggStats,i=e.survey.questions;console.debug("questions",i),i.map(function(e,t){var s=0;console.debug("question",e);var i=e.quType;if("RADIO"===i)e.quRadios.map(function(e,t){if(n.hasOwnProperty("countRadio")){var i=n.countRadio;for(var r in i)if(i.hasOwnProperty(r)){var o=i[r].docCount;if(e.dwId===r){e.anCount=o,s+=e.anCount;break}}}});else if("CHECKBOX"===i){e.quCheckboxs.map(function(e,t){if(n.hasOwnProperty("countCheckbox")){var i=n.countCheckbox;for(var r in i)if(i.hasOwnProperty(r)){var o=i[r].docCount;if(e.dwId===r){e.anCount=o,s+=e.anCount;break}}}})}else if("SCORE"===i){e.quScores.map(function(e,t){if(n.hasOwnProperty("optionStats")){var s=n.optionStats;for(var i in s)if(s.hasOwnProperty(i)){var r=s[i].statsAvg;if(console.debug("value",r),e.dwId===i){console.debug("option.dwId",e.dwId,i),e.avgScore=r;break}}}})}else if("ORDERQU"===i){e.quOrderbys.map(function(e,t){if(n.hasOwnProperty("optionStats")){var s=n.optionStats;for(var i in s)if(s.hasOwnProperty(i)){var r=s[i].statsAvg;if(e.dwId===i){console.debug("option.avgOrder",r),e.avgOrder=r;break}}}})}if(n.hasOwnProperty("countQu")){var r=n.countQu;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o].docCount;if(e.dwId===o){s=a;break}}}e.anCount=s}),e.anCountStats(i),e.loading=!1})})},anCountStats:function(e){for(var t=0;t<e.length;t++){var s=e[t],n=s.anCount,i=void 0;"CHECKBOX"===s.quType?(s.quTypeName="多选题",i=s.quCheckboxs):"RADIO"===s.quType?(s.quTypeName="单选题",i=s.quRadios):"FILLBLANK"===s.quType?s.quTypeName="填空题":"SCORE"===s.quType?(s.quTypeName="评分题",i=s.quScores):"ORDERQU"===s.quType?(s.quTypeName="排序题",i=s.quOrderbys):"MULTIFILLBLANK"===s.quType?(s.quTypeName="多项填空题",i=s.quMultiFillblanks):s.quTypeName=s.quType;var r=[];if("RADIO"===s.quType||"CHECKBOX"===s.quType||"SCORE"===s.quType||"ORDERQU"===s.quType||"MULTIFILLBLANK"===s.quType)for(var o=0;o<i.length;o++){var a=i[o],u=void 0;if("RADIO"===s.quType||"CHECKBOX"===s.quType){var l=a.anCount;0===n&&(n=1),null!==l&&void 0!==l||(i[o].anCount=0);var d=(a.anCount/n*100).toFixed(2);i[o].percent=d,u={optionName:a.optionTitleObj.dwText,anCount:a.anCount,percent:d}}else if("SCORE"===s.quType){var c=a.avgScore,v=(c/s.paramInt02*100).toFixed(2),p=c.toFixed(2);u={optionName:a.optionTitleObj.dwText,anCount:p,percent:v}}else if("ORDERQU"===s.quType){var m=a.avgOrder,y=((i.length-m)/i.length*100).toFixed(2),f=m.toFixed(2);u={optionName:a.optionTitleObj.dwText,anCount:i.length-m,orderNum:null,percent:y,avgOrder:f}}else if("MULTIFILLBLANK"===s.quType){var h=a.anCount;0===n&&(n=1),null!==h&&void 0!==h||(i[o].anCount=0);var w=(a.anCount/n*100).toFixed(2);i[o].percent=w,u={optionName:a.optionTitleObj.dwText,anCount:a.anCount,percent:w}}r.push(u)}e[t].quStatOptions=r}this.questions=e}}},Lo={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}]},this._l(this.questions,function(e,s){return t("dw-survey-charts-common",{key:e.id,attrs:{id:e.id,index:s,question:e}})}),1)])},staticRenderFns:[]};var Fo={name:"DwSurveyChartsV6",components:{DwSurveyAnswerCharts:s("VU/8")(No,Lo,!1,function(e){s("iePA")},"data-v-0045a034",null).exports,DwSurveyDcsWrapper:ie},data:function(){return{questions:[],loading:!0}},mounted:function(){},methods:{}},Qo={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-survey-dcs-wrapper",{attrs:{"is-survey-chart":!0},scopedSlots:this._u([{key:"dw-dcs-main-slot",fn:function(e){return e.survey,[t("dw-survey-answer-charts")]}}])})],1)},staticRenderFns:[]},Uo=s("VU/8")(Fo,Qo,!1,null,null,null).exports,Bo={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{height:"100vh"}},[t("el-row",[t("el-col",[t("div",{staticStyle:{"font-size":"18px","text-align":"center",padding:"30px"}},[this._v("加载中...")])])],1)],1)},staticRenderFns:[]};var jo=s("VU/8")({name:"DwAnswerSurveyV6",data:function(){return{answerProps:{sid:null,answerId:null,anPwd:""}}},mounted:function(){this.autoPush()},methods:{autoPush:function(){var e=this.$route.params.sid;this.$route.params.answerId,this.$router.push("/dw-v6/diaowen/"+e)}}},Bo,!1,function(e){s("DwSS")},"data-v-f30f157a",null).exports;n.default.use(R.a);var Mo=new R.a({routes:[{path:"/",meta:"首页",component:F,children:[{path:"/",redirect:"/v6"},{path:"/dw/survey",name:"DwSurveyList",component:te},{path:"/dw/survey/c/attr/:id",name:"DwSurveyAttr",component:ae},{path:"/dw/survey/c/url/:id",name:"DwAnswerUrl",component:me},{path:"/dw/survey/c/comp/:id",name:"DwSiteComp",component:he},{path:"/dw/survey/c/share/:id",name:"DwSiteShare",component:xe},{path:"/dw/survey/c/weixin/:id",name:"DwAnswerWeixin",component:Ce},{path:"/dw/survey/d/chart/:id",name:"DwSurveyCharts",component:Pe},{path:"/dw/survey/d/data/:id",name:"DwSurveyAnswer",component:Le},{path:"/dw/user/pwd",name:"DwUserPwd",component:Je},{path:"/dw/user",name:"DwUser",component:ze},{path:"/dw/admin/user",name:"AdminUserList",component:Ze},{path:"/dw/survey/d/data/v6/:id",name:"DwSurveyAnswerDataListV6",component:Co},{path:"/dw/survey/c/url/v6/:id",name:"DwAnswerUrlV6",component:So}]},{path:"/diaowen/:sid",name:"DwAnswer",component:z},{path:"/no-top",name:"NoTopLayout",component:$,children:[{path:"/no-top/dw-survey/d/data/:id/:answerId",name:"DwSurveyAnswerInfo",component:je}]},{path:"/v6",meta:"首页",component:F,children:[{path:"",redirect:"dw/survey"},{path:"dw/survey",name:"DwSurveyListV6",component:Eo},{path:"dw/survey/c/attr/:id",name:"DwSurveyAttr",component:ae},{path:"dw/survey/c/url/:id",name:"DwAnswerUrlV6",component:So},{path:"dw/survey/c/comp/:id",name:"DwSiteComp",component:he},{path:"dw/survey/c/share/:id",name:"DwSiteShare",component:xe},{path:"dw/survey/c/weixin/:id",name:"DwAnswerWeixin",component:Ce},{path:"dw/survey/d/chart/:id",name:"DwSurveyChartsV6",component:Uo},{path:"dw/survey/d/data/:id",name:"DwSurveyAnswerDataListV6",component:Co},{path:"dw/user/pwd",name:"DwUserPwd",component:Je},{path:"/dw/user",name:"DwUser",component:ze},{path:"/dw/admin/user",name:"AdminUserList",component:Ze}]},{path:"/dw-v6",name:"NoTopLayout",component:$,children:[{path:"diaowen/dw-design/survey/:id",name:"DwSurveyDesignContent",component:Lr},{path:"diaowen/dw-design/survey1",name:"DwDesign",component:Et},{path:"diaowen/dw-preview/survey/:id",name:"DwSurveyPreview",component:po},{path:"diaowen/:sid",name:"DwAnswerSurveyV6",component:Io},{path:"diaowen/m/:sid",name:"DwAnswerSurveyV6",component:jo},{path:"diaowen/:sid/:answerId",name:"DwAnswerSurveyV6",component:Io},{path:"diaowen/review/:sid/:answerId",name:"DwSurveyAnswerReview",component:fo}]},{path:"/login",name:"LoginLayout",component:B,children:[{path:"/",name:"Login",component:tt}]}]}),$o=s("aLYK"),Ho=(s("tvR6"),s("uMhA"),s("D/PP"),s("eonX"));n.default.directive("hasDwRole",{inserted:function(e,t){!function(e,t){(function(e){for(var t=l.getAuthority(),s=0;s<t.length;s++)if(e===t[s])return!0;return!1})(t.value)||e.parentNode.removeChild(e)}(e,t)}});s("ao2D"),s("6w6P"),s("yuO/"),s("H1cr");var Vo=s("oPmM"),zo=s.n(Vo);n.default.config.productionTip=!1,n.default.use(y.a),n.default.use($o.a,p.a),n.default.component("icon",Ho.a),n.default.use(zo.a),new n.default({el:"#app",router:Mo,components:{App:P},template:"<App/>"})},NWAF:function(e,t){},NY6L:function(e,t){},Ncat:function(e,t){},O6RM:function(e,t){},ODBu:function(e,t){},ORmu:function(e,t){},PH9Y:function(e,t){},R4Iz:function(e,t){},RQbm:function(e,t){},Re9C:function(e,t){},"Ry/m":function(e,t){},SLB9:function(e,t){},SYBE:function(e,t){},SiX5:function(e,t){},Sldd:function(e,t){},"SvO/":function(e,t){},TnL9:function(e,t){},Tp1i:function(e,t){},UKxP:function(e,t){},UTC3:function(e,t){},UYPE:function(e,t){},X9ig:function(e,t){},YAJd:function(e,t){},YCYl:function(e,t){},YJxA:function(e,t){},Yvp6:function(e,t){},"Z+Xa":function(e,t){},ZTgU:function(e,t){},ZwDe:function(e,t){},aMUv:function(e,t){},ao2D:function(e,t){},bpMo:function(e,t){},"ctD/":function(e,t){},dEsM:function(e,t){},dZOR:function(e,t){},dduY:function(e,t){},eZVF:function(e,t){},eblm:function(e,t){},f6Xx:function(e,t){},fm5u:function(e,t){},gZtq:function(e,t){},gaH1:function(e,t){},hKPv:function(e,t){},hutW:function(e,t){},iQQW:function(e,t){},iePA:function(e,t){},jn0U:function(e,t){},kYXk:function(e,t){},kqkH:function(e,t){},mCYP:function(e,t){},n9Cl:function(e,t){},nCbi:function(e,t){},nIrY:function(e,t){},nS1t:function(e,t){},nSwW:function(e,t){},"no+S":function(e,t){},"o1+u":function(e,t){},oPmM:function(e,t){},oXSW:function(e,t){},okw5:function(e,t){},ovsz:function(e,t){},pPbJ:function(e,t){},pjAq:function(e,t){},ps2d:function(e,t){},q84n:function(e,t){},qjs6:function(e,t){},qz4o:function(e,t){},rsp2:function(e,t){},sFek:function(e,t){},spoi:function(e,t){},tYYF:function(e,t){},ttGi:function(e,t){},tvR6:function(e,t){},uMhA:function(e,t){},uUGI:function(e,t){},uhve:function(e,t){},vsL9:function(e,t){},"w+jQ":function(e,t){},wZ0C:function(e,t){},wjvJ:function(e,t){},yC3Y:function(e,t){},yTS3:function(e,t){},"yuO/":function(e,t){},zcA3:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b4dca3333babd312c6ee.js.map